{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/raphaeladoamaralgil/Desktop/HappyCase/TheHappy/TheHappyCase/src/utils/mockPaymentAPI.js"],"sourcesContent":["// Mock API for payment processing\n// In a real application, this would be a backend server endpoint\n\n/**\n * STRIPE PAYMENT INTENT - REQUIRED INFORMATION\n * \n * To create a Stripe Payment Intent, you need:\n * \n * REQUIRED FIELDS:\n * 1. amount (number) - Amount in smallest currency unit (e.g., pence for GBP, cents for USD)\n *    Example: £10.50 = 1050 (for GBP)\n * \n * 2. currency (string) - Three-letter ISO currency code (lowercase)\n *    Examples: 'gbp', 'usd', 'eur', 'cad', 'aud'\n * \n * OPTIONAL BUT RECOMMENDED FIELDS:\n * 3. metadata (object) - Additional data stored with the payment intent\n *    - items: Array of cart items\n *    - customerInfo: Customer details\n *    - orderId: Your internal order ID\n * \n * 4. description (string) - Description of the payment (shown to customer)\n * \n * 5. receipt_email (string) - Email to send receipt to\n * \n * 6. shipping (object) - Shipping address (if applicable)\n *    {\n *      name: string,\n *      address: {\n *        line1: string,\n *        line2: string (optional),\n *        city: string,\n *        postal_code: string,\n *        country: string (ISO 2-letter code)\n *      }\n *    }\n * \n * BACKEND IMPLEMENTATION EXAMPLE (Node.js/Express):\n * \n * const stripe = require('stripe')(process.env.STRIPE_SECRET_KEY);\n * \n * app.post('/api/create-payment-intent', async (req, res) => {\n *   try {\n *     const { amount, currency, items, customerInfo } = req.body;\n *     \n *     const paymentIntent = await stripe.paymentIntents.create({\n *       amount: amount,                    // REQUIRED: in smallest currency unit\n *       currency: currency,                 // REQUIRED: 'gbp', 'usd', etc.\n *       metadata: {                         // OPTIONAL: but recommended\n *         items: JSON.stringify(items),\n *         customerInfo: JSON.stringify(customerInfo),\n *         orderId: `order_${Date.now()}`,\n *       },\n *       description: `Order for ${items.length} item(s)`, // OPTIONAL\n *       receipt_email: customerInfo.email,  // OPTIONAL: auto-send receipt\n *       shipping: customerInfo.address ? {  // OPTIONAL: if shipping required\n *         name: customerInfo.name,\n *         address: customerInfo.address,\n *       } : undefined,\n *       automatic_payment_methods: {        // RECOMMENDED: enables multiple payment methods\n *         enabled: true,\n *       },\n *     });\n *     \n *     res.json({ \n *       client_secret: paymentIntent.client_secret,\n *       payment_intent_id: paymentIntent.id,\n *     });\n *   } catch (error) {\n *     res.status(500).json({ error: error.message });\n *   }\n * });\n */\n\nimport { getApiUrl } from './apiConfig';\n\nexport const createPaymentIntent = async (paymentData) => {\n  const { amount, currency = 'gbp', items, customerInfo } = paymentData;\n\n  if (!amount || amount <= 0) {\n    throw new Error('Amount is required and must be greater than 0');\n  }\n\n  if (!currency) {\n    throw new Error('Currency is required');\n  }\n\n  // Try to create a real Payment Intent via backend\n  try {\n    const apiUrl = getApiUrl('/api/create-payment-intent');\n    \n    const requestBody = {\n      amount,\n      currency,\n      items,\n      customerInfo,\n    };\n    \n    const response = await fetch(apiUrl, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(requestBody),\n    });\n\n    if (!response.ok) {\n      let errorBody;\n      const contentType = response.headers.get('content-type');\n      \n      try {\n        if (contentType && contentType.includes('application/json')) {\n          errorBody = await response.json();\n        } else {\n          errorBody = await response.text();\n          \n          // Try to parse as JSON if it looks like JSON\n          try {\n            const parsed = JSON.parse(errorBody);\n            errorBody = parsed;\n          } catch (e) {\n            // Not JSON, keep as text\n          }\n        }\n      } catch (parseError) {\n        errorBody = 'Unable to parse error response';\n      }\n      \n      const errorMessage = typeof errorBody === 'string' \n        ? errorBody.substring(0, 200)\n        : (errorBody?.error || errorBody?.message || JSON.stringify(errorBody)).substring(0, 200);\n      \n      throw new Error(\n        `Backend responded with ${response.status} ${response.statusText}: ${errorMessage}`\n      );\n    }\n\n    const data = await response.json();\n\n    if (!data.clientSecret) {\n      throw new Error('Backend did not return a clientSecret');\n    }\n\n    return {\n      client_secret: data.clientSecret,\n    };\n  } catch (error) {\n    // Don't fall back to mock - throw the error so the user knows something is wrong\n    throw new Error(\n      `Failed to create payment intent: ${error.message}. Please ensure your backend server is running on port 3001.`\n    );\n  }\n\n  // Removed fallback to mock - we should always use real payment intents\n  // If we reach here, something went wrong and we should show an error\n};\n\n// Mock function to simulate successful payment\nexport const confirmMockPayment = async (paymentIntentId, amount) => {\n  await new Promise(resolve => setTimeout(resolve, 1500));\n  \n  return {\n    id: paymentIntentId,\n    status: 'succeeded',\n    created: Math.floor(Date.now() / 1000),\n    amount: amount, // Use actual amount from payment data\n    currency: 'gbp',\n  };\n};\n"],"names":[],"mappings":";;;;;;AAAA,kCAAkC;AAClC,iEAAiE;AAEjE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CAqEC,GAED;;AAEO,MAAM,sBAAsB,OAAO;IACxC,MAAM,EAAE,MAAM,EAAE,WAAW,KAAK,EAAE,KAAK,EAAE,YAAY,EAAE,GAAG;IAE1D,IAAI,CAAC,UAAU,UAAU,GAAG;QAC1B,MAAM,IAAI,MAAM;IAClB;IAEA,IAAI,CAAC,UAAU;QACb,MAAM,IAAI,MAAM;IAClB;IAEA,kDAAkD;IAClD,IAAI;QACF,MAAM,SAAS,IAAA,0LAAS,EAAC;QAEzB,MAAM,cAAc;YAClB;YACA;YACA;YACA;QACF;QAEA,MAAM,WAAW,MAAM,MAAM,QAAQ;YACnC,QAAQ;YACR,SAAS;gBACP,gBAAgB;YAClB;YACA,MAAM,KAAK,SAAS,CAAC;QACvB;QAEA,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,IAAI;YACJ,MAAM,cAAc,SAAS,OAAO,CAAC,GAAG,CAAC;YAEzC,IAAI;gBACF,IAAI,eAAe,YAAY,QAAQ,CAAC,qBAAqB;oBAC3D,YAAY,MAAM,SAAS,IAAI;gBACjC,OAAO;oBACL,YAAY,MAAM,SAAS,IAAI;oBAE/B,6CAA6C;oBAC7C,IAAI;wBACF,MAAM,SAAS,KAAK,KAAK,CAAC;wBAC1B,YAAY;oBACd,EAAE,OAAO,GAAG;oBACV,yBAAyB;oBAC3B;gBACF;YACF,EAAE,OAAO,YAAY;gBACnB,YAAY;YACd;YAEA,MAAM,eAAe,OAAO,cAAc,WACtC,UAAU,SAAS,CAAC,GAAG,OACvB,CAAC,WAAW,SAAS,WAAW,WAAW,KAAK,SAAS,CAAC,UAAU,EAAE,SAAS,CAAC,GAAG;YAEvF,MAAM,IAAI,MACR,CAAC,uBAAuB,EAAE,SAAS,MAAM,CAAC,CAAC,EAAE,SAAS,UAAU,CAAC,EAAE,EAAE,cAAc;QAEvF;QAEA,MAAM,OAAO,MAAM,SAAS,IAAI;QAEhC,IAAI,CAAC,KAAK,YAAY,EAAE;YACtB,MAAM,IAAI,MAAM;QAClB;QAEA,OAAO;YACL,eAAe,KAAK,YAAY;QAClC;IACF,EAAE,OAAO,OAAO;QACd,iFAAiF;QACjF,MAAM,IAAI,MACR,CAAC,iCAAiC,EAAE,MAAM,OAAO,CAAC,4DAA4D,CAAC;IAEnH;AAEA,uEAAuE;AACvE,qEAAqE;AACvE;AAGO,MAAM,qBAAqB,OAAO,iBAAiB;IACxD,MAAM,IAAI,QAAQ,CAAA,UAAW,WAAW,SAAS;IAEjD,OAAO;QACL,IAAI;QACJ,QAAQ;QACR,SAAS,KAAK,KAAK,CAAC,KAAK,GAAG,KAAK;QACjC,QAAQ;QACR,UAAU;IACZ;AACF"}},
    {"offset": {"line": 157, "column": 0}, "map": {"version":3,"sources":["file:///Users/raphaeladoamaralgil/Desktop/HappyCase/TheHappy/TheHappyCase/src/component/InternationalNote/index.jsx"],"sourcesContent":["import React from 'react';\n\nconst InternationalNote = ({ \n  className = '', \n  showOnDesktop = false, \n  showOnMobile = false,\n  title = 'Custom Duties & Import Fees',\n  message = 'International orders may be subject to customs duties, taxes, and fees imposed by your country. These charges are the responsibility of the recipient and are not included in the order total.',\n  variant = 'yellow' // 'yellow' or 'gray'\n}) => {\n  // Determine visibility classes based on props\n  const visibilityClass = showOnDesktop && showOnMobile \n    ? '' // Show on both\n    : showOnDesktop \n    ? 'hidden lg:block' // Show only on desktop\n    : showOnMobile \n    ? 'lg:hidden' // Show only on mobile\n    : ''; // Default: show on both\n\n  // Style variants\n  const bgColor = variant === 'yellow' ? 'bg-yellow-50' : 'bg-gray-100';\n  const borderColor = variant === 'yellow' ? 'border-yellow-200' : 'border-gray-200';\n  const iconColor = variant === 'yellow' ? 'text-yellow-600' : 'text-gray-600';\n  const titleColor = variant === 'yellow' ? 'text-yellow-800' : 'text-gray-800';\n  const textColor = variant === 'yellow' ? 'text-yellow-700' : 'text-gray-500';\n\n  return (\n    <div className={`${visibilityClass} ${className}`}>\n      <div className={`${bgColor} border ${borderColor} rounded-lg p-4`}>\n        <div className=\"flex items-start gap-3\">\n          <div className={`${iconColor} text-xl flex-shrink-0`}>⚠️</div>\n          <div className=\"flex-1 font-inter\">\n            <h3 className={`text-sm font-semibold ${titleColor} mb-1`}>\n              {title}\n            </h3>\n            <p className={`text-xs ${textColor} font-light leading-relaxed font-inter`}>\n              {message}\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default InternationalNote;\n\n"],"names":[],"mappings":";;;;;AAAA;;;AAEA,MAAM,oBAAoB,CAAC,EACzB,YAAY,EAAE,EACd,gBAAgB,KAAK,EACrB,eAAe,KAAK,EACpB,QAAQ,6BAA6B,EACrC,UAAU,gMAAgM,EAC1M,UAAU,SAAS,qBAAqB;AAAtB,EACnB;IACC,8CAA8C;IAC9C,MAAM,kBAAkB,iBAAiB,eACrC,GAAG,eAAe;OAClB,gBACA,kBAAkB,uBAAuB;OACzC,eACA,YAAY,sBAAsB;OAClC,IAAI,wBAAwB;IAEhC,iBAAiB;IACjB,MAAM,UAAU,YAAY,WAAW,iBAAiB;IACxD,MAAM,cAAc,YAAY,WAAW,sBAAsB;IACjE,MAAM,YAAY,YAAY,WAAW,oBAAoB;IAC7D,MAAM,aAAa,YAAY,WAAW,oBAAoB;IAC9D,MAAM,YAAY,YAAY,WAAW,oBAAoB;IAE7D,qBACE,kSAAC;QAAI,WAAW,GAAG,gBAAgB,CAAC,EAAE,WAAW;kBAC/C,cAAA,kSAAC;YAAI,WAAW,GAAG,QAAQ,QAAQ,EAAE,YAAY,eAAe,CAAC;sBAC/D,cAAA,kSAAC;gBAAI,WAAU;;kCACb,kSAAC;wBAAI,WAAW,GAAG,UAAU,sBAAsB,CAAC;kCAAE;;;;;;kCACtD,kSAAC;wBAAI,WAAU;;0CACb,kSAAC;gCAAG,WAAW,CAAC,sBAAsB,EAAE,WAAW,KAAK,CAAC;0CACtD;;;;;;0CAEH,kSAAC;gCAAE,WAAW,CAAC,QAAQ,EAAE,UAAU,sCAAsC,CAAC;0CACvE;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOf;uCAEe"}},
    {"offset": {"line": 240, "column": 0}, "map": {"version":3,"sources":["file:///Users/raphaeladoamaralgil/Desktop/HappyCase/TheHappy/TheHappyCase/src/component/Checkout/components/CheckoutHeader.jsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport Link from 'next/link';\nimport { useCart } from '../../../context/CartContext';\n\nconst CheckoutHeader = () => {\n  const { getTotalQuantity } = useCart();\n  const totalQuantity = getTotalQuantity();\n\n  return (\n    <div className=\"border-b border-gray-200 bg-white\">\n      <div className=\"max-w-6xl mx-auto flex items-center justify-between px-4 lg:px-6 py-5\">\n        <Link href=\"/\" className=\"hover:opacity-90 transition-opacity duration-300\" aria-label=\"HappyCase home\">\n           <img src=\"/assets/logo.webp\" alt=\"The Happy Case Logo\" className=\"h-14 w-auto \" />\n        </Link>\n        <Link\n          href=\"/cart\"\n          className=\"relative flex items-center justify-center p-2 text-gray-900 hover:text-gray-700 transition-colors z-10\"\n          aria-label=\"Go to cart\"\n        >\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 640 640\"\n            className=\"w-6 h-6\"\n            fill=\"currentColor\"\n          >\n            <path d=\"M8 64C3.6 64 0 67.6 0 72C0 76.4 3.6 80 8 80L53.7 80C65.1 80 75 88.1 77.2 99.4L136.6 402.8C141.7 429.1 164.8 448 191.6 448L488 448C492.4 448 496 444.4 496 440C496 435.6 492.4 432 488 432L191.5 432C172.4 432 155.9 418.5 152.2 399.7L142.9 352L461.2 352C494.7 352 523.7 328.9 531.3 296.4L566.6 145.1C572.5 120 553.4 96 527.7 96L92.8 96C89 77.4 72.7 64 53.7 64L8 64zM96 112L527.7 112C543.2 112 554.6 126.4 551.1 141.5L515.8 292.7C509.9 318 487.3 336 461.3 336L139.8 336L96 112zM176 528C176 510.3 190.3 496 208 496C225.7 496 240 510.3 240 528C240 545.7 225.7 560 208 560C190.3 560 176 545.7 176 528zM256 528C256 501.5 234.5 480 208 480C181.5 480 160 501.5 160 528C160 554.5 181.5 576 208 576C234.5 576 256 554.5 256 528zM432 496C449.7 496 464 510.3 464 528C464 545.7 449.7 560 432 560C414.3 560 400 545.7 400 528C400 510.3 414.3 496 432 496zM432 576C458.5 576 480 554.5 480 528C480 501.5 458.5 480 432 480C405.5 480 384 501.5 384 528C384 554.5 405.5 576 432 576z\"/>\n          </svg>\n          {totalQuantity > 0 && (\n            <span className=\"absolute top-0 right-0 bg-gray-900 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-light\">\n              {totalQuantity}\n            </span>\n          )}\n        </Link>\n      </div>\n    </div>\n  );\n};\n\nexport default CheckoutHeader;\n\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAMA,MAAM,iBAAiB;IACrB,MAAM,EAAE,gBAAgB,EAAE,GAAG,IAAA,6LAAO;IACpC,MAAM,gBAAgB;IAEtB,qBACE,kSAAC;QAAI,WAAU;kBACb,cAAA,kSAAC;YAAI,WAAU;;8BACb,kSAAC,2NAAI;oBAAC,MAAK;oBAAI,WAAU;oBAAmD,cAAW;8BACpF,cAAA,kSAAC;wBAAI,KAAI;wBAAoB,KAAI;wBAAsB,WAAU;;;;;;;;;;;8BAEpE,kSAAC,2NAAI;oBACH,MAAK;oBACL,WAAU;oBACV,cAAW;;sCAEX,kSAAC;4BACC,OAAM;4BACN,SAAQ;4BACR,WAAU;4BACV,MAAK;sCAEL,cAAA,kSAAC;gCAAK,GAAE;;;;;;;;;;;wBAET,gBAAgB,mBACf,kSAAC;4BAAK,WAAU;sCACb;;;;;;;;;;;;;;;;;;;;;;;AAOf;uCAEe"}},
    {"offset": {"line": 332, "column": 0}, "map": {"version":3,"sources":["file:///Users/raphaeladoamaralgil/Desktop/HappyCase/TheHappy/TheHappyCase/src/component/Checkout/components/LoadingState.jsx"],"sourcesContent":["import React from 'react';\n\nconst LoadingState = () => {\n  return (\n    <div className=\"min-h-screen bg-white py-8\">\n      <div className=\"max-w-2xl mx-auto p-6 bg-white border border-gray-200\">\n        <div className=\"flex items-center justify-center py-12\">\n          <div className=\"text-center\">\n            <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-300 mx-auto mb-4\"></div>\n            <p className=\"text-gray-500 font-light font-inter\">\n              Loading checkout...\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default LoadingState;\n\n"],"names":[],"mappings":";;;;;AAAA;;;AAEA,MAAM,eAAe;IACnB,qBACE,kSAAC;QAAI,WAAU;kBACb,cAAA,kSAAC;YAAI,WAAU;sBACb,cAAA,kSAAC;gBAAI,WAAU;0BACb,cAAA,kSAAC;oBAAI,WAAU;;sCACb,kSAAC;4BAAI,WAAU;;;;;;sCACf,kSAAC;4BAAE,WAAU;sCAAsC;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQ/D;uCAEe"}},
    {"offset": {"line": 392, "column": 0}, "map": {"version":3,"sources":["file:///Users/raphaeladoamaralgil/Desktop/HappyCase/TheHappy/TheHappyCase/src/component/Checkout/components/CustomerInfoForm.jsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useRef, useEffect } from 'react';\nimport { useRouter } from 'next/navigation';\n\nconst CustomerInfoForm = ({ customerInfo, onInputChange, isAuthenticated, authenticatedEmail, onSignIn, onSignOut }) => {\n  const router = useRouter();\n  const [showLoginDropdown, setShowLoginDropdown] = useState(false);\n  const dropdownRef = useRef(null);\n  \n  // Close dropdown when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (event) => {\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target)) {\n        setShowLoginDropdown(false);\n      }\n    };\n\n    if (showLoginDropdown) {\n      document.addEventListener('mousedown', handleClickOutside);\n    }\n\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [showLoginDropdown]);\n  \n  const handleSignInClick = () => {\n    setShowLoginDropdown(true);\n  };\n\n  const handleConfirmLogin = () => {\n    setShowLoginDropdown(false);\n    // Navigate to login page with return URL to come back to checkout\n    router.push('/login?redirect=/checkout');\n  };\n\n  const handleCancelLogin = () => {\n    setShowLoginDropdown(false);\n  };\n  \n  return (\n    <div className=\"space-y-4 \">\n        <h3 className=\"text-md uppercase tracking-wider text-gray-900 mb-4 font-bold font-inter\">\n       Contact\n      </h3>\n      {!isAuthenticated ? (\n        <div>\n          <div className=\"flex items-center justify-between mb-1.5 relative\">\n            <label className=\"block text-sm text-gray-500 font-light font-inter\">\n              Email Address *\n            </label>\n            <div ref={dropdownRef} className=\"relative\">\n              <button\n                type=\"button\"\n                onClick={handleSignInClick}\n                className=\"text-xs text-gray-600 hover:text-gray-900 font-light font-inter underline\"\n              >\n                Sign In\n              </button>\n              \n              {/* Login Confirmation Dropdown */}\n              {showLoginDropdown && (\n                <div className=\"absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded-sm shadow-lg z-50\">\n                  <div className=\"p-3\">\n                    <p className=\"text-sm text-gray-700 font-light font-inter mb-3\">\n                      Do you want to sign in?\n                    </p>\n                    <div className=\"flex gap-2\">\n                      <button\n                        type=\"button\"\n                        onClick={handleConfirmLogin}\n                        className=\"flex-1 px-3 py-1.5 text-xs uppercase tracking-wider font-light font-inter bg-black text-white hover:bg-gray-800 transition-colors\"\n                      >\n                        Yes\n                      </button>\n                      <button\n                        type=\"button\"\n                        onClick={handleCancelLogin}\n                        className=\"flex-1 px-3 py-1.5 text-xs uppercase tracking-wider font-light font-inter border border-gray-300 text-gray-700 hover:bg-gray-50 transition-colors\"\n                      >\n                        No\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n          <input\n            type=\"email\"\n            name=\"email\"\n            value={customerInfo.email}\n            onChange={onInputChange}\n            required\n            placeholder=\"your.email@example.com\"\n            className=\"w-full px-3 py-2 border border-gray-200 rounded-sm focus:outline-none focus:ring-2 focus:ring-yellow-100 focus:border-yellow-100 bg-white text-gray-900 placeholder-gray-400 font-light font-inter text-base\"\n            style={{ fontSize: '16px' }}\n          />\n          <p className=\"mt-1 text-xs text-gray-500 font-light font-inter\">\n            We'll send your order confirmation to this email\n          </p>\n        </div>\n      ) : (\n        <div>\n          <div className=\"flex items-center justify-between mb-1.5\">\n            <label className=\"block text-sm text-gray-500 font-light font-inter\">\n              Email Address *\n            </label>\n            <button\n              type=\"button\"\n              onClick={onSignOut}\n              className=\"text-xs text-gray-600 hover:text-gray-900 font-light font-inter underline\"\n            >\n              Sign Out\n            </button>\n          </div>\n          <div className=\"w-full px-3 py-2 border border-gray-200 rounded-sm bg-gray-50 text-gray-900 font-light font-inter text-sm\">\n            {authenticatedEmail}\n          </div>\n          <p className=\"mt-1 text-xs text-gray-500 font-light font-inter\">\n            Signed in as {authenticatedEmail}\n          </p>\n        </div>\n      )}\n      <h3 className=\"text-md uppercase tracking-wider text-gray-900 mb-4 font-bold font-inter\">\n        Delivery\n      </h3>\n      \n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n   \n          <div>\n          <label className=\"block text-sm text-gray-500 mb-1.5 font-light font-inter\">\n            Name *\n          </label>\n          <input\n            type=\"text\"\n            name=\"name\"\n            value={customerInfo.name}\n            onChange={onInputChange}\n            required\n            className=\"w-full px-3 py-2 border border-gray-200 rounded-sm focus:outline-none focus:ring-2 focus:ring-yellow-100 focus:border-yellow-100 bg-white text-gray-900 placeholder-gray-400 font-light font-inter text-base\"\n            style={{ fontSize: '16px' }}\n          />\n          </div>\n          <div>\n           <label className=\"block text-sm text-gray-500 mb-1.5 font-light font-inter\">\n           Surname *\n          </label>\n          <input\n            type=\"text\"\n            name=\"surname\"\n            value={customerInfo.surname}\n            onChange={onInputChange}\n            required\n            className=\"w-full px-3 py-2 border border-gray-200 rounded-sm focus:outline-none focus:ring-2 focus:ring-yellow-100 focus:border-yellow-100 bg-white text-gray-900 placeholder-gray-400 font-light font-inter text-base\"\n            style={{ fontSize: '16px' }}\n          />\n          </div>\n    \n        \n      \n      </div>\n\n      <div>\n        <label className=\"block text-sm text-gray-500 mb-1.5 font-light font-inter\">\n          Address Line 1 *\n        </label>\n        <input\n          type=\"text\"\n          name=\"address.line1\"\n          value={customerInfo.address.line1}\n          onChange={onInputChange}\n          required\n          className=\"w-full px-3 py-2 border border-gray-200 rounded-sm focus:outline-none focus:ring-2 focus:ring-yellow-100 focus:border-yellow-100 bg-white text-gray-900 placeholder-gray-400 font-light font-inter text-base\"\n          style={{ fontSize: '16px' }}\n        />\n      </div>\n\n      <div>\n        <label className=\"block text-sm text-gray-500 mb-1.5 font-light font-inter\">\n          Address Line 2\n        </label>\n        <input\n          type=\"text\"\n          name=\"address.line2\"\n          value={customerInfo.address.line2}\n          onChange={onInputChange}\n          className=\"w-full px-3 py-2 border border-gray-200 rounded-sm focus:outline-none focus:ring-2 focus:ring-yellow-100 focus:border-yellow-100 bg-white text-gray-900 placeholder-gray-400 font-light font-inter text-base\"\n          style={{ fontSize: '16px' }}\n        />\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n        <div>\n          <label className=\"block text-sm text-gray-500 mb-1.5 font-light font-inter\">\n            City *\n          </label>\n          <input\n            type=\"text\"\n            name=\"address.city\"\n            value={customerInfo.address.city}\n            onChange={onInputChange}\n            required\n            className=\"w-full px-3 py-2 border border-gray-200 rounded-sm focus:outline-none focus:ring-2 focus:ring-yellow-100 focus:border-yellow-100 bg-white text-gray-900 placeholder-gray-400 font-light font-inter text-base\"\n            style={{ fontSize: '16px' }}\n          />\n        </div>\n        \n        <div>\n          <label className=\"block text-sm text-gray-500 mb-1.5 font-light font-inter\">\n            {customerInfo.address.country === 'GB' ? 'Postcode' : 'Postal Code'} *\n          </label>\n          <input\n            type=\"text\"\n            name=\"address.postal_code\"\n            value={customerInfo.address.postal_code}\n            onChange={onInputChange}\n            required\n            className=\"w-full px-3 py-2 border border-gray-200 rounded-sm focus:outline-none focus:ring-2 focus:ring-yellow-100 focus:border-yellow-100 bg-white text-gray-900 placeholder-gray-400 font-light font-inter text-base\"\n            style={{ fontSize: '16px' }}\n          />\n        </div>\n        \n        <div>\n          <label className=\"block text-sm text-gray-500 mb-1.5 font-light font-inter\">\n            Country/Region *\n          </label>\n          <select\n            name=\"address.country\"\n            value={customerInfo.address.country}\n            onChange={onInputChange}\n            className=\"w-full px-3 py-2 border border-gray-200 rounded-sm focus:outline-none focus:ring-2 focus:ring-yellow-100 focus:border-yellow-100 bg-white text-gray-900 font-light font-inter text-base\"\n            style={{ fontSize: '16px' }}\n          >\n            <option value=\"GB\">England</option>\n            <optgroup label=\"Europe\">\n              <option value=\"AL\">Albania</option>\n              <option value=\"AD\">Andorra</option>\n              <option value=\"AT\">Austria</option>\n              <option value=\"BE\">Belgium</option>\n              <option value=\"BA\">Bosnia and Herzegovina</option>\n              <option value=\"BG\">Bulgaria</option>\n              <option value=\"HR\">Croatia</option>\n              <option value=\"CY\">Cyprus</option>\n              <option value=\"CZ\">Czech Republic</option>\n              <option value=\"DK\">Denmark</option>\n              <option value=\"EE\">Estonia</option>\n              <option value=\"FI\">Finland</option>\n              <option value=\"FR\">France</option>\n              <option value=\"DE\">Germany</option>\n              <option value=\"GR\">Greece</option>\n              <option value=\"HU\">Hungary</option>\n              <option value=\"IS\">Iceland</option>\n              <option value=\"IE\">Ireland</option>\n              <option value=\"IT\">Italy</option>\n              <option value=\"LV\">Latvia</option>\n              <option value=\"LI\">Liechtenstein</option>\n              <option value=\"LT\">Lithuania</option>\n              <option value=\"LU\">Luxembourg</option>\n              <option value=\"MT\">Malta</option>\n              <option value=\"MC\">Monaco</option>\n              <option value=\"ME\">Montenegro</option>\n              <option value=\"NL\">Netherlands</option>\n              <option value=\"MK\">North Macedonia</option>\n              <option value=\"NO\">Norway</option>\n              <option value=\"PL\">Poland</option>\n              <option value=\"PT\">Portugal</option>\n              <option value=\"RO\">Romania</option>\n              <option value=\"SM\">San Marino</option>\n              <option value=\"RS\">Serbia</option>\n              <option value=\"SK\">Slovakia</option>\n              <option value=\"SI\">Slovenia</option>\n              <option value=\"ES\">Spain</option>\n              <option value=\"SE\">Sweden</option>\n              <option value=\"CH\">Switzerland</option>\n            </optgroup>\n          </select>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default CustomerInfoForm;\n\n"],"names":[],"mappings":"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ACnB,kSAAC;gDAAO,OAAM;0DAAK;;;;;;0DACnB,kSAAC;gDAAO,OAAM;0DAAK;;;;;;0DACnB,kSAAC;gDAAO,OAAM;0DAAK;;;;;;0DACnB,kSAAC;gDAAO,OAAM;0DAAK;;;;;;0DACnB,kSAAC;gDAAO,OAAM;0DAAK;;;;;;0DACnB,kSAAC;gDAAO,OAAM;0DAAK;;;;;;0DACnB,kSAAC;gDAAO,OAAM;0DAAK;;;;;;0DACnB,kSAAC;gDAAO,OAAM;0DAAK;;;;;;0DACnB,kSAAC;gDAAO,OAAM;0DAAK;;;;;;0DACnB,kSAAC;gDAAO,OAAM;0DAAK;;;;;;0DACnB,kSAAC;gDAAO,OAAM;0DAAK;;;;;;0DACnB,kSAAC;gDAAO,OAAM;0DAAK;;;;;;0DACnB,kSAAC;gDAAO,OAAM;0DAAK;;;;;;0DACnB,kSAAC;gDAAO,OAAM;0DAAK;;;;;;0DACnB,kSAAC;gDAAO,OAAM;0DAAK;;;;;;0DACnB,kSAAC;gDAAO,OAAM;0DAAK;;;;;;0DACnB,kSAAC;gDAAO,OAAM;0DAAK;;;;;;0DACnB,kSAAC;gDAAO,OAAM;0DAAK;;;;;;0DACnB,kSAAC;gDAAO,OAAM;0DAAK;;;;;;0DACnB,kSAAC;gDAAO,OAAM;0DAAK;;;;;;0DACnB,kSAAC;gDAAO,OAAM;0DAAK;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOjC;uCAEe"}},
    {"offset": {"line": 1206, "column": 0}, "map": {"version":3,"sources":["file:///Users/raphaeladoamaralgil/Desktop/HappyCase/TheHappy/TheHappyCase/src/component/Checkout/components/PaymentSection.jsx"],"sourcesContent":["'use client';\n\nimport React, { useEffect, useRef } from \"react\";\nimport { PaymentElement } from \"@stripe/react-stripe-js\";\n\nconst PaymentSection = ({\n  paymentElementReady,\n  error,\n  onPaymentReady,\n  onPaymentError,\n}) => {\n  const paymentElementRef = useRef(null);\n\n  useEffect(() => {\n    if (!paymentElementReady) return;\n\n    // Force Card tab open (accordion layout)\n    const openCardPayment = () => {\n      const paymentElement = document.querySelector(\n        '[data-testid=\"payment-element\"]'\n      );\n      if (!paymentElement) return;\n\n      // Stripe usually labels card tab like this\n      const cardTab =\n        paymentElement.querySelector('[role=\"tab\"][aria-label*=\"Card\"]') ||\n        paymentElement.querySelector('[role=\"tab\"][aria-label*=\"card\"]') ||\n        paymentElement.querySelector('[role=\"tab\"][data-testid*=\"card\"]');\n\n      if (!cardTab) return;\n\n      const isExpanded = cardTab.getAttribute(\"aria-expanded\") === \"true\";\n      if (!isExpanded) cardTab.click();\n    };\n\n    // Hide blocked payment methods and ensure allowed ones are visible\n    const hideAllExceptAllowed = () => {\n      const paymentElement = document.querySelector(\n        '[data-testid=\"payment-element\"]'\n      );\n      if (!paymentElement) return;\n\n      const blockedKeywords = [\n        \"revolut\",\n        \"amazon\",\n        \"link\",\n        \"cash app\",\n        \"cashapp\",\n      ];\n\n      const allowedKeywords = [\n        \"card\",\n        \"klarna\",\n        \"clearpay\",\n        \"afterpay\",\n        \"apple pay\",\n        \"google pay\",\n      ];\n\n      // Hide blocked payment methods aggressively\n      const allElements = paymentElement.querySelectorAll(\n        '[role=\"tab\"], ' +\n        '[role=\"button\"], ' +\n        'button, ' +\n        '[aria-label*=\"Revolut\"], ' +\n        '[aria-label*=\"revolut\"], ' +\n        '[aria-label*=\"Amazon\"], ' +\n        '[aria-label*=\"amazon\"], ' +\n        '[aria-label*=\"Link\"], ' +\n        '[aria-label*=\"link\"], ' +\n        '[data-testid*=\"revolut\"], ' +\n        '[data-testid*=\"amazon\"], ' +\n        '[data-testid*=\"link\"], ' +\n        '[id*=\"revolut\"], ' +\n        '[id*=\"amazon\"], ' +\n        '[id*=\"RevolutPay\"], ' +\n        '[id*=\"AmazonPay\"], ' +\n        '[class*=\"revolut\"], ' +\n        '[class*=\"amazon\"], ' +\n        'iframe[src*=\"revolut\"], ' +\n        'iframe[src*=\"Revolut\"], ' +\n        'iframe[src*=\"amazon\"], ' +\n        'iframe[src*=\"Amazon\"], ' +\n        'iframe[title*=\"revolut\"], ' +\n        'iframe[title*=\"Revolut\"], ' +\n        'iframe[title*=\"amazon\"], ' +\n        'iframe[title*=\"Amazon\"]'\n      );\n\n      allElements.forEach((element) => {\n        const label = (\n          element.getAttribute(\"aria-label\") ||\n          element.textContent ||\n          element.getAttribute(\"data-testid\") ||\n          \"\"\n        ).toLowerCase();\n\n        const isBlocked = blockedKeywords.some((k) => label.includes(k));\n\n        if (isBlocked) {\n          element.style.display = \"none !important\";\n          element.style.visibility = \"hidden !important\";\n          element.style.opacity = \"0 !important\";\n          element.style.height = \"0 !important\";\n          element.style.margin = \"0 !important\";\n          element.style.padding = \"0 !important\";\n          element.setAttribute(\"aria-hidden\", \"true\");\n          element.setAttribute(\"hidden\", \"true\");\n\n          // Hide panel linked to that tab too\n          const panelId = element.getAttribute(\"aria-controls\");\n          if (panelId) {\n            const panel = document.getElementById(panelId);\n            if (panel) {\n              panel.style.display = \"none\";\n              panel.style.visibility = \"hidden\";\n              panel.setAttribute(\"aria-hidden\", \"true\");\n            }\n          }\n        }\n      });\n\n      // Ensure allowed payment methods are visible\n      const tabs = paymentElement.querySelectorAll('[role=\"tab\"]');\n\n      tabs.forEach((tab) => {\n        const label = (\n          tab.getAttribute(\"aria-label\") ||\n          tab.textContent ||\n          \"\"\n        ).toLowerCase();\n\n        const isAllowed = allowedKeywords.some((k) => label.includes(k));\n        const isBlocked = blockedKeywords.some((k) => label.includes(k));\n\n        if (isBlocked) {\n          tab.style.display = \"none\";\n          tab.style.visibility = \"hidden\";\n          tab.setAttribute(\"aria-hidden\", \"true\");\n          \n          const panelId = tab.getAttribute(\"aria-controls\");\n          if (panelId) {\n            const panel = document.getElementById(panelId);\n            if (panel) {\n              panel.style.display = \"none\";\n              panel.style.visibility = \"hidden\";\n              panel.setAttribute(\"aria-hidden\", \"true\");\n            }\n          }\n        } else if (isAllowed) {\n          tab.style.display = \"\";\n          tab.style.visibility = \"visible\";\n          tab.setAttribute(\"aria-hidden\", \"false\");\n          \n          // Ensure Klarna stays visible\n          if (label.includes(\"klarna\")) {\n            tab.style.display = \"block\";\n            tab.style.visibility = \"visible\";\n            tab.style.opacity = \"1\";\n          }\n        }\n      });\n    };\n\n    // Run once after render\n    const run = () => {\n      openCardPayment();\n      hideAllExceptAllowed();\n    };\n\n    // Run immediately and with delays to catch all rendering phases\n    setTimeout(run, 100);\n    setTimeout(run, 250);\n    setTimeout(run, 500);\n    setTimeout(run, 1000);\n\n    // Keep enforcing (Stripe re-renders often)\n    const paymentElement = document.querySelector(\n      '[data-testid=\"payment-element\"]'\n    );\n\n    if (!paymentElement) return;\n\n    const observer = new MutationObserver(() => {\n      setTimeout(run, 50);\n    });\n\n    observer.observe(paymentElement, {\n      childList: true,\n      subtree: true,\n      attributes: true,\n      attributeFilter: ['aria-hidden', 'style', 'class'],\n    });\n\n    return () => observer.disconnect();\n  }, [paymentElementReady]);\n\n  return (\n    <div className=\"space-y-3 sm:space-y-4\">\n      <h3 className=\"text-md sm:text-md uppercase tracking-wider text-gray-900 mb-3 sm:mb-4 font-bold font-inter\">\n        Payment\n      </h3>\n\n      <div\n        ref={paymentElementRef}\n        className=\"p-3 sm:p-4 border border-gray-200 rounded-sm overflow-hidden\"\n      >\n        {!paymentElementReady && (\n          <div className=\"mb-2 text-xs sm:text-sm text-gray-500 font-light font-inter\">\n            Loading payment form...\n          </div>\n        )}\n\n        <div className=\"w-full flex flex-col space-y-2\">\n          <PaymentElement\n            options={{\n              layout: \"accordion\",\n              fields: {\n                billingDetails: {\n                  email: \"never\",\n                  phone: \"never\",\n                  address: \"never\",\n                },\n              },\n              wallets: {\n                applePay: \"auto\",\n                googlePay: \"auto\",\n              },\n              paymentMethodTypes: {\n                card: \"always\",\n                klarna: \"always\",\n                afterpayClearpay: \"always\",\n                paypal: \"never\",\n                link: \"never\",\n                amazonPay: \"never\",\n                revolutPay: \"never\",\n              },\n              business: {\n                name: \"The Happy Case\",\n              },\n            }}\n            onReady={onPaymentReady}\n            onError={(error) => {\n              if (\n                error?.message?.includes(\"hcaptcha\") ||\n                error?.message?.includes(\"hCaptcha\")\n              ) {\n                return;\n              }\n              onPaymentError?.(\n                error.message ||\n                  \"Failed to load payment form. Please refresh the page.\"\n              );\n            }}\n          />\n        </div>\n      </div>\n\n      {error && (\n        <div className=\"text-red-600 text-xs sm:text-sm bg-red-50 p-2 sm:p-3 rounded-sm font-light font-inter\">\n          {error}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default PaymentSection;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1433, "column": 0}, "map": {"version":3,"sources":["file:///Users/raphaeladoamaralgil/Desktop/HappyCase/TheHappy/TheHappyCase/src/component/Checkout/components/OrderSummaryItem.jsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useEffect, useRef } from 'react';\nimport { normalizeImagePath } from '../../../utils/imagePath';\n\nconst OrderSummaryItem = ({ item, index, formatPrice, onIncrement, onDecrement, onRemove, errorMessage }) => {\n  const [isEditing, setIsEditing] = useState(false);\n  const itemRef = useRef(null);\n\n  // Handle click outside to close edit mode\n  useEffect(() => {\n    const handleClickOutside = (event) => {\n      // Don't close if clicking on any button or input\n      const target = event.target;\n      const isButton = target.tagName === 'BUTTON' || \n                      target.closest('button') !== null ||\n                      target.closest('[role=\"button\"]') !== null ||\n                      target.closest('[aria-label*=\"quantity\"]') !== null;\n      const isInput = target.tagName === 'INPUT' || target.tagName === 'TEXTAREA';\n      \n      if (isButton || isInput) {\n        return; // Don't close when clicking buttons or inputs\n      }\n      \n      // Check if click is outside the item element\n      if (isEditing && itemRef.current && !itemRef.current.contains(event.target)) {\n        setIsEditing(false);\n      }\n    };\n\n    if (isEditing) {\n      // Add listener with a delay to ensure button clicks are processed first\n      const timeoutId = setTimeout(() => {\n        document.addEventListener('mousedown', handleClickOutside);\n      }, 200);\n      \n      return () => {\n        clearTimeout(timeoutId);\n        document.removeEventListener('mousedown', handleClickOutside);\n      };\n    }\n  }, [isEditing]);\n  // Handle standalone charm items\n  if (item.type === 'charm') {\n    const charm = item.pin || item;\n    // Get unit price (always use item.price as the base unit price)\n    const unitPrice = item.price || 0;\n    const qty = item.quantity || 1;\n    // Always calculate total based on unit price and current quantity\n    const total = unitPrice * qty;\n\n    return (\n      <div key={index} className=\" pb-4 \" ref={itemRef}>\n        <div className=\"flex items-start gap-4\">\n          {/* Image with quantity badge */}\n          <div className=\"relative flex-shrink-0 w-20 h-20 bg-gray-50 rounded-sm border border-gray-200 flex items-center justify-center overflow-visible\">\n            {item.image ? (\n              <img\n                src={normalizeImagePath(item.image)}\n                alt={item.name || \"Charm\"}\n                className=\"w-full h-full object-contain p-2\"\n                loading=\"lazy\"\n              />\n            ) : charm?.src ? (\n              <img\n                src={normalizeImagePath(charm.src)}\n                alt={charm.name || \"Charm\"}\n                className=\"w-full h-full object-contain p-2\"\n                loading=\"lazy\"\n              />\n            ) : (\n              <div className=\"w-full h-full rounded-sm bg-gray-100\" />\n            )}\n            <span className=\"absolute -top-1.5 -right-1.5 bg-gray-900 text-white text-[10px] font-medium rounded-full h-5 w-5 flex items-center justify-center font-inter\">\n              {qty}\n            </span>\n          </div>\n          \n          {/* Content */}\n          <div className=\"flex-1 min-w-0\">\n            <div className=\"flex items-start justify-between gap-4\">\n              <div className=\"flex-1 min-w-0\">\n                <h4 className=\"text-sm font-medium text-gray-900 font-inter leading-tight\">\n                  {item.name || charm?.name || \"Charm\"}\n                </h4>\n                <p className=\"text-xs text-gray-500 mt-0.5 font-inter\">\n                  {item.category === 'bronze' ? 'Bronze Charm' : \n                   item.category === 'flags' ? 'Flag' : \n                   'Colorful Charm'}\n                </p>\n              </div>\n              <div className=\"flex-shrink-0 text-right\">\n                <span className=\"text-sm font-medium text-gray-900 font-inter\">\n                  {formatPrice(total)}\n                </span>\n              </div>\n            </div>\n            \n            {/* Edit Button */}\n            {!isEditing && (\n              <div className=\"mt-3\">\n                <button\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    setIsEditing(true);\n                  }}\n                  className=\"text-xs text-gray-600 hover:text-gray-900 font-light font-inter uppercase tracking-wider transition-colors\"\n                >\n                  Edit\n                </button>\n              </div>\n            )}\n            \n            {/* Quantity Controls and Remove Button - Shown when editing */}\n            {isEditing && onIncrement && onDecrement && (\n              <div className=\"mt-3 flex items-center gap-3\">\n                <div className=\"flex items-center gap-1 border border-gray-200 rounded-sm p-1\">\n                  <button \n                    onClick={(e) => {\n                      e.preventDefault();\n                      e.stopPropagation();\n                      const identifier = item.id !== undefined ? item.id : index;\n                      console.log('➖ Charm item decrement clicked:', { \n                        identifier, \n                        itemId: item.id, \n                        index, \n                        currentQty: item.quantity,\n                        itemName: item.name,\n                        itemType: item.type,\n                        hasOnDecrement: !!onDecrement\n                      });\n                      if (onDecrement) {\n                        onDecrement(identifier);\n                      }\n                    }} \n                    className=\"w-6 h-6 flex items-center justify-center text-gray-600 hover:text-gray-900 transition-colors\"\n                    aria-label=\"Decrease quantity\"\n                    type=\"button\"\n                  >\n                    −\n                  </button>\n                  <div className=\"px-2 py-0.5 text-xs text-gray-900 font-light font-inter min-w-[1.5rem] text-center\">\n                    {qty}\n                  </div>\n                <button \n                  onClick={(e) => {\n                    e.preventDefault();\n                    e.stopPropagation();\n                    const identifier = item.id !== undefined ? item.id : index;\n                    console.log('➕ Charm item increment clicked:', { \n                      identifier, \n                      itemId: item.id, \n                      index, \n                      currentQty: item.quantity,\n                      itemName: item.name,\n                      itemType: item.type,\n                      hasOnIncrement: !!onIncrement\n                    });\n                    if (onIncrement) {\n                      onIncrement(identifier);\n                    }\n                  }} \n                  className=\"w-6 h-6 flex items-center justify-center text-gray-600 hover:text-gray-900 transition-colors\"\n                  aria-label=\"Increase quantity\"\n                  type=\"button\"\n                >\n                  +\n                </button>\n                </div>\n                {onRemove && (\n                  <button\n                    onClick={() => {\n                      onRemove(index);\n                      setIsEditing(false);\n                    }}\n                    className=\"text-xs text-red-600 hover:text-red-700 font-light font-inter uppercase tracking-wider transition-colors\"\n                  >\n                    Remove\n                  </button>\n                )}\n              </div>\n            )}\n            \n            {/* Error Message */}\n            {errorMessage && (\n              <p className=\"text-xs text-red-600 font-inter mt-2\">\n                {errorMessage}\n              </p>\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // Handle case items (with or without charms)\n  // Get base price - prefer basePrice, then casePrice, then price, fallback to 8\n  const base = typeof item.basePrice === 'number' \n    ? item.basePrice \n    : (typeof item.casePrice === 'number' \n      ? item.casePrice \n      : (typeof item.price === 'number' ? item.price : 8));\n  \n  // Calculate charms total from pinsDetails if available\n  const charms = item.pinsDetails && item.pinsDetails.length\n    ? item.pinsDetails.reduce((s, p) => s + (p.price || 0), 0)\n    : 0;\n  \n  // Unit price = base + charms\n  const unit = base + charms;\n  const qty = item.quantity || 1;\n  \n  // Always calculate total based on unit price and current quantity\n  const total = unit * qty;\n\n  return (\n    <div key={index} className=\" pb-4 last:border-b-0\" ref={itemRef}>\n      <div className=\"flex items-start gap-4\">\n        {/* Image with quantity badge */}\n        <div className=\"relative flex-shrink-0 w-20 h-20 bg-gray-50 rounded-sm border border-gray-200 flex items-center justify-center overflow-visible\">\n          {item.designImage ? (\n            <img\n              src={normalizeImagePath(item.designImage)}\n              alt=\"Custom Case Design\"\n              className=\"w-full h-full object-contain p-2 rounded-sm\"\n              loading=\"lazy\"\n            />\n          ) : item.caseImage ? (\n            <img \n              src={normalizeImagePath(item.caseImage)} \n              alt=\"Custom Case\" \n              className=\"w-full h-full object-contain p-2 rounded-sm\" \n              loading=\"lazy\" \n            />\n          ) : (\n            <div \n              className=\"w-full h-full rounded-sm\" \n              style={{ background: item.color }} \n            />\n          )}\n          <span className=\"absolute -top-1.5 -right-1.5 bg-gray-900 text-white text-[10px] font-medium rounded-full h-5 w-5 flex items-center justify-center font-inter\">\n            {qty}\n          </span>\n        </div>\n        \n        {/* Content */}\n        <div className=\"flex-1 min-w-0\">\n          <div className=\"flex items-start justify-between gap-4\">\n            <div className=\"flex-1 min-w-0\">\n              <h4 className=\"text-sm font-medium text-gray-900 font-inter leading-tight\">\n                {item.caseName || item.name || 'Passport Case'}\n              </h4>\n              <div className=\"flex items-center gap-2 mt-1\">\n                <span className=\"text-xs text-gray-500 font-inter\">Color:</span>\n                <span\n                  className=\"inline-flex h-4 w-4 rounded-full border border-gray-300 shadow-sm\"\n                  style={{ backgroundColor: item.color }}\n                  aria-label={`Selected color ${item.color}`}\n                />\n              </div>\n            </div>\n            <div className=\"flex-shrink-0 text-right\">\n              <span className=\"text-sm font-medium text-gray-900 font-inter\">\n                {formatPrice(total)}\n              </span>\n            </div>\n          </div>\n          \n          {/* Edit Button */}\n          {!isEditing && (\n            <div className=\"mt-3\">\n              <button\n                onClick={(e) => {\n                  e.stopPropagation();\n                  setIsEditing(true);\n                }}\n                className=\"text-xs text-gray-600 hover:text-gray-900 font-light font-inter uppercase tracking-wider transition-colors\"\n              >\n                Edit\n              </button>\n            </div>\n          )}\n          \n          {/* Quantity Controls and Remove Button - Shown when editing */}\n          {isEditing && onIncrement && onDecrement && (\n            <div className=\"mt-3 flex items-center gap-3\">\n              <div className=\"flex items-center gap-1 border border-gray-200 rounded-sm p-1\">\n                <button \n                  onClick={(e) => {\n                    e.preventDefault();\n                    e.stopPropagation();\n                    const identifier = item.id !== undefined ? item.id : index;\n                    console.log('➖ Case item decrement clicked:', { \n                      identifier, \n                      itemId: item.id, \n                      index, \n                      currentQty: item.quantity,\n                      itemName: item.caseName || item.name,\n                      hasOnDecrement: !!onDecrement\n                    });\n                    if (onDecrement) {\n                      onDecrement(identifier);\n                    } else {\n                      console.error('❌ onDecrement handler is missing!');\n                    }\n                  }} \n                  className=\"w-6 h-6 flex items-center justify-center text-gray-600 hover:text-gray-900 transition-colors\"\n                  aria-label=\"Decrease quantity\"\n                  type=\"button\"\n                >\n                  −\n                </button>\n                <div className=\"px-2 py-0.5 text-xs text-gray-900 font-light font-inter min-w-[1.5rem] text-center\">\n                  {qty}\n                </div>\n                <button \n                  onClick={(e) => {\n                    e.preventDefault();\n                    e.stopPropagation();\n                    const identifier = item.id !== undefined ? item.id : index;\n                    console.log('➕ Case item increment clicked:', { \n                      identifier, \n                      itemId: item.id, \n                      index, \n                      currentQty: item.quantity,\n                      itemName: item.caseName || item.name,\n                      hasOnIncrement: !!onIncrement\n                    });\n                    if (onIncrement) {\n                      onIncrement(identifier);\n                    } else {\n                      console.error('❌ onIncrement handler is missing!');\n                    }\n                  }} \n                  className=\"w-6 h-6 flex items-center justify-center text-gray-600 hover:text-gray-900 transition-colors\"\n                  aria-label=\"Increase quantity\"\n                  type=\"button\"\n                >\n                  +\n                </button>\n              </div>\n              {onRemove && (\n                <button\n                  onClick={() => {\n                    onRemove(index);\n                    setIsEditing(false);\n                  }}\n                  className=\"text-xs text-red-600 hover:text-red-700 font-light font-inter uppercase tracking-wider transition-colors\"\n                >\n                  Remove\n                </button>\n              )}\n            </div>\n          )}\n          \n          {/* Charms list */}\n          {item.pinsDetails && item.pinsDetails.length > 0 && (\n            <div className=\"mt-3 pt-3 \">\n              <div className=\"flex flex-col gap-2\">\n                {Object.values(item.pinsDetails.reduce((acc, pin) => {\n                  acc[pin.src] = acc[pin.src] || { ...pin, quantity: 0 };\n                  acc[pin.src].quantity++;\n                  return acc;\n                }, {})).map((groupedPin, i) => {\n                  const pinPrice = groupedPin.price || 0;\n                  const pinTotal = pinPrice * groupedPin.quantity;\n                  return (\n                    <div key={i} className=\"flex items-center justify-between\">\n                      <div className=\"flex items-center gap-2\">\n                        <div className=\"relative w-10 h-10 bg-gray-50 rounded-sm border border-gray-200 flex items-center justify-center overflow-visible\">\n                          <img \n                            src={groupedPin.src} \n                            alt={groupedPin.name} \n                            className=\"w-full h-full object-contain p-1\" \n                            loading=\"lazy\" \n                          />\n                          <span className=\"absolute -top-1 -right-1 bg-gray-900 text-white text-[10px] font-medium rounded-full h-4 w-4 flex items-center justify-center font-inter\">\n                            {groupedPin.quantity}\n                          </span>\n                        </div>\n                        <span className=\"text-xs font-light text-gray-700 font-inter\">\n                          {groupedPin.name}\n                        </span>\n                      </div>\n                      <span className=\"text-xs font-medium text-gray-900 font-inter\">\n                        {formatPrice(pinTotal)}\n                      </span>\n                    </div>\n                  );\n                })}\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default OrderSummaryItem;\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2075, "column": 0}, "map": {"version":3,"sources":["file:///Users/raphaeladoamaralgil/Desktop/HappyCase/TheHappy/TheHappyCase/src/component/Checkout/components/OrderSummary.jsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport Link from 'next/link';\nimport OrderSummaryItem from './OrderSummaryItem';\nimport InternationalNote from '../../InternationalNote';\n\nconst OrderSummary = ({ \n  cart, \n  formatPrice, \n  subtotal, \n  shippingCost, \n  shippingLabel, \n  totalWithShipping, \n  showInternationalNote,\n  onShowShippingInfo,\n  onIncrement,\n  onDecrement,\n  onRemove,\n  itemErrors\n}) => {\n  return (\n    <div className=\"flex flex-col h-full min-h-0 mt-4\">\n      {/* Scrollable items list */}\n      <div className=\"flex-1 overflow-y-auto pr-2 -mr-2 min-h-0 order-summary-scroll\" style={{ scrollbarWidth: 'thin', scrollbarColor: '#d1d5db #f3f4f6' }}>\n        <div className=\"pr-2 pb-2\">\n          {cart.length === 0 ? (\n            <p className=\"text-sm text-gray-500 font-inter py-8 text-center\">Your cart is empty</p>\n          ) : (\n            <div className=\"space-y-0 mt-2\">\n              {cart.map((item, index) => (\n                <OrderSummaryItem\n                  key={item.id || `item-${index}`}\n                  item={item}\n                  index={index}\n                  formatPrice={formatPrice}\n                  onIncrement={onIncrement}\n                  onDecrement={onDecrement}\n                  onRemove={onRemove}\n                  errorMessage={itemErrors?.[item.id || index]}\n                />\n              ))}\n            </div>\n          )}\n        </div>\n      </div>\n      \n      {/* Fixed totals section */}\n      <div className=\"flex-shrink-0 pt-6  mt-4 \">\n        <div className=\"space-y-3\">\n          <div className=\"flex justify-between text-sm font-light text-gray-700 font-inter\">\n            <span>Subtotal</span>\n            <span className=\"font-medium text-gray-900 font-inter\">{formatPrice(subtotal)}</span>\n          </div>\n          \n          <div className=\"flex justify-between text-sm font-light text-gray-700 font-inter\">\n            <span className=\"flex items-center gap-1.5\">\n              Shipping ({shippingLabel})\n              <button\n                type=\"button\"\n                onClick={onShowShippingInfo}\n                className=\"text-gray-400 hover:text-gray-600 transition-colors w-4 h-4 rounded-full border border-gray-300 flex items-center justify-center text-[10px] leading-none\"\n                title=\"Quick delivery information\"\n              >\n                ?\n              </button>\n            </span>\n            <span className=\"font-medium text-gray-900 font-inter\">\n              {shippingCost === 0 ? 'Free' : formatPrice(shippingCost)}\n            </span>\n          </div>\n        </div>\n        \n        <div className=\"flex justify-between py-4 border-t border-gray-200 mt-4 pt-4\">\n          <span className=\"text-base font-medium text-gray-900 font-inter uppercase tracking-wider\">Total</span>\n          <span className=\"text-xl font-semibold text-gray-900 font-inter\">{formatPrice(totalWithShipping)}</span>\n        </div>\n       \n        <div className=\"mt-4 pt-4 border-t border-gray-100\">\n          <p className=\"text-xs text-gray-500 font-light font-inter leading-relaxed\">\n            Shipping and taxes are calculated at checkout if applicable.{' '}\n            <Link\n              href=\"/shipping\"\n              className=\"text-gray-600 hover:text-gray-900 underline transition-colors\"\n              title=\"Learn more about shipping information\"\n            >\n              Learn more\n            </Link>\n          </p>\n        </div>\n        \n        {showInternationalNote && (\n          <div className=\"mt-4\">\n            <InternationalNote\n              showOnDesktop={true}\n              showOnMobile={false}\n              title=\"Custom Duties & Taxes Included\"\n              message=\"The total amount you pay includes all applicable customs duties & taxes. We guarantee no additional charges on delivery.\"\n              variant=\"gray\"\n            />\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default OrderSummary;\n\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAOA,MAAM,eAAe,CAAC,EACpB,IAAI,EACJ,WAAW,EACX,QAAQ,EACR,YAAY,EACZ,aAAa,EACb,iBAAiB,EACjB,qBAAqB,EACrB,kBAAkB,EAClB,WAAW,EACX,WAAW,EACX,QAAQ,EACR,UAAU,EACX;IACC,qBACE,kSAAC;QAAI,WAAU;;0BAEb,kSAAC;gBAAI,WAAU;gBAAiE,OAAO;oBAAE,gBAAgB;oBAAQ,gBAAgB;gBAAkB;0BACjJ,cAAA,kSAAC;oBAAI,WAAU;8BACZ,KAAK,MAAM,KAAK,kBACf,kSAAC;wBAAE,WAAU;kCAAoD;;;;;iFAEjE,kSAAC;wBAAI,WAAU;kCACZ,KAAK,GAAG,CAAC,CAAC,MAAM,sBACf,kSAAC,8NAAgB;gCAEf,MAAM;gCACN,OAAO;gCACP,aAAa;gCACb,aAAa;gCACb,aAAa;gCACb,UAAU;gCACV,cAAc,YAAY,CAAC,KAAK,EAAE,IAAI,MAAM;+BAPvC,KAAK,EAAE,IAAI,CAAC,KAAK,EAAE,OAAO;;;;;;;;;;;;;;;;;;;;0BAgB3C,kSAAC;gBAAI,WAAU;;kCACb,kSAAC;wBAAI,WAAU;;0CACb,kSAAC;gCAAI,WAAU;;kDACb,kSAAC;kDAAK;;;;;;kDACN,kSAAC;wCAAK,WAAU;kDAAwC,YAAY;;;;;;;;;;;;0CAGtE,kSAAC;gCAAI,WAAU;;kDACb,kSAAC;wCAAK,WAAU;;4CAA4B;4CAC/B;4CAAc;0DACzB,kSAAC;gDACC,MAAK;gDACL,SAAS;gDACT,WAAU;gDACV,OAAM;0DACP;;;;;;;;;;;;kDAIH,kSAAC;wCAAK,WAAU;kDACb,iBAAiB,IAAI,SAAS,YAAY;;;;;;;;;;;;;;;;;;kCAKjD,kSAAC;wBAAI,WAAU;;0CACb,kSAAC;gCAAK,WAAU;0CAA0E;;;;;;0CAC1F,kSAAC;gCAAK,WAAU;0CAAkD,YAAY;;;;;;;;;;;;kCAGhF,kSAAC;wBAAI,WAAU;kCACb,cAAA,kSAAC;4BAAE,WAAU;;gCAA8D;gCACZ;8CAC7D,kSAAC,2NAAI;oCACH,MAAK;oCACL,WAAU;oCACV,OAAM;8CACP;;;;;;;;;;;;;;;;;oBAMJ,uCACC,kSAAC;wBAAI,WAAU;kCACb,cAAA,kSAAC,8MAAiB;4BAChB,eAAe;4BACf,cAAc;4BACd,OAAM;4BACN,SAAQ;4BACR,SAAQ;;;;;;;;;;;;;;;;;;;;;;;AAOtB;uCAEe"}},
    {"offset": {"line": 2304, "column": 0}, "map": {"version":3,"sources":["file:///Users/raphaeladoamaralgil/Desktop/HappyCase/TheHappy/TheHappyCase/src/component/Checkout/components/MobileOrderSummary.jsx"],"sourcesContent":["import React from 'react';\nimport OrderSummary from './OrderSummary';\n\nconst MobileOrderSummary = ({ \n  isOpen, \n  onToggle, \n  cartLength, \n  totalWithShipping, \n  formatPrice,\n  cart,\n  subtotal,\n  shippingCost,\n  shippingLabel,\n  showInternationalNote,\n  onShowShippingInfo,\n  onIncrement,\n  onDecrement,\n  onRemove,\n  itemErrors\n}) => {\n  return (\n    <>\n      <div className=\"lg:hidden \">\n        <button\n          type=\"button\"\n          onClick={onToggle}\n          className=\"w-full flex items-center justify-between px-4 py-3 text-xs uppercase tracking-wider text-gray-600 hover:text-gray-900 border border-gray-200 hover:border-gray-400 transition-all duration-200 font-light font-inter\"\n          aria-expanded={isOpen}\n          aria-controls=\"mobile-order-summary\"\n        >\n          <span>Order Summary ({cartLength} item{cartLength === 1 ? '' : 's'})</span>\n          <span className=\"flex items-center gap-2\">\n            <span>{formatPrice(totalWithShipping)}</span>\n            <svg\n              className={`w-4 h-4 transition-transform ${isOpen ? 'rotate-180' : ''}`}\n              fill=\"none\"\n              stroke=\"currentColor\"\n              viewBox=\"0 0 24 24\"\n              xmlns=\"http://www.w3.org/2000/svg\"\n              aria-hidden=\"true\"\n            >\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"1.5\" d=\"M19 9l-7 7-7-7\" />\n            </svg>\n          </span>\n        </button>\n      </div>\n      \n      {isOpen && (\n        <div id=\"mobile-order-summary\" className=\"lg:hidden  pb-4\">\n          <div className=\"mt-2 bg-yellow-50 p-4\">\n            <OrderSummary\n              cart={cart}\n              formatPrice={formatPrice}\n              subtotal={subtotal}\n              shippingCost={shippingCost}\n              shippingLabel={shippingLabel}\n              totalWithShipping={totalWithShipping}\n              showInternationalNote={showInternationalNote}\n              onShowShippingInfo={onShowShippingInfo}\n              onIncrement={onIncrement}\n              onDecrement={onDecrement}\n              onRemove={onRemove}\n              itemErrors={itemErrors}\n            />\n          </div>\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default MobileOrderSummary;\n\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAEA,MAAM,qBAAqB,CAAC,EAC1B,MAAM,EACN,QAAQ,EACR,UAAU,EACV,iBAAiB,EACjB,WAAW,EACX,IAAI,EACJ,QAAQ,EACR,YAAY,EACZ,aAAa,EACb,qBAAqB,EACrB,kBAAkB,EAClB,WAAW,EACX,WAAW,EACX,QAAQ,EACR,UAAU,EACX;IACC,qBACE;;0BACE,kSAAC;gBAAI,WAAU;0BACb,cAAA,kSAAC;oBACC,MAAK;oBACL,SAAS;oBACT,WAAU;oBACV,iBAAe;oBACf,iBAAc;;sCAEd,kSAAC;;gCAAK;gCAAgB;gCAAW;gCAAM,eAAe,IAAI,KAAK;gCAAI;;;;;;;sCACnE,kSAAC;4BAAK,WAAU;;8CACd,kSAAC;8CAAM,YAAY;;;;;;8CACnB,kSAAC;oCACC,WAAW,CAAC,6BAA6B,EAAE,SAAS,eAAe,IAAI;oCACvE,MAAK;oCACL,QAAO;oCACP,SAAQ;oCACR,OAAM;oCACN,eAAY;8CAEZ,cAAA,kSAAC;wCAAK,eAAc;wCAAQ,gBAAe;wCAAQ,aAAY;wCAAM,GAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;YAM9E,wBACC,kSAAC;gBAAI,IAAG;gBAAuB,WAAU;0BACvC,cAAA,kSAAC;oBAAI,WAAU;8BACb,cAAA,kSAAC,0NAAY;wBACX,MAAM;wBACN,aAAa;wBACb,UAAU;wBACV,cAAc;wBACd,eAAe;wBACf,mBAAmB;wBACnB,uBAAuB;wBACvB,oBAAoB;wBACpB,aAAa;wBACb,aAAa;wBACb,UAAU;wBACV,YAAY;;;;;;;;;;;;;;;;;;AAO1B;uCAEe"}},
    {"offset": {"line": 2429, "column": 0}, "map": {"version":3,"sources":["file:///Users/raphaeladoamaralgil/Desktop/HappyCase/TheHappy/TheHappyCase/src/component/Checkout/components/ShippingInfoModal.jsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport Link from 'next/link';\n\nconst ShippingInfoModal = ({ isOpen, onClose }) => {\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/40 px-4\">\n      <div className=\"bg-white border border-gray-200 max-w-md w-full p-6 space-y-4\">\n        <div className=\"flex items-start justify-between\">\n          <h3 className=\"text-sm uppercase tracking-wider text-gray-900 font-light font-inter\">\n            Delivery Information\n          </h3>\n          <button\n            type=\"button\"\n            onClick={onClose}\n            className=\"text-gray-400 hover:text-gray-900 transition-colors font-inter\"\n            aria-label=\"Close delivery information\"\n          >\n            <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M6 18L18 6M6 6l12 12\" />\n            </svg>\n          </button>\n        </div>\n        <p className=\"text-xs text-gray-500 font-light font-inter\">\n          We dispatch orders within 2 - 3 business days. Shipping costs depend on your delivery country.\n        </p>\n        <p className=\"text-xs text-gray-500 font-light font-inter\">\n          Including Ireland, Europe, Asia, North America, South America, Canada, Australia and New Zealand. Shipping charges are calculated at the checkout depending on location and parcel size.\n        </p>\n        <ul className=\"text-xs text-gray-600 space-y-2 font-light font-inter font-medium\">\n          <li><span>UK:</span> 3-4 business days</li>\n          <li><span className=\"font-medium font-medium\">Europe:</span> 5-10 business days</li>\n          <li><span>USA & Canada:</span> 7-14 business days</li>\n          <li><span className=\"font-medium\">Rest of World:</span> 10-21 business days</li>\n        </ul>\n        <div className=\"pt-2 border-t border-gray-100\">\n          <p className=\"text-xs text-gray-500 font-light font-inter leading-relaxed\">\n            Orders delivered outside of the UK may be subject to import duties and taxes. These are levied when the delivery reaches its specific destination, and you will be responsible for the payment of any such duties and taxes. For more information, please contact your local customs office.\n          </p>\n        </div>\n        <div className=\"flex justify-end\">\n          <Link\n            href=\"/shipping\"\n            className=\"text-xs text-gray-500 hover:text-gray-900 underline transition-colors font-light font-inter\"\n            onClick={onClose}\n          >\n            View full shipping policy\n          </Link>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ShippingInfoModal;\n\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAKA,MAAM,oBAAoB,CAAC,EAAE,MAAM,EAAE,OAAO,EAAE;IAC5C,IAAI,CAAC,QAAQ,OAAO;IAEpB,qBACE,kSAAC;QAAI,WAAU;kBACb,cAAA,kSAAC;YAAI,WAAU;;8BACb,kSAAC;oBAAI,WAAU;;sCACb,kSAAC;4BAAG,WAAU;sCAAuE;;;;;;sCAGrF,kSAAC;4BACC,MAAK;4BACL,SAAS;4BACT,WAAU;4BACV,cAAW;sCAEX,cAAA,kSAAC;gCAAI,WAAU;gCAAU,MAAK;gCAAO,QAAO;gCAAe,SAAQ;0CACjE,cAAA,kSAAC;oCAAK,eAAc;oCAAQ,gBAAe;oCAAQ,aAAa;oCAAK,GAAE;;;;;;;;;;;;;;;;;;;;;;8BAI7E,kSAAC;oBAAE,WAAU;8BAA8C;;;;;;8BAG3D,kSAAC;oBAAE,WAAU;8BAA8C;;;;;;8BAG3D,kSAAC;oBAAG,WAAU;;sCACZ,kSAAC;;8CAAG,kSAAC;8CAAK;;;;;;gCAAU;;;;;;;sCACpB,kSAAC;;8CAAG,kSAAC;oCAAK,WAAU;8CAA0B;;;;;;gCAAc;;;;;;;sCAC5D,kSAAC;;8CAAG,kSAAC;8CAAK;;;;;;gCAAoB;;;;;;;sCAC9B,kSAAC;;8CAAG,kSAAC;oCAAK,WAAU;8CAAc;;;;;;gCAAqB;;;;;;;;;;;;;8BAEzD,kSAAC;oBAAI,WAAU;8BACb,cAAA,kSAAC;wBAAE,WAAU;kCAA8D;;;;;;;;;;;8BAI7E,kSAAC;oBAAI,WAAU;8BACb,cAAA,kSAAC,2NAAI;wBACH,MAAK;wBACL,WAAU;wBACV,SAAS;kCACV;;;;;;;;;;;;;;;;;;;;;;AAOX;uCAEe"}},
    {"offset": {"line": 2634, "column": 0}, "map": {"version":3,"sources":["file:///Users/raphaeladoamaralgil/Desktop/HappyCase/TheHappy/TheHappyCase/src/component/Checkout/index.jsx"],"sourcesContent":["'use client';\n\n// React & Router\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useRouter } from 'next/navigation';\nimport Link from 'next/link';\n\n// Stripe\nimport { loadStripe } from '@stripe/stripe-js';\nimport { Elements, useStripe, useElements } from '@stripe/react-stripe-js';\n\n// Contexts\nimport { useCart } from '../../context/CartContext';\nimport { useCurrency } from '../../context/CurrencyContext';\n\n// Utils\nimport { createPaymentIntent } from '../../utils/mockPaymentAPI';\nimport { getMaxAvailableQuantity, refreshInventoryFromSupabase } from '../../utils/inventory';\n\n// Components\nimport InternationalNote from '../InternationalNote';\nimport CheckoutHeader from './components/CheckoutHeader';\nimport LoadingState from './components/LoadingState';\nimport CustomerInfoForm from './components/CustomerInfoForm';\nimport PaymentSection from './components/PaymentSection';\nimport OrderSummary from './components/OrderSummary';\nimport MobileOrderSummary from './components/MobileOrderSummary';\nimport ShippingInfoModal from './components/ShippingInfoModal';\n\n// --- Constants ---\n// Get Stripe publishable key from environment\n// In Next.js, NEXT_PUBLIC_* variables are injected at build time and available via process.env\n// Access them directly - they're available in both server and client code\nconst getStripeKey = () => {\n  if (typeof process !== 'undefined' && process.env) {\n    return process.env.NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY || \n           process.env.VITE_STRIPE_PUBLISHABLE_KEY || \n           '';\n  }\n  return '';\n};\n\nconst stripePublishableKey = getStripeKey();\n\n// Debug logging in development\nif (typeof process !== 'undefined' && process.env?.NODE_ENV === 'development') {\n  console.log('[Checkout] Stripe key check:', {\n    hasProcess: typeof process !== 'undefined',\n    hasEnv: typeof process !== 'undefined' && !!process.env,\n    NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY: typeof process !== 'undefined' ? !!process.env?.NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY : false,\n    VITE_STRIPE_PUBLISHABLE_KEY: typeof process !== 'undefined' ? !!process.env?.VITE_STRIPE_PUBLISHABLE_KEY : false,\n    stripePublishableKey: stripePublishableKey ? `${stripePublishableKey.substring(0, 20)}...` : 'NOT SET',\n  });\n}\n\n// Validate Stripe key format (silent validation)\n\nconst stripePromise = loadStripe(\n  stripePublishableKey || \n  'pk_test_51234567890abcdefghijklmnopqrstuvwxyz1234567890'\n);\n\n// European countries list\nconst EUROPEAN_COUNTRIES = new Set([\n  'AL', 'AD', 'AT', 'BE', 'BA', 'BG', 'HR', 'CY', 'CZ', 'DK', 'EE', 'FI', 'FR', 'DE', 'GR', 'HU', 'IS', 'IE', 'IT', \n  'LV', 'LI', 'LT', 'LU', 'MT', 'MC', 'ME', 'NL', 'MK', 'NO', 'PL', 'PT', 'RO', 'SM', 'RS', 'SK', 'SI', 'ES', 'SE', 'CH'\n]);\n\nconst SHIPPING_RATES = {\n  GB: 3,\n  // All European countries use the same rate\n  ...Object.fromEntries(Array.from(EUROPEAN_COUNTRIES).map(code => [code, 10])),\n};\n\nconst SHIPPING_LABELS = {\n  GB: 'England',\n  // European countries will use their country name\n  AL: 'Albania', AD: 'Andorra', AT: 'Austria', BE: 'Belgium', BA: 'Bosnia and Herzegovina', BG: 'Bulgaria',\n  HR: 'Croatia', CY: 'Cyprus', CZ: 'Czech Republic', DK: 'Denmark', EE: 'Estonia', FI: 'Finland',\n  FR: 'France', DE: 'Germany', GR: 'Greece', HU: 'Hungary', IS: 'Iceland', IE: 'Ireland', IT: 'Italy',\n  LV: 'Latvia', LI: 'Liechtenstein', LT: 'Lithuania', LU: 'Luxembourg', MT: 'Malta', MC: 'Monaco',\n  ME: 'Montenegro', NL: 'Netherlands', MK: 'North Macedonia', NO: 'Norway', PL: 'Poland', PT: 'Portugal',\n  RO: 'Romania', SM: 'San Marino', RS: 'Serbia', SK: 'Slovakia', SI: 'Slovenia', ES: 'Spain',\n  SE: 'Sweden', CH: 'Switzerland',\n};\n\nconst DEFAULT_SHIPPING_RATE = 12;\n\nconst CURRENCY_MULTIPLIERS = {\n  'jpy': 1,  // Japanese Yen doesn't use decimals\n  'krw': 1,  // South Korean Won doesn't use decimals\n  'vnd': 1,  // Vietnamese Dong doesn't use decimals\n};\n\nconst CheckoutForm = () => {\n  // --- Hooks ---\n  const stripe = useStripe();\n  const elements = useElements();\n  const router = useRouter();\n  const { cart, getTotalPrice, clearCart, incrementItemQty, decrementItemQty, removeFromCart } = useCart();\n  const { formatPrice, setCurrency, currency } = useCurrency();\n\n  // --- State ---\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [paymentElementReady, setPaymentElementReady] = useState(false);\n  const [showShippingInfo, setShowShippingInfo] = useState(false);\n  const [showMobileSummary, setShowMobileSummary] = useState(false);\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [authenticatedEmail, setAuthenticatedEmail] = useState('');\n  const [itemErrors, setItemErrors] = useState({});\n  const [customerInfo, setCustomerInfo] = useState({\n    email: '',\n    name: '',\n    address: {\n      line1: '',\n      line2: '',\n      city: '',\n      postal_code: '',\n      country: 'GB',\n      state: '',\n    },\n  });\n\n  // --- Refs ---\n  const errorTimeoutsRef = useRef({});\n  const isNavigatingToSuccessRef = useRef(false);\n\n  // --- Computed Values ---\n  const subtotal = getTotalPrice();\n  const selectedCountry = customerInfo.address.country;\n  \n  // Calculate shipping cost\n  // Use fixed rates from SHIPPING_RATES\n  const shippingCost = cart.length === 0\n    ? 0\n    : SHIPPING_RATES[selectedCountry] ?? DEFAULT_SHIPPING_RATE;\n  \n  const shippingLabel = SHIPPING_LABELS[selectedCountry] || 'International';\n  const showInternationalNote = selectedCountry && selectedCountry.toUpperCase() !== 'GB' && cart.length > 0;\n  const totalWithShipping = subtotal + shippingCost;\n\n  // --- Effects ---\n  // Suppress non-critical hCaptcha errors (used internally by Stripe for fraud detection)\n  // These 401 errors are harmless - Stripe falls back to other fraud detection methods\n  useEffect(() => {\n    const handleUnhandledRejection = (event) => {\n      const errorMessage = event.reason?.message || event.reason?.toString() || '';\n      const errorUrl = event.reason?.url || '';\n      \n      // Suppress hCaptcha 401 errors (non-critical, Stripe handles gracefully)\n      if (errorMessage.includes('hcaptcha') || \n          errorMessage.includes('hCaptcha') ||\n          errorUrl.includes('api.hcaptcha.com') ||\n          (errorMessage.includes('401') && errorMessage.includes('Unauthorized'))) {\n        event.preventDefault(); // Prevent error from showing in console\n      }\n    };\n    \n    window.addEventListener('unhandledrejection', handleUnhandledRejection);\n    \n    return () => {\n      window.removeEventListener('unhandledrejection', handleUnhandledRejection);\n    };\n  }, []);\n\n  // Automatically change currency based on selected country\n  useEffect(() => {\n    if (selectedCountry) {\n      if (EUROPEAN_COUNTRIES.has(selectedCountry)) {\n        // Set currency to EUR for European countries\n        setCurrency('EUR');\n      } else if (selectedCountry === 'GB') {\n        // Set currency to GBP for UK\n        setCurrency('GBP');\n      }\n    }\n  }, [selectedCountry, setCurrency]);\n\n  // Check authentication status on mount and when returning from login\n  useEffect(() => {\n    const checkAuth = () => {\n      const userEmail = localStorage.getItem('userEmail');\n      const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';\n      \n      if (isLoggedIn && userEmail) {\n        setIsAuthenticated(true);\n        setAuthenticatedEmail(userEmail);\n        // Auto-fill email in customer info if empty\n        setCustomerInfo(prev => {\n          if (!prev.email) {\n            return {\n              ...prev,\n              email: userEmail\n            };\n          }\n          return prev;\n        });\n      } else {\n        setIsAuthenticated(false);\n        setAuthenticatedEmail('');\n      }\n    };\n    \n    checkAuth();\n    \n    // Check auth when window gains focus (user returns from login page)\n    const handleFocus = () => {\n      checkAuth();\n    };\n    \n    // Also listen for storage changes (when user logs in/out in another tab)\n    const handleStorageChange = (e) => {\n      if (e.key === 'userEmail' || e.key === 'isLoggedIn') {\n        checkAuth();\n      }\n    };\n    \n    window.addEventListener('focus', handleFocus);\n    window.addEventListener('storage', handleStorageChange);\n    \n    return () => {\n      window.removeEventListener('focus', handleFocus);\n      window.removeEventListener('storage', handleStorageChange);\n    };\n  }, []); // Run once on mount\n  \n  // Auto-clear error messages after 3 seconds\n  useEffect(() => {\n    const timeouts = errorTimeoutsRef.current;\n    \n    Object.keys(itemErrors).forEach((itemKey) => {\n      if (timeouts[itemKey]) {\n        clearTimeout(timeouts[itemKey]);\n      }\n      \n      timeouts[itemKey] = setTimeout(() => {\n        setItemErrors(prev => {\n          const newErrors = { ...prev };\n          if (typeof newErrors[itemKey] === 'string') {\n            delete newErrors[itemKey];\n          } else if (newErrors[itemKey] && typeof newErrors[itemKey] === 'object') {\n            delete newErrors[itemKey];\n          }\n          return newErrors;\n        });\n        delete timeouts[itemKey];\n      }, 3000);\n    });\n\n    return () => {\n      Object.values(timeouts).forEach(timeout => {\n        clearTimeout(timeout);\n      });\n    };\n  }, [itemErrors]);\n\n  // Redirect if cart is empty\n  useEffect(() => {\n    if (cart.length === 0 && !isNavigatingToSuccessRef.current) {\n      router.push('/cart');\n    }\n  }, [cart, router]);\n\n  // Reset payment element ready state when elements change\n  useEffect(() => {\n    setPaymentElementReady(false);\n  }, [elements]);\n\n  // --- Handlers ---\n  const handleIncrementWithCheck = (itemId) => {\n    // Find item by ID or by index\n    const item = typeof itemId === 'string' \n      ? cart.find(i => i.id === itemId)\n      : (typeof itemId === 'number' && itemId >= 0 && itemId < cart.length ? cart[itemId] : null);\n    \n    if (!item) {\n      return;\n    }\n    \n    const maxAvailable = getMaxAvailableQuantity(item, cart);\n    const canIncrement = maxAvailable === null || maxAvailable > 0;\n    \n    if (canIncrement) {\n      incrementItemQty(itemId);\n      // Clear error when successfully incrementing\n      setItemErrors(prev => {\n        const newErrors = { ...prev };\n        delete newErrors[itemId];\n        return newErrors;\n      });\n    } else {\n      // Show inline error message for out of stock items\n      let itemName = '';\n      \n      if (item.type === 'charm') {\n        itemName = item.name || item.pin?.name || 'Charm';\n        const errorMessage = `Oops! We don't have any more ${itemName} in stock right now, so you can't add more to your basket.`;\n        setItemErrors(prev => ({\n          ...prev,\n          [itemId]: errorMessage\n        }));\n      } else {\n        // For case items, just increment (they handle their own errors)\n        console.log('⚠️ Case item - incrementing anyway despite inventory check');\n        incrementItemQty(itemId);\n      }\n    }\n  };\n\n  // Handle decrement with error clearing\n  const handleDecrementWithCheck = (itemId) => {\n    decrementItemQty(itemId);\n    // Clear error when decrementing\n    setItemErrors(prev => {\n      const newErrors = { ...prev };\n      delete newErrors[itemId];\n      return newErrors;\n    });\n  };\n\n\n  // Redirect if cart is empty (but not if we're navigating to success page)\n  useEffect(() => {\n    // Don't redirect if we're navigating to success page\n    if (cart.length === 0 && !isNavigatingToSuccessRef.current) {\n      router.push('/cart');\n    }\n  }, [cart, router]);\n\n\n  const handleInputChange = (e) => {\n    const { name, value } = e.target;\n    if (name.includes('.')) {\n      const [parent, child] = name.split('.');\n      setCustomerInfo(prev => ({\n        ...prev,\n        [parent]: {\n          ...prev[parent],\n          [child]: value,\n        },\n      }));\n    } else {\n      setCustomerInfo(prev => ({\n        ...prev,\n        [name]: value,\n      }));\n    }\n  };\n\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n    \n    if (!stripe || !elements) {\n      setError('Stripe is not loaded. Please wait...');\n      return;\n    }\n\n    // Check if Payment Element is ready\n    const paymentElement = elements.getElement('payment');\n    if (!paymentElement) {\n      setError('Payment form is not ready. Please wait...');\n      return;\n    }\n\n    if (!paymentElementReady) {\n      setError('Payment form is still loading. Please wait...');\n      return;\n    }\n\n    setLoading(true);\n    setError(null);\n\n    try {\n      // Double-check inventory from Supabase before processing payment\n      // This prevents race conditions where another customer bought the last item\n      await refreshInventoryFromSupabase();\n      \n      // Check each item in cart against current Supabase inventory\n      // Allow purchase if user has the item in their cart (even if it shows as sold out)\n      const outOfStockItems = [];\n      \n      // Group items by their inventory key (case+color or charm identity)\n      const itemGroups = new Map();\n      \n      for (const item of cart) {\n        let groupKey = '';\n        let itemName = '';\n        \n        if (item.type === 'charm') {\n          const category = item.category || item.pin?.category || 'colorful';\n          const pinName = item.pin?.name || item.name || '';\n          groupKey = `charm-${category}-${pinName}`;\n          itemName = item.name || item.pin?.name || 'Charm';\n        } else if (item.caseType && item.color) {\n          groupKey = `case-${item.caseType}-${item.color}`;\n          itemName = item.caseName || item.name || 'Passport Case';\n        } else {\n          groupKey = item.id || `item-${item.name}`;\n          itemName = item.name || 'Item';\n        }\n        \n        if (!itemGroups.has(groupKey)) {\n          itemGroups.set(groupKey, {\n            item: item,\n            name: itemName,\n            totalQuantity: 0\n          });\n        }\n        \n        const group = itemGroups.get(groupKey);\n        group.totalQuantity += (item.quantity || 1);\n      }\n      \n      // Check each group against base inventory (without cart subtraction)\n      for (const [groupKey, group] of itemGroups) {\n        // Get base inventory without subtracting cart items\n        const baseInventory = getMaxAvailableQuantity(group.item, []);\n        \n        // If item has limited stock\n        if (baseInventory !== null) {\n          // Check if base inventory is sufficient for what's in cart\n          // If baseInventory is 0, it means truly out of stock\n          // If baseInventory > 0 but less than totalQuantity, insufficient stock\n          if (baseInventory === 0 || group.totalQuantity > baseInventory) {\n            outOfStockItems.push(group.name);\n          }\n        }\n        // If baseInventory is null, it means unlimited stock - always allow\n      }\n      \n      // If any items are out of stock, prevent payment\n      if (outOfStockItems.length > 0) {\n        const itemsList = outOfStockItems.length === 1 \n          ? outOfStockItems[0]\n          : outOfStockItems.slice(0, -1).join(', ') + ' and ' + outOfStockItems[outOfStockItems.length - 1];\n        \n        const errorMessage = `Sorry, ${itemsList} ${outOfStockItems.length === 1 ? 'is' : 'are'} no longer available. Please remove ${outOfStockItems.length === 1 ? 'it' : 'them'} from your cart and try again.`;\n        setError(errorMessage);\n        setLoading(false);\n        return;\n      }\n      // Confirm the payment with Stripe\n      // The clientSecret is automatically retrieved from Elements context\n      const { error: stripeError, paymentIntent } = await stripe.confirmPayment({\n        elements,\n        confirmParams: {\n          return_url: `${window.location.origin}/payment-success`,\n          payment_method_data: {\n            billing_details: {\n              name: customerInfo.name,\n              email: customerInfo.email,\n              phone: null, // Required when fields.billing_details.phone is set to 'never'\n              address: {\n                line1: customerInfo.address.line1,\n                line2: customerInfo.address.line2,\n                city: customerInfo.address.city,\n                postal_code: customerInfo.address.postal_code,\n                country: customerInfo.address.country,\n                state: customerInfo.address.state,\n              },\n            },\n          },\n        },\n        redirect: 'if_required',\n      });\n\n      if (stripeError) {\n        setError(stripeError.message || 'An error occurred while processing your payment.');\n        setLoading(false);\n        return;\n      }\n\n      if (paymentIntent && paymentIntent.status === 'succeeded') {\n        // Payment succeeded - navigate to success page\n        isNavigatingToSuccessRef.current = true; // Set flag to prevent redirect\n        const cartItemsCopy = [...cart]; // Create a copy to preserve cart data\n        clearCart(); // Clear cart before navigation\n        // Store data in sessionStorage since Next.js doesn't support navigation state\n        if (typeof window !== 'undefined') {\n          sessionStorage.setItem('paymentSuccessData', JSON.stringify({\n            paymentIntent,\n            customerInfo,\n            items: cartItemsCopy,\n            shippingCost,\n            totalWithShipping,\n            subtotal,\n          }));\n        }\n        router.push('/payment-success');\n      } else if (paymentIntent && paymentIntent.status === 'requires_action') {\n        // Payment requires additional action (e.g., 3D Secure)\n        // Stripe will handle redirect automatically to return_url\n        // After redirect completes, user will land on payment-success page\n      } else if (paymentIntent) {\n        // Other status (processing, requires_confirmation, etc.)\n        // For most cases, we still show success as the payment was initiated\n        // Note: 'processing' status means payment is being processed and may take time\n        isNavigatingToSuccessRef.current = true; // Set flag to prevent redirect\n        const cartItemsCopy = [...cart]; // Create a copy to preserve cart data\n        clearCart(); // Clear cart before navigation\n        // Store data in sessionStorage since Next.js doesn't support navigation state\n        if (typeof window !== 'undefined') {\n          sessionStorage.setItem('paymentSuccessData', JSON.stringify({\n            paymentIntent,\n            customerInfo,\n            items: cartItemsCopy,\n            shippingCost,\n            totalWithShipping,\n            subtotal,\n          }));\n        }\n        router.push('/payment-success');\n      }\n      } catch (err) {\n        setError('An error occurred while processing your payment.');\n      } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"h-full w-full\">\n      <MobileOrderSummary\n        isOpen={showMobileSummary}\n        onToggle={() => setShowMobileSummary(prev => !prev)}\n        cartLength={cart.length}\n        totalWithShipping={totalWithShipping}\n        formatPrice={formatPrice}\n        cart={cart}\n        subtotal={subtotal}\n        shippingCost={shippingCost}\n        shippingLabel={shippingLabel}\n        showInternationalNote={showInternationalNote}\n        onShowShippingInfo={() => setShowShippingInfo(true)}\n        onIncrement={handleIncrementWithCheck}\n        onDecrement={handleDecrementWithCheck}\n        onRemove={removeFromCart}\n        itemErrors={itemErrors}\n      />\n \n      <div className=\"flex flex-col lg:flex-row  w-full \">\n        {/* Checkout form */}\n        <form\n          onSubmit={handleSubmit}\n          className=\"space-y-6  mt-6 lg:mt-0 lg:p-6 w-full lg:w-1/2 lg:flex-shrink-0\"\n        > \n        {/* Customer Information */}\n        <CustomerInfoForm \n          customerInfo={customerInfo}\n          onInputChange={handleInputChange}\n          isAuthenticated={isAuthenticated}\n          authenticatedEmail={authenticatedEmail}\n          onSignIn={(email) => {\n            setIsAuthenticated(true);\n            setAuthenticatedEmail(email);\n          }}\n          onSignOut={() => {\n            setIsAuthenticated(false);\n            setAuthenticatedEmail('');\n            localStorage.removeItem('userId'); // Clear user ID\n          }}\n        />\n\n        {/* Payment Information */}\n        <PaymentSection\n          paymentElementReady={paymentElementReady}\n          error={error}\n          onPaymentReady={() => setPaymentElementReady(true)}\n          onPaymentError={(errorMessage) => {\n            setError(errorMessage);\n          }}\n        />\n\n        <button\n          type=\"submit\"\n          disabled={!stripe || !elements || loading || !paymentElementReady}\n          className=\"w-full py-3 text-sm uppercase tracking-wider font-light disabled:opacity-50 disabled:cursor-not-allowed font-inter bg-btn-primary hover:bg-btn-primary-hover text-btn-primary-text border border-btn-primary-border hover:border-btn-primary-hover transition-all duration-200\"\n        >\n          {loading ? 'Processing...' : 'Complete Payment'}\n</button>\n        {showInternationalNote && (\n          <InternationalNote\n            className=\"mt-4\"\n            showOnDesktop={false}\n            showOnMobile={true}\n            title=\"Custom Duties & Taxes Included\"\n            message=\"The total amount you pay includes all applicable customs duties & taxes. We guarantee no additional charges on delivery.\"\n            variant=\"gray\"\n          />\n        )}\n        </form>\n\n        {/* Order Summary */}\n        <aside className=\"hidden lg:flex border border-gray-200 bg-yellow-50 p-6 w-full lg:w-1/2 lg:sticky lg:top-20 mt-4 lg:mt-0 flex-col max-h-[calc(100vh-8rem)]\">\n          <div className=\"flex-1 overflow-hidden flex flex-col min-h-0\">\n            <OrderSummary\n              cart={cart}\n              formatPrice={formatPrice}\n              subtotal={subtotal}\n              shippingCost={shippingCost}\n              shippingLabel={shippingLabel}\n              totalWithShipping={totalWithShipping}\n              showInternationalNote={showInternationalNote}\n              onShowShippingInfo={() => setShowShippingInfo(true)}\n              onIncrement={handleIncrementWithCheck}\n              onDecrement={handleDecrementWithCheck}\n              onRemove={removeFromCart}\n              itemErrors={itemErrors}\n            />\n          </div>\n        </aside>\n        \n        <ShippingInfoModal\n          isOpen={showShippingInfo}\n          onClose={() => setShowShippingInfo(false)}\n        />\n      </div>\n      \n      {/* Footer Links */}\n      <div className=\"w-full border-t border-gray-200 mt-8 pt-6 pb-6\">\n        <div className=\"max-w-6xl mx-auto px-4 lg:px-6\">\n          <div className=\"flex flex-wrap justify-center gap-4 md:gap-6 text-xs text-gray-600 font-light font-inter\">\n            <Link \n              href=\"/returns\" \n              className=\"hover:text-gray-900 transition-colors underline\"\n            >\n              Refund Policy\n            </Link>\n            <span className=\"text-gray-300\">|</span>\n            <Link \n              href=\"/shipping\" \n              className=\"hover:text-gray-900 transition-colors underline\"\n            >\n              Shipping\n            </Link>\n            <span className=\"text-gray-300\">|</span>\n            <Link \n              href=\"/returns\" \n              className=\"hover:text-gray-900 transition-colors underline\"\n            >\n              Cancellations\n            </Link>\n            <span className=\"text-gray-300\">|</span>\n            <Link \n              href=\"/about\" \n              className=\"hover:text-gray-900 transition-colors underline\"\n            >\n              Contact\n            </Link>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst Checkout = () => {\n  const { cart, getTotalPrice } = useCart();\n  const { currency, convertPrice } = useCurrency();\n  const router = useRouter();\n  const [options, setOptions] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [paymentError, setPaymentError] = useState(null);\n  const hasInitializedRef = useRef(false);\n\n  useEffect(() => {\n    // Don't redirect to cart if we're already on a different page (e.g., payment-success)\n    if (typeof window !== 'undefined') {\n      const currentPath = window.location.pathname;\n      if (cart.length === 0 && (currentPath === '/checkout' || currentPath.includes('/checkout'))) {\n        router.push('/cart');\n        return;\n      }\n    }\n\n    // Only initialize payment options once when we have items in cart\n    if (cart.length === 0 || hasInitializedRef.current || options !== null) {\n      return;\n    }\n\n    const initializeOptions = async () => {\n      try {\n        hasInitializedRef.current = true;\n        setLoading(true);\n        setPaymentError(null); // Clear any previous errors\n        \n        // Get total price in GBP, then convert to selected currency\n        const totalPriceGBP = getTotalPrice();\n        const totalPriceInCurrency = convertPrice(totalPriceGBP);\n        \n        // Convert to smallest currency unit (pence, cents, etc.)\n        // For currencies like JPY that don't use decimals, multiply by 1\n        const currencyMultipliers = {\n          'jpy': 1,  // Japanese Yen doesn't use decimals\n          'krw': 1,  // South Korean Won doesn't use decimals\n          'vnd': 1,  // Vietnamese Dong doesn't use decimals\n        };\n        const multiplier = currencyMultipliers[currency.toLowerCase()] || 100;\n        const amount = Math.round(totalPriceInCurrency * multiplier);\n        const currencyCode = currency.toLowerCase();\n        \n        const paymentData = {\n          amount,\n          currency: currencyCode,\n          items: cart,\n          customerInfo: {},\n        };\n        \n        const result = await createPaymentIntent(paymentData);\n\n        setOptions({\n          clientSecret: result.client_secret,\n          appearance: {\n            theme: 'stripe',\n            variables: {\n              colorPrimary: '#3b82f6',\n              colorBackground: '#ffffff',\n              colorText: '#1f2937',\n              colorDanger: '#ef4444',\n              fontFamily: 'system-ui, sans-serif',\n              spacingUnit: '4px',\n              borderRadius: '8px',\n            },\n          },\n        });\n      } catch (err) {\n        // More detailed error message\n        let errorMessage = 'Failed to initialize payment. ';\n        if (err?.message) {\n          errorMessage += err.message;\n        } else {\n          errorMessage += 'Please ensure the backend server is running on port 3001.';\n        }\n        \n        setPaymentError(errorMessage);\n        hasInitializedRef.current = false; // Allow retry on error\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    initializeOptions();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [cart.length]); // Only re-run if cart length changes (hasInitializedRef prevents re-init)\n\n  if (loading) {\n    return <LoadingState />;\n  }\n\n  if (paymentError) {\n    return (\n      <div className=\"min-h-screen flex flex-col bg-white\">\n        <CheckoutHeader />\n        <div className=\"flex-1 flex items-center justify-center bg-white py-10\">\n          <div className=\"max-w-md mx-auto px-4 text-center\">\n            <div className=\"bg-red-50 border border-red-200 rounded-lg p-6\">\n              <h2 className=\"text-xl font-semibold text-red-900 mb-3\" style={{fontFamily: \"'Poppins', sans-serif\"}}>\n                Payment Setup Error\n              </h2>\n              <p className=\"text-red-700 mb-4 font-inter\">\n                {paymentError}\n              </p>\n              <div className=\"text-sm text-red-600 mb-4 font-inter\">\n                <p className=\"mb-2\">To fix this issue:</p>\n                <ol className=\"list-decimal list-inside space-y-1 text-left\">\n                  <li>Make sure your backend server is running: <code className=\"bg-red-100 px-1 rounded\">npm run server</code></li>\n                  <li>Verify the server is running on port 3001</li>\n                  <li>Check that the proxy is configured correctly</li>\n                  <li>Refresh this page to retry</li>\n                </ol>\n              </div>\n              <button\n                onClick={() => {\n                  setPaymentError(null);\n                  hasInitializedRef.current = false;\n                  window.location.reload();\n                }}\n                className=\"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-md transition-colors font-inter\"\n              >\n                Retry\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (!options) {\n    return <LoadingState />;\n  }\n\n  // Validate Stripe key is set and not the placeholder\n  const isPlaceholderKey = stripePublishableKey === 'pk_test_51234567890abcdefghijklmnopqrstuvwxyz1234567890';\n  if (!stripePublishableKey || isPlaceholderKey) {\n    return (\n      <div className=\"min-h-screen flex flex-col bg-white\">\n        <CheckoutHeader />\n        <div className=\"flex-1 flex items-center justify-center bg-white py-10\">\n          <div className=\"max-w-md mx-auto px-4 text-center\">\n            <div className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-6\">\n              <h2 className=\"text-xl font-semibold text-yellow-900 mb-3\" style={{fontFamily: \"'Poppins', sans-serif\"}}>\n                Stripe Configuration Missing\n              </h2>\n              <p className=\"text-yellow-700 mb-4 font-inter\">\n                Please set NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY in your environment variables.\n              </p>\n              <p className=\"text-xs text-yellow-600 mb-2 font-inter\">\n                (Also supports VITE_STRIPE_PUBLISHABLE_KEY for backward compatibility)\n              </p>\n              <p className=\"text-sm text-yellow-600 font-inter\">\n                The Stripe publishable key is required to process payments.\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen flex flex-col bg-white\">\n      <CheckoutHeader />\n      <div className=\"flex-1 flex items-stretch bg-white py-10\">\n        <div className=\"flex-1 max-w-6xl mx-auto px-4 lg:px-6\">\n          <Elements stripe={stripePromise} options={options}>\n            <CheckoutForm />\n          </Elements>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Checkout;\n"],"names":[],"mappings":"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"}}]
}