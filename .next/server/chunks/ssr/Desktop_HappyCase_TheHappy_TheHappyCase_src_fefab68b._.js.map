{"version":3,"sources":["../../../../../../../../Desktop/HappyCase/TheHappy/TheHappyCase/src/component/PaymentSucess/OrderItem.jsx","../../../../../../../../Desktop/HappyCase/TheHappy/TheHappyCase/src/page-components/MyOrders/index.jsx"],"sourcesContent":["import React from 'react';\nimport { normalizeImagePath } from '../../utils/imagePath';\nimport { getColorName } from '../../utils/createyours/helpers';\n\nconst OrderItem = ({ item }) => {\n  // Handle both saved order format (with unit_price, total_price) and original format (price, totalPrice)\n  const itemImage = item.design_image || item.designImage || item.case_image || item.caseImage || item.image;\n  const itemName = item.caseName || item.name || 'Custom Case';\n  \n  // Calculate price - handle both formats\n  let itemPrice = 0;\n  if (item.total_price !== undefined) {\n    // Saved order format: use total_price directly\n    itemPrice = parseFloat(item.total_price) || 0;\n  } else if (item.totalPrice !== undefined) {\n    // Original format: totalPrice * quantity\n    itemPrice = (parseFloat(item.totalPrice) || 0) * (item.quantity || 1);\n  } else if (item.price !== undefined) {\n    // Original format: price * quantity\n    itemPrice = (parseFloat(item.price) || 0) * (item.quantity || 1);\n  }\n  \n  // Get readable color name from hex code or image path\n  const colorName = item.color ? getColorName(item.color, item.case_image || item.caseImage || item.image) : null;\n\n  return (\n    <div className=\"bg-gray-50 p-4 rounded-lg border border-gray-100\">\n      <div className=\"flex items-start gap-4\">\n        {itemImage && (\n          <img \n            src={normalizeImagePath(itemImage)} \n            alt={itemName}\n            className=\"w-16 h-16 md:w-20 md:h-20 object-contain rounded\"\n            loading=\"lazy\"\n          />\n        )}\n        <div className=\"flex-1\">\n          <p className=\"font-semibold text-gray-900 mb-1 font-inter\">\n            {itemName}\n          </p>\n          {colorName && (\n            <p className=\"text-sm text-gray-600 mb-1 font-inter\">\n              Color: <span className=\"font-medium\">{colorName}</span>\n            </p>\n          )}\n          {((item.pinsDetails && item.pinsDetails.length > 0) || (item.pins && Array.isArray(item.pins) && item.pins.length > 0)) && (\n            <p className=\"text-sm text-gray-600 mb-1 font-inter\">\n              Charms: <span className=\"font-medium\">{(item.pinsDetails || item.pins || []).length}</span>\n            </p>\n          )}\n          {item.quantity > 1 && (\n            <p className=\"text-sm text-gray-600 mb-1 font-inter\">\n              Quantity: <span className=\"font-medium\">{item.quantity}</span>\n            </p>\n          )}\n          <p className=\"text-sm font-semibold text-gray-900 mt-2 font-inter\">\n            Â£{itemPrice.toFixed(2)}\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default OrderItem;\n","'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { getSupabaseClient } from '../../utils/supabaseClient';\nimport { getApiUrl } from '../../utils/apiConfig';\nimport OrderItem from '../../component/PaymentSucess/OrderItem';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faChartLine } from '@fortawesome/free-solid-svg-icons';\n\n// Get shared Supabase client instance\nconst supabase = getSupabaseClient();\n\nconst AUTHORIZED_EMAIL = 'thehappycase.shop@gmail.com';\n\n// Helper to format order date (handles both ISO string and timestamp)\nconst formatOrderDate = (dateInput) => {\n  if (!dateInput) return 'N/A';\n  \n  let date;\n  if (typeof dateInput === 'string') {\n    // If it's an ISO string from Supabase\n    date = new Date(dateInput);\n  } else if (typeof dateInput === 'number') {\n    // If it's a Unix timestamp (in seconds)\n    date = new Date(dateInput * 1000);\n  } else {\n    return 'N/A';\n  }\n  \n  return date.toLocaleDateString('en-GB', {\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric',\n    hour: '2-digit',\n    minute: '2-digit',\n  });\n};\n\nconst MyOrders = () => {\n  const router = useRouter();\n  const [orders, setOrders] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [showRefundModal, setShowRefundModal] = useState(false);\n  const [isAuthorized, setIsAuthorized] = useState(false);\n  const [userId, setUserId] = useState(null);\n\n  useEffect(() => {\n    // Check if user is logged in\n    const userEmail = localStorage.getItem('userEmail');\n    const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';\n\n    if (!isLoggedIn || !userEmail) {\n      // Redirect to login with return path\n      router.push('/login?redirect=/my-orders');\n      return;\n    }\n\n    // Check if user is authorized for dashboard access\n    // First check localStorage email as fallback\n    const emailFromStorage = userEmail?.toLowerCase().trim();\n    const authorizedEmail = AUTHORIZED_EMAIL.toLowerCase().trim();\n    \n    if (emailFromStorage === authorizedEmail) {\n      setIsAuthorized(true);\n    }\n\n    // Get user ID from Supabase auth if available\n    if (supabase) {\n      supabase.auth.getUser().then(({ data, error }) => {\n        if (!error && data?.user) {\n          const email = data.user?.email?.toLowerCase().trim();\n          setIsAuthorized(email === authorizedEmail);\n          \n          // Set user ID for filtering orders\n          if (data.user?.id) {\n            setUserId(data.user.id);\n            // Fetch orders with user_id\n            fetchUserOrders(data.user.id, userEmail);\n          } else {\n            // Fallback to email if no user ID\n            fetchUserOrders(null, userEmail);\n          }\n        } else {\n          // If Supabase auth fails, fall back to email filtering\n          fetchUserOrders(null, userEmail);\n        }\n      });\n    } else {\n      // No Supabase, use email filtering\n      fetchUserOrders(null, userEmail);\n    }\n  }, [router]);\n\n  const fetchUserOrders = async (userId = null, email = null) => {\n    setLoading(true);\n    setError('');\n\n    try {\n      // Prefer user_id if available, otherwise use email\n      let url;\n      if (userId) {\n        url = getApiUrl(`/get-orders?user_id=${encodeURIComponent(userId)}`);\n        console.log('ðŸ“¡ Fetching orders by user_id:', userId);\n      } else if (email) {\n        url = getApiUrl(`/get-orders?email=${encodeURIComponent(email)}`);\n        console.log('ðŸ“¡ Fetching orders by email:', email);\n      } else {\n        throw new Error('No user_id or email provided');\n      }\n      \n      console.log('ðŸ“¡ Fetching orders from:', url);\n      \n      const response = await fetch(url);\n      \n      // Check if response is HTML (404 page from dev server) instead of JSON\n      const contentType = response.headers.get('content-type') || '';\n      if (contentType.includes('text/html')) {\n        throw new Error('Backend server returned HTML (likely 404). Is the server running on port 3001?');\n      }\n      \n      // Get response text first (can be used for both JSON and plain text)\n      const responseText = await response.text();\n      \n      // Check if response is empty\n      if (!responseText || responseText.trim() === '') {\n        console.error('âŒ Empty response received. Status:', response.status, response.statusText);\n        console.error('âŒ Response headers:', Object.fromEntries(response.headers.entries()));\n        throw new Error(`Server returned empty response (${response.status}). Check server logs for errors. Make sure the backend server is running on port 3001.`);\n      }\n      \n      // Try to parse as JSON\n      let data;\n      try {\n        data = JSON.parse(responseText);\n      } catch (parseError) {\n        // If not JSON, use text as error message\n        console.error('âŒ Failed to parse JSON response:', parseError);\n        console.error('âŒ Response status:', response.status, response.statusText);\n        console.error('âŒ Response text (first 500 chars):', responseText.substring(0, 500));\n        throw new Error(`Server returned invalid JSON (${response.status}): ${parseError.message}. Response: ${responseText.substring(0, 200)}`);\n      }\n      \n      if (!response.ok) {\n        // Server returned an error response\n        console.error('âŒ Server error response:', { status: response.status, data });\n        const errorMsg = data?.error || data?.message || `Server error: ${response.status} ${response.statusText}`;\n        throw new Error(errorMsg);\n      }\n      \n      if (data.success && data.orders !== undefined) {\n        setOrders(data.orders || []);\n      } else if (data.error) {\n        setError(data.error || 'Failed to load orders');\n      } else {\n        // Fallback: if response structure is different, try to use data directly\n        setOrders(Array.isArray(data) ? data : (data.orders || []));\n      }\n    } catch (err) {\n      console.error('Error fetching orders:', err);\n      setError(err.message || 'Failed to load your orders. Please try again later.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleLogout = () => {\n    localStorage.removeItem('userEmail');\n    localStorage.removeItem('isLoggedIn');\n    localStorage.removeItem('userId'); // Clear user ID\n    router.push('/login');\n  };\n\n  const userEmail = localStorage.getItem('userEmail');\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 py-8 md:py-12\">\n        <div className=\"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"text-center py-12\">\n            <div className=\"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900\"></div>\n            <p className=\"mt-4 text-gray-600 font-inter\">Loading your orders...</p>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 py-8 md:py-12\">\n        <div className=\"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"bg-white rounded-lg shadow-sm p-6 md:p-8 text-center\">\n            <div className=\"text-red-600 mb-4\">\n              <svg className=\"mx-auto h-12 w-12\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n              </svg>\n            </div>\n            <h2 className=\"text-xl font-semibold text-gray-900 mb-2\" style={{fontFamily: \"'Poppins', sans-serif\"}}>\n              Error Loading Orders\n            </h2>\n            <p className=\"text-gray-600 mb-6 font-inter\">{error}</p>\n            <button\n              onClick={() => fetchUserOrders(userEmail)}\n              className=\"px-6 py-3 bg-gray-900 hover:bg-gray-800 text-white rounded-md transition-colors font-inter\"\n            >\n              Try Again\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 py-8 md:py-12\">\n      <div className=\"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8\">\n        {/* Header */}\n        <div className=\"mb-8\">\n          <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4\">\n            <div>\n              <h1 className=\"text-3xl md:text-4xl font-bold text-gray-900 mb-2\" style={{fontFamily: \"'Poppins', sans-serif\"}}>\n                My Orders\n              </h1>\n              <p className=\"text-gray-600 font-inter\">\n                {userEmail}\n              </p>\n            </div>\n            <div className=\"flex items-center gap-3 self-start\">\n              {isAuthorized && (\n                <button\n                  onClick={() => router.push('/dashboard')}\n                  className=\"px-4 py-2 text-sm text-white bg-gray-900 hover:bg-gray-800 rounded-md transition-colors font-inter flex items-center gap-2\"\n                >\n                  <FontAwesomeIcon icon={faChartLine} className=\"w-4 h-4\" />\n                  Dashboard\n                </button>\n              )}\n              <button\n                onClick={handleLogout}\n                className=\"px-4 py-2 text-sm text-gray-600 hover:text-gray-900 border border-gray-300 rounded-md hover:bg-gray-50 transition-colors font-inter\"\n              >\n                Sign Out\n              </button>\n            </div>\n          </div>\n        </div>\n\n        {/* Orders List */}\n        {orders.length === 0 ? (\n          <div className=\"bg-white rounded-lg shadow-sm p-8 md:p-12 text-center\">\n            <div className=\"text-gray-400 mb-4\">\n              <svg className=\"mx-auto h-16 w-16\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z\" />\n              </svg>\n            </div>\n            <h2 className=\"text-xl font-semibold text-gray-900 mb-2\" style={{fontFamily: \"'Poppins', sans-serif\"}}>\n              No Orders Yet\n            </h2>\n            <p className=\"text-gray-600 mb-6 font-inter\">\n              You haven't placed any orders yet. Start shopping to see your orders here!\n            </p>\n            <button\n              onClick={() => router.push('/')}\n              className=\"px-6 py-3 bg-gray-900 hover:bg-gray-800 text-white rounded-md transition-colors font-inter\"\n            >\n              Start Shopping\n            </button>\n          </div>\n        ) : (\n          <div className=\"space-y-6\">\n            {orders.map((order) => (\n              <div key={order.order_id} className=\"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden\">\n                {/* Order Header */}\n                <div className=\"bg-gray-50 px-6 py-4 border-b border-gray-200\">\n                  <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\">\n                    <div>\n                      <h3 className=\"text-lg font-semibold text-gray-900 mb-1 font-inter\">\n                        Order #{order.order_id.slice(-8).toUpperCase()}\n                      </h3>\n                      <p className=\"text-sm text-gray-600 font-inter\">\n                        Placed on {formatOrderDate(order.order_date)}\n                      </p>\n                    </div>\n                    <div className=\"flex flex-col sm:items-end gap-2\">\n                      <div className=\"flex items-center gap-2\">\n                        <span className={`px-3 py-1 rounded-full text-xs font-semibold font-inter ${\n                          order.status === 'succeeded' || order.status === 'complete'\n                            ? 'bg-green-100 text-green-800'\n                            : order.status === 'processing'\n                            ? 'bg-yellow-100 text-yellow-800'\n                            : 'bg-gray-100 text-gray-800'\n                        }`}>\n                          {order.status?.charAt(0).toUpperCase() + order.status?.slice(1)}\n                        </span>\n                      </div>\n                      <p className=\"text-lg font-bold text-gray-900 font-inter\">\n                        Â£{parseFloat(order.total_amount).toFixed(2)}\n                      </p>\n                    </div>\n                  </div>\n                </div>\n\n                {/* Order Items */}\n                <div className=\"p-6\">\n                  {order.items && Array.isArray(order.items) && order.items.length > 0 ? (\n                    <div className=\"space-y-3\">\n                      {order.items.map((item, index) => (\n                        <OrderItem key={index} item={item} />\n                      ))}\n                    </div>\n                  ) : (\n                    <p className=\"text-gray-600 font-inter\">No items found in this order.</p>\n                  )}\n\n                  {/* Tracking Information */}\n                  {order.metadata?.dispatched && (order.tracking?.tracking_number || order.tracking?.tracking_link) && (\n                    <div className=\"mt-6 pt-6 border-t border-gray-200\">\n                      <h4 className=\"text-sm font-semibold text-gray-900 mb-3 font-inter flex items-center gap-2\">\n                        <svg className=\"w-5 h-5 text-blue-600\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                        </svg>\n                        Tracking Information\n                      </h4>\n                      <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4 space-y-3\">\n                        {order.tracking?.tracking_number && (\n                          <div className=\"text-sm font-inter\">\n                            <span className=\"font-semibold text-gray-700\">Tracking Number:</span>{' '}\n                            <span className=\"text-gray-900 font-mono\">{order.tracking.tracking_number}</span>\n                          </div>\n                        )}\n                        {order.tracking?.tracking_link && (\n                          <div className=\"text-sm font-inter\">\n                            <a\n                              href={order.tracking.tracking_link}\n                              target=\"_blank\"\n                              rel=\"noopener noreferrer\"\n                              className=\"inline-flex items-center gap-2 text-blue-600 hover:text-blue-800 hover:underline font-medium\"\n                            >\n                              <svg className=\"w-4 h-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14\" />\n                              </svg>\n                              Track Your Package\n                            </a>\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  )}\n\n                  {/* Shipping Address */}\n                  {order.shipping_address && (\n                    <div className=\"mt-6 pt-6 border-t border-gray-200\">\n                      <h4 className=\"text-sm font-semibold text-gray-900 mb-2 font-inter\">Shipping Address</h4>\n                      <div className=\"text-sm text-gray-600 font-inter\">\n                        {order.customer_name && <p>{order.customer_name}</p>}\n                        {order.shipping_address.line1 && <p>{order.shipping_address.line1}</p>}\n                        {order.shipping_address.line2 && <p>{order.shipping_address.line2}</p>}\n                        <p>\n                          {order.shipping_address.city}\n                          {order.shipping_address.postal_code && ` ${order.shipping_address.postal_code}`}\n                        </p>\n                        {order.shipping_address.country && <p>{order.shipping_address.country}</p>}\n                      </div>\n                    </div>\n                  )}\n\n                  {/* Refund Button */}\n                  <div className=\"mt-6 pt-6 border-t border-gray-200\">\n                    <button\n                      onClick={() => setShowRefundModal(true)}\n                      className=\"px-4 py-2 text-sm text-gray-700 hover:text-gray-900 border border-gray-300 rounded-md hover:bg-gray-50 transition-colors font-inter\"\n                    >\n                      Request Refund\n                    </button>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n\n        {/* Refund Policy Modal */}\n        {showRefundModal && (\n          <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n            <div className=\"bg-white rounded-lg shadow-xl max-w-md w-full p-6 md:p-8\">\n              <div className=\"mb-4\">\n                <h3 className=\"text-xl font-semibold text-gray-900 mb-2\" style={{fontFamily: \"'Poppins', sans-serif\"}}>\n                  Refund Policy\n                </h3>\n                <div className=\"w-12 h-px bg-gray-300 mb-4\"></div>\n              </div>\n              \n              <div className=\"mb-6\">\n               \n                <p className=\"text-gray-700 mt-4 mb-4 leading-relaxed font-inter\">\n                  If you find there is an issue with your item, please contact us at{' '}\n                  <a \n                    href=\"mailto:thehappycase.shop@gmail.com\" \n                    className=\"text-blue-600 hover:text-blue-800 underline font-inter\"\n                  >\n                    thehappycase.shop@gmail.com\n                  </a>\n                  . Please allow us to reply in 5 working days and we will do our best to assist you.\n                </p>\n                <p className=\"text-gray-700 leading-relaxed font-inter\">\n                  Please note that there is no returns or refunds for customised products. We only offer returns/refunds if there has been a fault on our end. This is due to our stock being made-to-order.\n                </p>\n                <p className=\"text-gray-700 mt-3 font-semibold font-inter\">\n                  Thanks for understanding!\n                </p>\n              </div>\n\n              <button\n                onClick={() => setShowRefundModal(false)}\n                className=\"w-full px-4 py-3 bg-gray-900 hover:bg-gray-800 text-white rounded-md transition-colors font-inter\"\n              >\n                Understood\n              </button>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default MyOrders;\n"],"names":[],"mappings":"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"}