module.exports=[72286,a=>{"use strict";var b=a.i(90530);a.i(26895);var c=a.i(7612),d=a.i(22535);a.s(["default",0,({item:a})=>{let e=a.design_image||a.designImage||a.case_image||a.caseImage||a.image,f=a.caseName||a.name||"Custom Case",g=0;void 0!==a.total_price?g=parseFloat(a.total_price)||0:void 0!==a.totalPrice?g=(parseFloat(a.totalPrice)||0)*(a.quantity||1):void 0!==a.price&&(g=(parseFloat(a.price)||0)*(a.quantity||1));let h=a.color?(0,d.getColorName)(a.color,a.case_image||a.caseImage||a.image):null;return(0,b.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-100",children:(0,b.jsxs)("div",{className:"flex items-start gap-4",children:[e&&(0,b.jsx)("img",{src:(0,c.normalizeImagePath)(e),alt:f,className:"w-16 h-16 md:w-20 md:h-20 object-contain rounded",loading:"lazy"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"font-semibold text-gray-900 mb-1 font-inter",children:f}),h&&(0,b.jsxs)("p",{className:"text-sm text-gray-600 mb-1 font-inter",children:["Color: ",(0,b.jsx)("span",{className:"font-medium",children:h})]}),(a.pinsDetails&&a.pinsDetails.length>0||a.pins&&Array.isArray(a.pins)&&a.pins.length>0)&&(0,b.jsxs)("p",{className:"text-sm text-gray-600 mb-1 font-inter",children:["Charms: ",(0,b.jsx)("span",{className:"font-medium",children:(a.pinsDetails||a.pins||[]).length})]}),a.quantity>1&&(0,b.jsxs)("p",{className:"text-sm text-gray-600 mb-1 font-inter",children:["Quantity: ",(0,b.jsx)("span",{className:"font-medium",children:a.quantity})]}),(0,b.jsxs)("p",{className:"text-sm font-semibold text-gray-900 mt-2 font-inter",children:["Â£",g.toFixed(2)]})]})]})})}])},30353,a=>{"use strict";var b=a.i(90530),c=a.i(26895),d=a.i(32499),e=a.i(75846),f=a.i(34287),g=a.i(72286),h=a.i(85534),i=a.i(64751);let j=(0,e.getSupabaseClient)();a.s(["default",0,()=>{let a=(0,d.useRouter)(),[e,k]=(0,c.useState)([]),[l,m]=(0,c.useState)(!0),[n,o]=(0,c.useState)(""),[p,q]=(0,c.useState)(!1),[r,s]=(0,c.useState)(!1),[t,u]=(0,c.useState)(null);(0,c.useEffect)(()=>{let b=localStorage.getItem("userEmail");if("true"!==localStorage.getItem("isLoggedIn")||!b)return void a.push("/login?redirect=/my-orders");let c=b?.toLowerCase().trim(),d="thehappycase.shop@gmail.com".trim();c===d&&s(!0),j?j.auth.getUser().then(({data:a,error:c})=>{!c&&a?.user?(s(a.user?.email?.toLowerCase().trim()===d),a.user?.id?(u(a.user.id),v(a.user.id,b)):v(null,b)):v(null,b)}):v(null,b)},[a]);let v=async(a=null,b=null)=>{m(!0),o("");try{let c,d;if(a)c=(0,f.getApiUrl)(`/get-orders?user_id=${encodeURIComponent(a)}`),console.log("ðŸ“¡ Fetching orders by user_id:",a);else if(b)c=(0,f.getApiUrl)(`/get-orders?email=${encodeURIComponent(b)}`),console.log("ðŸ“¡ Fetching orders by email:",b);else throw Error("No user_id or email provided");console.log("ðŸ“¡ Fetching orders from:",c);let e=await fetch(c);if((e.headers.get("content-type")||"").includes("text/html"))throw Error("Backend server returned HTML (likely 404). Is the server running on port 3001?");let g=await e.text();if(!g||""===g.trim())throw console.error("âŒ Empty response received. Status:",e.status,e.statusText),console.error("âŒ Response headers:",Object.fromEntries(e.headers.entries())),Error(`Server returned empty response (${e.status}). Check server logs for errors. Make sure the backend server is running on port 3001.`);try{d=JSON.parse(g)}catch(a){throw console.error("âŒ Failed to parse JSON response:",a),console.error("âŒ Response status:",e.status,e.statusText),console.error("âŒ Response text (first 500 chars):",g.substring(0,500)),Error(`Server returned invalid JSON (${e.status}): ${a.message}. Response: ${g.substring(0,200)}`)}if(!e.ok){console.error("âŒ Server error response:",{status:e.status,data:d});let a=d?.error||d?.message||`Server error: ${e.status} ${e.statusText}`;throw Error(a)}d.success&&void 0!==d.orders?k(d.orders||[]):d.error?o(d.error||"Failed to load orders"):k(Array.isArray(d)?d:d.orders||[])}catch(a){console.error("Error fetching orders:",a),o(a.message||"Failed to load your orders. Please try again later.")}finally{m(!1)}},w=localStorage.getItem("userEmail");return l?(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 py-8 md:py-12",children:(0,b.jsx)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"}),(0,b.jsx)("p",{className:"mt-4 text-gray-600 font-inter",children:"Loading your orders..."})]})})}):n?(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 py-8 md:py-12",children:(0,b.jsx)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 md:p-8 text-center",children:[(0,b.jsx)("div",{className:"text-red-600 mb-4",children:(0,b.jsx)("svg",{className:"mx-auto h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,b.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",style:{fontFamily:"'Poppins', sans-serif"},children:"Error Loading Orders"}),(0,b.jsx)("p",{className:"text-gray-600 mb-6 font-inter",children:n}),(0,b.jsx)("button",{onClick:()=>v(w),className:"px-6 py-3 bg-gray-900 hover:bg-gray-800 text-white rounded-md transition-colors font-inter",children:"Try Again"})]})})}):(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 py-8 md:py-12",children:(0,b.jsxs)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,b.jsx)("div",{className:"mb-8",children:(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-2",style:{fontFamily:"'Poppins', sans-serif"},children:"My Orders"}),(0,b.jsx)("p",{className:"text-gray-600 font-inter",children:w})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3 self-start",children:[r&&(0,b.jsxs)("button",{onClick:()=>a.push("/dashboard"),className:"px-4 py-2 text-sm text-white bg-gray-900 hover:bg-gray-800 rounded-md transition-colors font-inter flex items-center gap-2",children:[(0,b.jsx)(h.FontAwesomeIcon,{icon:i.faChartLine,className:"w-4 h-4"}),"Dashboard"]}),(0,b.jsx)("button",{onClick:()=>{localStorage.removeItem("userEmail"),localStorage.removeItem("isLoggedIn"),localStorage.removeItem("userId"),a.push("/login")},className:"px-4 py-2 text-sm text-gray-600 hover:text-gray-900 border border-gray-300 rounded-md hover:bg-gray-50 transition-colors font-inter",children:"Sign Out"})]})]})}),0===e.length?(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-8 md:p-12 text-center",children:[(0,b.jsx)("div",{className:"text-gray-400 mb-4",children:(0,b.jsx)("svg",{className:"mx-auto h-16 w-16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})})}),(0,b.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",style:{fontFamily:"'Poppins', sans-serif"},children:"No Orders Yet"}),(0,b.jsx)("p",{className:"text-gray-600 mb-6 font-inter",children:"You haven't placed any orders yet. Start shopping to see your orders here!"}),(0,b.jsx)("button",{onClick:()=>a.push("/"),className:"px-6 py-3 bg-gray-900 hover:bg-gray-800 text-white rounded-md transition-colors font-inter",children:"Start Shopping"})]}):(0,b.jsx)("div",{className:"space-y-6",children:e.map(a=>(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[(0,b.jsx)("div",{className:"bg-gray-50 px-6 py-4 border-b border-gray-200",children:(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-1 font-inter",children:["Order #",a.order_id.slice(-8).toUpperCase()]}),(0,b.jsxs)("p",{className:"text-sm text-gray-600 font-inter",children:["Placed on ",(a=>{let b;if(!a)return"N/A";if("string"==typeof a)b=new Date(a);else{if("number"!=typeof a)return"N/A";b=new Date(1e3*a)}return b.toLocaleDateString("en-GB",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})(a.order_date)]})]}),(0,b.jsxs)("div",{className:"flex flex-col sm:items-end gap-2",children:[(0,b.jsx)("div",{className:"flex items-center gap-2",children:(0,b.jsx)("span",{className:`px-3 py-1 rounded-full text-xs font-semibold font-inter ${"succeeded"===a.status||"complete"===a.status?"bg-green-100 text-green-800":"processing"===a.status?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:a.status?.charAt(0).toUpperCase()+a.status?.slice(1)})}),(0,b.jsxs)("p",{className:"text-lg font-bold text-gray-900 font-inter",children:["Â£",parseFloat(a.total_amount).toFixed(2)]})]})]})}),(0,b.jsxs)("div",{className:"p-6",children:[a.items&&Array.isArray(a.items)&&a.items.length>0?(0,b.jsx)("div",{className:"space-y-3",children:a.items.map((a,c)=>(0,b.jsx)(g.default,{item:a},c))}):(0,b.jsx)("p",{className:"text-gray-600 font-inter",children:"No items found in this order."}),a.metadata?.dispatched&&(a.tracking?.tracking_number||a.tracking?.tracking_link)&&(0,b.jsxs)("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[(0,b.jsxs)("h4",{className:"text-sm font-semibold text-gray-900 mb-3 font-inter flex items-center gap-2",children:[(0,b.jsx)("svg",{className:"w-5 h-5 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Tracking Information"]}),(0,b.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 space-y-3",children:[a.tracking?.tracking_number&&(0,b.jsxs)("div",{className:"text-sm font-inter",children:[(0,b.jsx)("span",{className:"font-semibold text-gray-700",children:"Tracking Number:"})," ",(0,b.jsx)("span",{className:"text-gray-900 font-mono",children:a.tracking.tracking_number})]}),a.tracking?.tracking_link&&(0,b.jsx)("div",{className:"text-sm font-inter",children:(0,b.jsxs)("a",{href:a.tracking.tracking_link,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-blue-600 hover:text-blue-800 hover:underline font-medium",children:[(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),"Track Your Package"]})})]})]}),a.shipping_address&&(0,b.jsxs)("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[(0,b.jsx)("h4",{className:"text-sm font-semibold text-gray-900 mb-2 font-inter",children:"Shipping Address"}),(0,b.jsxs)("div",{className:"text-sm text-gray-600 font-inter",children:[a.customer_name&&(0,b.jsx)("p",{children:a.customer_name}),a.shipping_address.line1&&(0,b.jsx)("p",{children:a.shipping_address.line1}),a.shipping_address.line2&&(0,b.jsx)("p",{children:a.shipping_address.line2}),(0,b.jsxs)("p",{children:[a.shipping_address.city,a.shipping_address.postal_code&&` ${a.shipping_address.postal_code}`]}),a.shipping_address.country&&(0,b.jsx)("p",{children:a.shipping_address.country})]})]}),(0,b.jsx)("div",{className:"mt-6 pt-6 border-t border-gray-200",children:(0,b.jsx)("button",{onClick:()=>q(!0),className:"px-4 py-2 text-sm text-gray-700 hover:text-gray-900 border border-gray-300 rounded-md hover:bg-gray-50 transition-colors font-inter",children:"Request Refund"})})]})]},a.order_id))}),p&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6 md:p-8",children:[(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",style:{fontFamily:"'Poppins', sans-serif"},children:"Refund Policy"}),(0,b.jsx)("div",{className:"w-12 h-px bg-gray-300 mb-4"})]}),(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsxs)("p",{className:"text-gray-700 mt-4 mb-4 leading-relaxed font-inter",children:["If you find there is an issue with your item, please contact us at"," ",(0,b.jsx)("a",{href:"mailto:thehappycase.shop@gmail.com",className:"text-blue-600 hover:text-blue-800 underline font-inter",children:"thehappycase.shop@gmail.com"}),". Please allow us to reply in 5 working days and we will do our best to assist you."]}),(0,b.jsx)("p",{className:"text-gray-700 leading-relaxed font-inter",children:"Please note that there is no returns or refunds for customised products. We only offer returns/refunds if there has been a fault on our end. This is due to our stock being made-to-order."}),(0,b.jsx)("p",{className:"text-gray-700 mt-3 font-semibold font-inter",children:"Thanks for understanding!"})]}),(0,b.jsx)("button",{onClick:()=>q(!1),className:"w-full px-4 py-3 bg-gray-900 hover:bg-gray-800 text-white rounded-md transition-colors font-inter",children:"Understood"})]})})]})})}])}];

//# sourceMappingURL=Desktop_HappyCase_TheHappy_TheHappyCase_src_fefab68b._.js.map