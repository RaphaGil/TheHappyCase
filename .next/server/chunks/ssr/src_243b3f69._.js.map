{"version":3,"sources":["../../../../src/component/PaymentSucess/OrderItem.jsx","../../../../src/page-components/Login/index.jsx"],"sourcesContent":["import React from 'react';\nimport { normalizeImagePath } from '../../utils/imagePath';\nimport { getColorName } from '../../utils/createyours/helpers';\n\nconst OrderItem = ({ item }) => {\n  // Handle both saved order format (with unit_price, total_price) and original format (price, totalPrice)\n  const itemImage = item.design_image || item.designImage || item.case_image || item.caseImage || item.image;\n  const itemName = item.caseName || item.name || 'Custom Case';\n  \n  // Calculate price - handle both formats\n  let itemPrice = 0;\n  if (item.total_price !== undefined) {\n    // Saved order format: use total_price directly\n    itemPrice = parseFloat(item.total_price) || 0;\n  } else if (item.totalPrice !== undefined) {\n    // Original format: totalPrice * quantity\n    itemPrice = (parseFloat(item.totalPrice) || 0) * (item.quantity || 1);\n  } else if (item.price !== undefined) {\n    // Original format: price * quantity\n    itemPrice = (parseFloat(item.price) || 0) * (item.quantity || 1);\n  }\n  \n  // Get readable color name from hex code or image path\n  const colorName = item.color ? getColorName(item.color, item.case_image || item.caseImage || item.image) : null;\n\n  return (\n    <div className=\"bg-gray-50 p-4 rounded-lg border border-gray-100\">\n      <div className=\"flex items-start gap-4\">\n        {itemImage && (\n          <img \n            src={normalizeImagePath(itemImage)} \n            alt={itemName}\n            className=\"w-16 h-16 md:w-20 md:h-20 object-contain rounded\"\n            loading=\"lazy\"\n          />\n        )}\n        <div className=\"flex-1\">\n          <p className=\"font-semibold text-gray-900 mb-1 font-inter\">\n            {itemName}\n          </p>\n          {colorName && (\n            <p className=\"text-sm text-gray-600 mb-1 font-inter\">\n              Color: <span className=\"font-medium\">{colorName}</span>\n            </p>\n          )}\n          {((item.pinsDetails && item.pinsDetails.length > 0) || (item.pins && Array.isArray(item.pins) && item.pins.length > 0)) && (\n            <p className=\"text-sm text-gray-600 mb-1 font-inter\">\n              Charms: <span className=\"font-medium\">{(item.pinsDetails || item.pins || []).length}</span>\n            </p>\n          )}\n          {item.quantity > 1 && (\n            <p className=\"text-sm text-gray-600 mb-1 font-inter\">\n              Quantity: <span className=\"font-medium\">{item.quantity}</span>\n            </p>\n          )}\n          <p className=\"text-sm font-semibold text-gray-900 mt-2 font-inter\">\n            ¬£{itemPrice.toFixed(2)}\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default OrderItem;\n","'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport { useRouter, useSearchParams } from 'next/navigation';\nimport { getSupabaseClient } from '../../utils/supabaseClient';\nimport { getApiUrl } from '../../utils/apiConfig';\nimport OrderItem from '../../component/PaymentSucess/OrderItem';\n\n// Get shared Supabase client instance\nconst supabase = getSupabaseClient();\n\n// Helper to format order date (handles both ISO string and timestamp)\nconst formatOrderDate = (dateInput) => {\n  if (!dateInput) return 'N/A';\n  \n  let date;\n  if (typeof dateInput === 'string') {\n    // If it's an ISO string from Supabase\n    date = new Date(dateInput);\n  } else if (typeof dateInput === 'number') {\n    // If it's a Unix timestamp (in seconds)\n    date = new Date(dateInput * 1000);\n  } else {\n    return 'N/A';\n  }\n  \n  return date.toLocaleDateString('en-GB', {\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric',\n    hour: '2-digit',\n    minute: '2-digit',\n  });\n};\n\nconst Login = () => {\n  const router = useRouter();\n  const searchParams = useSearchParams();\n  const initialEmail = searchParams.get('email') || '';\n  \n  const [email, setEmail] = useState(initialEmail);\n  const [code, setCode] = useState('');\n  const [step, setStep] = useState(initialEmail ? 'code' : 'email'); // 'email' or 'code'\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState(false);\n  const [orders, setOrders] = useState([]);\n  const [ordersLoading, setOrdersLoading] = useState(false);\n  const [ordersError, setOrdersError] = useState('');\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n\n  // Scroll to top when component mounts\n  useEffect(() => {\n    window.scrollTo({ top: 0, behavior: 'smooth' });\n    \n    // Check if user is already logged in\n    const userEmail = localStorage.getItem('userEmail');\n    const loggedInStatus = localStorage.getItem('isLoggedIn') === 'true';\n    \n    if (loggedInStatus && userEmail) {\n      setIsLoggedIn(true);\n      setEmail(userEmail);\n      // Fetch orders for logged-in user\n      fetchUserOrders(userEmail);\n    }\n    \n    // If email is in URL, automatically send code\n    if (initialEmail && !loggedInStatus) {\n      const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n      if (emailRegex.test(initialEmail)) {\n        handleSendCodeAutomatically(initialEmail);\n      }\n    }\n  }, [router, searchParams, initialEmail]);\n\n  // Fetch orders for a user\n  // Always use email to fetch orders to include purchases made without login\n  const fetchUserOrders = async (userEmail) => {\n    setOrdersLoading(true);\n    setOrdersError('');\n\n    try {\n      if (!userEmail) {\n        throw new Error('Email is required to fetch orders');\n      }\n\n      // Always use email to fetch orders - this ensures we get ALL orders\n      // associated with this email, including those made without logging in\n      const url = getApiUrl(`/get-orders?email=${encodeURIComponent(userEmail)}`);\n      \n      console.log('üì° Fetching orders by email:', userEmail);\n      \n      const response = await fetch(url);\n      \n      // Check if response is HTML (404 page from dev server) instead of JSON\n      const contentType = response.headers.get('content-type') || '';\n      if (contentType.includes('text/html')) {\n        throw new Error('Backend server returned HTML (likely 404). Is the server running on port 3001?');\n      }\n      \n      const responseText = await response.text();\n      \n      if (!responseText || responseText.trim() === '') {\n        throw new Error(`Server returned empty response (${response.status}). Check server logs for errors.`);\n      }\n      \n      let data;\n      try {\n        data = JSON.parse(responseText);\n      } catch (parseError) {\n        throw new Error(`Server returned invalid JSON (${response.status}): ${parseError.message}`);\n      }\n      \n      if (!response.ok) {\n        const errorMsg = data?.error || data?.message || `Server error: ${response.status} ${response.statusText}`;\n        throw new Error(errorMsg);\n      }\n      \n      if (data.success && data.orders !== undefined) {\n        setOrders(data.orders || []);\n      } else if (data.error) {\n        setOrdersError(data.error || 'Failed to load orders');\n      } else {\n        setOrders(Array.isArray(data) ? data : (data.orders || []));\n      }\n    } catch (err) {\n      console.error('Error fetching orders:', err);\n      setOrdersError(err.message || 'Failed to load your orders. Please try again later.');\n    } finally {\n      setOrdersLoading(false);\n    }\n  };\n\n  const handleSendCodeAutomatically = async (emailToUse) => {\n    setLoading(true);\n    setError('');\n    \n    try {\n      if (!supabase) {\n        throw new Error('Supabase is not configured. Please check your environment variables.');\n      }\n\n      // Send OTP email using Supabase (code instead of magic link)\n      const { data, error } = await supabase.auth.signInWithOtp({\n        email: emailToUse,\n        options: {\n          emailRedirectTo: null\n        }\n      });\n\n      if (error) {\n        console.error('‚ùå Error sending OTP:', error);\n        setError(error.message || 'Failed to send verification code. Please try again.');\n        setLoading(false);\n        return;\n      }\n\n      console.log('‚úÖ OTP sent successfully:', data);\n      setLoading(false);\n      setStep('code');\n      setSuccess(true);\n      setTimeout(() => setSuccess(false), 3000);\n    } catch (err) {\n      console.error('‚ùå Exception sending OTP:', err);\n      setLoading(false);\n      setError(err.message || 'Failed to send verification code. Please try again.');\n    }\n  };\n\n  const handleSendCode = async (e) => {\n    e.preventDefault();\n    if (!email) {\n      setError('Please enter your email address');\n      return;\n    }\n\n    // Basic email validation\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    if (!emailRegex.test(email)) {\n      setError('Please enter a valid email address');\n      return;\n    }\n\n    setLoading(true);\n    setError('');\n    setSuccess(false);\n\n    try {\n      if (!supabase) {\n        throw new Error('Supabase is not configured. Please check your environment variables.');\n      }\n\n      // Send OTP email using Supabase (code instead of magic link)\n      const { data, error } = await supabase.auth.signInWithOtp({\n        email: email.trim(),\n        options: {\n          emailRedirectTo: null\n        }\n      });\n\n      if (error) {\n        console.error('‚ùå Error sending OTP:', error);\n        setError(error.message || 'Failed to send verification code. Please try again.');\n        setLoading(false);\n        return;\n      }\n\n      console.log('‚úÖ OTP sent successfully:', data);\n      setLoading(false);\n      setStep('code');\n      setSuccess(true);\n      setTimeout(() => setSuccess(false), 3000);\n    } catch (err) {\n      console.error('‚ùå Exception sending OTP:', err);\n      setLoading(false);\n      setError(err.message || 'Failed to send verification code. Please try again.');\n    }\n  };\n\n  const handleVerifyCode = async (e) => {\n    e.preventDefault();\n    if (!code || code.length !== 6) {\n      setError('Please enter the 6-digit code');\n      return;\n    }\n\n    setLoading(true);\n    setError('');\n    setSuccess(false);\n\n    try {\n      if (!supabase) {\n        throw new Error('Supabase is not configured. Please check your environment variables.');\n      }\n\n      // Verify OTP code with Supabase\n      const { data, error } = await supabase.auth.verifyOtp({\n        email: email.trim(),\n        token: code.trim(),\n        type: 'email',\n      });\n\n      if (error) {\n        console.error('‚ùå Error verifying OTP:', error);\n        setError(error.message || 'Invalid code. Please try again.');\n        setLoading(false);\n        return;\n      }\n\n      console.log('‚úÖ OTP verified successfully:', data);\n\n      // Get the authenticated user\n      const { data: { user }, error: userError } = await supabase.auth.getUser();\n      \n      if (userError || !user) {\n        console.error('‚ùå Error getting user:', userError);\n        setError('Failed to get user information. Please try again.');\n        setLoading(false);\n        return;\n      }\n\n      // Store user session in localStorage\n      const userEmail = user.email || email;\n      localStorage.setItem('userEmail', userEmail);\n      localStorage.setItem('isLoggedIn', 'true');\n      localStorage.setItem('userId', user.id); // Store user ID for order saving\n      \n      console.log('‚úÖ User logged in:', userEmail);\n      console.log('‚úÖ User ID:', user.id);\n\n      // Set logged in state and fetch orders\n      setIsLoggedIn(true);\n      setStep('orders'); // Switch to orders view\n      // Fetch orders using email to get ALL orders for this email,\n      // including purchases made without logging in\n      await fetchUserOrders(userEmail);\n    } catch (err) {\n      console.error('‚ùå Exception verifying OTP:', err);\n      setError(err.message || 'Invalid code. Please try again.');\n      setLoading(false);\n    }\n  };\n\n  const handleResendCode = () => {\n    setCode('');\n    setError('');\n    setSuccess(false);\n    handleSendCode({ preventDefault: () => {} });\n  };\n\n  const handleBackToEmail = () => {\n    setStep('email');\n    setCode('');\n    setError('');\n    setSuccess(false);\n    // Update URL to remove email parameter\n    router.push('/login');\n  };\n\n  const handleLogout = () => {\n    localStorage.removeItem('userEmail');\n    localStorage.removeItem('isLoggedIn');\n    localStorage.removeItem('userId');\n    setIsLoggedIn(false);\n    setOrders([]);\n    setStep('email');\n    setEmail('');\n    setCode('');\n  };\n\n  return (\n    <div className=\"min-h-screen bg-white py-12 md:py-16\">\n      <div className={`${isLoggedIn ? 'max-w-6xl' : 'max-w-md'} mx-auto px-4 sm:px-6 lg:px-8`}>\n        {/* Header */}\n        <div className=\"text-center mb-8\">\n          <h1 className=\"text-title md:text-title-lg font-light text-gray-900 mb-2 font-inter tracking-title\">\n            {isLoggedIn ? 'My Orders' : step === 'email' ? 'Log In' : 'Verify Code'}\n          </h1>\n          <div className=\"w-16 h-px bg-gray-300 mx-auto mb-4\"></div>\n          {isLoggedIn && (\n            <div className=\"mb-4\">\n              <p className=\"text-gray-600 font-inter\">{email}</p>\n              <button\n                onClick={handleLogout}\n                className=\"mt-2 text-sm text-gray-600 hover:text-gray-900 font-light font-inter underline\"\n              >\n                Sign Out\n              </button>\n            </div>\n          )}\n        </div>\n\n        {/* Success Message */}\n        {success && step === 'code' && (\n          <div className=\"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg\">\n            <p className=\"text-sm text-green-800 font-light font-inter\">\n              Verification code sent to <strong>{email}</strong>\n            </p>\n          </div>\n        )}\n\n        {/* Error Message */}\n        {error && (\n          <div className=\"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg\">\n            <p className=\"text-sm text-red-800 font-light font-inter\">\n              {error}\n            </p>\n          </div>\n        )}\n\n        {/* Email Input Step */}\n        {step === 'email' && (\n          <form onSubmit={handleSendCode} className=\"space-y-6\">\n            <div>\n              <label className=\"block text-sm text-gray-700 mb-2 font-light font-inter\">\n                Email Address *\n              </label>\n              <input\n                type=\"email\"\n                value={email}\n                onChange={(e) => {\n                  setEmail(e.target.value);\n                  setError('');\n                }}\n                placeholder=\"your.email@example.com\"\n                autoFocus\n                className=\"w-full px-4 py-3 border border-gray-200 rounded-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white text-gray-900 placeholder-gray-400 font-light font-inter text-base\"\n                required\n              />\n            </div>\n\n            <button\n              type=\"submit\"\n              disabled={loading}\n              className=\"w-full px-4 py-3 text-sm uppercase tracking-wider font-light font-inter bg-gray-900 text-white hover:bg-gray-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n              {loading ? 'Sending Code...' : 'Send Verification Code'}\n            </button>\n\n            <p className=\"text-xs text-gray-500 text-center font-light font-inter\">\n              By continuing, you agree to our Terms of Use and Privacy Policy.\n            </p>\n          </form>\n        )}\n\n        {/* Code Verification Step */}\n        {step === 'code' && (\n          <form onSubmit={handleVerifyCode} className=\"space-y-6\">\n            <div>\n              <p className=\"text-sm text-gray-600 font-light font-inter mb-4 text-center\">\n                We've sent a 6-digit verification code to <strong>{email}</strong>. Please enter it below.\n              </p>\n              <label className=\"block text-sm text-gray-700 mb-2 font-light font-inter\">\n                Verification Code *\n              </label>\n              <input\n                type=\"text\"\n                value={code}\n                onChange={(e) => {\n                  const value = e.target.value.replace(/\\D/g, '').slice(0, 6);\n                  setCode(value);\n                  setError('');\n                }}\n                placeholder=\"000000\"\n                maxLength={6}\n                autoFocus\n                className=\"w-full px-4 py-3 border border-gray-200 rounded-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white text-gray-900 placeholder-gray-400 font-light font-inter text-2xl text-center tracking-widest\"\n                required\n              />\n            </div>\n\n            <button\n              type=\"submit\"\n              disabled={loading || code.length !== 6}\n              className=\"w-full px-4 py-3 text-sm uppercase tracking-wider font-light font-inter bg-gray-900 text-white hover:bg-gray-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n              {loading ? 'Verifying...' : 'Verify Code'}\n            </button>\n\n            <div className=\"flex flex-col gap-3\">\n              <button\n                type=\"button\"\n                onClick={handleResendCode}\n                disabled={loading}\n                className=\"text-sm text-gray-600 hover:text-gray-900 font-light font-inter underline disabled:opacity-50\"\n              >\n                Resend Code\n              </button>\n              <button\n                type=\"button\"\n                onClick={handleBackToEmail}\n                className=\"text-sm text-gray-600 hover:text-gray-900 font-light font-inter\"\n              >\n                ‚Üê Back to email\n              </button>\n            </div>\n          </form>\n        )}\n\n        {/* Orders Display */}\n        {isLoggedIn && (\n          <div className=\"mt-8\">\n            {ordersLoading ? (\n              <div className=\"text-center py-12\">\n                <div className=\"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900\"></div>\n                <p className=\"mt-4 text-gray-600 font-inter\">Loading your orders...</p>\n              </div>\n            ) : ordersError ? (\n              <div className=\"bg-red-50 border border-red-200 rounded-lg p-6 text-center\">\n                <p className=\"text-sm text-red-800 font-light font-inter\">{ordersError}</p>\n                <button\n                  onClick={() => fetchUserOrders(email)}\n                  className=\"mt-4 px-6 py-2 text-sm bg-gray-900 hover:bg-gray-800 text-white rounded-md transition-colors font-inter\"\n                >\n                  Try Again\n                </button>\n              </div>\n            ) : orders.length === 0 ? (\n              <div className=\"bg-gray-50 rounded-lg shadow-sm p-8 md:p-12 text-center\">\n                <div className=\"text-gray-400 mb-4\">\n                  <svg className=\"mx-auto h-16 w-16\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z\" />\n                  </svg>\n                </div>\n                <h2 className=\"text-xl font-semibold text-gray-900 mb-2 font-inter\">\n                  No Orders Yet\n                </h2>\n                <p className=\"text-gray-600 mb-6 font-inter\">\n                  You haven't placed any orders yet. Start shopping to see your orders here!\n                </p>\n                <button\n                  onClick={() => router.push('/')}\n                  className=\"px-6 py-3 bg-gray-900 hover:bg-gray-800 text-white rounded-md transition-colors font-inter\"\n                >\n                  Start Shopping\n                </button>\n              </div>\n            ) : (\n              <div className=\"space-y-6\">\n                {orders.map((order) => (\n                  <div key={order.order_id} className=\"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden\">\n                    {/* Order Header */}\n                    <div className=\"bg-gray-50 px-6 py-4 border-b border-gray-200\">\n                      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\">\n                        <div>\n                          <h3 className=\"text-lg font-semibold text-gray-900 mb-1 font-inter\">\n                            Order #{order.order_id.slice(-8).toUpperCase()}\n                          </h3>\n                          <p className=\"text-sm text-gray-600 font-inter\">\n                            Placed on {formatOrderDate(order.order_date)}\n                          </p>\n                        </div>\n                        <div className=\"flex flex-col sm:items-end gap-2\">\n                          <div className=\"flex items-center gap-2\">\n                            <span className={`px-3 py-1 rounded-full text-xs font-semibold font-inter ${\n                              order.status === 'succeeded' || order.status === 'complete'\n                                ? 'bg-green-100 text-green-800'\n                                : order.status === 'processing'\n                                ? 'bg-yellow-100 text-yellow-800'\n                                : 'bg-gray-100 text-gray-800'\n                            }`}>\n                              {order.status?.charAt(0).toUpperCase() + order.status?.slice(1)}\n                            </span>\n                          </div>\n                          <p className=\"text-lg font-bold text-gray-900 font-inter\">\n                            ¬£{parseFloat(order.total_amount).toFixed(2)}\n                          </p>\n                        </div>\n                      </div>\n                    </div>\n\n                    {/* Order Items */}\n                    <div className=\"p-6\">\n                      <div className=\"space-y-4\">\n                        {order.items && Array.isArray(order.items) && order.items.length > 0 ? (\n                          order.items.map((item, index) => (\n                            <OrderItem key={index} item={item} />\n                          ))\n                        ) : (\n                          <p className=\"text-gray-600 font-inter\">No items found in this order.</p>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n        )}\n\n     \n      </div>\n    </div>\n  );\n};\n\nexport default Login;\n\n"],"names":[],"mappings":"wDAAA,EAAA,CAAA,CAAA,OACA,IAAA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,wBAEkB,CAAC,MAAE,CAAI,CAAE,IAEzB,IAAM,EAAY,EAAK,YAAY,EAAI,EAAK,WAAW,EAAI,EAAK,UAAU,EAAI,EAAK,SAAS,EAAI,EAAK,KAAK,CACpG,EAAW,EAAK,QAAQ,EAAI,EAAK,IAAI,EAAI,cAG3C,EAAY,CACZ,MAAqB,MAAhB,KAA2B,MAAhB,CAElB,EAAY,WAAW,EAAK,WAAW,GAAK,OACf,IAApB,EAAK,KAA0B,KAAhB,CAExB,EAAY,CAAC,WAAW,EAAK,UAAU,IAAK,CAAC,EAAK,EAAD,AAAM,QAAQ,GAAI,CAAC,CAC5C,SAAf,EAAK,AAAqB,KAAhB,GAEnB,EAAY,CAAC,WAAW,EAAK,KAAK,IAAK,CAAC,EAAK,EAAD,AAAM,QAAQ,EAAI,EAAC,EAIjE,IAAM,EAAY,EAAK,KAAK,CAAG,CAAA,EAAA,EAAA,YAAA,AAAY,EAAC,EAAK,KAAK,CAAE,EAAK,UAAU,EAAI,EAAK,SAAS,EAAI,EAAK,KAAK,EAAI,KAE3G,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,4DACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mCACZ,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,IAAK,CAAA,EAAA,EAAA,kBAAA,AAAkB,EAAC,GACxB,IAAK,EACL,UAAU,mDACV,QAAQ,SAGZ,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mBACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,uDACV,IAEF,GACC,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,kDAAwC,UAC5C,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,uBAAe,OAGzC,CAAE,EAAK,WAAW,EAAI,EAAK,WAAW,CAAC,MAAM,CAAG,GAAO,EAAK,IAAI,EAAI,MAAM,OAAO,CAAC,EAAK,IAAI,GAAK,EAAK,IAAI,CAAC,MAAM,CAAG,CAAE,GACpH,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,kDAAwC,WAC3C,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,uBAAe,CAAC,EAAK,WAAW,EAAI,EAAK,IAAI,EAAI,EAAA,AAAE,EAAE,MAAM,MAGtF,EAAK,QAAQ,CAAG,GACf,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,kDAAwC,aACzC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,uBAAe,EAAK,QAAQ,MAG1D,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,gEAAsD,IAC/D,EAAU,OAAO,CAAC,aAMhC,6CC5DA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,MACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAGA,IAAM,EAAW,CAAA,EAAA,EAAA,iBAAiB,AAAjB,qBA0BH,KACZ,IAAM,EAAS,CAAA,EAAA,EAAA,SAAA,AAAS,IAClB,EAAe,CAAA,EAAA,EAAA,eAAA,AAAe,IAC9B,EAAe,EAAa,GAAG,CAAC,UAAY,GAE5C,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,GAC7B,CAAC,EAAM,EAAQ,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAC3B,CAAC,EAAM,EAAQ,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,EAAe,OAAS,SACnD,CAD6D,AAC5D,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EADiD,CAChD,GACjC,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAC7B,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACjC,CAAC,EAAQ,EAAU,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,EAAE,EACjC,CAAC,EAAe,EAAiB,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,GAAS,GAC7C,CAAC,EAAa,EAAe,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACzC,CAAC,EAAY,EAAc,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAG7C,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,OAAO,QAAQ,CAAC,CAAE,IAAK,EAAG,SAAU,QAAS,GAG7C,IAAM,EAAY,aAAa,OAAO,CAAC,aACjC,EAAwD,SAAvC,aAAa,OAAO,CAAC,cAExC,GAAkB,IACpB,GAAc,GACd,CAF+B,CAEtB,GAET,EAAgB,IAId,GAAgB,CAAC,GACA,AACf,aAF+B,gBAEpB,IAAI,CAAC,IAClB,EAA4B,EAGlC,EAAG,CAAC,EAAQ,EAAc,AAJa,EAIA,EAIvC,IAAM,EAAkB,MAAO,IAC7B,GAAiB,GACjB,EAAe,IAEf,GAAI,KAyBE,EAxBJ,GAAI,CAAC,EACH,MAAM,AAAI,GADI,GACE,qCAKlB,IAAM,EAAM,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,CAAC,kBAAkB,EAAE,mBAAmB,GAAA,CAAY,EAE1E,QAAQ,GAAG,CAAC,+BAAgC,GAE5C,IAAM,EAAW,MAAM,MAAM,GAI7B,GAAI,CADgB,EAAS,OAAO,CAAC,GAAG,CAAC,iBAAmB,EAAA,EAC5C,QAAQ,CAAC,aACvB,CADqC,KAC/B,AAAI,MAAM,kFAGlB,IAAM,EAAe,MAAM,EAAS,IAAI,GAExC,GAAI,CAAC,GAAwC,IAAI,CAA5B,EAAa,IAAI,GACpC,MAAM,AAAI,MAAM,CAAC,gCAAgC,EAAE,EAAS,MAAM,CAAC,gCAAgC,CAAC,EAItG,GAAI,CACF,EAAO,KAAK,KAAK,CAAC,EACpB,CAAE,MAAO,EAAY,CACnB,MAAM,AAAI,MAAM,CAAC,8BAA8B,EAAE,EAAS,MAAM,CAAC,GAAG,EAAE,EAAW,OAAO,CAAA,CAAE,CAC5F,CAEA,GAAI,CAAC,EAAS,EAAE,CAAE,CAChB,IAAM,EAAW,GAAM,OAAS,GAAM,SAAW,CAAC,cAAc,EAAE,EAAS,MAAM,CAAC,CAAC,EAAE,EAAS,UAAU,CAAA,CAAE,AAC1G,OAAM,AAAI,MAAM,EAClB,CAEI,EAAK,OAAO,EAAI,KAAgB,MAAX,KAAsB,CAAhB,CAC7B,EAAU,EAAK,MAAM,EAAI,EAAE,EAClB,EAAK,KAAK,CACnB,CADqB,CACN,EAAK,KAAK,EAAI,yBAE7B,EAAU,MAAM,OAAO,CAAC,GAAQ,EAAQ,EAAK,MAAM,EAAI,EAAE,CAE7D,CAAE,MAAO,EAAK,CACZ,QAAQ,KAAK,CAAC,yBAA0B,GACxC,EAAe,EAAI,OAAO,EAAI,sDAChC,QAAU,CACR,GAAiB,EACnB,CACF,EAEM,EAA8B,MAAO,IACzC,GAAW,GACX,EAAS,IAET,GAAI,CACF,GAAI,CAAC,EACH,MAAU,AAAJ,EADO,IACG,wEAIlB,GAAM,MAAE,CAAI,OAAE,CAAK,CAAE,CAAG,MAAM,EAAS,IAAI,CAAC,aAAa,CAAC,CACxD,MAAO,EACP,QAAS,CACP,gBAAiB,IACnB,CACF,GAEA,GAAI,EAAO,CACT,QAAQ,KAAK,CAAC,uBAAwB,GACtC,EAAS,EAAM,OAAO,EAAI,uDAC1B,GAAW,GACX,MACF,CAEA,QAAQ,GAAG,CAAC,2BAA4B,GACxC,GAAW,GACX,EAAQ,QACR,GAAW,GACX,WAAW,IAAM,GAAW,GAAQ,IACtC,CAAE,MAAO,EAAK,CACZ,QAAQ,KAAK,CAAC,2BAA4B,GAC1C,GAAW,GACX,EAAS,EAAI,OAAO,EAAI,sDAC1B,CACF,EAEM,EAAiB,MAAO,IAE5B,GADA,EAAE,cAAc,GACZ,CAAC,EAAO,YACV,EAAS,mCAMX,GAAI,CADe,AACd,6BAAW,IAAI,CAAC,GAAQ,YAC3B,EAAS,sCAIX,EAAW,IACX,EAAS,IACT,GAAW,GAEX,GAAI,CACF,GAAI,CAAC,EACH,MAAM,AAAI,EADG,IACG,wEAIlB,GAAM,MAAE,CAAI,OAAE,CAAK,CAAE,CAAG,MAAM,EAAS,IAAI,CAAC,aAAa,CAAC,CACxD,MAAO,EAAM,IAAI,GACjB,QAAS,CACP,gBAAiB,IACnB,CACF,GAEA,GAAI,EAAO,CACT,QAAQ,KAAK,CAAC,uBAAwB,GACtC,EAAS,EAAM,OAAO,EAAI,uDAC1B,GAAW,GACX,MACF,CAEA,QAAQ,GAAG,CAAC,2BAA4B,GACxC,GAAW,GACX,EAAQ,QACR,GAAW,GACX,WAAW,IAAM,GAAW,GAAQ,IACtC,CAAE,MAAO,EAAK,CACZ,QAAQ,KAAK,CAAC,2BAA4B,GAC1C,GAAW,GACX,EAAS,EAAI,OAAO,EAAI,sDAC1B,CACF,EAEM,EAAmB,MAAO,IAE9B,GADA,EAAE,cAAc,GACZ,CAAC,GAAwB,IAAhB,EAAK,MAAM,CAAQ,YAC9B,EAAS,iCAIX,GAAW,GACX,EAAS,IACT,GAAW,GAEX,GAAI,CACF,GAAI,CAAC,EACH,MAAM,AAAI,EADG,IACG,wEAIlB,GAAM,MAAE,CAAI,OAAE,CAAK,CAAE,CAAG,MAAM,EAAS,IAAI,CAAC,SAAS,CAAC,CACpD,MAAO,EAAM,IAAI,GACjB,MAAO,EAAK,IAAI,GAChB,KAAM,OACR,GAEA,GAAI,EAAO,CACT,QAAQ,KAAK,CAAC,yBAA0B,GACxC,EAAS,EAAM,OAAO,EAAI,mCAC1B,GAAW,GACX,MACF,CAEA,QAAQ,GAAG,CAAC,+BAAgC,GAG5C,GAAM,CAAE,KAAM,MAAE,CAAI,CAAE,CAAE,MAAO,CAAS,CAAE,CAAG,MAAM,EAAS,IAAI,CAAC,OAAO,GAExE,GAAI,GAAa,CAAC,EAAM,CACtB,QAAQ,KAAK,CAAC,wBAAyB,GACvC,EAAS,qDACT,EAAW,IACX,MACF,CAGA,IAAM,EAAY,EAAK,KAAK,EAAI,EAChC,aAAa,OAAO,CAAC,YAAa,GAClC,aAAa,OAAO,CAAC,aAAc,QACnC,aAAa,OAAO,CAAC,SAAU,EAAK,EAAE,EAEtC,CAFyC,OAEjC,GAAG,CAAC,oBAAqB,EAFyC,CAG1E,QAAQ,GAAG,CAAC,aAAc,EAAK,EAAE,EAGjC,GAAc,GACd,EAAQ,UAGR,CAHmB,KAGb,EAAgB,EACxB,CAAE,MAAO,EAAK,CACZ,KAL2C,GAKnC,KAAK,CAAC,6BAA8B,GAC5C,EAAS,EAAI,OAAO,EAAI,mCACxB,GAAW,EACb,CACF,EA6BA,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,gDACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAW,CAAA,EAAG,EAAa,YAAc,WAAW,6BAA6B,CAAC,WAErF,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,6BACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,+FACX,EAAa,YAAuB,UAAT,EAAmB,SAAW,gBAE5D,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uCACd,GACC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iBACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,oCAA4B,IACzC,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAxBO,CAwBE,IAvBrB,aAAa,UAAU,CAAC,aACxB,aAAa,UAAU,CAAC,cACxB,aAAa,UAAU,CAAC,UACxB,GAAc,GACd,EAAU,EAAE,EACZ,EAAQ,SACR,EAAS,IACT,EAAQ,GACV,EAgBc,UAAU,0FACX,mBAQN,GAAoB,SAAT,GACV,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,mEACb,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,yDAA+C,6BAChC,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,UAAQ,SAMxC,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,+DACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,sDACV,MAMG,UAAT,GACC,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,SAAU,EAAgB,UAAU,sBACxC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,kEAAyD,oBAG1E,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,KAAK,QACL,MAAO,EACP,SAAU,AAAC,IACT,EAAS,EAAE,MAAM,CAAC,KAAK,EACvB,EAAS,GACX,EACA,YAAY,yBACZ,SAAS,CAAA,CAAA,EACT,UAAU,2MACV,QAAQ,CAAA,CAAA,OAIZ,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,KAAK,SACL,SAAU,EACV,UAAU,8LAET,EAAU,kBAAoB,2BAGjC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,mEAA0D,wEAOjE,SAAT,GACC,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,SAAU,EAAkB,UAAU,sBAC1C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,yEAA+D,6CAChC,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,UAAQ,IAAe,8BAEpE,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,kEAAyD,wBAG1E,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,KAAK,OACL,MAAO,EACP,SAAU,AAAC,IAET,EADc,EAAE,IACR,EADc,CAAC,KAAK,CAAC,OAAO,CAAC,MAAO,IAAI,KAAK,CAAC,EAAG,IAEzD,EAAS,GACX,EACA,YAAY,SACZ,UAAW,EACX,SAAS,CAAA,CAAA,EACT,UAAU,sOACV,QAAQ,CAAA,CAAA,OAIZ,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,KAAK,SACL,SAAU,GAA2B,IAAhB,EAAK,MAAM,CAChC,UAAU,8LAET,EAAU,eAAiB,gBAG9B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,gCACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,KAAK,SACL,QA3IW,CA2IF,IA1IrB,EAAQ,IACR,EAAS,IACT,GAAW,GACX,EAAe,CAAE,eAAgB,KAAO,CAAE,EAC5C,EAuIc,SAAU,EACV,UAAU,yGACX,gBAGD,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,KAAK,SACL,QA5IY,CA4IH,IA3IrB,EAAQ,SACR,EAAQ,IACR,EAAS,IACT,GAAW,GAEX,EAAO,IAAI,CAAC,SACd,EAsIc,UAAU,2EACX,0BAQN,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,gBACZ,EACC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8BACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,8EACf,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yCAAgC,8BAE7C,EACF,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uEACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,sDAA8C,IAC3D,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,IAAM,EAAgB,GAC/B,UAAU,mHACX,iBAIiB,IAAlB,EAAO,MAAM,CACf,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oEACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,8BACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,oBAAoB,KAAK,OAAO,QAAQ,YAAY,OAAO,wBACxE,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,cAAc,QAAQ,eAAe,QAAQ,YAAa,IAAK,EAAE,mDAG3E,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,+DAAsD,kBAGpE,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yCAAgC,+EAG7C,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,IAAM,EAAO,IAAI,CAAC,KAC3B,UAAU,sGACX,sBAKH,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qBACZ,EAAO,GAAG,CAAC,AAAC,GACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAyB,UAAU,iFAElC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yDACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,+EACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,gEAAsD,UAC1D,EAAM,QAAQ,CAAC,KAAK,CAAC,CAAC,GAAG,WAAW,MAE9C,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,6CAAmC,aACnC,CA7dd,AAAD,QAGlB,EAFJ,GAAI,CAAC,EAAW,MAAO,MAGvB,GAAyB,UAArB,AAA+B,OAAxB,EAET,EAAO,IAAI,KAAK,QACX,GAAyB,UAArB,AAA+B,OAAxB,EAIhB,MAAO,MAFP,EAAO,IAAI,KAAiB,IAAZ,GAKlB,OAAO,EAAK,kBAAkB,CAAC,QAAS,CACtC,KAAM,UACN,MAAO,OACP,IAAK,UACL,KAAM,UACN,OAAQ,SACV,EACF,GAwcuD,EAAM,UAAU,QAG/C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,6CACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,mCACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAW,CAAC,wDAAwD,EACvD,cAAjB,EAAM,MAAM,EAAqC,aAAjB,EAAM,MAAM,CACxC,8BACiB,eAAjB,EAAM,MAAM,CACZ,gCACA,4BAAA,CACJ,UACC,EAAM,MAAM,EAAE,OAAO,GAAG,cAAgB,EAAM,MAAM,EAAE,MAAM,OAGjE,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,uDAA6C,IACtD,WAAW,EAAM,YAAY,EAAE,OAAO,CAAC,cAOjD,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,eACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qBACZ,EAAM,KAAK,EAAI,MAAM,OAAO,CAAC,EAAM,KAAK,GAAK,EAAM,KAAK,CAAC,MAAM,CAAG,EACjE,EAAM,KAAK,CAAC,GAAG,CAAC,CAAC,EAAM,IACrB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAS,CAAA,CAAa,KAAM,GAAb,IAGlB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,oCAA2B,wCAvCtC,EAAM,QAAQ,WAsD1C"}