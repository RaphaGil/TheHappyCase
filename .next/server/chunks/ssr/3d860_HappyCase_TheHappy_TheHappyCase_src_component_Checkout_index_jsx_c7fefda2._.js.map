{"version":3,"sources":["../../../../../../../../Desktop/HappyCase/TheHappy/TheHappyCase/src/component/Checkout/index.jsx","../../../../../../../../Desktop/HappyCase/TheHappy/TheHappyCase/node_modules/%40stripe/stripe-js/dist/index.mjs","../../../../../../../../Desktop/HappyCase/TheHappy/TheHappyCase/node_modules/%40stripe/react-stripe-js/dist/react-stripe.esm.mjs","../../../../../../../../Desktop/HappyCase/TheHappy/TheHappyCase/src/utils/mockPaymentAPI.js","../../../../../../../../Desktop/HappyCase/TheHappy/TheHappyCase/src/component/InternationalNote/index.jsx","../../../../../../../../Desktop/HappyCase/TheHappy/TheHappyCase/src/component/Checkout/components/CheckoutHeader.jsx","../../../../../../../../Desktop/HappyCase/TheHappy/TheHappyCase/src/component/Checkout/components/LoadingState.jsx","../../../../../../../../Desktop/HappyCase/TheHappy/TheHappyCase/src/component/Checkout/components/CustomerInfoForm.jsx","../../../../../../../../Desktop/HappyCase/TheHappy/TheHappyCase/src/component/Checkout/components/PaymentSection.jsx","../../../../../../../../Desktop/HappyCase/TheHappy/TheHappyCase/src/component/Checkout/components/OrderSummaryItem.jsx","../../../../../../../../Desktop/HappyCase/TheHappy/TheHappyCase/src/component/Checkout/components/OrderSummary.jsx","../../../../../../../../Desktop/HappyCase/TheHappy/TheHappyCase/src/component/Checkout/components/MobileOrderSummary.jsx","../../../../../../../../Desktop/HappyCase/TheHappy/TheHappyCase/src/component/Checkout/components/ShippingInfoModal.jsx"],"sourcesContent":["'use client';\n\n// React & Router\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useRouter } from 'next/navigation';\nimport Link from 'next/link';\n\n// Stripe\nimport { loadStripe } from '@stripe/stripe-js';\nimport { Elements, useStripe, useElements } from '@stripe/react-stripe-js';\n\n// Contexts\nimport { useCart } from '../../context/CartContext';\nimport { useCurrency } from '../../context/CurrencyContext';\n\n// Utils\nimport { createPaymentIntent } from '../../utils/mockPaymentAPI';\nimport { getMaxAvailableQuantity, refreshInventoryFromSupabase } from '../../utils/inventory';\n\n// Components\nimport InternationalNote from '../InternationalNote';\nimport CheckoutHeader from './components/CheckoutHeader';\nimport LoadingState from './components/LoadingState';\nimport CustomerInfoForm from './components/CustomerInfoForm';\nimport PaymentSection from './components/PaymentSection';\nimport OrderSummary from './components/OrderSummary';\nimport MobileOrderSummary from './components/MobileOrderSummary';\nimport ShippingInfoModal from './components/ShippingInfoModal';\n\n// --- Constants ---\n// Get Stripe publishable key from environment\n// In Next.js, NEXT_PUBLIC_* variables are injected at build time and available via process.env\n// Access them directly - they're available in both server and client code\nconst getStripeKey = () => {\n  if (typeof process !== 'undefined' && process.env) {\n    return process.env.NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY || \n           process.env.VITE_STRIPE_PUBLISHABLE_KEY || \n           '';\n  }\n  return '';\n};\n\nconst stripePublishableKey = getStripeKey();\n\n// Debug logging in development\nif (typeof process !== 'undefined' && process.env?.NODE_ENV === 'development') {\n  console.log('[Checkout] Stripe key check:', {\n    hasProcess: typeof process !== 'undefined',\n    hasEnv: typeof process !== 'undefined' && !!process.env,\n    NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY: typeof process !== 'undefined' ? !!process.env?.NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY : false,\n    VITE_STRIPE_PUBLISHABLE_KEY: typeof process !== 'undefined' ? !!process.env?.VITE_STRIPE_PUBLISHABLE_KEY : false,\n    stripePublishableKey: stripePublishableKey ? `${stripePublishableKey.substring(0, 20)}...` : 'NOT SET',\n  });\n}\n\n// Validate Stripe key format (silent validation)\n\nconst stripePromise = loadStripe(\n  stripePublishableKey || \n  'pk_test_51234567890abcdefghijklmnopqrstuvwxyz1234567890'\n);\n\n// European countries list\nconst EUROPEAN_COUNTRIES = new Set([\n  'AL', 'AD', 'AT', 'BE', 'BA', 'BG', 'HR', 'CY', 'CZ', 'DK', 'EE', 'FI', 'FR', 'DE', 'GR', 'HU', 'IS', 'IE', 'IT', \n  'LV', 'LI', 'LT', 'LU', 'MT', 'MC', 'ME', 'NL', 'MK', 'NO', 'PL', 'PT', 'RO', 'SM', 'RS', 'SK', 'SI', 'ES', 'SE', 'CH'\n]);\n\nconst SHIPPING_RATES = {\n  GB: 3,\n  // All European countries use the same rate\n  ...Object.fromEntries(Array.from(EUROPEAN_COUNTRIES).map(code => [code, 10])),\n};\n\nconst SHIPPING_LABELS = {\n  GB: 'England',\n  // European countries will use their country name\n  AL: 'Albania', AD: 'Andorra', AT: 'Austria', BE: 'Belgium', BA: 'Bosnia and Herzegovina', BG: 'Bulgaria',\n  HR: 'Croatia', CY: 'Cyprus', CZ: 'Czech Republic', DK: 'Denmark', EE: 'Estonia', FI: 'Finland',\n  FR: 'France', DE: 'Germany', GR: 'Greece', HU: 'Hungary', IS: 'Iceland', IE: 'Ireland', IT: 'Italy',\n  LV: 'Latvia', LI: 'Liechtenstein', LT: 'Lithuania', LU: 'Luxembourg', MT: 'Malta', MC: 'Monaco',\n  ME: 'Montenegro', NL: 'Netherlands', MK: 'North Macedonia', NO: 'Norway', PL: 'Poland', PT: 'Portugal',\n  RO: 'Romania', SM: 'San Marino', RS: 'Serbia', SK: 'Slovakia', SI: 'Slovenia', ES: 'Spain',\n  SE: 'Sweden', CH: 'Switzerland',\n};\n\nconst DEFAULT_SHIPPING_RATE = 12;\n\nconst CURRENCY_MULTIPLIERS = {\n  'jpy': 1,  // Japanese Yen doesn't use decimals\n  'krw': 1,  // South Korean Won doesn't use decimals\n  'vnd': 1,  // Vietnamese Dong doesn't use decimals\n};\n\nconst CheckoutForm = () => {\n  // --- Hooks ---\n  const stripe = useStripe();\n  const elements = useElements();\n  const router = useRouter();\n  const { cart, getTotalPrice, clearCart, incrementItemQty, decrementItemQty, removeFromCart } = useCart();\n  const { formatPrice, setCurrency, currency } = useCurrency();\n\n  // --- State ---\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [paymentElementReady, setPaymentElementReady] = useState(false);\n  const [showShippingInfo, setShowShippingInfo] = useState(false);\n  const [showMobileSummary, setShowMobileSummary] = useState(false);\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [authenticatedEmail, setAuthenticatedEmail] = useState('');\n  const [itemErrors, setItemErrors] = useState({});\n  const [customerInfo, setCustomerInfo] = useState({\n    email: '',\n    name: '',\n    address: {\n      line1: '',\n      line2: '',\n      city: '',\n      postal_code: '',\n      country: 'GB',\n      state: '',\n    },\n  });\n\n  // --- Refs ---\n  const errorTimeoutsRef = useRef({});\n  const isNavigatingToSuccessRef = useRef(false);\n\n  // --- Computed Values ---\n  const subtotal = getTotalPrice();\n  const selectedCountry = customerInfo.address.country;\n  \n  // Calculate shipping cost\n  // Use fixed rates from SHIPPING_RATES\n  const shippingCost = cart.length === 0\n    ? 0\n    : SHIPPING_RATES[selectedCountry] ?? DEFAULT_SHIPPING_RATE;\n  \n  const shippingLabel = SHIPPING_LABELS[selectedCountry] || 'International';\n  const showInternationalNote = selectedCountry && selectedCountry.toUpperCase() !== 'GB' && cart.length > 0;\n  const totalWithShipping = subtotal + shippingCost;\n\n  // --- Effects ---\n  // Suppress non-critical hCaptcha errors (used internally by Stripe for fraud detection)\n  // These 401 errors are harmless - Stripe falls back to other fraud detection methods\n  useEffect(() => {\n    const handleUnhandledRejection = (event) => {\n      const errorMessage = event.reason?.message || event.reason?.toString() || '';\n      const errorUrl = event.reason?.url || '';\n      \n      // Suppress hCaptcha 401 errors (non-critical, Stripe handles gracefully)\n      if (errorMessage.includes('hcaptcha') || \n          errorMessage.includes('hCaptcha') ||\n          errorUrl.includes('api.hcaptcha.com') ||\n          (errorMessage.includes('401') && errorMessage.includes('Unauthorized'))) {\n        event.preventDefault(); // Prevent error from showing in console\n      }\n    };\n    \n    window.addEventListener('unhandledrejection', handleUnhandledRejection);\n    \n    return () => {\n      window.removeEventListener('unhandledrejection', handleUnhandledRejection);\n    };\n  }, []);\n\n  // Automatically change currency based on selected country\n  useEffect(() => {\n    if (selectedCountry) {\n      if (EUROPEAN_COUNTRIES.has(selectedCountry)) {\n        // Set currency to EUR for European countries\n        setCurrency('EUR');\n      } else if (selectedCountry === 'GB') {\n        // Set currency to GBP for UK\n        setCurrency('GBP');\n      }\n    }\n  }, [selectedCountry, setCurrency]);\n\n  // Check authentication status on mount and when returning from login\n  useEffect(() => {\n    const checkAuth = () => {\n      const userEmail = localStorage.getItem('userEmail');\n      const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';\n      \n      if (isLoggedIn && userEmail) {\n        setIsAuthenticated(true);\n        setAuthenticatedEmail(userEmail);\n        // Auto-fill email in customer info if empty\n        setCustomerInfo(prev => {\n          if (!prev.email) {\n            return {\n              ...prev,\n              email: userEmail\n            };\n          }\n          return prev;\n        });\n      } else {\n        setIsAuthenticated(false);\n        setAuthenticatedEmail('');\n      }\n    };\n    \n    checkAuth();\n    \n    // Check auth when window gains focus (user returns from login page)\n    const handleFocus = () => {\n      checkAuth();\n    };\n    \n    // Also listen for storage changes (when user logs in/out in another tab)\n    const handleStorageChange = (e) => {\n      if (e.key === 'userEmail' || e.key === 'isLoggedIn') {\n        checkAuth();\n      }\n    };\n    \n    window.addEventListener('focus', handleFocus);\n    window.addEventListener('storage', handleStorageChange);\n    \n    return () => {\n      window.removeEventListener('focus', handleFocus);\n      window.removeEventListener('storage', handleStorageChange);\n    };\n  }, []); // Run once on mount\n  \n  // Auto-clear error messages after 3 seconds\n  useEffect(() => {\n    const timeouts = errorTimeoutsRef.current;\n    \n    Object.keys(itemErrors).forEach((itemKey) => {\n      if (timeouts[itemKey]) {\n        clearTimeout(timeouts[itemKey]);\n      }\n      \n      timeouts[itemKey] = setTimeout(() => {\n        setItemErrors(prev => {\n          const newErrors = { ...prev };\n          if (typeof newErrors[itemKey] === 'string') {\n            delete newErrors[itemKey];\n          } else if (newErrors[itemKey] && typeof newErrors[itemKey] === 'object') {\n            delete newErrors[itemKey];\n          }\n          return newErrors;\n        });\n        delete timeouts[itemKey];\n      }, 3000);\n    });\n\n    return () => {\n      Object.values(timeouts).forEach(timeout => {\n        clearTimeout(timeout);\n      });\n    };\n  }, [itemErrors]);\n\n  // Redirect if cart is empty\n  useEffect(() => {\n    if (cart.length === 0 && !isNavigatingToSuccessRef.current) {\n      router.push('/cart');\n    }\n  }, [cart, router]);\n\n  // Reset payment element ready state when elements change\n  useEffect(() => {\n    setPaymentElementReady(false);\n  }, [elements]);\n\n  // --- Handlers ---\n  const handleIncrementWithCheck = (itemId) => {\n    // Find item by ID or by index\n    const item = typeof itemId === 'string' \n      ? cart.find(i => i.id === itemId)\n      : (typeof itemId === 'number' && itemId >= 0 && itemId < cart.length ? cart[itemId] : null);\n    \n    if (!item) {\n      return;\n    }\n    \n    const maxAvailable = getMaxAvailableQuantity(item, cart);\n    const canIncrement = maxAvailable === null || maxAvailable > 0;\n    \n    if (canIncrement) {\n      incrementItemQty(itemId);\n      // Clear error when successfully incrementing\n      setItemErrors(prev => {\n        const newErrors = { ...prev };\n        delete newErrors[itemId];\n        return newErrors;\n      });\n    } else {\n      // Show inline error message for out of stock items\n      let itemName = '';\n      \n      if (item.type === 'charm') {\n        itemName = item.name || item.pin?.name || 'Charm';\n        const errorMessage = `Oops! We don't have any more ${itemName} in stock right now, so you can't add more to your basket.`;\n        setItemErrors(prev => ({\n          ...prev,\n          [itemId]: errorMessage\n        }));\n      } else {\n        // For case items, just increment (they handle their own errors)\n        console.log('⚠️ Case item - incrementing anyway despite inventory check');\n        incrementItemQty(itemId);\n      }\n    }\n  };\n\n  // Handle decrement with error clearing\n  const handleDecrementWithCheck = (itemId) => {\n    decrementItemQty(itemId);\n    // Clear error when decrementing\n    setItemErrors(prev => {\n      const newErrors = { ...prev };\n      delete newErrors[itemId];\n      return newErrors;\n    });\n  };\n\n\n  // Redirect if cart is empty (but not if we're navigating to success page)\n  useEffect(() => {\n    // Don't redirect if we're navigating to success page\n    if (cart.length === 0 && !isNavigatingToSuccessRef.current) {\n      router.push('/cart');\n    }\n  }, [cart, router]);\n\n\n  const handleInputChange = (e) => {\n    const { name, value } = e.target;\n    if (name.includes('.')) {\n      const [parent, child] = name.split('.');\n      setCustomerInfo(prev => ({\n        ...prev,\n        [parent]: {\n          ...prev[parent],\n          [child]: value,\n        },\n      }));\n    } else {\n      setCustomerInfo(prev => ({\n        ...prev,\n        [name]: value,\n      }));\n    }\n  };\n\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n    \n    if (!stripe || !elements) {\n      setError('Stripe is not loaded. Please wait...');\n      return;\n    }\n\n    // Check if Payment Element is ready\n    const paymentElement = elements.getElement('payment');\n    if (!paymentElement) {\n      setError('Payment form is not ready. Please wait...');\n      return;\n    }\n\n    if (!paymentElementReady) {\n      setError('Payment form is still loading. Please wait...');\n      return;\n    }\n\n    setLoading(true);\n    setError(null);\n\n    try {\n      // Double-check inventory from Supabase before processing payment\n      // This prevents race conditions where another customer bought the last item\n      await refreshInventoryFromSupabase();\n      \n      // Check each item in cart against current Supabase inventory\n      // Allow purchase if user has the item in their cart (even if it shows as sold out)\n      const outOfStockItems = [];\n      \n      // Group items by their inventory key (case+color or charm identity)\n      const itemGroups = new Map();\n      \n      for (const item of cart) {\n        let groupKey = '';\n        let itemName = '';\n        \n        if (item.type === 'charm') {\n          const category = item.category || item.pin?.category || 'colorful';\n          const pinName = item.pin?.name || item.name || '';\n          groupKey = `charm-${category}-${pinName}`;\n          itemName = item.name || item.pin?.name || 'Charm';\n        } else if (item.caseType && item.color) {\n          groupKey = `case-${item.caseType}-${item.color}`;\n          itemName = item.caseName || item.name || 'Passport Case';\n        } else {\n          groupKey = item.id || `item-${item.name}`;\n          itemName = item.name || 'Item';\n        }\n        \n        if (!itemGroups.has(groupKey)) {\n          itemGroups.set(groupKey, {\n            item: item,\n            name: itemName,\n            totalQuantity: 0\n          });\n        }\n        \n        const group = itemGroups.get(groupKey);\n        group.totalQuantity += (item.quantity || 1);\n      }\n      \n      // Check each group against base inventory (without cart subtraction)\n      for (const [groupKey, group] of itemGroups) {\n        // Get base inventory without subtracting cart items\n        const baseInventory = getMaxAvailableQuantity(group.item, []);\n        \n        // If item has limited stock\n        if (baseInventory !== null) {\n          // Check if base inventory is sufficient for what's in cart\n          // If baseInventory is 0, it means truly out of stock\n          // If baseInventory > 0 but less than totalQuantity, insufficient stock\n          if (baseInventory === 0 || group.totalQuantity > baseInventory) {\n            outOfStockItems.push(group.name);\n          }\n        }\n        // If baseInventory is null, it means unlimited stock - always allow\n      }\n      \n      // If any items are out of stock, prevent payment\n      if (outOfStockItems.length > 0) {\n        const itemsList = outOfStockItems.length === 1 \n          ? outOfStockItems[0]\n          : outOfStockItems.slice(0, -1).join(', ') + ' and ' + outOfStockItems[outOfStockItems.length - 1];\n        \n        const errorMessage = `Sorry, ${itemsList} ${outOfStockItems.length === 1 ? 'is' : 'are'} no longer available. Please remove ${outOfStockItems.length === 1 ? 'it' : 'them'} from your cart and try again.`;\n        setError(errorMessage);\n        setLoading(false);\n        return;\n      }\n      // Confirm the payment with Stripe\n      // The clientSecret is automatically retrieved from Elements context\n      const { error: stripeError, paymentIntent } = await stripe.confirmPayment({\n        elements,\n        confirmParams: {\n          return_url: `${window.location.origin}/payment-success`,\n          payment_method_data: {\n            billing_details: {\n              name: customerInfo.name,\n              email: customerInfo.email,\n              phone: null, // Required when fields.billing_details.phone is set to 'never'\n              address: {\n                line1: customerInfo.address.line1,\n                line2: customerInfo.address.line2,\n                city: customerInfo.address.city,\n                postal_code: customerInfo.address.postal_code,\n                country: customerInfo.address.country,\n                state: customerInfo.address.state,\n              },\n            },\n          },\n        },\n        redirect: 'if_required',\n      });\n\n      if (stripeError) {\n        setError(stripeError.message || 'An error occurred while processing your payment.');\n        setLoading(false);\n        return;\n      }\n\n      if (paymentIntent && paymentIntent.status === 'succeeded') {\n        // Payment succeeded - navigate to success page\n        isNavigatingToSuccessRef.current = true; // Set flag to prevent redirect\n        const cartItemsCopy = [...cart]; // Create a copy to preserve cart data\n        clearCart(); // Clear cart before navigation\n        // Store data in sessionStorage since Next.js doesn't support navigation state\n        if (typeof window !== 'undefined') {\n          sessionStorage.setItem('paymentSuccessData', JSON.stringify({\n            paymentIntent,\n            customerInfo,\n            items: cartItemsCopy,\n            shippingCost,\n            totalWithShipping,\n            subtotal,\n          }));\n        }\n        router.push('/payment-success');\n      } else if (paymentIntent && paymentIntent.status === 'requires_action') {\n        // Payment requires additional action (e.g., 3D Secure)\n        // Stripe will handle redirect automatically to return_url\n        // After redirect completes, user will land on payment-success page\n      } else if (paymentIntent) {\n        // Other status (processing, requires_confirmation, etc.)\n        // For most cases, we still show success as the payment was initiated\n        // Note: 'processing' status means payment is being processed and may take time\n        isNavigatingToSuccessRef.current = true; // Set flag to prevent redirect\n        const cartItemsCopy = [...cart]; // Create a copy to preserve cart data\n        clearCart(); // Clear cart before navigation\n        // Store data in sessionStorage since Next.js doesn't support navigation state\n        if (typeof window !== 'undefined') {\n          sessionStorage.setItem('paymentSuccessData', JSON.stringify({\n            paymentIntent,\n            customerInfo,\n            items: cartItemsCopy,\n            shippingCost,\n            totalWithShipping,\n            subtotal,\n          }));\n        }\n        router.push('/payment-success');\n      }\n      } catch (err) {\n        setError('An error occurred while processing your payment.');\n      } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"h-full w-full\">\n      <MobileOrderSummary\n        isOpen={showMobileSummary}\n        onToggle={() => setShowMobileSummary(prev => !prev)}\n        cartLength={cart.length}\n        totalWithShipping={totalWithShipping}\n        formatPrice={formatPrice}\n        cart={cart}\n        subtotal={subtotal}\n        shippingCost={shippingCost}\n        shippingLabel={shippingLabel}\n        showInternationalNote={showInternationalNote}\n        onShowShippingInfo={() => setShowShippingInfo(true)}\n        onIncrement={handleIncrementWithCheck}\n        onDecrement={handleDecrementWithCheck}\n        onRemove={removeFromCart}\n        itemErrors={itemErrors}\n      />\n \n      <div className=\"flex flex-col lg:flex-row  w-full \">\n        {/* Checkout form */}\n        <form\n          onSubmit={handleSubmit}\n          className=\"space-y-6  mt-6 lg:mt-0 lg:p-6 w-full lg:w-1/2 lg:flex-shrink-0\"\n        > \n        {/* Customer Information */}\n        <CustomerInfoForm \n          customerInfo={customerInfo}\n          onInputChange={handleInputChange}\n          isAuthenticated={isAuthenticated}\n          authenticatedEmail={authenticatedEmail}\n          onSignIn={(email) => {\n            setIsAuthenticated(true);\n            setAuthenticatedEmail(email);\n          }}\n          onSignOut={() => {\n            setIsAuthenticated(false);\n            setAuthenticatedEmail('');\n            localStorage.removeItem('userId'); // Clear user ID\n          }}\n        />\n\n        {/* Payment Information */}\n        <PaymentSection\n          paymentElementReady={paymentElementReady}\n          error={error}\n          onPaymentReady={() => setPaymentElementReady(true)}\n          onPaymentError={(errorMessage) => {\n            setError(errorMessage);\n          }}\n        />\n\n        <button\n          type=\"submit\"\n          disabled={!stripe || !elements || loading || !paymentElementReady}\n          className=\"w-full py-3 text-sm uppercase tracking-wider font-light disabled:opacity-50 disabled:cursor-not-allowed font-inter bg-btn-primary hover:bg-btn-primary-hover text-btn-primary-text border border-btn-primary-border hover:border-btn-primary-hover transition-all duration-200\"\n        >\n          {loading ? 'Processing...' : 'Complete Payment'}\n</button>\n        {showInternationalNote && (\n          <InternationalNote\n            className=\"mt-4\"\n            showOnDesktop={false}\n            showOnMobile={true}\n            title=\"Custom Duties & Taxes Included\"\n            message=\"The total amount you pay includes all applicable customs duties & taxes. We guarantee no additional charges on delivery.\"\n            variant=\"gray\"\n          />\n        )}\n        </form>\n\n        {/* Order Summary */}\n        <aside className=\"hidden lg:flex border border-gray-200 bg-yellow-50 p-6 w-full lg:w-1/2 lg:sticky lg:top-20 mt-4 lg:mt-0 flex-col max-h-[calc(100vh-8rem)]\">\n          <div className=\"flex-1 overflow-hidden flex flex-col min-h-0\">\n            <OrderSummary\n              cart={cart}\n              formatPrice={formatPrice}\n              subtotal={subtotal}\n              shippingCost={shippingCost}\n              shippingLabel={shippingLabel}\n              totalWithShipping={totalWithShipping}\n              showInternationalNote={showInternationalNote}\n              onShowShippingInfo={() => setShowShippingInfo(true)}\n              onIncrement={handleIncrementWithCheck}\n              onDecrement={handleDecrementWithCheck}\n              onRemove={removeFromCart}\n              itemErrors={itemErrors}\n            />\n          </div>\n        </aside>\n        \n        <ShippingInfoModal\n          isOpen={showShippingInfo}\n          onClose={() => setShowShippingInfo(false)}\n        />\n      </div>\n      \n      {/* Footer Links */}\n      <div className=\"w-full border-t border-gray-200 mt-8 pt-6 pb-6\">\n        <div className=\"max-w-6xl mx-auto px-4 lg:px-6\">\n          <div className=\"flex flex-wrap justify-center gap-4 md:gap-6 text-xs text-gray-600 font-light font-inter\">\n            <Link \n              href=\"/returns\" \n              className=\"hover:text-gray-900 transition-colors underline\"\n            >\n              Refund Policy\n            </Link>\n            <span className=\"text-gray-300\">|</span>\n            <Link \n              href=\"/shipping\" \n              className=\"hover:text-gray-900 transition-colors underline\"\n            >\n              Shipping\n            </Link>\n            <span className=\"text-gray-300\">|</span>\n            <Link \n              href=\"/returns\" \n              className=\"hover:text-gray-900 transition-colors underline\"\n            >\n              Cancellations\n            </Link>\n            <span className=\"text-gray-300\">|</span>\n            <Link \n              href=\"/about\" \n              className=\"hover:text-gray-900 transition-colors underline\"\n            >\n              Contact\n            </Link>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst Checkout = () => {\n  const { cart, getTotalPrice } = useCart();\n  const { currency, convertPrice } = useCurrency();\n  const router = useRouter();\n  const [options, setOptions] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [paymentError, setPaymentError] = useState(null);\n  const hasInitializedRef = useRef(false);\n\n  useEffect(() => {\n    // Don't redirect to cart if we're already on a different page (e.g., payment-success)\n    if (typeof window !== 'undefined') {\n      const currentPath = window.location.pathname;\n      if (cart.length === 0 && (currentPath === '/checkout' || currentPath.includes('/checkout'))) {\n        router.push('/cart');\n        return;\n      }\n    }\n\n    // Only initialize payment options once when we have items in cart\n    if (cart.length === 0 || hasInitializedRef.current || options !== null) {\n      return;\n    }\n\n    const initializeOptions = async () => {\n      try {\n        hasInitializedRef.current = true;\n        setLoading(true);\n        setPaymentError(null); // Clear any previous errors\n        \n        // Get total price in GBP, then convert to selected currency\n        const totalPriceGBP = getTotalPrice();\n        const totalPriceInCurrency = convertPrice(totalPriceGBP);\n        \n        // Convert to smallest currency unit (pence, cents, etc.)\n        // For currencies like JPY that don't use decimals, multiply by 1\n        const currencyMultipliers = {\n          'jpy': 1,  // Japanese Yen doesn't use decimals\n          'krw': 1,  // South Korean Won doesn't use decimals\n          'vnd': 1,  // Vietnamese Dong doesn't use decimals\n        };\n        const multiplier = currencyMultipliers[currency.toLowerCase()] || 100;\n        const amount = Math.round(totalPriceInCurrency * multiplier);\n        const currencyCode = currency.toLowerCase();\n        \n        const paymentData = {\n          amount,\n          currency: currencyCode,\n          items: cart,\n          customerInfo: {},\n        };\n        \n        const result = await createPaymentIntent(paymentData);\n\n        setOptions({\n          clientSecret: result.client_secret,\n          appearance: {\n            theme: 'stripe',\n            variables: {\n              colorPrimary: '#3b82f6',\n              colorBackground: '#ffffff',\n              colorText: '#1f2937',\n              colorDanger: '#ef4444',\n              fontFamily: 'system-ui, sans-serif',\n              spacingUnit: '4px',\n              borderRadius: '8px',\n            },\n          },\n        });\n      } catch (err) {\n        // More detailed error message\n        let errorMessage = 'Failed to initialize payment. ';\n        if (err?.message) {\n          errorMessage += err.message;\n        } else {\n          errorMessage += 'Please ensure the backend server is running on port 3001.';\n        }\n        \n        setPaymentError(errorMessage);\n        hasInitializedRef.current = false; // Allow retry on error\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    initializeOptions();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [cart.length]); // Only re-run if cart length changes (hasInitializedRef prevents re-init)\n\n  if (loading) {\n    return <LoadingState />;\n  }\n\n  if (paymentError) {\n    return (\n      <div className=\"min-h-screen flex flex-col bg-white\">\n        <CheckoutHeader />\n        <div className=\"flex-1 flex items-center justify-center bg-white py-10\">\n          <div className=\"max-w-md mx-auto px-4 text-center\">\n            <div className=\"bg-red-50 border border-red-200 rounded-lg p-6\">\n              <h2 className=\"text-xl font-semibold text-red-900 mb-3\" style={{fontFamily: \"'Poppins', sans-serif\"}}>\n                Payment Setup Error\n              </h2>\n              <p className=\"text-red-700 mb-4 font-inter\">\n                {paymentError}\n              </p>\n              <div className=\"text-sm text-red-600 mb-4 font-inter\">\n                <p className=\"mb-2\">To fix this issue:</p>\n                <ol className=\"list-decimal list-inside space-y-1 text-left\">\n                  <li>Make sure your backend server is running: <code className=\"bg-red-100 px-1 rounded\">npm run server</code></li>\n                  <li>Verify the server is running on port 3001</li>\n                  <li>Check that the proxy is configured correctly</li>\n                  <li>Refresh this page to retry</li>\n                </ol>\n              </div>\n              <button\n                onClick={() => {\n                  setPaymentError(null);\n                  hasInitializedRef.current = false;\n                  window.location.reload();\n                }}\n                className=\"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-md transition-colors font-inter\"\n              >\n                Retry\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (!options) {\n    return <LoadingState />;\n  }\n\n  // Validate Stripe key is set and not the placeholder\n  const isPlaceholderKey = stripePublishableKey === 'pk_test_51234567890abcdefghijklmnopqrstuvwxyz1234567890';\n  if (!stripePublishableKey || isPlaceholderKey) {\n    return (\n      <div className=\"min-h-screen flex flex-col bg-white\">\n        <CheckoutHeader />\n        <div className=\"flex-1 flex items-center justify-center bg-white py-10\">\n          <div className=\"max-w-md mx-auto px-4 text-center\">\n            <div className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-6\">\n              <h2 className=\"text-xl font-semibold text-yellow-900 mb-3\" style={{fontFamily: \"'Poppins', sans-serif\"}}>\n                Stripe Configuration Missing\n              </h2>\n              <p className=\"text-yellow-700 mb-4 font-inter\">\n                Please set NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY in your environment variables.\n              </p>\n              <p className=\"text-xs text-yellow-600 mb-2 font-inter\">\n                (Also supports VITE_STRIPE_PUBLISHABLE_KEY for backward compatibility)\n              </p>\n              <p className=\"text-sm text-yellow-600 font-inter\">\n                The Stripe publishable key is required to process payments.\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen flex flex-col bg-white\">\n      <CheckoutHeader />\n      <div className=\"flex-1 flex items-stretch bg-white py-10\">\n        <div className=\"flex-1 max-w-6xl mx-auto px-4 lg:px-6\">\n          <Elements stripe={stripePromise} options={options}>\n            <CheckoutForm />\n          </Elements>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Checkout;\n","var RELEASE_TRAIN = 'basil';\n\nvar runtimeVersionToUrlVersion = function runtimeVersionToUrlVersion(version) {\n  return version === 3 ? 'v3' : version;\n};\n\nvar ORIGIN = 'https://js.stripe.com';\nvar STRIPE_JS_URL = \"\".concat(ORIGIN, \"/\").concat(RELEASE_TRAIN, \"/stripe.js\");\nvar V3_URL_REGEX = /^https:\\/\\/js\\.stripe\\.com\\/v3\\/?(\\?.*)?$/;\nvar STRIPE_JS_URL_REGEX = /^https:\\/\\/js\\.stripe\\.com\\/(v3|[a-z]+)\\/stripe\\.js(\\?.*)?$/;\nvar EXISTING_SCRIPT_MESSAGE = 'loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used';\n\nvar isStripeJSURL = function isStripeJSURL(url) {\n  return V3_URL_REGEX.test(url) || STRIPE_JS_URL_REGEX.test(url);\n};\n\nvar findScript = function findScript() {\n  var scripts = document.querySelectorAll(\"script[src^=\\\"\".concat(ORIGIN, \"\\\"]\"));\n\n  for (var i = 0; i < scripts.length; i++) {\n    var script = scripts[i];\n\n    if (!isStripeJSURL(script.src)) {\n      continue;\n    }\n\n    return script;\n  }\n\n  return null;\n};\n\nvar injectScript = function injectScript(params) {\n  var queryString = params && !params.advancedFraudSignals ? '?advancedFraudSignals=false' : '';\n  var script = document.createElement('script');\n  script.src = \"\".concat(STRIPE_JS_URL).concat(queryString);\n  var headOrBody = document.head || document.body;\n\n  if (!headOrBody) {\n    throw new Error('Expected document.body not to be null. Stripe.js requires a <body> element.');\n  }\n\n  headOrBody.appendChild(script);\n  return script;\n};\n\nvar registerWrapper = function registerWrapper(stripe, startTime) {\n  if (!stripe || !stripe._registerWrapper) {\n    return;\n  }\n\n  stripe._registerWrapper({\n    name: 'stripe-js',\n    version: \"7.9.0\",\n    startTime: startTime\n  });\n};\n\nvar stripePromise$1 = null;\nvar onErrorListener = null;\nvar onLoadListener = null;\n\nvar onError = function onError(reject) {\n  return function (cause) {\n    reject(new Error('Failed to load Stripe.js', {\n      cause: cause\n    }));\n  };\n};\n\nvar onLoad = function onLoad(resolve, reject) {\n  return function () {\n    if (window.Stripe) {\n      resolve(window.Stripe);\n    } else {\n      reject(new Error('Stripe.js not available'));\n    }\n  };\n};\n\nvar loadScript = function loadScript(params) {\n  // Ensure that we only attempt to load Stripe.js at most once\n  if (stripePromise$1 !== null) {\n    return stripePromise$1;\n  }\n\n  stripePromise$1 = new Promise(function (resolve, reject) {\n    if (typeof window === 'undefined' || typeof document === 'undefined') {\n      // Resolve to null when imported server side. This makes the module\n      // safe to import in an isomorphic code base.\n      resolve(null);\n      return;\n    }\n\n    if (window.Stripe && params) {\n      console.warn(EXISTING_SCRIPT_MESSAGE);\n    }\n\n    if (window.Stripe) {\n      resolve(window.Stripe);\n      return;\n    }\n\n    try {\n      var script = findScript();\n\n      if (script && params) {\n        console.warn(EXISTING_SCRIPT_MESSAGE);\n      } else if (!script) {\n        script = injectScript(params);\n      } else if (script && onLoadListener !== null && onErrorListener !== null) {\n        var _script$parentNode;\n\n        // remove event listeners\n        script.removeEventListener('load', onLoadListener);\n        script.removeEventListener('error', onErrorListener); // if script exists, but we are reloading due to an error,\n        // reload script to trigger 'load' event\n\n        (_script$parentNode = script.parentNode) === null || _script$parentNode === void 0 ? void 0 : _script$parentNode.removeChild(script);\n        script = injectScript(params);\n      }\n\n      onLoadListener = onLoad(resolve, reject);\n      onErrorListener = onError(reject);\n      script.addEventListener('load', onLoadListener);\n      script.addEventListener('error', onErrorListener);\n    } catch (error) {\n      reject(error);\n      return;\n    }\n  }); // Resets stripePromise on error\n\n  return stripePromise$1[\"catch\"](function (error) {\n    stripePromise$1 = null;\n    return Promise.reject(error);\n  });\n};\nvar initStripe = function initStripe(maybeStripe, args, startTime) {\n  if (maybeStripe === null) {\n    return null;\n  }\n\n  var pk = args[0];\n  var isTestKey = pk.match(/^pk_test/); // @ts-expect-error this is not publicly typed\n\n  var version = runtimeVersionToUrlVersion(maybeStripe.version);\n  var expectedVersion = RELEASE_TRAIN;\n\n  if (isTestKey && version !== expectedVersion) {\n    console.warn(\"Stripe.js@\".concat(version, \" was loaded on the page, but @stripe/stripe-js@\").concat(\"7.9.0\", \" expected Stripe.js@\").concat(expectedVersion, \". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning\"));\n  }\n\n  var stripe = maybeStripe.apply(undefined, args);\n  registerWrapper(stripe, startTime);\n  return stripe;\n}; // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\n\nvar stripePromise;\nvar loadCalled = false;\n\nvar getStripePromise = function getStripePromise() {\n  if (stripePromise) {\n    return stripePromise;\n  }\n\n  stripePromise = loadScript(null)[\"catch\"](function (error) {\n    // clear cache on error\n    stripePromise = null;\n    return Promise.reject(error);\n  });\n  return stripePromise;\n}; // Execute our own script injection after a tick to give users time to do their\n// own script injection.\n\n\nPromise.resolve().then(function () {\n  return getStripePromise();\n})[\"catch\"](function (error) {\n  if (!loadCalled) {\n    console.warn(error);\n  }\n});\nvar loadStripe = function loadStripe() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  loadCalled = true;\n  var startTime = Date.now(); // if previous attempts are unsuccessful, will re-load script\n\n  return getStripePromise().then(function (maybeStripe) {\n    return initStripe(maybeStripe, args, startTime);\n  });\n};\n\nexport { loadStripe };\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  var _i = arr && (typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]);\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n  return arr2;\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nvar useAttachEvent = function useAttachEvent(element, event, cb) {\n  var cbDefined = !!cb;\n  var cbRef = React.useRef(cb); // In many integrations the callback prop changes on each render.\n  // Using a ref saves us from calling element.on/.off every render.\n\n  React.useEffect(function () {\n    cbRef.current = cb;\n  }, [cb]);\n  React.useEffect(function () {\n    if (!cbDefined || !element) {\n      return function () {};\n    }\n\n    var decoratedCb = function decoratedCb() {\n      if (cbRef.current) {\n        cbRef.current.apply(cbRef, arguments);\n      }\n    };\n\n    element.on(event, decoratedCb);\n    return function () {\n      element.off(event, decoratedCb);\n    };\n  }, [cbDefined, event, element, cbRef]);\n};\n\nvar usePrevious = function usePrevious(value) {\n  var ref = React.useRef(value);\n  React.useEffect(function () {\n    ref.current = value;\n  }, [value]);\n  return ref.current;\n};\n\nvar isUnknownObject = function isUnknownObject(raw) {\n  return raw !== null && _typeof(raw) === 'object';\n};\nvar isPromise = function isPromise(raw) {\n  return isUnknownObject(raw) && typeof raw.then === 'function';\n}; // We are using types to enforce the `stripe` prop in this lib,\n// but in an untyped integration `stripe` could be anything, so we need\n// to do some sanity validation to prevent type errors.\n\nvar isStripe = function isStripe(raw) {\n  return isUnknownObject(raw) && typeof raw.elements === 'function' && typeof raw.createToken === 'function' && typeof raw.createPaymentMethod === 'function' && typeof raw.confirmCardPayment === 'function';\n};\n\nvar PLAIN_OBJECT_STR = '[object Object]';\nvar isEqual = function isEqual(left, right) {\n  if (!isUnknownObject(left) || !isUnknownObject(right)) {\n    return left === right;\n  }\n\n  var leftArray = Array.isArray(left);\n  var rightArray = Array.isArray(right);\n  if (leftArray !== rightArray) return false;\n  var leftPlainObject = Object.prototype.toString.call(left) === PLAIN_OBJECT_STR;\n  var rightPlainObject = Object.prototype.toString.call(right) === PLAIN_OBJECT_STR;\n  if (leftPlainObject !== rightPlainObject) return false; // not sure what sort of special object this is (regexp is one option), so\n  // fallback to reference check.\n\n  if (!leftPlainObject && !leftArray) return left === right;\n  var leftKeys = Object.keys(left);\n  var rightKeys = Object.keys(right);\n  if (leftKeys.length !== rightKeys.length) return false;\n  var keySet = {};\n\n  for (var i = 0; i < leftKeys.length; i += 1) {\n    keySet[leftKeys[i]] = true;\n  }\n\n  for (var _i = 0; _i < rightKeys.length; _i += 1) {\n    keySet[rightKeys[_i]] = true;\n  }\n\n  var allKeys = Object.keys(keySet);\n\n  if (allKeys.length !== leftKeys.length) {\n    return false;\n  }\n\n  var l = left;\n  var r = right;\n\n  var pred = function pred(key) {\n    return isEqual(l[key], r[key]);\n  };\n\n  return allKeys.every(pred);\n};\n\nvar extractAllowedOptionsUpdates = function extractAllowedOptionsUpdates(options, prevOptions, immutableKeys) {\n  if (!isUnknownObject(options)) {\n    return null;\n  }\n\n  return Object.keys(options).reduce(function (newOptions, key) {\n    var isUpdated = !isUnknownObject(prevOptions) || !isEqual(options[key], prevOptions[key]);\n\n    if (immutableKeys.includes(key)) {\n      if (isUpdated) {\n        console.warn(\"Unsupported prop change: options.\".concat(key, \" is not a mutable property.\"));\n      }\n\n      return newOptions;\n    }\n\n    if (!isUpdated) {\n      return newOptions;\n    }\n\n    return _objectSpread2(_objectSpread2({}, newOptions || {}), {}, _defineProperty({}, key, options[key]));\n  }, null);\n};\n\nvar INVALID_STRIPE_ERROR$1 = 'Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.'; // We are using types to enforce the `stripe` prop in this lib, but in a real\n// integration `stripe` could be anything, so we need to do some sanity\n// validation to prevent type errors.\n\nvar validateStripe = function validateStripe(maybeStripe) {\n  var errorMsg = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : INVALID_STRIPE_ERROR$1;\n\n  if (maybeStripe === null || isStripe(maybeStripe)) {\n    return maybeStripe;\n  }\n\n  throw new Error(errorMsg);\n};\n\nvar parseStripeProp = function parseStripeProp(raw) {\n  var errorMsg = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : INVALID_STRIPE_ERROR$1;\n\n  if (isPromise(raw)) {\n    return {\n      tag: 'async',\n      stripePromise: Promise.resolve(raw).then(function (result) {\n        return validateStripe(result, errorMsg);\n      })\n    };\n  }\n\n  var stripe = validateStripe(raw, errorMsg);\n\n  if (stripe === null) {\n    return {\n      tag: 'empty'\n    };\n  }\n\n  return {\n    tag: 'sync',\n    stripe: stripe\n  };\n};\n\nvar registerWithStripeJs = function registerWithStripeJs(stripe) {\n  if (!stripe || !stripe._registerWrapper || !stripe.registerAppInfo) {\n    return;\n  }\n\n  stripe._registerWrapper({\n    name: 'react-stripe-js',\n    version: \"4.0.2\"\n  });\n\n  stripe.registerAppInfo({\n    name: 'react-stripe-js',\n    version: \"4.0.2\",\n    url: 'https://stripe.com/docs/stripe-js/react'\n  });\n};\n\nvar ElementsContext = /*#__PURE__*/React.createContext(null);\nElementsContext.displayName = 'ElementsContext';\nvar parseElementsContext = function parseElementsContext(ctx, useCase) {\n  if (!ctx) {\n    throw new Error(\"Could not find Elements context; You need to wrap the part of your app that \".concat(useCase, \" in an <Elements> provider.\"));\n  }\n\n  return ctx;\n};\n/**\n * The `Elements` provider allows you to use [Element components](https://stripe.com/docs/stripe-js/react#element-components) and access the [Stripe object](https://stripe.com/docs/js/initializing) in any nested component.\n * Render an `Elements` provider at the root of your React app so that it is available everywhere you need it.\n *\n * To use the `Elements` provider, call `loadStripe` from `@stripe/stripe-js` with your publishable key.\n * The `loadStripe` function will asynchronously load the Stripe.js script and initialize a `Stripe` object.\n * Pass the returned `Promise` to `Elements`.\n *\n * @docs https://docs.stripe.com/sdks/stripejs-react?ui=elements#elements-provider\n */\n\nvar Elements = function Elements(_ref) {\n  var rawStripeProp = _ref.stripe,\n      options = _ref.options,\n      children = _ref.children;\n  var parsed = React.useMemo(function () {\n    return parseStripeProp(rawStripeProp);\n  }, [rawStripeProp]); // For a sync stripe instance, initialize into context\n\n  var _React$useState = React.useState(function () {\n    return {\n      stripe: parsed.tag === 'sync' ? parsed.stripe : null,\n      elements: parsed.tag === 'sync' ? parsed.stripe.elements(options) : null\n    };\n  }),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      ctx = _React$useState2[0],\n      setContext = _React$useState2[1];\n\n  React.useEffect(function () {\n    var isMounted = true;\n\n    var safeSetContext = function safeSetContext(stripe) {\n      setContext(function (ctx) {\n        // no-op if we already have a stripe instance (https://github.com/stripe/react-stripe-js/issues/296)\n        if (ctx.stripe) return ctx;\n        return {\n          stripe: stripe,\n          elements: stripe.elements(options)\n        };\n      });\n    }; // For an async stripePromise, store it in context once resolved\n\n\n    if (parsed.tag === 'async' && !ctx.stripe) {\n      parsed.stripePromise.then(function (stripe) {\n        if (stripe && isMounted) {\n          // Only update Elements context if the component is still mounted\n          // and stripe is not null. We allow stripe to be null to make\n          // handling SSR easier.\n          safeSetContext(stripe);\n        }\n      });\n    } else if (parsed.tag === 'sync' && !ctx.stripe) {\n      // Or, handle a sync stripe instance going from null -> populated\n      safeSetContext(parsed.stripe);\n    }\n\n    return function () {\n      isMounted = false;\n    };\n  }, [parsed, ctx, options]); // Warn on changes to stripe prop\n\n  var prevStripe = usePrevious(rawStripeProp);\n  React.useEffect(function () {\n    if (prevStripe !== null && prevStripe !== rawStripeProp) {\n      console.warn('Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.');\n    }\n  }, [prevStripe, rawStripeProp]); // Apply updates to elements when options prop has relevant changes\n\n  var prevOptions = usePrevious(options);\n  React.useEffect(function () {\n    if (!ctx.elements) {\n      return;\n    }\n\n    var updates = extractAllowedOptionsUpdates(options, prevOptions, ['clientSecret', 'fonts']);\n\n    if (updates) {\n      ctx.elements.update(updates);\n    }\n  }, [options, prevOptions, ctx.elements]); // Attach react-stripe-js version to stripe.js instance\n\n  React.useEffect(function () {\n    registerWithStripeJs(ctx.stripe);\n  }, [ctx.stripe]);\n  return /*#__PURE__*/React.createElement(ElementsContext.Provider, {\n    value: ctx\n  }, children);\n};\nElements.propTypes = {\n  stripe: PropTypes.any,\n  options: PropTypes.object\n};\nvar useElementsContextWithUseCase = function useElementsContextWithUseCase(useCaseMessage) {\n  var ctx = React.useContext(ElementsContext);\n  return parseElementsContext(ctx, useCaseMessage);\n};\n/**\n * @docs https://stripe.com/docs/stripe-js/react#useelements-hook\n */\n\nvar useElements = function useElements() {\n  var _useElementsContextWi = useElementsContextWithUseCase('calls useElements()'),\n      elements = _useElementsContextWi.elements;\n\n  return elements;\n};\n/**\n * @docs https://stripe.com/docs/stripe-js/react#elements-consumer\n */\n\nvar ElementsConsumer = function ElementsConsumer(_ref2) {\n  var children = _ref2.children;\n  var ctx = useElementsContextWithUseCase('mounts <ElementsConsumer>'); // Assert to satisfy the busted React.FC return type (it should be ReactNode)\n\n  return children(ctx);\n};\nElementsConsumer.propTypes = {\n  children: PropTypes.func.isRequired\n};\n\nvar CheckoutContext = /*#__PURE__*/React.createContext(null);\nCheckoutContext.displayName = 'CheckoutContext';\n({\n  stripe: PropTypes.any,\n  options: PropTypes.shape({\n    fetchClientSecret: PropTypes.func.isRequired,\n    elementsOptions: PropTypes.object\n  }).isRequired\n});\nvar useElementsOrCheckoutContextWithUseCase = function useElementsOrCheckoutContextWithUseCase(useCaseString) {\n  var checkout = React.useContext(CheckoutContext);\n  var elements = React.useContext(ElementsContext);\n\n  if (checkout) {\n    if (elements) {\n      throw new Error(\"You cannot wrap the part of your app that \".concat(useCaseString, \" in both <CheckoutProvider> and <Elements> providers.\"));\n    } else {\n      return checkout;\n    }\n  } else {\n    return parseElementsContext(elements, useCaseString);\n  }\n};\n\nvar _excluded = [\"mode\"];\n\nvar capitalized = function capitalized(str) {\n  return str.charAt(0).toUpperCase() + str.slice(1);\n};\n\nvar createElementComponent = function createElementComponent(type, isServer) {\n  var displayName = \"\".concat(capitalized(type), \"Element\");\n\n  var ClientElement = function ClientElement(_ref) {\n    var id = _ref.id,\n        className = _ref.className,\n        _ref$options = _ref.options,\n        options = _ref$options === void 0 ? {} : _ref$options,\n        onBlur = _ref.onBlur,\n        onFocus = _ref.onFocus,\n        onReady = _ref.onReady,\n        onChange = _ref.onChange,\n        onEscape = _ref.onEscape,\n        onClick = _ref.onClick,\n        onLoadError = _ref.onLoadError,\n        onLoaderStart = _ref.onLoaderStart,\n        onNetworksChange = _ref.onNetworksChange,\n        onConfirm = _ref.onConfirm,\n        onCancel = _ref.onCancel,\n        onShippingAddressChange = _ref.onShippingAddressChange,\n        onShippingRateChange = _ref.onShippingRateChange,\n        onSavedPaymentMethodRemove = _ref.onSavedPaymentMethodRemove,\n        onSavedPaymentMethodUpdate = _ref.onSavedPaymentMethodUpdate;\n    var ctx = useElementsOrCheckoutContextWithUseCase(\"mounts <\".concat(displayName, \">\"));\n    var elements = 'elements' in ctx ? ctx.elements : null;\n    var checkoutState = 'checkoutState' in ctx ? ctx.checkoutState : null;\n    var checkoutSdk = (checkoutState === null || checkoutState === void 0 ? void 0 : checkoutState.type) === 'success' ? checkoutState.checkout : null;\n\n    var _React$useState = React.useState(null),\n        _React$useState2 = _slicedToArray(_React$useState, 2),\n        element = _React$useState2[0],\n        setElement = _React$useState2[1];\n\n    var elementRef = React.useRef(null);\n    var domNode = React.useRef(null); // For every event where the merchant provides a callback, call element.on\n    // with that callback. If the merchant ever changes the callback, removes\n    // the old callback with element.off and then call element.on with the new one.\n\n    useAttachEvent(element, 'blur', onBlur);\n    useAttachEvent(element, 'focus', onFocus);\n    useAttachEvent(element, 'escape', onEscape);\n    useAttachEvent(element, 'click', onClick);\n    useAttachEvent(element, 'loaderror', onLoadError);\n    useAttachEvent(element, 'loaderstart', onLoaderStart);\n    useAttachEvent(element, 'networkschange', onNetworksChange);\n    useAttachEvent(element, 'confirm', onConfirm);\n    useAttachEvent(element, 'cancel', onCancel);\n    useAttachEvent(element, 'shippingaddresschange', onShippingAddressChange);\n    useAttachEvent(element, 'shippingratechange', onShippingRateChange);\n    useAttachEvent(element, 'savedpaymentmethodremove', onSavedPaymentMethodRemove);\n    useAttachEvent(element, 'savedpaymentmethodupdate', onSavedPaymentMethodUpdate);\n    useAttachEvent(element, 'change', onChange);\n    var readyCallback;\n\n    if (onReady) {\n      if (type === 'expressCheckout') {\n        // Passes through the event, which includes visible PM types\n        readyCallback = onReady;\n      } else {\n        // For other Elements, pass through the Element itself.\n        readyCallback = function readyCallback() {\n          onReady(element);\n        };\n      }\n    }\n\n    useAttachEvent(element, 'ready', readyCallback);\n    React.useLayoutEffect(function () {\n      if (elementRef.current === null && domNode.current !== null && (elements || checkoutSdk)) {\n        var newElement = null;\n\n        if (checkoutSdk) {\n          switch (type) {\n            case 'payment':\n              newElement = checkoutSdk.createPaymentElement(options);\n              break;\n\n            case 'address':\n              if ('mode' in options) {\n                var mode = options.mode,\n                    restOptions = _objectWithoutProperties(options, _excluded);\n\n                if (mode === 'shipping') {\n                  newElement = checkoutSdk.createShippingAddressElement(restOptions);\n                } else if (mode === 'billing') {\n                  newElement = checkoutSdk.createBillingAddressElement(restOptions);\n                } else {\n                  throw new Error(\"Invalid options.mode. mode must be 'billing' or 'shipping'.\");\n                }\n              } else {\n                throw new Error(\"You must supply options.mode. mode must be 'billing' or 'shipping'.\");\n              }\n\n              break;\n\n            case 'expressCheckout':\n              newElement = checkoutSdk.createExpressCheckoutElement(options);\n              break;\n\n            case 'currencySelector':\n              newElement = checkoutSdk.createCurrencySelectorElement();\n              break;\n\n            case 'taxId':\n              newElement = checkoutSdk.createTaxIdElement(options);\n              break;\n\n            default:\n              throw new Error(\"Invalid Element type \".concat(displayName, \". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />.\"));\n          }\n        } else if (elements) {\n          newElement = elements.create(type, options);\n        } // Store element in a ref to ensure it's _immediately_ available in cleanup hooks in StrictMode\n\n\n        elementRef.current = newElement; // Store element in state to facilitate event listener attachment\n\n        setElement(newElement);\n\n        if (newElement) {\n          newElement.mount(domNode.current);\n        }\n      }\n    }, [elements, checkoutSdk, options]);\n    var prevOptions = usePrevious(options);\n    React.useEffect(function () {\n      if (!elementRef.current) {\n        return;\n      }\n\n      var updates = extractAllowedOptionsUpdates(options, prevOptions, ['paymentRequest']);\n\n      if (updates && 'update' in elementRef.current) {\n        elementRef.current.update(updates);\n      }\n    }, [options, prevOptions]);\n    React.useLayoutEffect(function () {\n      return function () {\n        if (elementRef.current && typeof elementRef.current.destroy === 'function') {\n          try {\n            elementRef.current.destroy();\n            elementRef.current = null;\n          } catch (error) {// Do nothing\n          }\n        }\n      };\n    }, []);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      id: id,\n      className: className,\n      ref: domNode\n    });\n  }; // Only render the Element wrapper in a server environment.\n\n\n  var ServerElement = function ServerElement(props) {\n    useElementsOrCheckoutContextWithUseCase(\"mounts <\".concat(displayName, \">\"));\n    var id = props.id,\n        className = props.className;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      id: id,\n      className: className\n    });\n  };\n\n  var Element = isServer ? ServerElement : ClientElement;\n  Element.propTypes = {\n    id: PropTypes.string,\n    className: PropTypes.string,\n    onChange: PropTypes.func,\n    onBlur: PropTypes.func,\n    onFocus: PropTypes.func,\n    onReady: PropTypes.func,\n    onEscape: PropTypes.func,\n    onClick: PropTypes.func,\n    onLoadError: PropTypes.func,\n    onLoaderStart: PropTypes.func,\n    onNetworksChange: PropTypes.func,\n    onConfirm: PropTypes.func,\n    onCancel: PropTypes.func,\n    onShippingAddressChange: PropTypes.func,\n    onShippingRateChange: PropTypes.func,\n    onSavedPaymentMethodRemove: PropTypes.func,\n    onSavedPaymentMethodUpdate: PropTypes.func,\n    options: PropTypes.object\n  };\n  Element.displayName = displayName;\n  Element.__elementType = type;\n  return Element;\n};\n\nvar isServer = typeof window === 'undefined';\n\nvar EmbeddedCheckoutContext = /*#__PURE__*/React.createContext(null);\nEmbeddedCheckoutContext.displayName = 'EmbeddedCheckoutProviderContext';\nvar useEmbeddedCheckoutContext = function useEmbeddedCheckoutContext() {\n  var ctx = React.useContext(EmbeddedCheckoutContext);\n\n  if (!ctx) {\n    throw new Error('<EmbeddedCheckout> must be used within <EmbeddedCheckoutProvider>');\n  }\n\n  return ctx;\n};\nvar INVALID_STRIPE_ERROR = 'Invalid prop `stripe` supplied to `EmbeddedCheckoutProvider`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.';\nvar EmbeddedCheckoutProvider = function EmbeddedCheckoutProvider(_ref) {\n  var rawStripeProp = _ref.stripe,\n      options = _ref.options,\n      children = _ref.children;\n  var parsed = React.useMemo(function () {\n    return parseStripeProp(rawStripeProp, INVALID_STRIPE_ERROR);\n  }, [rawStripeProp]);\n  var embeddedCheckoutPromise = React.useRef(null);\n  var loadedStripe = React.useRef(null);\n\n  var _React$useState = React.useState({\n    embeddedCheckout: null\n  }),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      ctx = _React$useState2[0],\n      setContext = _React$useState2[1];\n\n  React.useEffect(function () {\n    // Don't support any ctx updates once embeddedCheckout or stripe is set.\n    if (loadedStripe.current || embeddedCheckoutPromise.current) {\n      return;\n    }\n\n    var setStripeAndInitEmbeddedCheckout = function setStripeAndInitEmbeddedCheckout(stripe) {\n      if (loadedStripe.current || embeddedCheckoutPromise.current) return;\n      loadedStripe.current = stripe;\n      embeddedCheckoutPromise.current = loadedStripe.current.initEmbeddedCheckout(options).then(function (embeddedCheckout) {\n        setContext({\n          embeddedCheckout: embeddedCheckout\n        });\n      });\n    }; // For an async stripePromise, store it once resolved\n\n\n    if (parsed.tag === 'async' && !loadedStripe.current && (options.clientSecret || options.fetchClientSecret)) {\n      parsed.stripePromise.then(function (stripe) {\n        if (stripe) {\n          setStripeAndInitEmbeddedCheckout(stripe);\n        }\n      });\n    } else if (parsed.tag === 'sync' && !loadedStripe.current && (options.clientSecret || options.fetchClientSecret)) {\n      // Or, handle a sync stripe instance going from null -> populated\n      setStripeAndInitEmbeddedCheckout(parsed.stripe);\n    }\n  }, [parsed, options, ctx, loadedStripe]);\n  React.useEffect(function () {\n    // cleanup on unmount\n    return function () {\n      // If embedded checkout is fully initialized, destroy it.\n      if (ctx.embeddedCheckout) {\n        embeddedCheckoutPromise.current = null;\n        ctx.embeddedCheckout.destroy();\n      } else if (embeddedCheckoutPromise.current) {\n        // If embedded checkout is still initializing, destroy it once\n        // it's done. This could be caused by unmounting very quickly\n        // after mounting.\n        embeddedCheckoutPromise.current.then(function () {\n          embeddedCheckoutPromise.current = null;\n\n          if (ctx.embeddedCheckout) {\n            ctx.embeddedCheckout.destroy();\n          }\n        });\n      }\n    };\n  }, [ctx.embeddedCheckout]); // Attach react-stripe-js version to stripe.js instance\n\n  React.useEffect(function () {\n    registerWithStripeJs(loadedStripe);\n  }, [loadedStripe]); // Warn on changes to stripe prop.\n  // The stripe prop value can only go from null to non-null once and\n  // can't be changed after that.\n\n  var prevStripe = usePrevious(rawStripeProp);\n  React.useEffect(function () {\n    if (prevStripe !== null && prevStripe !== rawStripeProp) {\n      console.warn('Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the `stripe` prop after setting it.');\n    }\n  }, [prevStripe, rawStripeProp]); // Warn on changes to options.\n\n  var prevOptions = usePrevious(options);\n  React.useEffect(function () {\n    if (prevOptions == null) {\n      return;\n    }\n\n    if (options == null) {\n      console.warn('Unsupported prop change on EmbeddedCheckoutProvider: You cannot unset options after setting them.');\n      return;\n    }\n\n    if (options.clientSecret === undefined && options.fetchClientSecret === undefined) {\n      console.warn('Invalid props passed to EmbeddedCheckoutProvider: You must provide one of either `options.fetchClientSecret` or `options.clientSecret`.');\n    }\n\n    if (prevOptions.clientSecret != null && options.clientSecret !== prevOptions.clientSecret) {\n      console.warn('Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the client secret after setting it. Unmount and create a new instance of EmbeddedCheckoutProvider instead.');\n    }\n\n    if (prevOptions.fetchClientSecret != null && options.fetchClientSecret !== prevOptions.fetchClientSecret) {\n      console.warn('Unsupported prop change on EmbeddedCheckoutProvider: You cannot change fetchClientSecret after setting it. Unmount and create a new instance of EmbeddedCheckoutProvider instead.');\n    }\n\n    if (prevOptions.onComplete != null && options.onComplete !== prevOptions.onComplete) {\n      console.warn('Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the onComplete option after setting it.');\n    }\n\n    if (prevOptions.onShippingDetailsChange != null && options.onShippingDetailsChange !== prevOptions.onShippingDetailsChange) {\n      console.warn('Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the onShippingDetailsChange option after setting it.');\n    }\n\n    if (prevOptions.onLineItemsChange != null && options.onLineItemsChange !== prevOptions.onLineItemsChange) {\n      console.warn('Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the onLineItemsChange option after setting it.');\n    }\n  }, [prevOptions, options]);\n  return /*#__PURE__*/React.createElement(EmbeddedCheckoutContext.Provider, {\n    value: ctx\n  }, children);\n};\n\nvar EmbeddedCheckoutClientElement = function EmbeddedCheckoutClientElement(_ref) {\n  var id = _ref.id,\n      className = _ref.className;\n\n  var _useEmbeddedCheckoutC = useEmbeddedCheckoutContext(),\n      embeddedCheckout = _useEmbeddedCheckoutC.embeddedCheckout;\n\n  var isMounted = React.useRef(false);\n  var domNode = React.useRef(null);\n  React.useLayoutEffect(function () {\n    if (!isMounted.current && embeddedCheckout && domNode.current !== null) {\n      embeddedCheckout.mount(domNode.current);\n      isMounted.current = true;\n    } // Clean up on unmount\n\n\n    return function () {\n      if (isMounted.current && embeddedCheckout) {\n        try {\n          embeddedCheckout.unmount();\n          isMounted.current = false;\n        } catch (e) {// Do nothing.\n          // Parent effects are destroyed before child effects, so\n          // in cases where both the EmbeddedCheckoutProvider and\n          // the EmbeddedCheckout component are removed at the same\n          // time, the embeddedCheckout instance will be destroyed,\n          // which causes an error when calling unmount.\n        }\n      }\n    };\n  }, [embeddedCheckout]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    ref: domNode,\n    id: id,\n    className: className\n  });\n}; // Only render the wrapper in a server environment.\n\n\nvar EmbeddedCheckoutServerElement = function EmbeddedCheckoutServerElement(_ref2) {\n  var id = _ref2.id,\n      className = _ref2.className;\n  // Validate that we are in the right context by calling useEmbeddedCheckoutContext.\n  useEmbeddedCheckoutContext();\n  return /*#__PURE__*/React.createElement(\"div\", {\n    id: id,\n    className: className\n  });\n};\n\nvar EmbeddedCheckout = isServer ? EmbeddedCheckoutServerElement : EmbeddedCheckoutClientElement;\n\n/**\n * @docs https://stripe.com/docs/stripe-js/react#usestripe-hook\n */\n\nvar useStripe = function useStripe() {\n  var _useElementsOrCheckou = useElementsOrCheckoutContextWithUseCase('calls useStripe()'),\n      stripe = _useElementsOrCheckou.stripe;\n\n  return stripe;\n};\n\n/**\n * Requires beta access:\n * Contact [Stripe support](https://support.stripe.com/) for more information.\n *\n * @docs https://stripe.com/docs/stripe-js/react#element-components\n */\n\nvar AuBankAccountElement = createElementComponent('auBankAccount', isServer);\n/**\n * @docs https://stripe.com/docs/stripe-js/react#element-components\n */\n\nvar CardElement = createElementComponent('card', isServer);\n/**\n * @docs https://stripe.com/docs/stripe-js/react#element-components\n */\n\nvar CardNumberElement = createElementComponent('cardNumber', isServer);\n/**\n * @docs https://stripe.com/docs/stripe-js/react#element-components\n */\n\nvar CardExpiryElement = createElementComponent('cardExpiry', isServer);\n/**\n * @docs https://stripe.com/docs/stripe-js/react#element-components\n */\n\nvar CardCvcElement = createElementComponent('cardCvc', isServer);\n/**\n * @docs https://stripe.com/docs/stripe-js/react#element-components\n */\n\nvar FpxBankElement = createElementComponent('fpxBank', isServer);\n/**\n * @docs https://stripe.com/docs/stripe-js/react#element-components\n */\n\nvar IbanElement = createElementComponent('iban', isServer);\n/**\n * @docs https://stripe.com/docs/stripe-js/react#element-components\n */\n\nvar IdealBankElement = createElementComponent('idealBank', isServer);\n/**\n * @docs https://stripe.com/docs/stripe-js/react#element-components\n */\n\nvar P24BankElement = createElementComponent('p24Bank', isServer);\n/**\n * @docs https://stripe.com/docs/stripe-js/react#element-components\n */\n\nvar EpsBankElement = createElementComponent('epsBank', isServer);\nvar PaymentElement = createElementComponent('payment', isServer);\n/**\n * @docs https://stripe.com/docs/stripe-js/react#element-components\n */\n\nvar ExpressCheckoutElement = createElementComponent('expressCheckout', isServer);\n/**\n * @docs https://stripe.com/docs/stripe-js/react#element-components\n */\n\nvar PaymentRequestButtonElement = createElementComponent('paymentRequestButton', isServer);\n/**\n * @docs https://stripe.com/docs/stripe-js/react#element-components\n */\n\nvar LinkAuthenticationElement = createElementComponent('linkAuthentication', isServer);\n/**\n * @docs https://stripe.com/docs/stripe-js/react#element-components\n */\n\nvar AddressElement = createElementComponent('address', isServer);\n/**\n * @deprecated\n * Use `AddressElement` instead.\n *\n * @docs https://stripe.com/docs/stripe-js/react#element-components\n */\n\nvar ShippingAddressElement = createElementComponent('shippingAddress', isServer);\n/**\n * @docs https://stripe.com/docs/stripe-js/react#element-components\n */\n\nvar PaymentMethodMessagingElement = createElementComponent('paymentMethodMessaging', isServer);\n/**\n * @docs https://stripe.com/docs/stripe-js/react#element-components\n */\n\nvar AffirmMessageElement = createElementComponent('affirmMessage', isServer);\n/**\n * @docs https://stripe.com/docs/stripe-js/react#element-components\n */\n\nvar AfterpayClearpayMessageElement = createElementComponent('afterpayClearpayMessage', isServer);\n/**\n * Requires beta access:\n * Contact [Stripe support](https://support.stripe.com/) for more information.\n */\n\nvar TaxIdElement = createElementComponent('taxId', isServer);\n\nexport { AddressElement, AffirmMessageElement, AfterpayClearpayMessageElement, AuBankAccountElement, CardCvcElement, CardElement, CardExpiryElement, CardNumberElement, Elements, ElementsConsumer, EmbeddedCheckout, EmbeddedCheckoutProvider, EpsBankElement, ExpressCheckoutElement, FpxBankElement, IbanElement, IdealBankElement, LinkAuthenticationElement, P24BankElement, PaymentElement, PaymentMethodMessagingElement, PaymentRequestButtonElement, ShippingAddressElement, TaxIdElement, useElements, useStripe };\n","// Mock API for payment processing\n// In a real application, this would be a backend server endpoint\n\n/**\n * STRIPE PAYMENT INTENT - REQUIRED INFORMATION\n * \n * To create a Stripe Payment Intent, you need:\n * \n * REQUIRED FIELDS:\n * 1. amount (number) - Amount in smallest currency unit (e.g., pence for GBP, cents for USD)\n *    Example: £10.50 = 1050 (for GBP)\n * \n * 2. currency (string) - Three-letter ISO currency code (lowercase)\n *    Examples: 'gbp', 'usd', 'eur', 'cad', 'aud'\n * \n * OPTIONAL BUT RECOMMENDED FIELDS:\n * 3. metadata (object) - Additional data stored with the payment intent\n *    - items: Array of cart items\n *    - customerInfo: Customer details\n *    - orderId: Your internal order ID\n * \n * 4. description (string) - Description of the payment (shown to customer)\n * \n * 5. receipt_email (string) - Email to send receipt to\n * \n * 6. shipping (object) - Shipping address (if applicable)\n *    {\n *      name: string,\n *      address: {\n *        line1: string,\n *        line2: string (optional),\n *        city: string,\n *        postal_code: string,\n *        country: string (ISO 2-letter code)\n *      }\n *    }\n * \n * BACKEND IMPLEMENTATION EXAMPLE (Node.js/Express):\n * \n * const stripe = require('stripe')(process.env.STRIPE_SECRET_KEY);\n * \n * app.post('/api/create-payment-intent', async (req, res) => {\n *   try {\n *     const { amount, currency, items, customerInfo } = req.body;\n *     \n *     const paymentIntent = await stripe.paymentIntents.create({\n *       amount: amount,                    // REQUIRED: in smallest currency unit\n *       currency: currency,                 // REQUIRED: 'gbp', 'usd', etc.\n *       metadata: {                         // OPTIONAL: but recommended\n *         items: JSON.stringify(items),\n *         customerInfo: JSON.stringify(customerInfo),\n *         orderId: `order_${Date.now()}`,\n *       },\n *       description: `Order for ${items.length} item(s)`, // OPTIONAL\n *       receipt_email: customerInfo.email,  // OPTIONAL: auto-send receipt\n *       shipping: customerInfo.address ? {  // OPTIONAL: if shipping required\n *         name: customerInfo.name,\n *         address: customerInfo.address,\n *       } : undefined,\n *       automatic_payment_methods: {        // RECOMMENDED: enables multiple payment methods\n *         enabled: true,\n *       },\n *     });\n *     \n *     res.json({ \n *       client_secret: paymentIntent.client_secret,\n *       payment_intent_id: paymentIntent.id,\n *     });\n *   } catch (error) {\n *     res.status(500).json({ error: error.message });\n *   }\n * });\n */\n\nimport { getApiUrl } from './apiConfig';\n\nexport const createPaymentIntent = async (paymentData) => {\n  const { amount, currency = 'gbp', items, customerInfo } = paymentData;\n\n  if (!amount || amount <= 0) {\n    throw new Error('Amount is required and must be greater than 0');\n  }\n\n  if (!currency) {\n    throw new Error('Currency is required');\n  }\n\n  // Try to create a real Payment Intent via backend\n  try {\n    const apiUrl = getApiUrl('/api/create-payment-intent');\n    \n    const requestBody = {\n      amount,\n      currency,\n      items,\n      customerInfo,\n    };\n    \n    const response = await fetch(apiUrl, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(requestBody),\n    });\n\n    if (!response.ok) {\n      let errorBody;\n      const contentType = response.headers.get('content-type');\n      \n      try {\n        if (contentType && contentType.includes('application/json')) {\n          errorBody = await response.json();\n        } else {\n          errorBody = await response.text();\n          \n          // Try to parse as JSON if it looks like JSON\n          try {\n            const parsed = JSON.parse(errorBody);\n            errorBody = parsed;\n          } catch (e) {\n            // Not JSON, keep as text\n          }\n        }\n      } catch (parseError) {\n        errorBody = 'Unable to parse error response';\n      }\n      \n      const errorMessage = typeof errorBody === 'string' \n        ? errorBody.substring(0, 200)\n        : (errorBody?.error || errorBody?.message || JSON.stringify(errorBody)).substring(0, 200);\n      \n      throw new Error(\n        `Backend responded with ${response.status} ${response.statusText}: ${errorMessage}`\n      );\n    }\n\n    const data = await response.json();\n\n    if (!data.clientSecret) {\n      throw new Error('Backend did not return a clientSecret');\n    }\n\n    return {\n      client_secret: data.clientSecret,\n    };\n  } catch (error) {\n    // Don't fall back to mock - throw the error so the user knows something is wrong\n    throw new Error(\n      `Failed to create payment intent: ${error.message}. Please ensure your backend server is running on port 3001.`\n    );\n  }\n\n  // Removed fallback to mock - we should always use real payment intents\n  // If we reach here, something went wrong and we should show an error\n};\n\n// Mock function to simulate successful payment\nexport const confirmMockPayment = async (paymentIntentId, amount) => {\n  await new Promise(resolve => setTimeout(resolve, 1500));\n  \n  return {\n    id: paymentIntentId,\n    status: 'succeeded',\n    created: Math.floor(Date.now() / 1000),\n    amount: amount, // Use actual amount from payment data\n    currency: 'gbp',\n  };\n};\n","import React from 'react';\n\nconst InternationalNote = ({ \n  className = '', \n  showOnDesktop = false, \n  showOnMobile = false,\n  title = 'Custom Duties & Import Fees',\n  message = 'International orders may be subject to customs duties, taxes, and fees imposed by your country. These charges are the responsibility of the recipient and are not included in the order total.',\n  variant = 'yellow' // 'yellow' or 'gray'\n}) => {\n  // Determine visibility classes based on props\n  const visibilityClass = showOnDesktop && showOnMobile \n    ? '' // Show on both\n    : showOnDesktop \n    ? 'hidden lg:block' // Show only on desktop\n    : showOnMobile \n    ? 'lg:hidden' // Show only on mobile\n    : ''; // Default: show on both\n\n  // Style variants\n  const bgColor = variant === 'yellow' ? 'bg-yellow-50' : 'bg-gray-100';\n  const borderColor = variant === 'yellow' ? 'border-yellow-200' : 'border-gray-200';\n  const iconColor = variant === 'yellow' ? 'text-yellow-600' : 'text-gray-600';\n  const titleColor = variant === 'yellow' ? 'text-yellow-800' : 'text-gray-800';\n  const textColor = variant === 'yellow' ? 'text-yellow-700' : 'text-gray-500';\n\n  return (\n    <div className={`${visibilityClass} ${className}`}>\n      <div className={`${bgColor} border ${borderColor} rounded-lg p-4`}>\n        <div className=\"flex items-start gap-3\">\n          <div className={`${iconColor} text-xl flex-shrink-0`}>⚠️</div>\n          <div className=\"flex-1 font-inter\">\n            <h3 className={`text-sm font-semibold ${titleColor} mb-1`}>\n              {title}\n            </h3>\n            <p className={`text-xs ${textColor} font-light leading-relaxed font-inter`}>\n              {message}\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default InternationalNote;\n\n","'use client';\n\nimport React from 'react';\nimport Link from 'next/link';\nimport { useCart } from '../../../context/CartContext';\n\nconst CheckoutHeader = () => {\n  const { getTotalQuantity } = useCart();\n  const totalQuantity = getTotalQuantity();\n\n  return (\n    <div className=\"border-b border-gray-200 bg-white\">\n      <div className=\"max-w-6xl mx-auto flex items-center justify-between px-4 lg:px-6 py-5\">\n        <Link href=\"/\" className=\"hover:opacity-90 transition-opacity duration-300\" aria-label=\"HappyCase home\">\n           <img src=\"/assets/logo.webp\" alt=\"The Happy Case Logo\" className=\"h-14 w-auto \" />\n        </Link>\n        <Link\n          href=\"/cart\"\n          className=\"relative flex items-center justify-center p-2 text-gray-900 hover:text-gray-700 transition-colors z-10\"\n          aria-label=\"Go to cart\"\n        >\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 640 640\"\n            className=\"w-6 h-6\"\n            fill=\"currentColor\"\n          >\n            <path d=\"M8 64C3.6 64 0 67.6 0 72C0 76.4 3.6 80 8 80L53.7 80C65.1 80 75 88.1 77.2 99.4L136.6 402.8C141.7 429.1 164.8 448 191.6 448L488 448C492.4 448 496 444.4 496 440C496 435.6 492.4 432 488 432L191.5 432C172.4 432 155.9 418.5 152.2 399.7L142.9 352L461.2 352C494.7 352 523.7 328.9 531.3 296.4L566.6 145.1C572.5 120 553.4 96 527.7 96L92.8 96C89 77.4 72.7 64 53.7 64L8 64zM96 112L527.7 112C543.2 112 554.6 126.4 551.1 141.5L515.8 292.7C509.9 318 487.3 336 461.3 336L139.8 336L96 112zM176 528C176 510.3 190.3 496 208 496C225.7 496 240 510.3 240 528C240 545.7 225.7 560 208 560C190.3 560 176 545.7 176 528zM256 528C256 501.5 234.5 480 208 480C181.5 480 160 501.5 160 528C160 554.5 181.5 576 208 576C234.5 576 256 554.5 256 528zM432 496C449.7 496 464 510.3 464 528C464 545.7 449.7 560 432 560C414.3 560 400 545.7 400 528C400 510.3 414.3 496 432 496zM432 576C458.5 576 480 554.5 480 528C480 501.5 458.5 480 432 480C405.5 480 384 501.5 384 528C384 554.5 405.5 576 432 576z\"/>\n          </svg>\n          {totalQuantity > 0 && (\n            <span className=\"absolute top-0 right-0 bg-gray-900 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-light\">\n              {totalQuantity}\n            </span>\n          )}\n        </Link>\n      </div>\n    </div>\n  );\n};\n\nexport default CheckoutHeader;\n\n","import React from 'react';\n\nconst LoadingState = () => {\n  return (\n    <div className=\"min-h-screen bg-white py-8\">\n      <div className=\"max-w-2xl mx-auto p-6 bg-white border border-gray-200\">\n        <div className=\"flex items-center justify-center py-12\">\n          <div className=\"text-center\">\n            <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-300 mx-auto mb-4\"></div>\n            <p className=\"text-gray-500 font-light font-inter\">\n              Loading checkout...\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default LoadingState;\n\n","'use client';\n\nimport React, { useState, useRef, useEffect } from 'react';\nimport { useRouter } from 'next/navigation';\n\nconst CustomerInfoForm = ({ customerInfo, onInputChange, isAuthenticated, authenticatedEmail, onSignIn, onSignOut }) => {\n  const router = useRouter();\n  const [showLoginDropdown, setShowLoginDropdown] = useState(false);\n  const dropdownRef = useRef(null);\n  \n  // Close dropdown when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (event) => {\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target)) {\n        setShowLoginDropdown(false);\n      }\n    };\n\n    if (showLoginDropdown) {\n      document.addEventListener('mousedown', handleClickOutside);\n    }\n\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [showLoginDropdown]);\n  \n  const handleSignInClick = () => {\n    setShowLoginDropdown(true);\n  };\n\n  const handleConfirmLogin = () => {\n    setShowLoginDropdown(false);\n    // Navigate to login page with return URL to come back to checkout\n    router.push('/login?redirect=/checkout');\n  };\n\n  const handleCancelLogin = () => {\n    setShowLoginDropdown(false);\n  };\n  \n  return (\n    <div className=\"space-y-4 \">\n        <h3 className=\"text-md uppercase tracking-wider text-gray-900 mb-4 font-bold font-inter\">\n       Contact\n      </h3>\n      {!isAuthenticated ? (\n        <div>\n          <div className=\"flex items-center justify-between mb-1.5 relative\">\n            <label className=\"block text-sm text-gray-500 font-light font-inter\">\n              Email Address *\n            </label>\n            <div ref={dropdownRef} className=\"relative\">\n              <button\n                type=\"button\"\n                onClick={handleSignInClick}\n                className=\"text-xs text-gray-600 hover:text-gray-900 font-light font-inter underline\"\n              >\n                Sign In\n              </button>\n              \n              {/* Login Confirmation Dropdown */}\n              {showLoginDropdown && (\n                <div className=\"absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded-sm shadow-lg z-50\">\n                  <div className=\"p-3\">\n                    <p className=\"text-sm text-gray-700 font-light font-inter mb-3\">\n                      Do you want to sign in?\n                    </p>\n                    <div className=\"flex gap-2\">\n                      <button\n                        type=\"button\"\n                        onClick={handleConfirmLogin}\n                        className=\"flex-1 px-3 py-1.5 text-xs uppercase tracking-wider font-light font-inter bg-black text-white hover:bg-gray-800 transition-colors\"\n                      >\n                        Yes\n                      </button>\n                      <button\n                        type=\"button\"\n                        onClick={handleCancelLogin}\n                        className=\"flex-1 px-3 py-1.5 text-xs uppercase tracking-wider font-light font-inter border border-gray-300 text-gray-700 hover:bg-gray-50 transition-colors\"\n                      >\n                        No\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n          <input\n            type=\"email\"\n            name=\"email\"\n            value={customerInfo.email}\n            onChange={onInputChange}\n            required\n            placeholder=\"your.email@example.com\"\n            className=\"w-full px-3 py-2 border border-gray-200 rounded-sm focus:outline-none focus:ring-2 focus:ring-yellow-100 focus:border-yellow-100 bg-white text-gray-900 placeholder-gray-400 font-light font-inter text-base\"\n            style={{ fontSize: '16px' }}\n          />\n          <p className=\"mt-1 text-xs text-gray-500 font-light font-inter\">\n            We'll send your order confirmation to this email\n          </p>\n        </div>\n      ) : (\n        <div>\n          <div className=\"flex items-center justify-between mb-1.5\">\n            <label className=\"block text-sm text-gray-500 font-light font-inter\">\n              Email Address *\n            </label>\n            <button\n              type=\"button\"\n              onClick={onSignOut}\n              className=\"text-xs text-gray-600 hover:text-gray-900 font-light font-inter underline\"\n            >\n              Sign Out\n            </button>\n          </div>\n          <div className=\"w-full px-3 py-2 border border-gray-200 rounded-sm bg-gray-50 text-gray-900 font-light font-inter text-sm\">\n            {authenticatedEmail}\n          </div>\n          <p className=\"mt-1 text-xs text-gray-500 font-light font-inter\">\n            Signed in as {authenticatedEmail}\n          </p>\n        </div>\n      )}\n      <h3 className=\"text-md uppercase tracking-wider text-gray-900 mb-4 font-bold font-inter\">\n        Delivery\n      </h3>\n      \n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n   \n          <div>\n          <label className=\"block text-sm text-gray-500 mb-1.5 font-light font-inter\">\n            Name *\n          </label>\n          <input\n            type=\"text\"\n            name=\"name\"\n            value={customerInfo.name}\n            onChange={onInputChange}\n            required\n            className=\"w-full px-3 py-2 border border-gray-200 rounded-sm focus:outline-none focus:ring-2 focus:ring-yellow-100 focus:border-yellow-100 bg-white text-gray-900 placeholder-gray-400 font-light font-inter text-base\"\n            style={{ fontSize: '16px' }}\n          />\n          </div>\n          <div>\n           <label className=\"block text-sm text-gray-500 mb-1.5 font-light font-inter\">\n           Surname *\n          </label>\n          <input\n            type=\"text\"\n            name=\"surname\"\n            value={customerInfo.surname}\n            onChange={onInputChange}\n            required\n            className=\"w-full px-3 py-2 border border-gray-200 rounded-sm focus:outline-none focus:ring-2 focus:ring-yellow-100 focus:border-yellow-100 bg-white text-gray-900 placeholder-gray-400 font-light font-inter text-base\"\n            style={{ fontSize: '16px' }}\n          />\n          </div>\n    \n        \n      \n      </div>\n\n      <div>\n        <label className=\"block text-sm text-gray-500 mb-1.5 font-light font-inter\">\n          Address Line 1 *\n        </label>\n        <input\n          type=\"text\"\n          name=\"address.line1\"\n          value={customerInfo.address.line1}\n          onChange={onInputChange}\n          required\n          className=\"w-full px-3 py-2 border border-gray-200 rounded-sm focus:outline-none focus:ring-2 focus:ring-yellow-100 focus:border-yellow-100 bg-white text-gray-900 placeholder-gray-400 font-light font-inter text-base\"\n          style={{ fontSize: '16px' }}\n        />\n      </div>\n\n      <div>\n        <label className=\"block text-sm text-gray-500 mb-1.5 font-light font-inter\">\n          Address Line 2\n        </label>\n        <input\n          type=\"text\"\n          name=\"address.line2\"\n          value={customerInfo.address.line2}\n          onChange={onInputChange}\n          className=\"w-full px-3 py-2 border border-gray-200 rounded-sm focus:outline-none focus:ring-2 focus:ring-yellow-100 focus:border-yellow-100 bg-white text-gray-900 placeholder-gray-400 font-light font-inter text-base\"\n          style={{ fontSize: '16px' }}\n        />\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n        <div>\n          <label className=\"block text-sm text-gray-500 mb-1.5 font-light font-inter\">\n            City *\n          </label>\n          <input\n            type=\"text\"\n            name=\"address.city\"\n            value={customerInfo.address.city}\n            onChange={onInputChange}\n            required\n            className=\"w-full px-3 py-2 border border-gray-200 rounded-sm focus:outline-none focus:ring-2 focus:ring-yellow-100 focus:border-yellow-100 bg-white text-gray-900 placeholder-gray-400 font-light font-inter text-base\"\n            style={{ fontSize: '16px' }}\n          />\n        </div>\n        \n        <div>\n          <label className=\"block text-sm text-gray-500 mb-1.5 font-light font-inter\">\n            {customerInfo.address.country === 'GB' ? 'Postcode' : 'Postal Code'} *\n          </label>\n          <input\n            type=\"text\"\n            name=\"address.postal_code\"\n            value={customerInfo.address.postal_code}\n            onChange={onInputChange}\n            required\n            className=\"w-full px-3 py-2 border border-gray-200 rounded-sm focus:outline-none focus:ring-2 focus:ring-yellow-100 focus:border-yellow-100 bg-white text-gray-900 placeholder-gray-400 font-light font-inter text-base\"\n            style={{ fontSize: '16px' }}\n          />\n        </div>\n        \n        <div>\n          <label className=\"block text-sm text-gray-500 mb-1.5 font-light font-inter\">\n            Country/Region *\n          </label>\n          <select\n            name=\"address.country\"\n            value={customerInfo.address.country}\n            onChange={onInputChange}\n            className=\"w-full px-3 py-2 border border-gray-200 rounded-sm focus:outline-none focus:ring-2 focus:ring-yellow-100 focus:border-yellow-100 bg-white text-gray-900 font-light font-inter text-base\"\n            style={{ fontSize: '16px' }}\n          >\n            <option value=\"GB\">England</option>\n            <optgroup label=\"Europe\">\n              <option value=\"AL\">Albania</option>\n              <option value=\"AD\">Andorra</option>\n              <option value=\"AT\">Austria</option>\n              <option value=\"BE\">Belgium</option>\n              <option value=\"BA\">Bosnia and Herzegovina</option>\n              <option value=\"BG\">Bulgaria</option>\n              <option value=\"HR\">Croatia</option>\n              <option value=\"CY\">Cyprus</option>\n              <option value=\"CZ\">Czech Republic</option>\n              <option value=\"DK\">Denmark</option>\n              <option value=\"EE\">Estonia</option>\n              <option value=\"FI\">Finland</option>\n              <option value=\"FR\">France</option>\n              <option value=\"DE\">Germany</option>\n              <option value=\"GR\">Greece</option>\n              <option value=\"HU\">Hungary</option>\n              <option value=\"IS\">Iceland</option>\n              <option value=\"IE\">Ireland</option>\n              <option value=\"IT\">Italy</option>\n              <option value=\"LV\">Latvia</option>\n              <option value=\"LI\">Liechtenstein</option>\n              <option value=\"LT\">Lithuania</option>\n              <option value=\"LU\">Luxembourg</option>\n              <option value=\"MT\">Malta</option>\n              <option value=\"MC\">Monaco</option>\n              <option value=\"ME\">Montenegro</option>\n              <option value=\"NL\">Netherlands</option>\n              <option value=\"MK\">North Macedonia</option>\n              <option value=\"NO\">Norway</option>\n              <option value=\"PL\">Poland</option>\n              <option value=\"PT\">Portugal</option>\n              <option value=\"RO\">Romania</option>\n              <option value=\"SM\">San Marino</option>\n              <option value=\"RS\">Serbia</option>\n              <option value=\"SK\">Slovakia</option>\n              <option value=\"SI\">Slovenia</option>\n              <option value=\"ES\">Spain</option>\n              <option value=\"SE\">Sweden</option>\n              <option value=\"CH\">Switzerland</option>\n            </optgroup>\n          </select>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default CustomerInfoForm;\n\n","'use client';\n\nimport React, { useEffect, useRef } from \"react\";\nimport { PaymentElement } from \"@stripe/react-stripe-js\";\n\nconst PaymentSection = ({\n  paymentElementReady,\n  error,\n  onPaymentReady,\n  onPaymentError,\n}) => {\n  const paymentElementRef = useRef(null);\n\n  useEffect(() => {\n    if (!paymentElementReady) return;\n\n    // Force Card tab open (accordion layout)\n    const openCardPayment = () => {\n      const paymentElement = document.querySelector(\n        '[data-testid=\"payment-element\"]'\n      );\n      if (!paymentElement) return;\n\n      // Stripe usually labels card tab like this\n      const cardTab =\n        paymentElement.querySelector('[role=\"tab\"][aria-label*=\"Card\"]') ||\n        paymentElement.querySelector('[role=\"tab\"][aria-label*=\"card\"]') ||\n        paymentElement.querySelector('[role=\"tab\"][data-testid*=\"card\"]');\n\n      if (!cardTab) return;\n\n      const isExpanded = cardTab.getAttribute(\"aria-expanded\") === \"true\";\n      if (!isExpanded) cardTab.click();\n    };\n\n    // Hide blocked payment methods and ensure allowed ones are visible\n    const hideAllExceptAllowed = () => {\n      const paymentElement = document.querySelector(\n        '[data-testid=\"payment-element\"]'\n      );\n      if (!paymentElement) return;\n\n      const blockedKeywords = [\n        \"revolut\",\n        \"amazon\",\n        \"link\",\n        \"cash app\",\n        \"cashapp\",\n      ];\n\n      const allowedKeywords = [\n        \"card\",\n        \"klarna\",\n        \"clearpay\",\n        \"afterpay\",\n        \"apple pay\",\n        \"google pay\",\n      ];\n\n      // Hide blocked payment methods aggressively\n      const allElements = paymentElement.querySelectorAll(\n        '[role=\"tab\"], ' +\n        '[role=\"button\"], ' +\n        'button, ' +\n        '[aria-label*=\"Revolut\"], ' +\n        '[aria-label*=\"revolut\"], ' +\n        '[aria-label*=\"Amazon\"], ' +\n        '[aria-label*=\"amazon\"], ' +\n        '[aria-label*=\"Link\"], ' +\n        '[aria-label*=\"link\"], ' +\n        '[data-testid*=\"revolut\"], ' +\n        '[data-testid*=\"amazon\"], ' +\n        '[data-testid*=\"link\"], ' +\n        '[id*=\"revolut\"], ' +\n        '[id*=\"amazon\"], ' +\n        '[id*=\"RevolutPay\"], ' +\n        '[id*=\"AmazonPay\"], ' +\n        '[class*=\"revolut\"], ' +\n        '[class*=\"amazon\"], ' +\n        'iframe[src*=\"revolut\"], ' +\n        'iframe[src*=\"Revolut\"], ' +\n        'iframe[src*=\"amazon\"], ' +\n        'iframe[src*=\"Amazon\"], ' +\n        'iframe[title*=\"revolut\"], ' +\n        'iframe[title*=\"Revolut\"], ' +\n        'iframe[title*=\"amazon\"], ' +\n        'iframe[title*=\"Amazon\"]'\n      );\n\n      allElements.forEach((element) => {\n        const label = (\n          element.getAttribute(\"aria-label\") ||\n          element.textContent ||\n          element.getAttribute(\"data-testid\") ||\n          \"\"\n        ).toLowerCase();\n\n        const isBlocked = blockedKeywords.some((k) => label.includes(k));\n\n        if (isBlocked) {\n          element.style.display = \"none !important\";\n          element.style.visibility = \"hidden !important\";\n          element.style.opacity = \"0 !important\";\n          element.style.height = \"0 !important\";\n          element.style.margin = \"0 !important\";\n          element.style.padding = \"0 !important\";\n          element.setAttribute(\"aria-hidden\", \"true\");\n          element.setAttribute(\"hidden\", \"true\");\n\n          // Hide panel linked to that tab too\n          const panelId = element.getAttribute(\"aria-controls\");\n          if (panelId) {\n            const panel = document.getElementById(panelId);\n            if (panel) {\n              panel.style.display = \"none\";\n              panel.style.visibility = \"hidden\";\n              panel.setAttribute(\"aria-hidden\", \"true\");\n            }\n          }\n        }\n      });\n\n      // Ensure allowed payment methods are visible\n      const tabs = paymentElement.querySelectorAll('[role=\"tab\"]');\n\n      tabs.forEach((tab) => {\n        const label = (\n          tab.getAttribute(\"aria-label\") ||\n          tab.textContent ||\n          \"\"\n        ).toLowerCase();\n\n        const isAllowed = allowedKeywords.some((k) => label.includes(k));\n        const isBlocked = blockedKeywords.some((k) => label.includes(k));\n\n        if (isBlocked) {\n          tab.style.display = \"none\";\n          tab.style.visibility = \"hidden\";\n          tab.setAttribute(\"aria-hidden\", \"true\");\n          \n          const panelId = tab.getAttribute(\"aria-controls\");\n          if (panelId) {\n            const panel = document.getElementById(panelId);\n            if (panel) {\n              panel.style.display = \"none\";\n              panel.style.visibility = \"hidden\";\n              panel.setAttribute(\"aria-hidden\", \"true\");\n            }\n          }\n        } else if (isAllowed) {\n          tab.style.display = \"\";\n          tab.style.visibility = \"visible\";\n          tab.setAttribute(\"aria-hidden\", \"false\");\n          \n          // Ensure Klarna stays visible\n          if (label.includes(\"klarna\")) {\n            tab.style.display = \"block\";\n            tab.style.visibility = \"visible\";\n            tab.style.opacity = \"1\";\n          }\n        }\n      });\n    };\n\n    // Run once after render\n    const run = () => {\n      openCardPayment();\n      hideAllExceptAllowed();\n    };\n\n    // Run immediately and with delays to catch all rendering phases\n    setTimeout(run, 100);\n    setTimeout(run, 250);\n    setTimeout(run, 500);\n    setTimeout(run, 1000);\n\n    // Keep enforcing (Stripe re-renders often)\n    const paymentElement = document.querySelector(\n      '[data-testid=\"payment-element\"]'\n    );\n\n    if (!paymentElement) return;\n\n    const observer = new MutationObserver(() => {\n      setTimeout(run, 50);\n    });\n\n    observer.observe(paymentElement, {\n      childList: true,\n      subtree: true,\n      attributes: true,\n      attributeFilter: ['aria-hidden', 'style', 'class'],\n    });\n\n    return () => observer.disconnect();\n  }, [paymentElementReady]);\n\n  return (\n    <div className=\"space-y-3 sm:space-y-4\">\n      <h3 className=\"text-md sm:text-md uppercase tracking-wider text-gray-900 mb-3 sm:mb-4 font-bold font-inter\">\n        Payment\n      </h3>\n\n      <div\n        ref={paymentElementRef}\n        className=\"p-3 sm:p-4 border border-gray-200 rounded-sm overflow-hidden\"\n      >\n        {!paymentElementReady && (\n          <div className=\"mb-2 text-xs sm:text-sm text-gray-500 font-light font-inter\">\n            Loading payment form...\n          </div>\n        )}\n\n        <div className=\"w-full flex flex-col space-y-2\">\n          <PaymentElement\n            options={{\n              layout: \"accordion\",\n              fields: {\n                billingDetails: {\n                  email: \"never\",\n                  phone: \"never\",\n                  address: \"never\",\n                },\n              },\n              wallets: {\n                applePay: \"auto\",\n                googlePay: \"auto\",\n              },\n              paymentMethodTypes: {\n                card: \"always\",\n                klarna: \"always\",\n                afterpayClearpay: \"always\",\n                paypal: \"never\",\n                link: \"never\",\n                amazonPay: \"never\",\n                revolutPay: \"never\",\n              },\n              business: {\n                name: \"The Happy Case\",\n              },\n            }}\n            onReady={onPaymentReady}\n            onError={(error) => {\n              if (\n                error?.message?.includes(\"hcaptcha\") ||\n                error?.message?.includes(\"hCaptcha\")\n              ) {\n                return;\n              }\n              onPaymentError?.(\n                error.message ||\n                  \"Failed to load payment form. Please refresh the page.\"\n              );\n            }}\n          />\n        </div>\n      </div>\n\n      {error && (\n        <div className=\"text-red-600 text-xs sm:text-sm bg-red-50 p-2 sm:p-3 rounded-sm font-light font-inter\">\n          {error}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default PaymentSection;\n","'use client';\n\nimport React, { useState, useEffect, useRef } from 'react';\nimport { normalizeImagePath } from '../../../utils/imagePath';\n\nconst OrderSummaryItem = ({ item, index, formatPrice, onIncrement, onDecrement, onRemove, errorMessage }) => {\n  const [isEditing, setIsEditing] = useState(false);\n  const itemRef = useRef(null);\n\n  // Handle click outside to close edit mode\n  useEffect(() => {\n    const handleClickOutside = (event) => {\n      // Don't close if clicking on any button or input\n      const target = event.target;\n      const isButton = target.tagName === 'BUTTON' || \n                      target.closest('button') !== null ||\n                      target.closest('[role=\"button\"]') !== null ||\n                      target.closest('[aria-label*=\"quantity\"]') !== null;\n      const isInput = target.tagName === 'INPUT' || target.tagName === 'TEXTAREA';\n      \n      if (isButton || isInput) {\n        return; // Don't close when clicking buttons or inputs\n      }\n      \n      // Check if click is outside the item element\n      if (isEditing && itemRef.current && !itemRef.current.contains(event.target)) {\n        setIsEditing(false);\n      }\n    };\n\n    if (isEditing) {\n      // Add listener with a delay to ensure button clicks are processed first\n      const timeoutId = setTimeout(() => {\n        document.addEventListener('mousedown', handleClickOutside);\n      }, 200);\n      \n      return () => {\n        clearTimeout(timeoutId);\n        document.removeEventListener('mousedown', handleClickOutside);\n      };\n    }\n  }, [isEditing]);\n  // Handle standalone charm items\n  if (item.type === 'charm') {\n    const charm = item.pin || item;\n    // Get unit price (always use item.price as the base unit price)\n    const unitPrice = item.price || 0;\n    const qty = item.quantity || 1;\n    // Always calculate total based on unit price and current quantity\n    const total = unitPrice * qty;\n\n    return (\n      <div key={index} className=\" pb-4 \" ref={itemRef}>\n        <div className=\"flex items-start gap-4\">\n          {/* Image with quantity badge */}\n          <div className=\"relative flex-shrink-0 w-20 h-20 bg-gray-50 rounded-sm border border-gray-200 flex items-center justify-center overflow-visible\">\n            {item.image ? (\n              <img\n                src={normalizeImagePath(item.image)}\n                alt={item.name || \"Charm\"}\n                className=\"w-full h-full object-contain p-2\"\n                loading=\"lazy\"\n              />\n            ) : charm?.src ? (\n              <img\n                src={normalizeImagePath(charm.src)}\n                alt={charm.name || \"Charm\"}\n                className=\"w-full h-full object-contain p-2\"\n                loading=\"lazy\"\n              />\n            ) : (\n              <div className=\"w-full h-full rounded-sm bg-gray-100\" />\n            )}\n            <span className=\"absolute -top-1.5 -right-1.5 bg-gray-900 text-white text-[10px] font-medium rounded-full h-5 w-5 flex items-center justify-center font-inter\">\n              {qty}\n            </span>\n          </div>\n          \n          {/* Content */}\n          <div className=\"flex-1 min-w-0\">\n            <div className=\"flex items-start justify-between gap-4\">\n              <div className=\"flex-1 min-w-0\">\n                <h4 className=\"text-sm font-medium text-gray-900 font-inter leading-tight\">\n                  {item.name || charm?.name || \"Charm\"}\n                </h4>\n                <p className=\"text-xs text-gray-500 mt-0.5 font-inter\">\n                  {item.category === 'bronze' ? 'Bronze Charm' : \n                   item.category === 'flags' ? 'Flag' : \n                   'Colorful Charm'}\n                </p>\n              </div>\n              <div className=\"flex-shrink-0 text-right\">\n                <span className=\"text-sm font-medium text-gray-900 font-inter\">\n                  {formatPrice(total)}\n                </span>\n              </div>\n            </div>\n            \n            {/* Edit Button */}\n            {!isEditing && (\n              <div className=\"mt-3\">\n                <button\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    setIsEditing(true);\n                  }}\n                  className=\"text-xs text-gray-600 hover:text-gray-900 font-light font-inter uppercase tracking-wider transition-colors\"\n                >\n                  Edit\n                </button>\n              </div>\n            )}\n            \n            {/* Quantity Controls and Remove Button - Shown when editing */}\n            {isEditing && onIncrement && onDecrement && (\n              <div className=\"mt-3 flex items-center gap-3\">\n                <div className=\"flex items-center gap-1 border border-gray-200 rounded-sm p-1\">\n                  <button \n                    onClick={(e) => {\n                      e.preventDefault();\n                      e.stopPropagation();\n                      const identifier = item.id !== undefined ? item.id : index;\n                      console.log('➖ Charm item decrement clicked:', { \n                        identifier, \n                        itemId: item.id, \n                        index, \n                        currentQty: item.quantity,\n                        itemName: item.name,\n                        itemType: item.type,\n                        hasOnDecrement: !!onDecrement\n                      });\n                      if (onDecrement) {\n                        onDecrement(identifier);\n                      }\n                    }} \n                    className=\"w-6 h-6 flex items-center justify-center text-gray-600 hover:text-gray-900 transition-colors\"\n                    aria-label=\"Decrease quantity\"\n                    type=\"button\"\n                  >\n                    −\n                  </button>\n                  <div className=\"px-2 py-0.5 text-xs text-gray-900 font-light font-inter min-w-[1.5rem] text-center\">\n                    {qty}\n                  </div>\n                <button \n                  onClick={(e) => {\n                    e.preventDefault();\n                    e.stopPropagation();\n                    const identifier = item.id !== undefined ? item.id : index;\n                    console.log('➕ Charm item increment clicked:', { \n                      identifier, \n                      itemId: item.id, \n                      index, \n                      currentQty: item.quantity,\n                      itemName: item.name,\n                      itemType: item.type,\n                      hasOnIncrement: !!onIncrement\n                    });\n                    if (onIncrement) {\n                      onIncrement(identifier);\n                    }\n                  }} \n                  className=\"w-6 h-6 flex items-center justify-center text-gray-600 hover:text-gray-900 transition-colors\"\n                  aria-label=\"Increase quantity\"\n                  type=\"button\"\n                >\n                  +\n                </button>\n                </div>\n                {onRemove && (\n                  <button\n                    onClick={() => {\n                      onRemove(index);\n                      setIsEditing(false);\n                    }}\n                    className=\"text-xs text-red-600 hover:text-red-700 font-light font-inter uppercase tracking-wider transition-colors\"\n                  >\n                    Remove\n                  </button>\n                )}\n              </div>\n            )}\n            \n            {/* Error Message */}\n            {errorMessage && (\n              <p className=\"text-xs text-red-600 font-inter mt-2\">\n                {errorMessage}\n              </p>\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // Handle case items (with or without charms)\n  // Get base price - prefer basePrice, then casePrice, then price, fallback to 8\n  const base = typeof item.basePrice === 'number' \n    ? item.basePrice \n    : (typeof item.casePrice === 'number' \n      ? item.casePrice \n      : (typeof item.price === 'number' ? item.price : 8));\n  \n  // Calculate charms total from pinsDetails if available\n  const charms = item.pinsDetails && item.pinsDetails.length\n    ? item.pinsDetails.reduce((s, p) => s + (p.price || 0), 0)\n    : 0;\n  \n  // Unit price = base + charms\n  const unit = base + charms;\n  const qty = item.quantity || 1;\n  \n  // Always calculate total based on unit price and current quantity\n  const total = unit * qty;\n\n  return (\n    <div key={index} className=\" pb-4 last:border-b-0\" ref={itemRef}>\n      <div className=\"flex items-start gap-4\">\n        {/* Image with quantity badge */}\n        <div className=\"relative flex-shrink-0 w-20 h-20 bg-gray-50 rounded-sm border border-gray-200 flex items-center justify-center overflow-visible\">\n          {item.designImage ? (\n            <img\n              src={normalizeImagePath(item.designImage)}\n              alt=\"Custom Case Design\"\n              className=\"w-full h-full object-contain p-2 rounded-sm\"\n              loading=\"lazy\"\n            />\n          ) : item.caseImage ? (\n            <img \n              src={normalizeImagePath(item.caseImage)} \n              alt=\"Custom Case\" \n              className=\"w-full h-full object-contain p-2 rounded-sm\" \n              loading=\"lazy\" \n            />\n          ) : (\n            <div \n              className=\"w-full h-full rounded-sm\" \n              style={{ background: item.color }} \n            />\n          )}\n          <span className=\"absolute -top-1.5 -right-1.5 bg-gray-900 text-white text-[10px] font-medium rounded-full h-5 w-5 flex items-center justify-center font-inter\">\n            {qty}\n          </span>\n        </div>\n        \n        {/* Content */}\n        <div className=\"flex-1 min-w-0\">\n          <div className=\"flex items-start justify-between gap-4\">\n            <div className=\"flex-1 min-w-0\">\n              <h4 className=\"text-sm font-medium text-gray-900 font-inter leading-tight\">\n                {item.caseName || item.name || 'Passport Case'}\n              </h4>\n              <div className=\"flex items-center gap-2 mt-1\">\n                <span className=\"text-xs text-gray-500 font-inter\">Color:</span>\n                <span\n                  className=\"inline-flex h-4 w-4 rounded-full border border-gray-300 shadow-sm\"\n                  style={{ backgroundColor: item.color }}\n                  aria-label={`Selected color ${item.color}`}\n                />\n              </div>\n            </div>\n            <div className=\"flex-shrink-0 text-right\">\n              <span className=\"text-sm font-medium text-gray-900 font-inter\">\n                {formatPrice(total)}\n              </span>\n            </div>\n          </div>\n          \n          {/* Edit Button */}\n          {!isEditing && (\n            <div className=\"mt-3\">\n              <button\n                onClick={(e) => {\n                  e.stopPropagation();\n                  setIsEditing(true);\n                }}\n                className=\"text-xs text-gray-600 hover:text-gray-900 font-light font-inter uppercase tracking-wider transition-colors\"\n              >\n                Edit\n              </button>\n            </div>\n          )}\n          \n          {/* Quantity Controls and Remove Button - Shown when editing */}\n          {isEditing && onIncrement && onDecrement && (\n            <div className=\"mt-3 flex items-center gap-3\">\n              <div className=\"flex items-center gap-1 border border-gray-200 rounded-sm p-1\">\n                <button \n                  onClick={(e) => {\n                    e.preventDefault();\n                    e.stopPropagation();\n                    const identifier = item.id !== undefined ? item.id : index;\n                    console.log('➖ Case item decrement clicked:', { \n                      identifier, \n                      itemId: item.id, \n                      index, \n                      currentQty: item.quantity,\n                      itemName: item.caseName || item.name,\n                      hasOnDecrement: !!onDecrement\n                    });\n                    if (onDecrement) {\n                      onDecrement(identifier);\n                    } else {\n                      console.error('❌ onDecrement handler is missing!');\n                    }\n                  }} \n                  className=\"w-6 h-6 flex items-center justify-center text-gray-600 hover:text-gray-900 transition-colors\"\n                  aria-label=\"Decrease quantity\"\n                  type=\"button\"\n                >\n                  −\n                </button>\n                <div className=\"px-2 py-0.5 text-xs text-gray-900 font-light font-inter min-w-[1.5rem] text-center\">\n                  {qty}\n                </div>\n                <button \n                  onClick={(e) => {\n                    e.preventDefault();\n                    e.stopPropagation();\n                    const identifier = item.id !== undefined ? item.id : index;\n                    console.log('➕ Case item increment clicked:', { \n                      identifier, \n                      itemId: item.id, \n                      index, \n                      currentQty: item.quantity,\n                      itemName: item.caseName || item.name,\n                      hasOnIncrement: !!onIncrement\n                    });\n                    if (onIncrement) {\n                      onIncrement(identifier);\n                    } else {\n                      console.error('❌ onIncrement handler is missing!');\n                    }\n                  }} \n                  className=\"w-6 h-6 flex items-center justify-center text-gray-600 hover:text-gray-900 transition-colors\"\n                  aria-label=\"Increase quantity\"\n                  type=\"button\"\n                >\n                  +\n                </button>\n              </div>\n              {onRemove && (\n                <button\n                  onClick={() => {\n                    onRemove(index);\n                    setIsEditing(false);\n                  }}\n                  className=\"text-xs text-red-600 hover:text-red-700 font-light font-inter uppercase tracking-wider transition-colors\"\n                >\n                  Remove\n                </button>\n              )}\n            </div>\n          )}\n          \n          {/* Charms list */}\n          {item.pinsDetails && item.pinsDetails.length > 0 && (\n            <div className=\"mt-3 pt-3 \">\n              <div className=\"flex flex-col gap-2\">\n                {Object.values(item.pinsDetails.reduce((acc, pin) => {\n                  acc[pin.src] = acc[pin.src] || { ...pin, quantity: 0 };\n                  acc[pin.src].quantity++;\n                  return acc;\n                }, {})).map((groupedPin, i) => {\n                  const pinPrice = groupedPin.price || 0;\n                  const pinTotal = pinPrice * groupedPin.quantity;\n                  return (\n                    <div key={i} className=\"flex items-center justify-between\">\n                      <div className=\"flex items-center gap-2\">\n                        <div className=\"relative w-10 h-10 bg-gray-50 rounded-sm border border-gray-200 flex items-center justify-center overflow-visible\">\n                          <img \n                            src={groupedPin.src} \n                            alt={groupedPin.name} \n                            className=\"w-full h-full object-contain p-1\" \n                            loading=\"lazy\" \n                          />\n                          <span className=\"absolute -top-1 -right-1 bg-gray-900 text-white text-[10px] font-medium rounded-full h-4 w-4 flex items-center justify-center font-inter\">\n                            {groupedPin.quantity}\n                          </span>\n                        </div>\n                        <span className=\"text-xs font-light text-gray-700 font-inter\">\n                          {groupedPin.name}\n                        </span>\n                      </div>\n                      <span className=\"text-xs font-medium text-gray-900 font-inter\">\n                        {formatPrice(pinTotal)}\n                      </span>\n                    </div>\n                  );\n                })}\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default OrderSummaryItem;\n\n","'use client';\n\nimport React from 'react';\nimport Link from 'next/link';\nimport OrderSummaryItem from './OrderSummaryItem';\nimport InternationalNote from '../../InternationalNote';\n\nconst OrderSummary = ({ \n  cart, \n  formatPrice, \n  subtotal, \n  shippingCost, \n  shippingLabel, \n  totalWithShipping, \n  showInternationalNote,\n  onShowShippingInfo,\n  onIncrement,\n  onDecrement,\n  onRemove,\n  itemErrors\n}) => {\n  return (\n    <div className=\"flex flex-col h-full min-h-0 mt-4\">\n      {/* Scrollable items list */}\n      <div className=\"flex-1 overflow-y-auto pr-2 -mr-2 min-h-0 order-summary-scroll\" style={{ scrollbarWidth: 'thin', scrollbarColor: '#d1d5db #f3f4f6' }}>\n        <div className=\"pr-2 pb-2\">\n          {cart.length === 0 ? (\n            <p className=\"text-sm text-gray-500 font-inter py-8 text-center\">Your cart is empty</p>\n          ) : (\n            <div className=\"space-y-0 mt-2\">\n              {cart.map((item, index) => (\n                <OrderSummaryItem\n                  key={item.id || `item-${index}`}\n                  item={item}\n                  index={index}\n                  formatPrice={formatPrice}\n                  onIncrement={onIncrement}\n                  onDecrement={onDecrement}\n                  onRemove={onRemove}\n                  errorMessage={itemErrors?.[item.id || index]}\n                />\n              ))}\n            </div>\n          )}\n        </div>\n      </div>\n      \n      {/* Fixed totals section */}\n      <div className=\"flex-shrink-0 pt-6  mt-4 \">\n        <div className=\"space-y-3\">\n          <div className=\"flex justify-between text-sm font-light text-gray-700 font-inter\">\n            <span>Subtotal</span>\n            <span className=\"font-medium text-gray-900 font-inter\">{formatPrice(subtotal)}</span>\n          </div>\n          \n          <div className=\"flex justify-between text-sm font-light text-gray-700 font-inter\">\n            <span className=\"flex items-center gap-1.5\">\n              Shipping ({shippingLabel})\n              <button\n                type=\"button\"\n                onClick={onShowShippingInfo}\n                className=\"text-gray-400 hover:text-gray-600 transition-colors w-4 h-4 rounded-full border border-gray-300 flex items-center justify-center text-[10px] leading-none\"\n                title=\"Quick delivery information\"\n              >\n                ?\n              </button>\n            </span>\n            <span className=\"font-medium text-gray-900 font-inter\">\n              {shippingCost === 0 ? 'Free' : formatPrice(shippingCost)}\n            </span>\n          </div>\n        </div>\n        \n        <div className=\"flex justify-between py-4 border-t border-gray-200 mt-4 pt-4\">\n          <span className=\"text-base font-medium text-gray-900 font-inter uppercase tracking-wider\">Total</span>\n          <span className=\"text-xl font-semibold text-gray-900 font-inter\">{formatPrice(totalWithShipping)}</span>\n        </div>\n       \n        <div className=\"mt-4 pt-4 border-t border-gray-100\">\n          <p className=\"text-xs text-gray-500 font-light font-inter leading-relaxed\">\n            Shipping and taxes are calculated at checkout if applicable.{' '}\n            <Link\n              href=\"/shipping\"\n              className=\"text-gray-600 hover:text-gray-900 underline transition-colors\"\n              title=\"Learn more about shipping information\"\n            >\n              Learn more\n            </Link>\n          </p>\n        </div>\n        \n        {showInternationalNote && (\n          <div className=\"mt-4\">\n            <InternationalNote\n              showOnDesktop={true}\n              showOnMobile={false}\n              title=\"Custom Duties & Taxes Included\"\n              message=\"The total amount you pay includes all applicable customs duties & taxes. We guarantee no additional charges on delivery.\"\n              variant=\"gray\"\n            />\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default OrderSummary;\n\n","import React from 'react';\nimport OrderSummary from './OrderSummary';\n\nconst MobileOrderSummary = ({ \n  isOpen, \n  onToggle, \n  cartLength, \n  totalWithShipping, \n  formatPrice,\n  cart,\n  subtotal,\n  shippingCost,\n  shippingLabel,\n  showInternationalNote,\n  onShowShippingInfo,\n  onIncrement,\n  onDecrement,\n  onRemove,\n  itemErrors\n}) => {\n  return (\n    <>\n      <div className=\"lg:hidden \">\n        <button\n          type=\"button\"\n          onClick={onToggle}\n          className=\"w-full flex items-center justify-between px-4 py-3 text-xs uppercase tracking-wider text-gray-600 hover:text-gray-900 border border-gray-200 hover:border-gray-400 transition-all duration-200 font-light font-inter\"\n          aria-expanded={isOpen}\n          aria-controls=\"mobile-order-summary\"\n        >\n          <span>Order Summary ({cartLength} item{cartLength === 1 ? '' : 's'})</span>\n          <span className=\"flex items-center gap-2\">\n            <span>{formatPrice(totalWithShipping)}</span>\n            <svg\n              className={`w-4 h-4 transition-transform ${isOpen ? 'rotate-180' : ''}`}\n              fill=\"none\"\n              stroke=\"currentColor\"\n              viewBox=\"0 0 24 24\"\n              xmlns=\"http://www.w3.org/2000/svg\"\n              aria-hidden=\"true\"\n            >\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"1.5\" d=\"M19 9l-7 7-7-7\" />\n            </svg>\n          </span>\n        </button>\n      </div>\n      \n      {isOpen && (\n        <div id=\"mobile-order-summary\" className=\"lg:hidden  pb-4\">\n          <div className=\"mt-2 bg-yellow-50 p-4\">\n            <OrderSummary\n              cart={cart}\n              formatPrice={formatPrice}\n              subtotal={subtotal}\n              shippingCost={shippingCost}\n              shippingLabel={shippingLabel}\n              totalWithShipping={totalWithShipping}\n              showInternationalNote={showInternationalNote}\n              onShowShippingInfo={onShowShippingInfo}\n              onIncrement={onIncrement}\n              onDecrement={onDecrement}\n              onRemove={onRemove}\n              itemErrors={itemErrors}\n            />\n          </div>\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default MobileOrderSummary;\n\n","'use client';\n\nimport React from 'react';\nimport Link from 'next/link';\n\nconst ShippingInfoModal = ({ isOpen, onClose }) => {\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/40 px-4\">\n      <div className=\"bg-white border border-gray-200 max-w-md w-full p-6 space-y-4\">\n        <div className=\"flex items-start justify-between\">\n          <h3 className=\"text-sm uppercase tracking-wider text-gray-900 font-light font-inter\">\n            Delivery Information\n          </h3>\n          <button\n            type=\"button\"\n            onClick={onClose}\n            className=\"text-gray-400 hover:text-gray-900 transition-colors font-inter\"\n            aria-label=\"Close delivery information\"\n          >\n            <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M6 18L18 6M6 6l12 12\" />\n            </svg>\n          </button>\n        </div>\n        <p className=\"text-xs text-gray-500 font-light font-inter\">\n          We dispatch orders within 2 - 3 business days. Shipping costs depend on your delivery country.\n        </p>\n        <p className=\"text-xs text-gray-500 font-light font-inter\">\n          Including Ireland, Europe, Asia, North America, South America, Canada, Australia and New Zealand. Shipping charges are calculated at the checkout depending on location and parcel size.\n        </p>\n        <ul className=\"text-xs text-gray-600 space-y-2 font-light font-inter font-medium\">\n          <li><span>UK:</span> 3-4 business days</li>\n          <li><span className=\"font-medium font-medium\">Europe:</span> 5-10 business days</li>\n          <li><span>USA & Canada:</span> 7-14 business days</li>\n          <li><span className=\"font-medium\">Rest of World:</span> 10-21 business days</li>\n        </ul>\n        <div className=\"pt-2 border-t border-gray-100\">\n          <p className=\"text-xs text-gray-500 font-light font-inter leading-relaxed\">\n            Orders delivered outside of the UK may be subject to import duties and taxes. These are levied when the delivery reaches its specific destination, and you will be responsible for the payment of any such duties and taxes. For more information, please contact your local customs office.\n          </p>\n        </div>\n        <div className=\"flex justify-end\">\n          <Link\n            href=\"/shipping\"\n            className=\"text-xs text-gray-500 hover:text-gray-900 underline transition-colors font-light font-inter\"\n            onClick={onClose}\n          >\n            View full shipping policy\n          </Link>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ShippingInfoModal;\n\n"],"names":[],"mappings":"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","ignoreList":[1,2]}