module.exports=[36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},42602,(a,b,c)=>{"use strict";b.exports=a.r(18622)},87924,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactJsxRuntime},72131,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].React},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},38783,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactServerDOMTurbopackClient},92250,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(1745),e=a.i(72151);let f=(0,c.createContext)(),g=(a,b)=>{switch(b.type){case"ADD_TO_CART":let c={...b.payload,id:b.payload.id||Date.now(),quantity:b.payload.quantity||1},f=a.items.findIndex(a=>(0,e.areItemsIdentical)(a,c));if(-1!==f){let b=a.items[f],e=(0,d.getMaxAvailableQuantity)(b,a.items),g=b.quantity||1,h=g+(c.quantity||1),i=c.quantity||1;if(null!==e&&(0===e||i>e))return a;let j={...b,quantity:h},k=a.items.map((a,b)=>b===f?j:a);return console.log("âœ… CartContext - Item quantity incremented in cart:",{itemName:j.name,oldQuantity:g,newQuantity:h,item:j,allItemsInCart:k.map((a,b)=>({itemNumber:b+1,name:a.name,type:a.type,category:a.category,quantity:a.quantity,price:a.price,caseType:a.caseType,color:a.color,customDesign:a.customDesign,pin:a.pin?{name:a.pin.name,src:a.pin.src,category:a.pin.category}:null}))}),{...a,items:k,isDrawerOpen:!0}}{let b=(0,d.getMaxAvailableQuantity)(c,a.items),e=c.quantity||1;if(null!==b&&(0===b||e>b))return a;let f={...c,quantity:c.quantity||1},g=[...a.items,f];return console.log("âœ… CartContext - Item successfully added to cart state:",{item:{...f,designImage:f.designImage?f.designImage.startsWith("data:")?`data URL (${f.designImage.length} chars)`:f.designImage:"none",caseImage:f.caseImage||"none",image:f.image?f.image.startsWith("data:")?`data URL (${f.image.length} chars)`:f.image:"none"},cartSize:g.length,allItemsInCart:g.map((a,b)=>({itemNumber:b+1,name:a.name||a.caseName,type:a.type,category:a.category,quantity:a.quantity,price:a.price,caseType:a.caseType,color:a.color,customDesign:a.customDesign,hasDesignImage:!!a.designImage,hasCaseImage:!!a.caseImage,hasImage:!!a.image,pin:a.pin?{name:a.pin.name,src:a.pin.src,category:a.pin.category}:null}))}),{...a,items:g,isDrawerOpen:!0}}case"REMOVE_FROM_CART":return{...a,items:a.items.filter((a,c)=>c!==b.payload)};case"LOAD_CART":return{...a,items:b.payload||[]};case"CLEAR_CART":return{...a,items:[]};case"OPEN_CART_DRAWER":return{...a,isDrawerOpen:!0};case"CLOSE_CART_DRAWER":return{...a,isDrawerOpen:!1};case"INCREMENT_ITEM_QTY":console.log("ðŸ”„ INCREMENT_ITEM_QTY reducer called:",{payload:b.payload,payloadType:typeof b.payload,itemsCount:a.items.length});let g=a.items.map((c,e)=>{let f=!1;if("string"==typeof b.payload?f=void 0!==c.id&&c.id===b.payload:"number"==typeof b.payload&&(f=e===b.payload),f){console.log("âœ… Item matched in reducer:",{name:c.name||c.caseName,id:c.id,index:e,currentQty:c.quantity});let b=(0,d.getMaxAvailableQuantity)(c,a.items),f=c.quantity||1;if(null===b||b>0){let a={...c,quantity:f+1};return console.log("âœ… Incrementing quantity:",{oldQty:f,newQty:a.quantity}),a}console.log("âš ï¸ Inventory limit reached, not incrementing")}return c});return console.log("ðŸ“¦ Updated cart after increment:",g.map((a,b)=>({index:b,name:a.name||a.caseName,qty:a.quantity}))),{...a,items:g};case"DECREMENT_ITEM_QTY":console.log("ðŸ”„ DECREMENT_ITEM_QTY reducer called:",{payload:b.payload,payloadType:typeof b.payload,itemsCount:a.items.length});let h=a.items.map((a,c)=>{let d=!1;if("string"==typeof b.payload?d=void 0!==a.id&&a.id===b.payload:"number"==typeof b.payload&&(d=c===b.payload),d){let b=a.quantity||1;if(b>1){let d={...a,quantity:b-1};return console.log("âœ… Decrementing quantity:",{name:a.name||a.caseName,id:a.id,index:c,oldQty:b,newQty:d.quantity}),d}console.log("âš ï¸ Quantity already at minimum (1), not decrementing")}return a});return console.log("ðŸ“¦ Updated cart after decrement:",h.map((a,b)=>({index:b,name:a.name||a.caseName,qty:a.quantity}))),{...a,items:h};case"SET_CHECKOUT_SESSION":return{...a,checkoutSession:b.payload};case"UPDATE_ITEM_NOTE":return{...a,items:a.items.map((a,c)=>c===b.payload.index?{...a,note:b.payload.note}:a)};default:return a}},h={items:[],checkoutSession:null,isDrawerOpen:!1};a.s(["CartProvider",0,({children:a})=>{let[d,e]=(0,c.useReducer)(g,h),[i,j]=c.default.useState(!1);(0,c.useEffect)(()=>{e({type:"LOAD_CART",payload:[]}),j(!0)},[]),(0,c.useEffect)(()=>{},[d.items,i]);let k={cart:d.items,checkoutSession:d.checkoutSession,isDrawerOpen:d.isDrawerOpen,addToCart:a=>{console.log("ðŸ›’ Adding item to cart:",{name:a.name,type:a.type,category:a.category,price:a.price,quantity:a.quantity||1,caseType:a.caseType,color:a.color,pins:a.pins?`${a.pins.length} pins`:"no pins",pinsDetails:a.pinsDetails?`${a.pinsDetails.length} pinsDetails`:"no pinsDetails",customDesign:a.customDesign,pin:a.pin?{name:a.pin.name,src:a.pin.src,category:a.pin.category}:"no pin",fullProduct:a}),e({type:"ADD_TO_CART",payload:a})},removeFromCart:a=>{e({type:"REMOVE_FROM_CART",payload:a})},clearCart:()=>{e({type:"CLEAR_CART"})},openCartDrawer:()=>{e({type:"OPEN_CART_DRAWER"})},closeCartDrawer:()=>{e({type:"CLOSE_CART_DRAWER"})},incrementItemQty:a=>e({type:"INCREMENT_ITEM_QTY",payload:a}),decrementItemQty:a=>e({type:"DECREMENT_ITEM_QTY",payload:a}),setCheckoutSession:a=>{e({type:"SET_CHECKOUT_SESSION",payload:a})},updateItemNote:(a,b)=>{e({type:"UPDATE_ITEM_NOTE",payload:{index:a,note:b}})},getTotalPrice:()=>d.items.reduce((a,b)=>{let c=0;return a+(c="charm"===b.type?(b.price||b.totalPrice||0)*(b.quantity||1):(("number"==typeof b.basePrice?b.basePrice:b.price||b.totalPrice||0)+(b.pinsDetails&&b.pinsDetails.length?b.pinsDetails.reduce((a,b)=>a+(b.price||0),0):0))*(b.quantity||1))},0),getTotalItems:()=>d.items.length,getTotalQuantity:()=>d.items.reduce((a,b)=>a+(b.quantity||1),0)};return(0,b.jsx)(f.Provider,{value:k,children:a})},"useCart",0,()=>{let a=(0,c.useContext)(f);if(!a)throw Error("useCart must be used within a CartProvider");return a}])},80169,a=>{"use strict";var b=a.i(87924),c=a.i(72131);let d=(0,c.createContext)(),e={GBP:1,EUR:1.17},f={GBP:"Â£",EUR:"â‚¬"};a.s(["CurrencyProvider",0,({children:a})=>{let[g,h]=(0,c.useState)(()=>"GBP"),[i,j]=(0,c.useState)(e),[k,l]=(0,c.useState)(!1);(0,c.useEffect)(()=>{let a=async()=>{let a=await fetch("https://api.exchangerate-api.com/v4/latest/GBP");if(a.ok){let b=a.headers.get("content-type");if(b&&b.includes("application/json"))try{let b=await a.json(),c={GBP:1,EUR:b.rates?.EUR||e.EUR};j(c),console.log("âœ… Exchange rates fetched from direct API:",c)}catch(a){throw Error(`Failed to parse direct API response: ${a.message}`)}else throw Error("Direct API returned non-JSON response")}else throw Error(`Failed to fetch rates: ${a.status}`)},b=async()=>{l(!0);try{let b="u">typeof process&&process.env.NEXT_PUBLIC_API_URL||"";if(b){let a=`${b||"http://localhost:3001"}/api/exchange-rates`;try{let b=await fetch(a),c=b.headers.get("content-type"),d=c&&c.includes("application/json");if(b.ok&&d)try{let a=await b.json();if(a.success&&a.rates){j(a.rates),console.log("âœ… Exchange rates fetched from backend:",a.rates);return}}catch(a){}else b.ok}catch(a){}}await a()}catch(a){console.error("âŒ Error fetching exchange rates:",a),console.log("âš ï¸ Using default exchange rates:",e),j(e)}finally{l(!1)}};b();let c=setInterval(b,36e5);return()=>clearInterval(c)},[]),(0,c.useEffect)(()=>{},[g]);let m=a=>a*(i[g]||1),n={currency:g,setCurrency:h,convertPrice:m,formatPrice:(a,b=2)=>{let c=m(a),d=f[g]||"Â£";return`${d}${c.toFixed(b)}`},currencySymbol:f[g]||"Â£",exchangeRates:i,currencySymbols:f,ratesLoading:k};return(0,b.jsx)(d.Provider,{value:n,children:a})},"useCurrency",0,()=>{let a=(0,c.useContext)(d);if(!a)throw Error("useCurrency must be used within a CurrencyProvider");return a}])},39402,a=>{"use strict";var b=a.i(72131);a.s(["useScrollAnimation",0,(a={})=>{let[c,d]=(0,b.useState)(!1),e=(0,b.useRef)(null),{threshold:f=.1,rootMargin:g="0px",triggerOnce:h=!0}=a;return(0,b.useEffect)(()=>{let a=e.current;if(!a)return;let b=new IntersectionObserver(([c])=>{c.isIntersecting?(d(!0),h&&b.unobserve(a)):h||d(!1)},{threshold:f,rootMargin:g});return b.observe(a),()=>{a&&b.unobserve(a)}},[f,g,h]),[e,c]}])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__e4e2c3e9._.js.map