module.exports=[55534,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(92250),e=a.i(80169),f=a.i(50944),g=a.i(72151),h=a.i(1745),i=a.i(19997);let j=(a,b,c,d,e,f)=>{let g=0;return a.forEach(h=>{if("charm"===h.type){if(h.id===e||void 0===e&&a.indexOf(h)===f)return;let i=h.pin||h,j=i.name||i.src,k=i.category||h.category||d;(j===b||j===c)&&k===d&&(g+=h.quantity||1)}}),g},k=(a,b,c,d,e,f)=>{let g=0;return a.forEach(h=>{"charm"===h.type||h.id===e||a.indexOf(h)===f||(h.pins||h.pinsDetails||[]).forEach(a=>{if(!a)return;let e=a.name||a.src,f=a.src||"",i=a.category||d;(e===b||e===c||f===b||f===c)&&i===d&&(g+=h.quantity||1)})}),g},l=(a,b,c,d)=>a.filter(a=>{let e=a.pin||a,f=e.name||e.src,g=e.category||d;return(f===b||f===c)&&g===d}).length,m=(a,b="colorful")=>{let c=b&&""!==b.trim()?b:"colorful",d=a.name||a.src||"",e=a.src||"";return{name:d,price:a.price||2,totalPrice:a.price||2,image:e,pin:a,category:c,type:"charm"}};var n=a.i(72856),o=a.i(21929);let p=({totalItems:a=0,onBack:c})=>{let d=a||0;return(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsxs)("button",{onClick:c,className:"flex items-center text-gray-600 hover:text-gray-900 px-4 py-2 text-xs uppercase tracking-wider font-light transition-colors duration-200 mb-6 font-inter",children:[(0,b.jsx)(n.FontAwesomeIcon,{icon:o.faArrowLeft,className:"mr-2 text-xs"}),"Continue Shopping"]}),(0,b.jsxs)("div",{className:"text-center mb-12",children:[(0,b.jsxs)("h1",{className:"text-title text-gray-900 tracking-title mb-2 font-inter",children:["YOUR CART (",d," ",1===d,")"]}),(0,b.jsx)("div",{className:"w-16 sm:w-20 md:w-24 h-px bg-gray-200 mx-auto mb-4"})]})]})},q=({onContinueShopping:a})=>(0,b.jsx)("div",{className:"text-center py-16 flex flex-col items-center justify-center",children:(0,b.jsxs)("div",{className:"border border-gray-200 p-8 md:p-12 max-w-md mx-auto bg-white",children:[(0,b.jsx)("h2",{className:"text-xl md:text-2xl font-light text-gray-900 mb-4 font-inter",children:"Your cart is empty"}),(0,b.jsx)("p",{className:"text-gray-500 mb-8 text-sm font-light font-inter",children:"Start creating your custom case to add items to your cart."}),(0,b.jsx)("button",{onClick:a,className:"px-6 py-2 text-xs uppercase tracking-wider font-light font-inter bg-btn-primary-blue hover:bg-btn-primary-blue-hover text-btn-primary-blue-text border border-btn-primary-blue-border hover:border-btn-primary-blue-hover transition-all duration-200",children:"Create Your Case"})]})});var r=a.i(18772);let s=a=>{if(!a)return"";let b=a;return(b=(b=b.replace(/\s*-\s*(Flag|Colorful Charm|Bronze Charm)$/i,"")).replace(/\s+Flag$/i,"")).trim()},t=({item:a,formatPrice:c,errorMessage:d})=>{let e=s(a.name||a.pin?.name),f=a.quantity||1,g=a.price||a.totalPrice||0;return(0,b.jsx)("div",{className:"mt-2 flex flex-col gap-2",children:(0,b.jsxs)("div",{className:"flex items-start justify-between px-2 py-2 gap-2",children:[(0,b.jsxs)("div",{className:"flex items-start gap-3 flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"relative flex-shrink-0",children:[a.image?(0,b.jsx)("img",{src:(0,r.normalizeImagePath)(a.image),alt:a.name||"Charm",className:"w-24 h-24 object-contain rounded",loading:"lazy",fetchPriority:"low",decoding:"async",width:"96",height:"96",sizes:"96px"}):a.pin?.src?(0,b.jsx)("img",{src:(0,r.normalizeImagePath)(a.pin.src),alt:a.pin.name||"Charm",className:"w-24 h-24 object-contain rounded",loading:"lazy",fetchPriority:"low",decoding:"async",width:"96",height:"96",sizes:"96px"}):(0,b.jsx)("div",{className:"w-24 h-24 rounded bg-gray-50 border border-gray-200 flex items-center justify-center",children:(0,b.jsx)("span",{className:"text-gray-400 text-xs",children:"Image"})}),d&&(0,b.jsx)("div",{className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center z-10 shadow-lg",children:(0,b.jsx)("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:(0,b.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})})]}),(0,b.jsxs)("div",{className:"flex flex-col flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"text-xs font-light text-gray-900 mb-1 font-inter",children:[(0,b.jsx)("div",{className:"break-words",children:e||"Charm"}),(0,b.jsx)("div",{className:"text-gray-500 font-light font-inter text-[10px]",children:"bronze"===a.category?"Bronze Charm":"flags"===a.category?"Flag":"Colorful Charm"})]}),d&&(0,b.jsx)("div",{className:"mt-2 p-2 bg-red-50 border border-red-200 rounded-sm animate-pulse",children:(0,b.jsx)("p",{className:"text-xs text-red-700 font-inter leading-tight font-medium",children:d})})]})]}),(0,b.jsx)("div",{className:"text-xs font-medium text-gray-900 font-inter flex-shrink-0",children:c(g*f)})]})})},u=({item:a,formatPrice:c,errorMessage:d,charmErrors:e={}})=>{let f=Object.values(((a=[])=>a.reduce((a,b)=>{let c=`${b.src}|${b.name}|${b.price}`;return a[c]||(a[c]={...b,count:0}),a[c].count+=1,a},{}))(a.pinsDetails)),g="number"==typeof a.basePrice?a.basePrice:8;return(0,b.jsxs)("div",{className:"mt-2 flex flex-col gap-2",children:[(0,b.jsxs)("div",{className:"flex items-start px-2 py-2 gap-2",children:[(0,b.jsxs)("div",{className:"flex items-start gap-3 flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"relative flex-shrink-0",children:[a.designImage?(0,b.jsx)("img",{src:(0,r.normalizeImagePath)(a.designImage),alt:"Your Design",className:"w-24 h-18 object-contain rounded",loading:"lazy",fetchPriority:"low",decoding:"async",width:"96",height:"72",sizes:"96px"}):a.caseImage||a.image?(0,b.jsx)("img",{src:(0,r.normalizeImagePath)(a.caseImage||a.image),alt:"Case",className:"w-24 h-18 object-contain rounded",loading:"lazy",fetchPriority:"low",decoding:"async",width:"96",height:"72",sizes:"96px"}):(0,b.jsx)("div",{className:"w-24 h-18 rounded border-2 border-gray-300 flex items-center justify-center",style:{backgroundColor:a.color}}),d&&(0,b.jsx)("div",{className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center z-10 shadow-lg",children:(0,b.jsx)("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:(0,b.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})})]}),(0,b.jsxs)("div",{className:"flex flex-col flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"text-xs font-light text-gray-900 mb-1 font-inter",children:[(0,b.jsx)("div",{className:"break-words",children:a.caseName||a.name}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,b.jsx)("span",{className:"text-gray-500 font-light font-inter",children:"Color:"}),(0,b.jsx)("div",{className:"w-4 h-4 rounded-full border border-gray-300",style:{backgroundColor:a.color}})]})]}),d&&(0,b.jsx)("div",{className:"mt-2 p-2 bg-red-50 border border-red-200 rounded-sm animate-pulse",children:(0,b.jsx)("p",{className:"text-xs text-red-700 font-inter leading-tight font-medium",children:d})})]})]}),(0,b.jsx)("div",{className:"text-xs font-medium text-gray-900 font-inter flex-shrink-0",children:c(g)})]}),f.map((a,d)=>{let f=a.name||a.src||"",g=a.category&&""!==a.category.trim()?a.category:"colorful",h=e[`${f}-${g}`],i=s(a.name);return(0,b.jsxs)("div",{className:"flex items-start justify-between px-2 py-2 gap-2",children:[(0,b.jsxs)("div",{className:"flex items-start gap-2 flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"relative flex-shrink-0",children:[(0,b.jsx)("img",{src:(0,r.normalizeImagePath)(a.src),alt:i||"Charm",className:"w-24 h-24 object-contain",loading:"lazy",fetchPriority:"low",decoding:"async",width:"96",height:"96",sizes:"96px"}),h&&(0,b.jsx)("div",{className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center z-10 shadow-lg",children:(0,b.jsx)("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:(0,b.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})})]}),(0,b.jsxs)("div",{className:"text-xs font-light text-gray-900 mb-1 font-inter flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"break-words",children:[i||"Charm"," ",a.count>1?`(x${a.count})`:""]}),h&&(0,b.jsx)("div",{className:"mt-2 p-2 bg-red-50 border border-red-200 rounded-sm animate-pulse",children:(0,b.jsx)("p",{className:"text-xs text-red-700 font-inter leading-tight font-medium",children:h})})]})]}),(0,b.jsx)("div",{className:"text-xs font-medium text-gray-900 font-inter flex-shrink-0",children:c(a.price*a.count)})]},d)})]})},v=({item:a,formatPrice:c,errorMessage:d})=>(0,b.jsx)("div",{className:"mt-2 flex flex-col gap-2",children:(0,b.jsxs)("div",{className:"flex items-start justify-between px-2 py-2 gap-2",children:[(0,b.jsxs)("div",{className:"flex items-start gap-3 flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"relative flex-shrink-0",children:[a.designImage?(0,b.jsx)("img",{src:(0,r.normalizeImagePath)(a.designImage),alt:"Your Design",className:"w-24 h-18 object-contain rounded",loading:"lazy",fetchPriority:"low",decoding:"async",width:"96",height:"72",sizes:"96px"}):a.caseImage||a.image?(0,b.jsx)("img",{src:(0,r.normalizeImagePath)(a.caseImage||a.image),alt:a.caseName||a.name||"Case",className:"w-24 h-18 object-contain rounded",loading:"lazy",fetchPriority:"low",decoding:"async",width:"96",height:"72",sizes:"96px"}):(0,b.jsx)("div",{className:"w-24 h-18 rounded border-2 border-gray-300 flex items-center justify-center",style:{backgroundColor:a.color}}),d&&(0,b.jsx)("div",{className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center z-10 shadow-lg",children:(0,b.jsx)("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:(0,b.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})})]}),(0,b.jsxs)("div",{className:"flex flex-col flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"text-xs font-light text-gray-900 mb-1 font-inter",children:[(0,b.jsx)("div",{className:"break-words",children:a.caseName||a.name||"Passport Case"}),a.color&&(0,b.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,b.jsx)("span",{className:"text-gray-500 font-light font-inter",children:"Color:"}),(0,b.jsx)("div",{className:"w-4 h-4 rounded-full border border-gray-300",style:{backgroundColor:a.color}})]})]}),d&&(0,b.jsx)("div",{className:"mt-2 p-2 bg-red-50 border border-red-200 rounded-sm animate-pulse",children:(0,b.jsx)("p",{className:"text-xs text-red-700 font-inter leading-tight font-medium",children:d})})]})]}),(0,b.jsx)("div",{className:"text-xs font-medium text-gray-900 font-inter flex-shrink-0",children:c(a.basePrice||a.price||a.totalPrice||0)})]})}),w=({index:a,item:c,incrementItemQty:d,decrementItemQty:e})=>(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs text-gray-500 mb-2 font-light font-inter",children:"Quantity:"}),(0,b.jsx)("div",{className:"flex flex-col gap-2",children:(0,b.jsxs)("div",{className:"flex items-center border border-gray-200 rounded-sm p-1 w-fit",children:[(0,b.jsx)("button",{onClick:()=>e(void 0!==c.id?c.id:a),className:"w-6 h-6 flex items-center justify-center text-gray-600 hover:text-gray-900 transition-colors",title:"Decrease",children:"âˆ’"}),(0,b.jsx)("div",{className:"px-3 py-1 text-sm text-gray-900 font-light font-inter",children:c.quantity||1}),(0,b.jsx)("button",{onClick:()=>d(void 0!==c.id?c.id:a),className:"w-6 h-6 flex items-center justify-center text-gray-600 hover:text-gray-900 transition-colors",title:"Add one more",children:"+"})]})})]}),x=({index:a,item:c,openNoteIndex:d,noteTexts:e,setOpenNoteIndex:f,setNoteTexts:g,handleNoteChange:h,handleSaveNote:i})=>(0,b.jsxs)(b.Fragment,{children:[d===a&&(0,b.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-100",children:[(0,b.jsx)("div",{className:"text-xs text-gray-500 mb-2 font-light font-inter",children:"Add a note for this item:"}),(0,b.jsx)("textarea",{value:void 0!==e[a]?e[a]:c.note||"",onChange:b=>h(a,b.target.value),placeholder:"Add any special instructions or notes...",className:"w-full px-3 py-2 text-sm border border-gray-200 rounded-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 font-light resize-none font-inter",rows:"3"}),(0,b.jsxs)("div",{className:"flex justify-end gap-2 mt-2",children:[(0,b.jsx)("button",{onClick:()=>{f(null),g({...e,[a]:c.note||""})},className:"px-4 py-1.5 text-xs uppercase tracking-wider text-gray-600 hover:text-gray-900 font-light transition-colors font-inter",children:"Cancel"}),(0,b.jsx)("button",{onClick:()=>i(a),className:"px-4 py-1.5 text-xs uppercase tracking-wider font-light font-inter bg-btn-primary hover:bg-btn-primary-hover text-btn-primary-text border border-btn-primary-border hover:border-btn-primary-hover transition-all duration-200",children:"Save Note"})]})]}),c.note&&d!==a&&(0,b.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-100",children:[(0,b.jsx)("div",{className:"text-xs text-gray-500 mb-1 font-light font-inter",children:"Note:"}),(0,b.jsx)("div",{className:"text-sm text-gray-700 font-light whitespace-pre-wrap font-inter",children:c.note})]}),(0,b.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-100",children:(0,b.jsxs)("button",{onClick:()=>f(d===a?null:a),className:"flex items-center text-gray-500 hover:text-gray-900 px-4 py-2 text-xs uppercase tracking-wider font-light transition-colors font-inter",children:[c.note?"Edit Note":"Add Note",(0,b.jsx)(n.FontAwesomeIcon,{icon:d===a?o.faChevronUp:o.faChevronDown,className:"ml-2 text-xs"})]})})]}),y=({item:a,index:c,formatPrice:d,incrementItemQty:e,decrementItemQty:f,removeFromCart:g,openNoteIndex:h,setOpenNoteIndex:i,noteTexts:j,setNoteTexts:k,handleNoteChange:l,handleSaveNote:m,errorMessage:p,charmErrors:q={}})=>{var r,s;return(0,b.jsx)("div",{className:"border border-gray-200 p-6 bg-white","data-item-id":a.id||c,children:(0,b.jsx)("div",{className:"flex items-start justify-between",children:(0,b.jsxs)("div",{className:"flex-1",children:["charm"===a.type?(0,b.jsx)(t,{item:a,formatPrice:d,errorMessage:p}):a.pinsDetails&&a.pinsDetails.length>0?(0,b.jsx)(u,{item:a,formatPrice:d,errorMessage:p,charmErrors:q}):(0,b.jsx)(v,{item:a,formatPrice:d,errorMessage:p}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4 pt-4 border-t border-gray-100",children:[(0,b.jsx)(w,{index:c,item:a,incrementItemQty:e,decrementItemQty:f}),(0,b.jsx)("div",{className:"flex items-center justify-end",children:(0,b.jsxs)("button",{onClick:()=>g(c),className:"flex items-center text-gray-500 hover:text-gray-900 px-4 py-2 text-xs uppercase tracking-wider font-light transition-colors font-inter",children:[(0,b.jsx)(n.FontAwesomeIcon,{icon:o.faTrash,className:"mr-2 text-xs"}),"Remove"]})})]}),(0,b.jsx)(x,{index:c,item:a,openNoteIndex:h,noteTexts:j,setOpenNoteIndex:i,setNoteTexts:k,handleNoteChange:l,handleSaveNote:m}),(0,b.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-100",children:(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("span",{className:"text-sm font-light text-gray-700 font-inter",children:"Item Total:"}),(0,b.jsx)("span",{className:"text-sm font-medium text-gray-900 font-inter",children:(r=a,s=d,"charm"===r.type?s((r.price||r.totalPrice||0)*(r.quantity||1)):s((("number"==typeof r.basePrice?r.basePrice:r.price||0)+(r.pinsDetails&&r.pinsDetails.length?r.pinsDetails.reduce((a,b)=>a+(b.price||0),0):0))*(r.quantity||1)))})]})})]})})})};var z=a.i(38246);let A=({totalPrice:a,onCheckout:c})=>(0,b.jsx)("div",{className:"lg:col-span-1",children:(0,b.jsx)("div",{className:"border border-gray-200 p-6 bg-white sticky top-8",children:(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-6 pb-4 border-b border-gray-100",children:[(0,b.jsx)("span",{className:"text-sm font-light text-gray-700 uppercase tracking-wider font-inter",children:"Subtotal:"}),(0,b.jsx)("span",{className:"text-lg font-medium text-gray-900 font-inter",children:a})]}),(0,b.jsxs)("p",{className:"text-xs text-gray-500 text-center mb-4 font-light font-inter",children:[(0,b.jsx)(z.default,{href:"/shipping",className:"text-gray-500 hover:text-gray-900 underline transition-colors",children:"Shipping"})," ","and taxes calculated at checkout."]}),(0,b.jsx)("button",{onClick:c,className:"w-full py-3 text-xs uppercase tracking-wider font-light font-inter bg-btn-success hover:bg-btn-success-hover text-btn-success-text border border-btn-success-border hover:border-btn-success-hover transition-all duration-200",children:"Checkout"}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-4 text-center font-light font-inter",children:"Secure payment powered by Stripe"})]})})});a.s(["default",0,()=>{let{cart:a,removeFromCart:n,getTotalPrice:o,getTotalQuantity:r,updateItemNote:s}=(0,d.useCart)(),{formatPrice:t}=(0,e.useCurrency)(),u=(0,f.useRouter)(),v=(a=>{let[b,d]=(0,c.useState)({}),e=(0,c.useRef)({});return(0,c.useEffect)(()=>{let a=e.current;return Object.keys(b).forEach(b=>{a[b]&&clearTimeout(a[b]),a[b]=setTimeout(()=>{d(a=>{let c={...a};return"string"==typeof c[b]?delete c[b]:c[b]&&"object"==typeof c[b]&&delete c[b],c}),delete a[b]},3e3)}),()=>{Object.values(a).forEach(a=>{clearTimeout(a)})}},[b]),{itemErrors:b,setItemErrors:d,setErrorForAllIdenticalCharms:(b,c)=>{d(d=>{let e={...d};return a.forEach(d=>{"charm"===d.type&&(0,g.areItemsIdentical)(b,d)&&(e[d.id||a.indexOf(d)]=c)}),e})},clearErrorForAllIdenticalCharms:b=>{d(c=>{let d={...c};return a.forEach(c=>{if("charm"===c.type&&(0,g.areItemsIdentical)(b,c)){let b=c.id||a.indexOf(c);delete d[b]}}),d})},setItemError:(a,b)=>{d(c=>({...c,[a]:b}))},clearItemError:a=>{d(b=>{let c={...b};return delete c[a],c})},scrollToItem:a=>{setTimeout(()=>{let b=document.querySelector(`[data-item-id="${a}"]`);b&&b.scrollIntoView({behavior:"smooth",block:"center"})},100)}}})(a),w=(a=>{let[b,d]=(0,c.useState)(null),[e,f]=(0,c.useState)({});return{openNoteIndex:b,setOpenNoteIndex:d,noteTexts:e,setNoteTexts:f,handleNoteChange:(a,b)=>{f({...e,[a]:b})},handleSaveNote:b=>{a(b,e[b]||""),d(null)}}})(s),x=((a,b)=>{let{incrementItemQty:c,decrementItemQty:e}=(0,d.useCart)(),{setItemError:f,clearItemError:g,setErrorForAllIdenticalCharms:n,clearErrorForAllIdenticalCharms:o,scrollToItem:p,setItemErrors:q}=b;return{handleIncrementWithCheck:(d,e)=>{let q=a.find(a=>a.id===d)||a[d]||a[e];if(!q)return void console.error("Item not found for increment:",d,e);if("charm"===q.type){let b=((a,b,c,d)=>{let e=(0,h.getMaxAvailableQuantity)(a,b),f=a.category||a.pin?.category||"colorful",g=a.pin?.name||a.name||"",i=a.pin?.src||"";if(null!==e&&0===e)return{canIncrement:!1,errorMessage:`Oops! We don't have any more ${a.name||a.pin?.name||"Charm"} in stock right now, so you can't add more to your basket.`};if(null===e)return{canIncrement:!0};let l=j(b,g,i,f,c,d),m=k(b,g,i,f,c,d);return(a.quantity||1)+1+m>e+l?{canIncrement:!1,errorMessage:`Oops! We don't have any more ${a.name||a.pin?.name||"Charm"} in stock right now, so you can't add more to your basket.`}:{canIncrement:!0}})(q,a,d,e);if(!b.canIncrement){f(d||e,b.errorMessage),n(q,b.errorMessage),p(d||e);return}c(d),g(d||e),o(q);return}let r=(0,h.getMaxAvailableQuantity)(q,a);if(!(null===r||r>0)){let a=q.caseName||q.name||"Passport Case",b=q.color?(0,i.getColorName)(q.color,q.caseImage||q.case_image||q.image):"",c=b?` in ${b}`:"";f(d||e,{case:`Oops! We don't have any more ${a}${c} in stock right now, so you can't add more to your basket.`,charms:{}}),p(d||e);return}if(q.customDesign||q.pins&&Array.isArray(q.pins)&&q.pins.length>0||q.pinsDetails&&Array.isArray(q.pinsDetails)&&q.pinsDetails.length>0){let c=((a,b,c,d)=>{let e=(0,h.getMaxAvailableQuantity)(a,b),f=a.pins||a.pinsDetails||[],g=a.quantity||1;if(!(null===e||e>0)){let b=a.caseName||a.name||"Passport Case",c=a.color?(0,i.getColorName)(a.color,a.caseImage||a.case_image||a.image):"",d=c?` in ${c}`:"";return{canIncrement:!1,errorMessage:`Oops! We don't have any more ${b}${d} in stock right now, so you can't add more to your basket.`,errorType:"case"}}for(let a of f){if(!a)continue;let e=a.category&&""!==a.category.trim()?a.category:"colorful",i=a.name||a.src||"",n=a.src||"",o=m(a,e),p=(0,h.getMaxAvailableQuantity)(o,b);if(null===p)continue;let q=j(b,i,n,e,c,d),r=k(b,i,n,e,c,d),s=l(f,i,n,e),t=p+q,u=q+r+s*g+s;if(0===p||u>t)return{canIncrement:!1,errorMessage:`Oops! We don't have any more ${a.name||"this charm"} in stock right now, so you can't add more to your basket.`,errorType:"charm",errorKey:`${i}-${e}`,charmProduct:o}}return{canIncrement:!0}})(q,a,d,e);if(!c.canIncrement){"case"===c.errorType?f(d||e,{case:c.errorMessage,charms:{}}):"charm"===c.errorType&&(b.setItemErrors(a=>({...a,[d||e]:{case:a[d||e]?.case||null,charms:{...a[d||e]?.charms||{},[c.errorKey]:c.errorMessage}}})),n(c.charmProduct,c.errorMessage)),p(d||e);return}}c(d),g(d||e),(q.customDesign||q.pins&&Array.isArray(q.pins)&&q.pins.length>0||q.pinsDetails&&Array.isArray(q.pinsDetails)&&q.pinsDetails.length>0)&&(q.pins||q.pinsDetails||[]).forEach(a=>{a&&o(m(a,a.category||"colorful"))})},handleDecrementWithCheck:(b,c)=>{let d=a.find(a=>a.id===b)||a[b]||a[c];e(b),d&&"charm"===d.type?o(d):g(b||c)}}})(a,v),z=t(o());return(0,b.jsx)("div",{className:"min-h-screen bg-white py-8 md:py-12",children:(0,b.jsxs)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,b.jsx)(p,{totalItems:r(),onBack:()=>u.push("/")}),0===a.length?(0,b.jsx)(q,{onContinueShopping:()=>{u.push("/CreateYours")}}):(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,b.jsx)("div",{className:"lg:col-span-2 space-y-6",children:a.map((a,c)=>(0,b.jsx)(y,{item:a,index:c,formatPrice:t,incrementItemQty:a=>x.handleIncrementWithCheck(a,c),decrementItemQty:a=>x.handleDecrementWithCheck(a,c),removeFromCart:n,openNoteIndex:w.openNoteIndex,setOpenNoteIndex:w.setOpenNoteIndex,noteTexts:w.noteTexts,setNoteTexts:w.setNoteTexts,handleNoteChange:w.handleNoteChange,handleSaveNote:w.handleSaveNote,errorMessage:"string"==typeof v.itemErrors[a.id||c]?v.itemErrors[a.id||c]:v.itemErrors[a.id||c]?.case,charmErrors:v.itemErrors[a.id||c]?.charms||{}},c))}),(0,b.jsx)(A,{totalPrice:z,onCheckout:()=>{a.length>0&&u.push("/checkout")}})]})]})})}],55534)}];

//# sourceMappingURL=src_page-components_Cart_index_jsx_8e0f8cae._.js.map