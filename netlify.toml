[build]
  command = "npm run build"
  publish = "out"
  functions = "netlify/functions"

# Serve robots.txt directly (critical for SEO)
[[redirects]]
from = "/robots.txt"
to = "/robots.txt"
status = 200
force = true

# Serve sitemap.xml directly (critical for SEO)
[[redirects]]
from = "/sitemap.xml"
to = "/sitemap.xml"
status = 200
force = true

# SEO-friendly URL redirects (301 = permanent)
[[redirects]]
from = "/CreateYours"
to = "/custom-passport-holder"
status = 301
force = true

[[redirects]]
from = "/CreateYours/"
to = "/custom-passport-holder"
status = 301
force = true

# API routes - redirect to Netlify Functions
[[redirects]]
from = "/api/create-payment-intent"
to = "/.netlify/functions/create-payment-intent"
status = 200

[[redirects]]
from = "/api/inventory"
to = "/.netlify/functions/inventory"
status = 200

[[redirects]]
from = "/api/save-order"
to = "/.netlify/functions/save-order"
status = 200

# Next.js static export generates HTML files for each route,
# so we don't need a SPA fallback redirect
