[build]
  command = "npm run build"
  publish = "build"            # matches Vite output folder
  functions = "netlify/functions"

# Serve robots.txt directly
[[redirects]]
from = "/robots.txt"
to = "/robots.txt"
status = 200
force = true

# Serve sitemap.xml directly
[[redirects]]
from = "/sitemap.xml"
to = "/sitemap.xml"
status = 200
force = true

# API function routes
[[redirects]]
from = "/api/create-payment-intent"
to = "/.netlify/functions/create-payment-intent"
status = 200
force = true

[[redirects]]
from = "/api/inventory"
to = "/.netlify/functions/inventory"
status = 200
force = true

# SPA catch-all (must be last)
[[redirects]]
from = "/*"
to = "/index.html"
status = 200
force = false
