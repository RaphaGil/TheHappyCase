import{j as t,e as J,r as l,L as X}from"./react-vendor-BwkbXqKG.js";import{a as ee}from"./index-CC-rt800.js";import{C as re,S as te,R as ae,E as se,I as le}from"./index-C8SQh6YJ.js";import{g as F,b as ne}from"./shared-utils-DkooxM7j.js";import{f as oe}from"./filterHelpers-BdMq4J7p.js";import"./vendor-BupaDLyo.js";import"./fontawesome-vendor-BEuASCuQ.js";const ce=({charmTypes:a,selectedType:s,onTypeChange:c})=>{const n=o=>({colorful:"colorful",bronze:"bronze",flags:"flags"})[o]||o;return t.jsx("div",{className:"flex justify-center mb-6  px-6 md:mx-0 md:px-0",children:t.jsx("div",{className:"flex gap-2 border-b border-gray-200 flex-nowrap justify-center",children:a.map(({value:o,label:u})=>t.jsxs("button",{onClick:()=>c(o),className:`px-6 py-3 text-xs uppercase tracking-wider transition-all duration-200 font-inter ${s===o?"border-b-2 border-blue-700 text-white bg-blue-600 font-medium":"border-b-2 border-transparent text-white hover:text-white hover:border-blue-300 hover:bg-blue-500 bg-blue-400"}`,children:[t.jsx("span",{className:"md:hidden",children:n(o)}),t.jsx("span",{className:"hidden md:inline",children:u})]},o))})})},ie=({categories:a,selectedCategory:s,onCategoryChange:c})=>!a||a.length===0?null:t.jsx("div",{className:"flex justify-center mb-6",children:t.jsx("div",{className:"flex gap-1 border-b border-gray-200 flex-wrap justify-center",children:a.map(({key:n,label:o})=>t.jsx("button",{onClick:()=>c(n),className:`px-4 py-2 text-[10px] uppercase tracking-wider transition-all duration-200 font-inter ${s===n?"border-b-2 border-blue-700 text-gray-900 font-medium":"border-b-2 border-transparent text-gray-500 hover:text-gray-900 hover:border-gray-300"}`,children:o},n))})}),ue=({charm:a,index:s,onAddToCart:c,charmType:n,cart:o,charmPrice:u})=>{const e={name:a.name,image:a.src,pin:a,category:n,type:"charm"},d=F(e,o),m=d!==null&&d===0;return t.jsx(re,{charm:a,index:s,onAddToCart:c,isSoldOut:m,charmPrice:u})},me=({currentPage:a,totalPages:s,onPageChange:c})=>s<=1?null:t.jsx("div",{className:"flex justify-center items-center gap-1 mb-12",children:Array.from({length:s},(n,o)=>o+1).map(n=>t.jsx("button",{onClick:()=>c(n),className:`px-3 py-1 text-xs transition-all duration-200 font-inter ${a===n?"border-b-2 border-gray-900 text-gray-900 font-medium":"border-b-2 border-transparent text-gray-400 hover:text-gray-700 hover:border-gray-300"}`,"aria-label":`Go to page ${n}`,children:n},n))}),N=(a,s)=>a.price!==void 0&&a.price!==null?a.price:s==="bronze"?1.5:2,O=a=>a||"colorful",de=a=>{if(!a)return"Charm";let s=a;return s=s.replace(/\s*-\s*(Flag|Colorful Charm|Bronze Charm)$/i,""),s=s.replace(/\s+Flag$/i,""),s.trim()},ge=[{value:"colorful",label:"Colorful Charms"},{value:"bronze",label:"Bronze Charms"},{value:"flags",label:"Flags Collection"}],be=[{key:"all",label:"ALL"},{key:"europe",label:"EUROPE"},{key:"americas",label:"AMERICAS"},{key:"africa",label:"AFRICA"},{key:"asia",label:"ASIA"},{key:"special",label:"SPECIAL"}],fe=[{key:"all",label:"ALL"},{key:"travel",label:"TRAVEL"},{key:"animals",label:"ANIMALS"},{key:"love",label:"LOVE"},{key:"nature",label:"NATURE"},{key:"symbols",label:"SYMBOLS"}],he=[{key:"all",label:"ALL"},{key:"travel",label:"TRAVEL"},{key:"disney",label:"DISNEY"},{key:"drinks",label:"DRINKS"},{key:"inspiration",label:"INSPIRATION"},{key:"hearts",label:"HEARTS"},{key:"nature",label:"NATURE"},{key:"camera",label:"CAMERA"}],x={colorful:"colorful",bronze:"bronze",flags:"flags",flag:"flags"},T=20,ve=()=>{const[a,s]=J(),c=a.get("filter"),{addToCart:n,cart:o}=ee(),u=c&&x[c.toLowerCase()]?x[c.toLowerCase()]:"colorful",[e,d]=l.useState(u),[m,E]=l.useState(""),[p,S]=l.useState("all"),[j,A]=l.useState("all"),[k,v]=l.useState("all"),[w,b]=l.useState(1),[L,f]=l.useState(1),[P,h]=l.useState(1),[B,I]=l.useState(!1),[_,R]=l.useState(""),[$,G]=l.useState("error"),z=l.useCallback(()=>{const r=ne();return e==="colorful"?r.pins.colorful||[]:e==="bronze"?r.pins.bronze||[]:e==="flags"?r.pins.flags||[]:[]},[e]),g=l.useMemo(()=>{let r=z();m&&(r=r.filter(C=>C.name.toLowerCase().includes(m.toLowerCase())));const i=e==="flags"?p:e==="bronze"?j:k;return i!=="all"&&(r=oe(r,e,i)),r},[z,m,e,p,j,k]),D=l.useCallback(()=>e==="bronze"?w:e==="colorful"?L:e==="flags"?P:1,[e,w,L,P]),Y=l.useCallback(r=>{e==="bronze"&&b(r),e==="colorful"&&f(r),e==="flags"&&h(r)},[e]),y=D(),M=Math.ceil(g.length/T),U=l.useMemo(()=>{const r=(y-1)*T,i=r+T;return g.slice(r,i)},[g,y]);l.useEffect(()=>{if(c&&x[c.toLowerCase()]){const r=x[c.toLowerCase()];d(r)}},[c]);const W=l.useCallback(r=>{d(r),S("all"),A("all"),v("all"),b(1),f(1),h(1),s({filter:r})},[s]),H=l.useCallback(r=>{const i={id:`charm-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,name:de(r.name),price:N(r,e),totalPrice:N(r,e),image:r.src,pin:r,category:O(e),type:"charm"},C=F(i,o);if(C!==null&&C===0){const q=`Oops! We don't have any more ${r.name||"this charm"} in stock right now, so you can't add more to your basket.`;R(q),G("error"),I(!0);return}console.log("ðŸ“Œ Charms page - Adding charm to cart:",{charmName:r.name,charmSrc:r.src,category:O(e),product:i}),n(i)},[e,o,n]),Q=()=>e==="flags"?be:e==="bronze"?fe:e==="colorful"?he:[],V=()=>e==="flags"?p:e==="bronze"?j:e==="colorful"?k:"all",K=l.useCallback(r=>{e==="flags"?(S(r),h(1)):e==="bronze"?(A(r),b(1)):e==="colorful"&&(v(r),f(1))},[e]),Z=l.useCallback(()=>{E(""),e==="flags"?(S("all"),h(1)):e==="bronze"?(A("all"),b(1)):e==="colorful"&&(v("all"),f(1))},[e]);return t.jsxs("div",{className:"min-h-screen bg-white",children:[t.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[t.jsxs("div",{className:"text-center mb-8 sm:mb-12",children:[t.jsx("h1",{className:"text-title text-gray-900 tracking-title mb-1 md:mb-2",children:"CHARMS"}),t.jsx("div",{className:"w-16 sm:w-20 md:w-24 h-px bg-gray-200 mx-auto mb-3 sm:mb-4"}),t.jsxs("p",{className:"text-sm text-gray-500 max-w-2xl mx-auto font-light px-4 font-inter",children:[t.jsx(X,{to:"/CreateYours",className:"text-gray-900 hover:text-gray-700 underline transition-colors",children:"Create"})," your custom case with charms pre-glued, or buy the case and charms separately and enjoy gluing them yourself."]})]}),t.jsxs("div",{className:"pb-6",children:[t.jsx(ce,{charmTypes:ge,selectedType:e,onTypeChange:W}),t.jsx(ie,{categories:Q(),selectedCategory:V(),onCategoryChange:K})]}),t.jsxs("div",{className:"mb-8 flex items-center justify-between gap-4",children:[t.jsx(te,{searchTerm:m,setSearchTerm:E,placeholder:"Search charms..."}),t.jsx(ae,{count:g.length,currentPage:y,totalPages:M})]}),g.length>0?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4 md:gap-6 mb-12 min-h-[400px] sm:min-h-[600px]",children:U.map((r,i)=>t.jsx(ue,{charm:r,index:i,onAddToCart:H,charmType:e,cart:o,charmPrice:N(r,e)},i))}),t.jsx(me,{currentPage:y,totalPages:M,onPageChange:Y})]}):t.jsx(se,{message:"No charms found",onClearFilters:Z})]}),t.jsx(le,{show:B,onClose:()=>{I(!1),R("")},message:_,type:$})]})};export{ve as default};
