/*! For license information please see main.50052e99.js.LICENSE.txt */
(()=>{var e={4(e,t,n){"use strict";var r=n(853),s=n(43),a=n(950);function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function u(e){if(31===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function d(e){if(l(e)!==e)throw Error(i(188))}function h(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=h(e)))return t;e=e.sibling}return null}var f=Object.assign,m=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),y=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),v=Symbol.for("react.consumer"),w=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),N=Symbol.for("react.lazy");Symbol.for("react.scope");var _=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var T=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var E=Symbol.iterator;function P(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=E&&e[E]||e["@@iterator"])?e:null}var O=Symbol.for("react.client.reference");function D(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===O?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case y:return"Fragment";case b:return"Profiler";case x:return"StrictMode";case S:return"Suspense";case j:return"SuspenseList";case _:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case g:return"Portal";case w:return e.displayName||"Context";case v:return(e._context.displayName||"Context")+".Consumer";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case k:return null!==(t=e.displayName||null)?t:D(e.type)||"Memo";case N:t=e._payload,e=e._init;try{return D(e(t))}catch(n){}}return null}var A=Array.isArray,M=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z={pending:!1,data:null,method:null,action:null},F=[],R=-1;function I(e){return{current:e}}function B(e){0>R||(e.current=F[R],F[R]=null,R--)}function H(e,t){R++,F[R]=e.current,e.current=t}var W,U,Y=I(null),V=I(null),q=I(null),X=I(null);function G(e,t){switch(H(q,t),H(V,e),H(Y,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?yd(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=xd(t=yd(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}B(Y),H(Y,e)}function K(){B(Y),B(V),B(q)}function Q(e){null!==e.memoizedState&&H(X,e);var t=Y.current,n=xd(t,e.type);t!==n&&(H(V,e),H(Y,n))}function $(e){V.current===e&&(B(Y),B(V)),X.current===e&&(B(X),uh._currentValue=z)}function J(e){if(void 0===W)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);W=t&&t[1]||"",U=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+W+e+U}var Z=!1;function ee(e,t){if(!e||Z)return"";Z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(s){var r=s}Reflect.construct(e,[],n)}else{try{n.call()}catch(a){r=a}e.call(n.prototype)}}else{try{throw Error()}catch(i){r=i}(n=e())&&"function"===typeof n.catch&&n.catch(function(){})}}catch(o){if(o&&r&&"string"===typeof o.stack)return[o.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var a=r.DetermineComponentFrameRoot(),i=a[0],o=a[1];if(i&&o){var l=i.split("\n"),c=o.split("\n");for(s=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;s<c.length&&!c[s].includes("DetermineComponentFrameRoot");)s++;if(r===l.length||s===c.length)for(r=l.length-1,s=c.length-1;1<=r&&0<=s&&l[r]!==c[s];)s--;for(;1<=r&&0<=s;r--,s--)if(l[r]!==c[s]){if(1!==r||1!==s)do{if(r--,0>--s||l[r]!==c[s]){var u="\n"+l[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=r&&0<=s);break}}}finally{Z=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?J(n):""}function te(e,t){switch(e.tag){case 26:case 27:case 5:return J(e.type);case 16:return J("Lazy");case 13:return e.child!==t&&null!==t?J("Suspense Fallback"):J("Suspense");case 19:return J("SuspenseList");case 0:case 15:return ee(e.type,!1);case 11:return ee(e.type.render,!1);case 1:return ee(e.type,!0);case 31:return J("Activity");default:return""}}function ne(e){try{var t="",n=null;do{t+=te(e,n),n=e,e=e.return}while(e);return t}catch(r){return"\nError generating stack: "+r.message+"\n"+r.stack}}var re=Object.prototype.hasOwnProperty,se=r.unstable_scheduleCallback,ae=r.unstable_cancelCallback,ie=r.unstable_shouldYield,oe=r.unstable_requestPaint,le=r.unstable_now,ce=r.unstable_getCurrentPriorityLevel,ue=r.unstable_ImmediatePriority,de=r.unstable_UserBlockingPriority,he=r.unstable_NormalPriority,fe=r.unstable_LowPriority,me=r.unstable_IdlePriority,pe=r.log,ge=r.unstable_setDisableYieldValue,ye=null,xe=null;function be(e){if("function"===typeof pe&&ge(e),xe&&"function"===typeof xe.setStrictMode)try{xe.setStrictMode(ye,e)}catch(t){}}var ve=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(we(e)/Ce|0)|0},we=Math.log,Ce=Math.LN2;var Se=256,je=262144,ke=4194304;function Ne(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return 261888&e;case 262144:case 524288:case 1048576:case 2097152:return 3932160&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function _e(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var s=0,a=e.suspendedLanes,i=e.pingedLanes;e=e.warmLanes;var o=134217727&r;return 0!==o?0!==(r=o&~a)?s=Ne(r):0!==(i&=o)?s=Ne(i):n||0!==(n=o&~e)&&(s=Ne(n)):0!==(o=r&~a)?s=Ne(o):0!==i?s=Ne(i):n||0!==(n=r&~e)&&(s=Ne(n)),0===s?0:0!==t&&t!==s&&0===(t&a)&&((a=s&-s)>=(n=t&-t)||32===a&&0!==(4194048&n))?t:s}function Te(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function Ee(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Pe(){var e=ke;return 0===(62914560&(ke<<=1))&&(ke=4194304),e}function Oe(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function De(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ae(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-ve(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|261930&n}function Me(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ve(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}function Le(e,t){var n=t&-t;return 0!==((n=0!==(42&n)?1:ze(n))&(e.suspendedLanes|t))?0:n}function ze(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Fe(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Re(){var e=L.p;return 0!==e?e:void 0===(e=window.event)?32:Nh(e.type)}function Ie(e,t){var n=L.p;try{return L.p=e,t()}finally{L.p=n}}var Be=Math.random().toString(36).slice(2),He="__reactFiber$"+Be,We="__reactProps$"+Be,Ue="__reactContainer$"+Be,Ye="__reactEvents$"+Be,Ve="__reactListeners$"+Be,qe="__reactHandles$"+Be,Xe="__reactResources$"+Be,Ge="__reactMarker$"+Be;function Ke(e){delete e[He],delete e[We],delete e[Ye],delete e[Ve],delete e[qe]}function Qe(e){var t=e[He];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ue]||n[He]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=zd(e);null!==e;){if(n=e[He])return n;e=zd(e)}return t}n=(e=n).parentNode}return null}function $e(e){if(e=e[He]||e[Ue]){var t=e.tag;if(5===t||6===t||13===t||31===t||26===t||27===t||3===t)return e}return null}function Je(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(i(33))}function Ze(e){var t=e[Xe];return t||(t=e[Xe]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function et(e){e[Ge]=!0}var tt=new Set,nt={};function rt(e,t){st(e,t),st(e+"Capture",t)}function st(e,t){for(nt[e]=t,e=0;e<t.length;e++)tt.add(t[e])}var at=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),it={},ot={};function lt(e,t,n){if(s=t,re.call(ot,s)||!re.call(it,s)&&(at.test(s)?ot[s]=!0:(it[s]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var s}function ct(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function ut(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function dt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ht(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ft(e){if(!e._valueTracker){var t=ht(e)?"checked":"value";e._valueTracker=function(e,t,n){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var s=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){n=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e,t,""+e[t])}}function mt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ht(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function pt(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var gt=/[\n"\\]/g;function yt(e){return e.replace(gt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function xt(e,t,n,r,s,a,i,o){e.name="",null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&"boolean"!==typeof i?e.type=i:e.removeAttribute("type"),null!=t?"number"===i?(0===t&&""===e.value||e.value!=t)&&(e.value=""+dt(t)):e.value!==""+dt(t)&&(e.value=""+dt(t)):"submit"!==i&&"reset"!==i||e.removeAttribute("value"),null!=t?vt(e,i,dt(t)):null!=n?vt(e,i,dt(n)):null!=r&&e.removeAttribute("value"),null==s&&null!=a&&(e.defaultChecked=!!a),null!=s&&(e.checked=s&&"function"!==typeof s&&"symbol"!==typeof s),null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.name=""+dt(o):e.removeAttribute("name")}function bt(e,t,n,r,s,a,i,o){if(null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a&&(e.type=a),null!=t||null!=n){if(!("submit"!==a&&"reset"!==a||void 0!==t&&null!==t))return void ft(e);n=null!=n?""+dt(n):"",t=null!=t?""+dt(t):n,o||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:s)&&"symbol"!==typeof r&&!!r,e.checked=o?e.checked:!!r,e.defaultChecked=!!r,null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&"boolean"!==typeof i&&(e.name=i),ft(e)}function vt(e,t,n){"number"===t&&pt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function wt(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+dt(n),t=null,s=0;s<e.length;s++){if(e[s].value===n)return e[s].selected=!0,void(r&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function Ct(e,t,n){null==t||((t=""+dt(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+dt(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function St(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(i(92));if(A(r)){if(1<r.length)throw Error(i(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=dt(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r),ft(e)}function jt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var kt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Nt(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||kt.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function _t(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(i(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var s in t)r=t[s],t.hasOwnProperty(s)&&n[s]!==r&&Nt(e,s,r)}else for(var a in t)t.hasOwnProperty(a)&&Nt(e,a,t[a])}function Tt(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Et=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Pt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ot(e){return Pt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Dt(){}var At=null;function Mt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Lt=null,zt=null;function Ft(e){var t=$e(e);if(t&&(e=t.stateNode)){var n=e[We]||null;e:switch(e=t.stateNode,t.type){case"input":if(xt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+yt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=r[We]||null;if(!s)throw Error(i(90));xt(r,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&mt(r)}break e;case"textarea":Ct(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&wt(e,!!n.multiple,t,!1)}}}var Rt=!1;function It(e,t,n){if(Rt)return e(t,n);Rt=!0;try{return e(t)}finally{if(Rt=!1,(null!==Lt||null!==zt)&&(Zc(),Lt&&(t=Lt,e=zt,zt=Lt=null,Ft(t),e)))for(t=0;t<e.length;t++)Ft(e[t])}}function Bt(e,t){var n=e.stateNode;if(null===n)return null;var r=n[We]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var Ht=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Wt=!1;if(Ht)try{var Ut={};Object.defineProperty(Ut,"passive",{get:function(){Wt=!0}}),window.addEventListener("test",Ut,Ut),window.removeEventListener("test",Ut,Ut)}catch($h){Wt=!1}var Yt=null,Vt=null,qt=null;function Xt(){if(qt)return qt;var e,t,n=Vt,r=n.length,s="value"in Yt?Yt.value:Yt.textContent,a=s.length;for(e=0;e<r&&n[e]===s[e];e++);var i=r-e;for(t=1;t<=i&&n[r-t]===s[a-t];t++);return qt=s.slice(e,1<t?1-t:void 0)}function Gt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Kt(){return!0}function Qt(){return!1}function $t(e){function t(t,n,r,s,a){for(var i in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=s,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(s):s[i]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?Kt:Qt,this.isPropagationStopped=Qt,this}return f(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Kt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Kt)},persist:function(){},isPersistent:Kt}),t}var Jt,Zt,en,tn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nn=$t(tn),rn=f({},tn,{view:0,detail:0}),sn=$t(rn),an=f({},rn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==en&&(en&&"mousemove"===e.type?(Jt=e.screenX-en.screenX,Zt=e.screenY-en.screenY):Zt=Jt=0,en=e),Jt)},movementY:function(e){return"movementY"in e?e.movementY:Zt}}),on=$t(an),ln=$t(f({},an,{dataTransfer:0})),cn=$t(f({},rn,{relatedTarget:0})),un=$t(f({},tn,{animationName:0,elapsedTime:0,pseudoElement:0})),dn=$t(f({},tn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),hn=$t(f({},tn,{data:0})),fn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=pn[e])&&!!t[e]}function yn(){return gn}var xn=$t(f({},rn,{key:function(e){if(e.key){var t=fn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Gt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?mn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yn,charCode:function(e){return"keypress"===e.type?Gt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Gt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),bn=$t(f({},an,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),vn=$t(f({},rn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yn})),wn=$t(f({},tn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Cn=$t(f({},an,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Sn=$t(f({},tn,{newState:0,oldState:0})),jn=[9,13,27,32],kn=Ht&&"CompositionEvent"in window,Nn=null;Ht&&"documentMode"in document&&(Nn=document.documentMode);var _n=Ht&&"TextEvent"in window&&!Nn,Tn=Ht&&(!kn||Nn&&8<Nn&&11>=Nn),En=String.fromCharCode(32),Pn=!1;function On(e,t){switch(e){case"keyup":return-1!==jn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Dn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var An=!1;var Mn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ln(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Mn[e.type]:"textarea"===t}function zn(e,t,n,r){Lt?zt?zt.push(r):zt=[r]:Lt=r,0<(t=rd(t,"onChange")).length&&(n=new nn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Fn=null,Rn=null;function In(e){Ku(e,0)}function Bn(e){if(mt(Je(e)))return e}function Hn(e,t){if("change"===e)return t}var Wn=!1;if(Ht){var Un;if(Ht){var Yn="oninput"in document;if(!Yn){var Vn=document.createElement("div");Vn.setAttribute("oninput","return;"),Yn="function"===typeof Vn.oninput}Un=Yn}else Un=!1;Wn=Un&&(!document.documentMode||9<document.documentMode)}function qn(){Fn&&(Fn.detachEvent("onpropertychange",Xn),Rn=Fn=null)}function Xn(e){if("value"===e.propertyName&&Bn(Rn)){var t=[];zn(t,Rn,e,Mt(e)),It(In,t)}}function Gn(e,t,n){"focusin"===e?(qn(),Rn=n,(Fn=t).attachEvent("onpropertychange",Xn)):"focusout"===e&&qn()}function Kn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Bn(Rn)}function Qn(e,t){if("click"===e)return Bn(t)}function $n(e,t){if("input"===e||"change"===e)return Bn(t)}var Jn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Zn(e,t){if(Jn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!re.call(t,s)||!Jn(e[s],t[s]))return!1}return!0}function er(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function tr(e,t){var n,r=er(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=er(r)}}function nr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?nr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function rr(e){for(var t=pt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=pt((e=t.contentWindow).document)}return t}function sr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var ar=Ht&&"documentMode"in document&&11>=document.documentMode,ir=null,or=null,lr=null,cr=!1;function ur(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;cr||null==ir||ir!==pt(r)||("selectionStart"in(r=ir)&&sr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},lr&&Zn(lr,r)||(lr=r,0<(r=rd(or,"onSelect")).length&&(t=new nn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ir)))}function dr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var hr={animationend:dr("Animation","AnimationEnd"),animationiteration:dr("Animation","AnimationIteration"),animationstart:dr("Animation","AnimationStart"),transitionrun:dr("Transition","TransitionRun"),transitionstart:dr("Transition","TransitionStart"),transitioncancel:dr("Transition","TransitionCancel"),transitionend:dr("Transition","TransitionEnd")},fr={},mr={};function pr(e){if(fr[e])return fr[e];if(!hr[e])return e;var t,n=hr[e];for(t in n)if(n.hasOwnProperty(t)&&t in mr)return fr[e]=n[t];return e}Ht&&(mr=document.createElement("div").style,"AnimationEvent"in window||(delete hr.animationend.animation,delete hr.animationiteration.animation,delete hr.animationstart.animation),"TransitionEvent"in window||delete hr.transitionend.transition);var gr=pr("animationend"),yr=pr("animationiteration"),xr=pr("animationstart"),br=pr("transitionrun"),vr=pr("transitionstart"),wr=pr("transitioncancel"),Cr=pr("transitionend"),Sr=new Map,jr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function kr(e,t){Sr.set(e,t),rt(t,[e])}jr.push("scrollEnd");var Nr="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},_r=[],Tr=0,Er=0;function Pr(){for(var e=Tr,t=Er=Tr=0;t<e;){var n=_r[t];_r[t++]=null;var r=_r[t];_r[t++]=null;var s=_r[t];_r[t++]=null;var a=_r[t];if(_r[t++]=null,null!==r&&null!==s){var i=r.pending;null===i?s.next=s:(s.next=i.next,i.next=s),r.pending=s}0!==a&&Mr(n,s,a)}}function Or(e,t,n,r){_r[Tr++]=e,_r[Tr++]=t,_r[Tr++]=n,_r[Tr++]=r,Er|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Dr(e,t,n,r){return Or(e,t,n,r),Lr(e)}function Ar(e,t){return Or(e,null,null,t),Lr(e)}function Mr(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var s=!1,a=e.return;null!==a;)a.childLanes|=n,null!==(r=a.alternate)&&(r.childLanes|=n),22===a.tag&&(null===(e=a.stateNode)||1&e._visibility||(s=!0)),e=a,a=a.return;return 3===e.tag?(a=e.stateNode,s&&null!==t&&(s=31-ve(n),null===(r=(e=a.hiddenUpdates)[s])?e[s]=[t]:r.push(t),t.lane=536870912|n),a):null}function Lr(e){if(50<Yc)throw Yc=0,Vc=null,Error(i(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var zr={};function Fr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rr(e,t,n,r){return new Fr(e,t,n,r)}function Ir(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Br(e,t){var n=e.alternate;return null===n?((n=Rr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Hr(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Wr(e,t,n,r,s,a){var o=0;if(r=e,"function"===typeof e)Ir(e)&&(o=1);else if("string"===typeof e)o=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,Y.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case _:return(e=Rr(31,n,t,s)).elementType=_,e.lanes=a,e;case y:return Ur(n.children,s,a,t);case x:o=8,s|=24;break;case b:return(e=Rr(12,n,t,2|s)).elementType=b,e.lanes=a,e;case S:return(e=Rr(13,n,t,s)).elementType=S,e.lanes=a,e;case j:return(e=Rr(19,n,t,s)).elementType=j,e.lanes=a,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case w:o=10;break e;case v:o=9;break e;case C:o=11;break e;case k:o=14;break e;case N:o=16,r=null;break e}o=29,n=Error(i(130,null===e?"null":typeof e,"")),r=null}return(t=Rr(o,n,t,s)).elementType=e,t.type=r,t.lanes=a,t}function Ur(e,t,n,r){return(e=Rr(7,e,r,t)).lanes=n,e}function Yr(e,t,n){return(e=Rr(6,e,null,t)).lanes=n,e}function Vr(e){var t=Rr(18,null,null,0);return t.stateNode=e,t}function qr(e,t,n){return(t=Rr(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Xr=new WeakMap;function Gr(e,t){if("object"===typeof e&&null!==e){var n=Xr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:ne(t)},Xr.set(e,t),t)}return{value:e,source:t,stack:ne(t)}}var Kr=[],Qr=0,$r=null,Jr=0,Zr=[],es=0,ts=null,ns=1,rs="";function ss(e,t){Kr[Qr++]=Jr,Kr[Qr++]=$r,$r=e,Jr=t}function as(e,t,n){Zr[es++]=ns,Zr[es++]=rs,Zr[es++]=ts,ts=e;var r=ns;e=rs;var s=32-ve(r)-1;r&=~(1<<s),n+=1;var a=32-ve(t)+s;if(30<a){var i=s-s%5;a=(r&(1<<i)-1).toString(32),r>>=i,s-=i,ns=1<<32-ve(t)+s|n<<s|r,rs=a+e}else ns=1<<a|n<<s|r,rs=e}function is(e){null!==e.return&&(ss(e,1),as(e,1,0))}function os(e){for(;e===$r;)$r=Kr[--Qr],Kr[Qr]=null,Jr=Kr[--Qr],Kr[Qr]=null;for(;e===ts;)ts=Zr[--es],Zr[es]=null,rs=Zr[--es],Zr[es]=null,ns=Zr[--es],Zr[es]=null}function ls(e,t){Zr[es++]=ns,Zr[es++]=rs,Zr[es++]=ts,ns=t.id,rs=t.overflow,ts=e}var cs=null,us=null,ds=!1,hs=null,fs=!1,ms=Error(i(519));function ps(e){throw ws(Gr(Error(i(418,1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"text":"HTML","")),e)),ms}function gs(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[He]=e,t[We]=r,n){case"dialog":Qu("cancel",t),Qu("close",t);break;case"iframe":case"object":case"embed":Qu("load",t);break;case"video":case"audio":for(n=0;n<Xu.length;n++)Qu(Xu[n],t);break;case"source":Qu("error",t);break;case"img":case"image":case"link":Qu("error",t),Qu("load",t);break;case"details":Qu("toggle",t);break;case"input":Qu("invalid",t),bt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case"select":Qu("invalid",t);break;case"textarea":Qu("invalid",t),St(t,r.value,r.defaultValue,r.children)}"string"!==typeof(n=r.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||cd(t.textContent,n)?(null!=r.popover&&(Qu("beforetoggle",t),Qu("toggle",t)),null!=r.onScroll&&Qu("scroll",t),null!=r.onScrollEnd&&Qu("scrollend",t),null!=r.onClick&&(t.onclick=Dt),t=!0):t=!1,t||ps(e,!0)}function ys(e){for(cs=e.return;cs;)switch(cs.tag){case 5:case 31:case 13:return void(fs=!1);case 27:case 3:return void(fs=!0);default:cs=cs.return}}function xs(e){if(e!==cs)return!1;if(!ds)return ys(e),ds=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||bd(e.type,e.memoizedProps)),t=!t),t&&us&&ps(e),ys(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));us=Ld(e)}else if(31===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));us=Ld(e)}else 27===n?(n=us,Nd(e.type)?(e=Md,Md=null,us=e):us=n):us=cs?Ad(e.stateNode.nextSibling):null;return!0}function bs(){us=cs=null,ds=!1}function vs(){var e=hs;return null!==e&&(null===Pc?Pc=e:Pc.push.apply(Pc,e),hs=null),e}function ws(e){null===hs?hs=[e]:hs.push(e)}var Cs=I(null),Ss=null,js=null;function ks(e,t,n){H(Cs,t._currentValue),t._currentValue=n}function Ns(e){e._currentValue=Cs.current,B(Cs)}function _s(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ts(e,t,n,r){var s=e.child;for(null!==s&&(s.return=e);null!==s;){var a=s.dependencies;if(null!==a){var o=s.child;a=a.firstContext;e:for(;null!==a;){var l=a;a=s;for(var c=0;c<t.length;c++)if(l.context===t[c]){a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),_s(a.return,n,e),r||(o=null);break e}a=l.next}}else if(18===s.tag){if(null===(o=s.return))throw Error(i(341));o.lanes|=n,null!==(a=o.alternate)&&(a.lanes|=n),_s(o,n,e),o=null}else o=s.child;if(null!==o)o.return=s;else for(o=s;null!==o;){if(o===e){o=null;break}if(null!==(s=o.sibling)){s.return=o.return,o=s;break}o=o.return}s=o}}function Es(e,t,n,r){e=null;for(var s=t,a=!1;null!==s;){if(!a)if(0!==(524288&s.flags))a=!0;else if(0!==(262144&s.flags))break;if(10===s.tag){var o=s.alternate;if(null===o)throw Error(i(387));if(null!==(o=o.memoizedProps)){var l=s.type;Jn(s.pendingProps.value,o.value)||(null!==e?e.push(l):e=[l])}}else if(s===X.current){if(null===(o=s.alternate))throw Error(i(387));o.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(null!==e?e.push(uh):e=[uh])}s=s.return}null!==e&&Ts(t,e,n,r),t.flags|=262144}function Ps(e){for(e=e.firstContext;null!==e;){if(!Jn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Os(e){Ss=e,js=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Ds(e){return Ms(Ss,e)}function As(e,t){return null===Ss&&Os(e),Ms(e,t)}function Ms(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===js){if(null===e)throw Error(i(308));js=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else js=js.next=t;return n}var Ls="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},zs=r.unstable_scheduleCallback,Fs=r.unstable_NormalPriority,Rs={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Is(){return{controller:new Ls,data:new Map,refCount:0}}function Bs(e){e.refCount--,0===e.refCount&&zs(Fs,function(){e.controller.abort()})}var Hs=null,Ws=0,Us=0,Ys=null;function Vs(){if(0===--Ws&&null!==Hs){null!==Ys&&(Ys.status="fulfilled");var e=Hs;Hs=null,Us=0,Ys=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var qs=M.S;M.S=function(e,t){Ac=le(),"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Hs){var n=Hs=[];Ws=0,Us=Wu(),Ys={status:"pending",value:void 0,then:function(e){n.push(e)}}}Ws++,t.then(Vs,Vs)}(0,t),null!==qs&&qs(e,t)};var Xs=I(null);function Gs(){var e=Xs.current;return null!==e?e:mc.pooledCache}function Ks(e,t){H(Xs,null===t?Xs.current:t.pool)}function Qs(){var e=Gs();return null===e?null:{parent:Rs._currentValue,pool:e}}var $s=Error(i(460)),Js=Error(i(474)),Zs=Error(i(542)),ea={then:function(){}};function ta(e){return"fulfilled"===(e=e.status)||"rejected"===e}function na(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Dt,Dt),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw ia(e=t.reason),e;default:if("string"===typeof t.status)t.then(Dt,Dt);else{if(null!==(e=mc)&&100<e.shellSuspendCounter)throw Error(i(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw ia(e=t.reason),e}throw sa=t,$s}}function ra(e){try{return(0,e._init)(e._payload)}catch(t){if(null!==t&&"object"===typeof t&&"function"===typeof t.then)throw sa=t,$s;throw t}}var sa=null;function aa(){if(null===sa)throw Error(i(459));var e=sa;return sa=null,e}function ia(e){if(e===$s||e===Zs)throw Error(i(483))}var oa=null,la=0;function ca(e){var t=la;return la+=1,null===oa&&(oa=[]),na(oa,e,t)}function ua(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function da(e,t){if(t.$$typeof===m)throw Error(i(525));throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ha(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function s(e,t){return(e=Br(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Yr(n,e.mode,r)).return=e,t):((t=s(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===y?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===N&&ra(a)===t.type)?(ua(t=s(t,n.props),n),t.return=e,t):(ua(t=Wr(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=qr(n,e.mode,r)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function d(e,t,n,r,a){return null===t||7!==t.tag?((t=Ur(n,e.mode,r,a)).return=e,t):((t=s(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Yr(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case p:return ua(n=Wr(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case g:return(t=qr(t,e.mode,n)).return=e,t;case N:return h(e,t=ra(t),n)}if(A(t)||P(t))return(t=Ur(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return h(e,ca(t),n);if(t.$$typeof===w)return h(e,As(e,t),n);da(e,t)}return null}function f(e,t,n,r){var s=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==s?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case p:return n.key===s?c(e,t,n,r):null;case g:return n.key===s?u(e,t,n,r):null;case N:return f(e,t,n=ra(n),r)}if(A(n)||P(n))return null!==s?null:d(e,t,n,r,null);if("function"===typeof n.then)return f(e,t,ca(n),r);if(n.$$typeof===w)return f(e,t,As(e,n),r);da(e,n)}return null}function m(e,t,n,r,s){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return l(t,e=e.get(n)||null,""+r,s);if("object"===typeof r&&null!==r){switch(r.$$typeof){case p:return c(t,e=e.get(null===r.key?n:r.key)||null,r,s);case g:return u(t,e=e.get(null===r.key?n:r.key)||null,r,s);case N:return m(e,t,n,r=ra(r),s)}if(A(r)||P(r))return d(t,e=e.get(n)||null,r,s,null);if("function"===typeof r.then)return m(e,t,n,ca(r),s);if(r.$$typeof===w)return m(e,t,n,As(t,r),s);da(t,r)}return null}function x(l,c,u,d){if("object"===typeof u&&null!==u&&u.type===y&&null===u.key&&(u=u.props.children),"object"===typeof u&&null!==u){switch(u.$$typeof){case p:e:{for(var b=u.key;null!==c;){if(c.key===b){if((b=u.type)===y){if(7===c.tag){n(l,c.sibling),(d=s(c,u.props.children)).return=l,l=d;break e}}else if(c.elementType===b||"object"===typeof b&&null!==b&&b.$$typeof===N&&ra(b)===c.type){n(l,c.sibling),ua(d=s(c,u.props),u),d.return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}u.type===y?((d=Ur(u.props.children,l.mode,d,u.key)).return=l,l=d):(ua(d=Wr(u.type,u.key,u.props,null,l.mode,d),u),d.return=l,l=d)}return o(l);case g:e:{for(b=u.key;null!==c;){if(c.key===b){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(d=s(c,u.children||[])).return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}(d=qr(u,l.mode,d)).return=l,l=d}return o(l);case N:return x(l,c,u=ra(u),d)}if(A(u))return function(s,i,o,l){for(var c=null,u=null,d=i,p=i=0,g=null;null!==d&&p<o.length;p++){d.index>p?(g=d,d=null):g=d.sibling;var y=f(s,d,o[p],l);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(s,d),i=a(y,i,p),null===u?c=y:u.sibling=y,u=y,d=g}if(p===o.length)return n(s,d),ds&&ss(s,p),c;if(null===d){for(;p<o.length;p++)null!==(d=h(s,o[p],l))&&(i=a(d,i,p),null===u?c=d:u.sibling=d,u=d);return ds&&ss(s,p),c}for(d=r(d);p<o.length;p++)null!==(g=m(d,s,p,o[p],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?p:g.key),i=a(g,i,p),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(s,e)}),ds&&ss(s,p),c}(l,c,u,d);if(P(u)){if("function"!==typeof(b=P(u)))throw Error(i(150));return function(s,o,l,c){if(null==l)throw Error(i(151));for(var u=null,d=null,p=o,g=o=0,y=null,x=l.next();null!==p&&!x.done;g++,x=l.next()){p.index>g?(y=p,p=null):y=p.sibling;var b=f(s,p,x.value,c);if(null===b){null===p&&(p=y);break}e&&p&&null===b.alternate&&t(s,p),o=a(b,o,g),null===d?u=b:d.sibling=b,d=b,p=y}if(x.done)return n(s,p),ds&&ss(s,g),u;if(null===p){for(;!x.done;g++,x=l.next())null!==(x=h(s,x.value,c))&&(o=a(x,o,g),null===d?u=x:d.sibling=x,d=x);return ds&&ss(s,g),u}for(p=r(p);!x.done;g++,x=l.next())null!==(x=m(p,s,g,x.value,c))&&(e&&null!==x.alternate&&p.delete(null===x.key?g:x.key),o=a(x,o,g),null===d?u=x:d.sibling=x,d=x);return e&&p.forEach(function(e){return t(s,e)}),ds&&ss(s,g),u}(l,c,u=b.call(u),d)}if("function"===typeof u.then)return x(l,c,ca(u),d);if(u.$$typeof===w)return x(l,c,As(l,u),d);da(l,u)}return"string"===typeof u&&""!==u||"number"===typeof u||"bigint"===typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(d=s(c,u)).return=l,l=d):(n(l,c),(d=Yr(u,l.mode,d)).return=l,l=d),o(l)):n(l,c)}return function(e,t,n,r){try{la=0;var s=x(e,t,n,r);return oa=null,s}catch(i){if(i===$s||i===Zs)throw i;var a=Rr(29,i,null,e.mode);return a.lanes=r,a.return=e,a}}}var fa=ha(!0),ma=ha(!1),pa=!1;function ga(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ya(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function xa(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ba(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&fc)){var s=r.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),r.pending=t,t=Lr(e),Mr(e,null,n),t}return Or(e,r,t,n),Lr(e)}function va(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Me(e,n)}}function wa(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var s=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var i={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===a?s=a=i:a=a.next=i,n=n.next}while(null!==n);null===a?s=a=t:a=a.next=t}else s=a=t;return n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Ca=!1;function Sa(){if(Ca){if(null!==Ys)throw Ys}}function ja(e,t,n,r){Ca=!1;var s=e.updateQueue;pa=!1;var a=s.firstBaseUpdate,i=s.lastBaseUpdate,o=s.shared.pending;if(null!==o){s.shared.pending=null;var l=o,c=l.next;l.next=null,null===i?a=c:i.next=c,i=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==i&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==a){var d=s.baseState;for(i=0,u=c=l=null,o=a;;){var h=-536870913&o.lane,m=h!==o.lane;if(m?(gc&h)===h:(r&h)===h){0!==h&&h===Us&&(Ca=!0),null!==u&&(u=u.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var p=e,g=o;h=t;var y=n;switch(g.tag){case 1:if("function"===typeof(p=g.payload)){d=p.call(y,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=g.payload)?p.call(y,d,h):p)||void 0===h)break e;d=f({},d,h);break e;case 2:pa=!0}}null!==(h=o.callback)&&(e.flags|=64,m&&(e.flags|=8192),null===(m=s.callbacks)?s.callbacks=[h]:m.push(h))}else m={lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=m,l=d):u=u.next=m,i|=h;if(null===(o=o.next)){if(null===(o=s.shared.pending))break;o=(m=o).next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}null===u&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,null===a&&(s.shared.lanes=0),jc|=i,e.lanes=i,e.memoizedState=d}}function ka(e,t){if("function"!==typeof e)throw Error(i(191,e));e.call(t)}function Na(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)ka(n[e],t)}var _a=I(null),Ta=I(0);function Ea(e,t){H(Ta,e=Cc),H(_a,t),Cc=e|t.baseLanes}function Pa(){H(Ta,Cc),H(_a,_a.current)}function Oa(){Cc=Ta.current,B(_a),B(Ta)}var Da=I(null),Aa=null;function Ma(e){var t=e.alternate;H(Ia,1&Ia.current),H(Da,e),null===Aa&&(null===t||null!==_a.current||null!==t.memoizedState)&&(Aa=e)}function La(e){H(Ia,Ia.current),H(Da,e),null===Aa&&(Aa=e)}function za(e){22===e.tag?(H(Ia,Ia.current),H(Da,e),null===Aa&&(Aa=e)):Fa()}function Fa(){H(Ia,Ia.current),H(Da,Da.current)}function Ra(e){B(Da),Aa===e&&(Aa=null),B(Ia)}var Ia=I(0);function Ba(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||Od(n)||Dd(n)))return t}else if(19!==t.tag||"forwards"!==t.memoizedProps.revealOrder&&"backwards"!==t.memoizedProps.revealOrder&&"unstable_legacy-backwards"!==t.memoizedProps.revealOrder&&"together"!==t.memoizedProps.revealOrder){if(null!==t.child){t.child.return=t,t=t.child;continue}}else if(0!==(128&t.flags))return t;if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ha=0,Wa=null,Ua=null,Ya=null,Va=!1,qa=!1,Xa=!1,Ga=0,Ka=0,Qa=null,$a=0;function Ja(){throw Error(i(321))}function Za(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Jn(e[n],t[n]))return!1;return!0}function ei(e,t,n,r,s,a){return Ha=a,Wa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,M.H=null===e||null===e.memoizedState?go:yo,Xa=!1,a=n(r,s),Xa=!1,qa&&(a=ni(t,n,r,s)),ti(e),a}function ti(e){M.H=po;var t=null!==Ua&&null!==Ua.next;if(Ha=0,Ya=Ua=Wa=null,Va=!1,Ka=0,Qa=null,t)throw Error(i(300));null===e||Ao||null!==(e=e.dependencies)&&Ps(e)&&(Ao=!0)}function ni(e,t,n,r){Wa=e;var s=0;do{if(qa&&(Qa=null),Ka=0,qa=!1,25<=s)throw Error(i(301));if(s+=1,Ya=Ua=null,null!=e.updateQueue){var a=e.updateQueue;a.lastEffect=null,a.events=null,a.stores=null,null!=a.memoCache&&(a.memoCache.index=0)}M.H=xo,a=t(n,r)}while(qa);return a}function ri(){var e=M.H,t=e.useState()[0];return t="function"===typeof t.then?ci(t):t,e=e.useState()[0],(null!==Ua?Ua.memoizedState:null)!==e&&(Wa.flags|=1024),t}function si(){var e=0!==Ga;return Ga=0,e}function ai(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function ii(e){if(Va){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Va=!1}Ha=0,Ya=Ua=Wa=null,qa=!1,Ka=Ga=0,Qa=null}function oi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ya?Wa.memoizedState=Ya=e:Ya=Ya.next=e,Ya}function li(){if(null===Ua){var e=Wa.alternate;e=null!==e?e.memoizedState:null}else e=Ua.next;var t=null===Ya?Wa.memoizedState:Ya.next;if(null!==t)Ya=t,Ua=e;else{if(null===e){if(null===Wa.alternate)throw Error(i(467));throw Error(i(310))}e={memoizedState:(Ua=e).memoizedState,baseState:Ua.baseState,baseQueue:Ua.baseQueue,queue:Ua.queue,next:null},null===Ya?Wa.memoizedState=Ya=e:Ya=Ya.next=e}return Ya}function ci(e){var t=Ka;return Ka+=1,null===Qa&&(Qa=[]),e=na(Qa,e,t),t=Wa,null===(null===Ya?t.memoizedState:Ya.next)&&(t=t.alternate,M.H=null===t||null===t.memoizedState?go:yo),e}function ui(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return ci(e);if(e.$$typeof===w)return Ds(e)}throw Error(i(438,String(e)))}function di(e){var t=null,n=Wa.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=Wa.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},Wa.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=T;return t.index++,n}function hi(e,t){return"function"===typeof t?t(e):t}function fi(e){return mi(li(),Ua,e)}function mi(e,t,n){var r=e.queue;if(null===r)throw Error(i(311));r.lastRenderedReducer=n;var s=e.baseQueue,a=r.pending;if(null!==a){if(null!==s){var o=s.next;s.next=a.next,a.next=o}t.baseQueue=s=a,r.pending=null}if(a=e.baseState,null===s)e.memoizedState=a;else{var l=o=null,c=null,u=t=s.next,d=!1;do{var h=-536870913&u.lane;if(h!==u.lane?(gc&h)===h:(Ha&h)===h){var f=u.revertLane;if(0===f)null!==c&&(c=c.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),h===Us&&(d=!0);else{if((Ha&f)===f){u=u.next,f===Us&&(d=!0);continue}h={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=h,o=a):c=c.next=h,Wa.lanes|=f,jc|=f}h=u.action,Xa&&n(a,h),a=u.hasEagerState?u.eagerState:n(a,h)}else f={lane:h,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=f,o=a):c=c.next=f,Wa.lanes|=h,jc|=h;u=u.next}while(null!==u&&u!==t);if(null===c?o=a:c.next=l,!Jn(a,e.memoizedState)&&(Ao=!0,d&&null!==(n=Ys)))throw n;e.memoizedState=a,e.baseState=o,e.baseQueue=c,r.lastRenderedState=a}return null===s&&(r.lanes=0),[e.memoizedState,r.dispatch]}function pi(e){var t=li(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,a=t.memoizedState;if(null!==s){n.pending=null;var o=s=s.next;do{a=e(a,o.action),o=o.next}while(o!==s);Jn(a,t.memoizedState)||(Ao=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function gi(e,t,n){var r=Wa,s=li(),a=ds;if(a){if(void 0===n)throw Error(i(407));n=n()}else n=t();var o=!Jn((Ua||s).memoizedState,n);if(o&&(s.memoizedState=n,Ao=!0),s=s.queue,Hi(bi.bind(null,r,s,e),[e]),s.getSnapshot!==t||o||null!==Ya&&1&Ya.memoizedState.tag){if(r.flags|=2048,zi(9,{destroy:void 0},xi.bind(null,r,s,n,t),null),null===mc)throw Error(i(349));a||0!==(127&Ha)||yi(r,t,n)}return n}function yi(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Wa.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},Wa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function xi(e,t,n,r){t.value=n,t.getSnapshot=r,vi(t)&&wi(e)}function bi(e,t,n){return n(function(){vi(t)&&wi(e)})}function vi(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Jn(e,n)}catch(r){return!0}}function wi(e){var t=Ar(e,2);null!==t&&Gc(t,e,2)}function Ci(e){var t=oi();if("function"===typeof e){var n=e;if(e=n(),Xa){be(!0);try{n()}finally{be(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hi,lastRenderedState:e},t}function Si(e,t,n,r){return e.baseState=n,mi(e,Ua,"function"===typeof r?r:hi)}function ji(e,t,n,r,s){if(ho(e))throw Error(i(485));if(null!==(e=t.action)){var a={payload:s,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){a.listeners.push(e)}};null!==M.T?n(!0):a.isTransition=!1,r(a),null===(n=t.pending)?(a.next=t.pending=a,ki(t,a)):(a.next=n.next,t.pending=n.next=a)}}function ki(e,t){var n=t.action,r=t.payload,s=e.state;if(t.isTransition){var a=M.T,i={};M.T=i;try{var o=n(s,r),l=M.S;null!==l&&l(i,o),Ni(e,t,o)}catch(c){Ti(e,t,c)}finally{null!==a&&null!==i.types&&(a.types=i.types),M.T=a}}else try{Ni(e,t,a=n(s,r))}catch(u){Ti(e,t,u)}}function Ni(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then(function(n){_i(e,t,n)},function(n){return Ti(e,t,n)}):_i(e,t,n)}function _i(e,t,n){t.status="fulfilled",t.value=n,Ei(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,ki(e,n)))}function Ti(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,Ei(t),t=t.next}while(t!==r)}e.action=null}function Ei(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Pi(e,t){return t}function Oi(e,t){if(ds){var n=mc.formState;if(null!==n){e:{var r=Wa;if(ds){if(us){t:{for(var s=us,a=fs;8!==s.nodeType;){if(!a){s=null;break t}if(null===(s=Ad(s.nextSibling))){s=null;break t}}s="F!"===(a=s.data)||"F"===a?s:null}if(s){us=Ad(s.nextSibling),r="F!"===s.data;break e}}ps(r)}r=!1}r&&(t=n[0])}}return(n=oi()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pi,lastRenderedState:t},n.queue=r,n=lo.bind(null,Wa,r),r.dispatch=n,r=Ci(!1),a=uo.bind(null,Wa,!1,r.queue),s={state:t,dispatch:null,action:e,pending:null},(r=oi()).queue=s,n=ji.bind(null,Wa,s,a,n),s.dispatch=n,r.memoizedState=e,[t,n,!1]}function Di(e){return Ai(li(),Ua,e)}function Ai(e,t,n){if(t=mi(e,t,Pi)[0],e=fi(hi)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var r=ci(t)}catch(i){if(i===$s)throw Zs;throw i}else r=t;var s=(t=li()).queue,a=s.dispatch;return n!==t.memoizedState&&(Wa.flags|=2048,zi(9,{destroy:void 0},Mi.bind(null,s,n),null)),[r,a,e]}function Mi(e,t){e.action=t}function Li(e){var t=li(),n=Ua;if(null!==n)return Ai(t,n,e);li(),t=t.memoizedState;var r=(n=li()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function zi(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=Wa.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},Wa.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Fi(){return li().memoizedState}function Ri(e,t,n,r){var s=oi();Wa.flags|=e,s.memoizedState=zi(1|t,{destroy:void 0},n,void 0===r?null:r)}function Ii(e,t,n,r){var s=li();r=void 0===r?null:r;var a=s.memoizedState.inst;null!==Ua&&null!==r&&Za(r,Ua.memoizedState.deps)?s.memoizedState=zi(t,a,n,r):(Wa.flags|=e,s.memoizedState=zi(1|t,a,n,r))}function Bi(e,t){Ri(8390656,8,e,t)}function Hi(e,t){Ii(2048,8,e,t)}function Wi(e){var t=li().memoizedState;return function(e){Wa.flags|=4;var t=Wa.updateQueue;if(null===t)t={lastEffect:null,events:null,stores:null,memoCache:null},Wa.updateQueue=t,t.events=[e];else{var n=t.events;null===n?t.events=[e]:n.push(e)}}({ref:t,nextImpl:e}),function(){if(0!==(2&fc))throw Error(i(440));return t.impl.apply(void 0,arguments)}}function Ui(e,t){return Ii(4,2,e,t)}function Yi(e,t){return Ii(4,4,e,t)}function Vi(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function qi(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,Ii(4,4,Vi.bind(null,t,e),n)}function Xi(){}function Gi(e,t){var n=li();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&Za(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ki(e,t){var n=li();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&Za(t,r[1]))return r[0];if(r=e(),Xa){be(!0);try{e()}finally{be(!1)}}return n.memoizedState=[r,t],r}function Qi(e,t,n){return void 0===n||0!==(1073741824&Ha)&&0===(261930&gc)?e.memoizedState=t:(e.memoizedState=n,e=Xc(),Wa.lanes|=e,jc|=e,n)}function $i(e,t,n,r){return Jn(n,t)?n:null!==_a.current?(e=Qi(e,n,r),Jn(e,t)||(Ao=!0),e):0===(42&Ha)||0!==(1073741824&Ha)&&0===(261930&gc)?(Ao=!0,e.memoizedState=n):(e=Xc(),Wa.lanes|=e,jc|=e,t)}function Ji(e,t,n,r,s){var a=L.p;L.p=0!==a&&8>a?a:8;var i=M.T,o={};M.T=o,uo(e,!1,t,n);try{var l=s(),c=M.S;if(null!==c&&c(o,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)co(e,t,function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}(l,r),qc());else co(e,t,r,qc())}catch(u){co(e,t,{then:function(){},status:"rejected",reason:u},qc())}finally{L.p=a,null!==i&&null!==o.types&&(i.types=o.types),M.T=i}}function Zi(){}function eo(e,t,n,r){if(5!==e.tag)throw Error(i(476));var s=to(e).queue;Ji(e,s,t,z,null===n?Zi:function(){return no(e),n(r)})}function to(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:z,baseState:z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:hi,lastRenderedState:z},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:hi,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function no(e){var t=to(e);null===t.next&&(t=e.alternate.memoizedState),co(e,t.next.queue,{},qc())}function ro(){return Ds(uh)}function so(){return li().memoizedState}function ao(){return li().memoizedState}function io(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=qc(),r=ba(t,e=xa(n),n);return null!==r&&(Gc(r,t,n),va(r,t,n)),t={cache:Is()},void(e.payload=t)}t=t.return}}function oo(e,t,n){var r=qc();n={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},ho(e)?fo(t,n):null!==(n=Dr(e,t,n,r))&&(Gc(n,e,r),mo(n,t,r))}function lo(e,t,n){co(e,t,n,qc())}function co(e,t,n,r){var s={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(ho(e))fo(t,s);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var i=t.lastRenderedState,o=a(i,n);if(s.hasEagerState=!0,s.eagerState=o,Jn(o,i))return Or(e,t,s,0),null===mc&&Pr(),!1}catch(l){}if(null!==(n=Dr(e,t,s,r)))return Gc(n,e,r),mo(n,t,r),!0}return!1}function uo(e,t,n,r){if(r={lane:2,revertLane:Wu(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},ho(e)){if(t)throw Error(i(479))}else null!==(t=Dr(e,n,r,2))&&Gc(t,e,2)}function ho(e){var t=e.alternate;return e===Wa||null!==t&&t===Wa}function fo(e,t){qa=Va=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function mo(e,t,n){if(0!==(4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Me(e,n)}}var po={readContext:Ds,use:ui,useCallback:Ja,useContext:Ja,useEffect:Ja,useImperativeHandle:Ja,useLayoutEffect:Ja,useInsertionEffect:Ja,useMemo:Ja,useReducer:Ja,useRef:Ja,useState:Ja,useDebugValue:Ja,useDeferredValue:Ja,useTransition:Ja,useSyncExternalStore:Ja,useId:Ja,useHostTransitionStatus:Ja,useFormState:Ja,useActionState:Ja,useOptimistic:Ja,useMemoCache:Ja,useCacheRefresh:Ja};po.useEffectEvent=Ja;var go={readContext:Ds,use:ui,useCallback:function(e,t){return oi().memoizedState=[e,void 0===t?null:t],e},useContext:Ds,useEffect:Bi,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,Ri(4194308,4,Vi.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ri(4194308,4,e,t)},useInsertionEffect:function(e,t){Ri(4,2,e,t)},useMemo:function(e,t){var n=oi();t=void 0===t?null:t;var r=e();if(Xa){be(!0);try{e()}finally{be(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=oi();if(void 0!==n){var s=n(t);if(Xa){be(!0);try{n(t)}finally{be(!1)}}}else s=t;return r.memoizedState=r.baseState=s,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},r.queue=e,e=e.dispatch=oo.bind(null,Wa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},oi().memoizedState=e},useState:function(e){var t=(e=Ci(e)).queue,n=lo.bind(null,Wa,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Xi,useDeferredValue:function(e,t){return Qi(oi(),e,t)},useTransition:function(){var e=Ci(!1);return e=Ji.bind(null,Wa,e.queue,!0,!1),oi().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=Wa,s=oi();if(ds){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===mc)throw Error(i(349));0!==(127&gc)||yi(r,t,n)}s.memoizedState=n;var a={value:n,getSnapshot:t};return s.queue=a,Bi(bi.bind(null,r,a,e),[e]),r.flags|=2048,zi(9,{destroy:void 0},xi.bind(null,r,a,n,t),null),n},useId:function(){var e=oi(),t=mc.identifierPrefix;if(ds){var n=rs;t="_"+t+"R_"+(n=(ns&~(1<<32-ve(ns)-1)).toString(32)+n),0<(n=Ga++)&&(t+="H"+n.toString(32)),t+="_"}else t="_"+t+"r_"+(n=$a++).toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:ro,useFormState:Oi,useActionState:Oi,useOptimistic:function(e){var t=oi();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=uo.bind(null,Wa,!0,n),n.dispatch=t,[e,t]},useMemoCache:di,useCacheRefresh:function(){return oi().memoizedState=io.bind(null,Wa)},useEffectEvent:function(e){var t=oi(),n={impl:e};return t.memoizedState=n,function(){if(0!==(2&fc))throw Error(i(440));return n.impl.apply(void 0,arguments)}}},yo={readContext:Ds,use:ui,useCallback:Gi,useContext:Ds,useEffect:Hi,useImperativeHandle:qi,useInsertionEffect:Ui,useLayoutEffect:Yi,useMemo:Ki,useReducer:fi,useRef:Fi,useState:function(){return fi(hi)},useDebugValue:Xi,useDeferredValue:function(e,t){return $i(li(),Ua.memoizedState,e,t)},useTransition:function(){var e=fi(hi)[0],t=li().memoizedState;return["boolean"===typeof e?e:ci(e),t]},useSyncExternalStore:gi,useId:so,useHostTransitionStatus:ro,useFormState:Di,useActionState:Di,useOptimistic:function(e,t){return Si(li(),0,e,t)},useMemoCache:di,useCacheRefresh:ao};yo.useEffectEvent=Wi;var xo={readContext:Ds,use:ui,useCallback:Gi,useContext:Ds,useEffect:Hi,useImperativeHandle:qi,useInsertionEffect:Ui,useLayoutEffect:Yi,useMemo:Ki,useReducer:pi,useRef:Fi,useState:function(){return pi(hi)},useDebugValue:Xi,useDeferredValue:function(e,t){var n=li();return null===Ua?Qi(n,e,t):$i(n,Ua.memoizedState,e,t)},useTransition:function(){var e=pi(hi)[0],t=li().memoizedState;return["boolean"===typeof e?e:ci(e),t]},useSyncExternalStore:gi,useId:so,useHostTransitionStatus:ro,useFormState:Li,useActionState:Li,useOptimistic:function(e,t){var n=li();return null!==Ua?Si(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:di,useCacheRefresh:ao};function bo(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:f({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}xo.useEffectEvent=Wi;var vo={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=qc(),s=xa(r);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=ba(e,s,r))&&(Gc(t,e,r),va(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=qc(),s=xa(r);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=ba(e,s,r))&&(Gc(t,e,r),va(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=qc(),r=xa(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=ba(e,r,n))&&(Gc(t,e,n),va(t,e,n))}};function wo(e,t,n,r,s,a,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,i):!t.prototype||!t.prototype.isPureReactComponent||(!Zn(n,r)||!Zn(s,a))}function Co(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&vo.enqueueReplaceState(t,t.state,null)}function So(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var s in n===t&&(n=f({},n)),e)void 0===n[s]&&(n[s]=e[s]);return n}function jo(e){Nr(e)}function ko(e){console.error(e)}function No(e){Nr(e)}function _o(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function To(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Eo(e,t,n){return(n=xa(n)).tag=3,n.payload={element:null},n.callback=function(){_o(e,t)},n}function Po(e){return(e=xa(e)).tag=3,e}function Oo(e,t,n,r){var s=n.type.getDerivedStateFromError;if("function"===typeof s){var a=r.value;e.payload=function(){return s(a)},e.callback=function(){To(t,n,r)}}var i=n.stateNode;null!==i&&"function"===typeof i.componentDidCatch&&(e.callback=function(){To(t,n,r),"function"!==typeof s&&(null===zc?zc=new Set([this]):zc.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var Do=Error(i(461)),Ao=!1;function Mo(e,t,n,r){t.child=null===e?ma(t,null,n,r):fa(t,e.child,n,r)}function Lo(e,t,n,r,s){n=n.render;var a=t.ref;if("ref"in r){var i={};for(var o in r)"ref"!==o&&(i[o]=r[o])}else i=r;return Os(t),r=ei(e,t,n,i,a,s),o=si(),null===e||Ao?(ds&&o&&is(t),t.flags|=1,Mo(e,t,r,s),t.child):(ai(e,t,s),sl(e,t,s))}function zo(e,t,n,r,s){if(null===e){var a=n.type;return"function"!==typeof a||Ir(a)||void 0!==a.defaultProps||null!==n.compare?((e=Wr(n.type,null,r,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Fo(e,t,a,r,s))}if(a=e.child,!al(e,s)){var i=a.memoizedProps;if((n=null!==(n=n.compare)?n:Zn)(i,r)&&e.ref===t.ref)return sl(e,t,s)}return t.flags|=1,(e=Br(a,r)).ref=t.ref,e.return=t,t.child=e}function Fo(e,t,n,r,s){if(null!==e){var a=e.memoizedProps;if(Zn(a,r)&&e.ref===t.ref){if(Ao=!1,t.pendingProps=r=a,!al(e,s))return t.lanes=e.lanes,sl(e,t,s);0!==(131072&e.flags)&&(Ao=!0)}}return Yo(e,t,n,r,s)}function Ro(e,t,n,r){var s=r.children,a=null!==e?e.memoizedState:null;if(null===e&&null===t.stateNode&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),"hidden"===r.mode){if(0!==(128&t.flags)){if(a=null!==a?a.baseLanes|n:n,null!==e){for(r=t.child=e.child,s=0;null!==r;)s=s|r.lanes|r.childLanes,r=r.sibling;r=s&~a}else r=0,t.child=null;return Bo(e,t,a,n,r)}if(0===(536870912&n))return r=t.lanes=536870912,Bo(e,t,null!==a?a.baseLanes|n:n,n,r);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Ks(0,null!==a?a.cachePool:null),null!==a?Ea(t,a):Pa(),za(t)}else null!==a?(Ks(0,a.cachePool),Ea(t,a),Fa(),t.memoizedState=null):(null!==e&&Ks(0,null),Pa(),Fa());return Mo(e,t,s,n),t.child}function Io(e,t){return null!==e&&22===e.tag||null!==t.stateNode||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Bo(e,t,n,r,s){var a=Gs();return a=null===a?null:{parent:Rs._currentValue,pool:a},t.memoizedState={baseLanes:n,cachePool:a},null!==e&&Ks(0,null),Pa(),za(t),null!==e&&Es(e,t,r,!0),t.childLanes=s,null}function Ho(e,t){return(t=Zo({mode:t.mode,children:t.children},e.mode)).ref=e.ref,e.child=t,t.return=e,t}function Wo(e,t,n){return fa(t,e.child,null,n),(e=Ho(t,t.pendingProps)).flags|=2,Ra(t),t.memoizedState=null,e}function Uo(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(i(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Yo(e,t,n,r,s){return Os(t),n=ei(e,t,n,r,void 0,s),r=si(),null===e||Ao?(ds&&r&&is(t),t.flags|=1,Mo(e,t,n,s),t.child):(ai(e,t,s),sl(e,t,s))}function Vo(e,t,n,r,s,a){return Os(t),t.updateQueue=null,n=ni(t,r,n,s),ti(e),r=si(),null===e||Ao?(ds&&r&&is(t),t.flags|=1,Mo(e,t,n,a),t.child):(ai(e,t,a),sl(e,t,a))}function qo(e,t,n,r,s){if(Os(t),null===t.stateNode){var a=zr,i=n.contextType;"object"===typeof i&&null!==i&&(a=Ds(i)),a=new n(r,a),t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,a.updater=vo,t.stateNode=a,a._reactInternals=t,(a=t.stateNode).props=r,a.state=t.memoizedState,a.refs={},ga(t),i=n.contextType,a.context="object"===typeof i&&null!==i?Ds(i):zr,a.state=t.memoizedState,"function"===typeof(i=n.getDerivedStateFromProps)&&(bo(t,n,i,r),a.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(i=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),i!==a.state&&vo.enqueueReplaceState(a,a.state,null),ja(t,r,a,s),Sa(),a.state=t.memoizedState),"function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){a=t.stateNode;var o=t.memoizedProps,l=So(n,o);a.props=l;var c=a.context,u=n.contextType;i=zr,"object"===typeof u&&null!==u&&(i=Ds(u));var d=n.getDerivedStateFromProps;u="function"===typeof d||"function"===typeof a.getSnapshotBeforeUpdate,o=t.pendingProps!==o,u||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o||c!==i)&&Co(t,a,r,i),pa=!1;var h=t.memoizedState;a.state=h,ja(t,r,a,s),Sa(),c=t.memoizedState,o||h!==c||pa?("function"===typeof d&&(bo(t,n,d,r),c=t.memoizedState),(l=pa||wo(t,n,l,r,h,c,i))?(u||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=i,r=l):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,ya(e,t),u=So(n,i=t.memoizedProps),a.props=u,d=t.pendingProps,h=a.context,c=n.contextType,l=zr,"object"===typeof c&&null!==c&&(l=Ds(c)),(c="function"===typeof(o=n.getDerivedStateFromProps)||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(i!==d||h!==l)&&Co(t,a,r,l),pa=!1,h=t.memoizedState,a.state=h,ja(t,r,a,s),Sa();var f=t.memoizedState;i!==d||h!==f||pa||null!==e&&null!==e.dependencies&&Ps(e.dependencies)?("function"===typeof o&&(bo(t,n,o,r),f=t.memoizedState),(u=pa||wo(t,n,u,r,h,f,l)||null!==e&&null!==e.dependencies&&Ps(e.dependencies))?(c||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,f,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),a.props=r,a.state=f,a.context=l,r=u):("function"!==typeof a.componentDidUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return a=r,Uo(e,t),r=0!==(128&t.flags),a||r?(a=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:a.render(),t.flags|=1,null!==e&&r?(t.child=fa(t,e.child,null,s),t.child=fa(t,null,n,s)):Mo(e,t,n,s),t.memoizedState=a.state,e=t.child):e=sl(e,t,s),e}function Xo(e,t,n,r){return bs(),t.flags|=256,Mo(e,t,n,r),t.child}var Go={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ko(e){return{baseLanes:e,cachePool:Qs()}}function Qo(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=_c),e}function $o(e,t,n){var r,s=t.pendingProps,a=!1,o=0!==(128&t.flags);if((r=o)||(r=(null===e||null!==e.memoizedState)&&0!==(2&Ia.current)),r&&(a=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(ds){if(a?Ma(t):Fa(),(e=us)?null!==(e=null!==(e=Pd(e,fs))&&"&"!==e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==ts?{id:ns,overflow:rs}:null,retryLane:536870912,hydrationErrors:null},(n=Vr(e)).return=t,t.child=n,cs=t,us=null):e=null,null===e)throw ps(t);return Dd(e)?t.lanes=32:t.lanes=536870912,null}var l=s.children;return s=s.fallback,a?(Fa(),l=Zo({mode:"hidden",children:l},a=t.mode),s=Ur(s,a,n,null),l.return=t,s.return=t,l.sibling=s,t.child=l,(s=t.child).memoizedState=Ko(n),s.childLanes=Qo(e,r,n),t.memoizedState=Go,Io(null,s)):(Ma(t),Jo(t,l))}var c=e.memoizedState;if(null!==c&&null!==(l=c.dehydrated)){if(o)256&t.flags?(Ma(t),t.flags&=-257,t=el(e,t,n)):null!==t.memoizedState?(Fa(),t.child=e.child,t.flags|=128,t=null):(Fa(),l=s.fallback,a=t.mode,s=Zo({mode:"visible",children:s.children},a),(l=Ur(l,a,n,null)).flags|=2,s.return=t,l.return=t,s.sibling=l,t.child=s,fa(t,e.child,null,n),(s=t.child).memoizedState=Ko(n),s.childLanes=Qo(e,r,n),t.memoizedState=Go,t=Io(null,s));else if(Ma(t),Dd(l)){if(r=l.nextSibling&&l.nextSibling.dataset)var u=r.dgst;r=u,(s=Error(i(419))).stack="",s.digest=r,ws({value:s,source:null,stack:null}),t=el(e,t,n)}else if(Ao||Es(e,t,n,!1),r=0!==(n&e.childLanes),Ao||r){if(null!==(r=mc)&&(0!==(s=Le(r,n))&&s!==c.retryLane))throw c.retryLane=s,Ar(e,s),Gc(r,e,s),Do;Od(l)||iu(),t=el(e,t,n)}else Od(l)?(t.flags|=192,t.child=e.child,t=null):(e=c.treeContext,us=Ad(l.nextSibling),cs=t,ds=!0,hs=null,fs=!1,null!==e&&ls(t,e),(t=Jo(t,s.children)).flags|=4096);return t}return a?(Fa(),l=s.fallback,a=t.mode,u=(c=e.child).sibling,(s=Br(c,{mode:"hidden",children:s.children})).subtreeFlags=65011712&c.subtreeFlags,null!==u?l=Br(u,l):(l=Ur(l,a,n,null)).flags|=2,l.return=t,s.return=t,s.sibling=l,t.child=s,Io(null,s),s=t.child,null===(l=e.child.memoizedState)?l=Ko(n):(null!==(a=l.cachePool)?(c=Rs._currentValue,a=a.parent!==c?{parent:c,pool:c}:a):a=Qs(),l={baseLanes:l.baseLanes|n,cachePool:a}),s.memoizedState=l,s.childLanes=Qo(e,r,n),t.memoizedState=Go,Io(e.child,s)):(Ma(t),e=(n=e.child).sibling,(n=Br(n,{mode:"visible",children:s.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function Jo(e,t){return(t=Zo({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Zo(e,t){return(e=Rr(22,e,null,t)).lanes=0,e}function el(e,t,n){return fa(t,e.child,null,n),(e=Jo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function tl(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),_s(e.return,t,n)}function nl(e,t,n,r,s,a){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s,treeForkCount:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s,i.treeForkCount=a)}function rl(e,t,n){var r=t.pendingProps,s=r.revealOrder,a=r.tail;r=r.children;var i=Ia.current,o=0!==(2&i);if(o?(i=1&i|2,t.flags|=128):i&=1,H(Ia,i),Mo(e,t,r,n),r=ds?Jr:0,!o&&null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&tl(e,n,t);else if(19===e.tag)tl(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===Ba(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),nl(t,!1,s,n,a,r);break;case"backwards":case"unstable_legacy-backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===Ba(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}nl(t,!0,n,null,a,r);break;case"together":nl(t,!1,null,null,void 0,r);break;default:t.memoizedState=null}return t.child}function sl(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),jc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Es(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Br(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Br(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function al(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Ps(e))}function il(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Ao=!0;else{if(!al(e,n)&&0===(128&t.flags))return Ao=!1,function(e,t,n){switch(t.tag){case 3:G(t,t.stateNode.containerInfo),ks(0,Rs,e.memoizedState.cache),bs();break;case 27:case 5:Q(t);break;case 4:G(t,t.stateNode.containerInfo);break;case 10:ks(0,t.type,t.memoizedProps.value);break;case 31:if(null!==t.memoizedState)return t.flags|=128,La(t),null;break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(Ma(t),t.flags|=128,null):0!==(n&t.child.childLanes)?$o(e,t,n):(Ma(t),null!==(e=sl(e,t,n))?e.sibling:null);Ma(t);break;case 19:var s=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(Es(e,t,n,!1),r=0!==(n&t.childLanes)),s){if(r)return rl(e,t,n);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),H(Ia,Ia.current),r)break;return null;case 22:return t.lanes=0,Ro(e,t,n,t.pendingProps);case 24:ks(0,Rs,e.memoizedState.cache)}return sl(e,t,n)}(e,t,n);Ao=0!==(131072&e.flags)}else Ao=!1,ds&&0!==(1048576&t.flags)&&as(t,Jr,t.index);switch(t.lanes=0,t.tag){case 16:e:{var r=t.pendingProps;if(e=ra(t.elementType),t.type=e,"function"!==typeof e){if(void 0!==e&&null!==e){var s=e.$$typeof;if(s===C){t.tag=11,t=Lo(null,t,e,r,n);break e}if(s===k){t.tag=14,t=zo(null,t,e,r,n);break e}}throw t=D(e)||e,Error(i(306,t,""))}Ir(e)?(r=So(e,r),t.tag=1,t=qo(null,t,e,r,n)):(t.tag=0,t=Yo(null,t,e,r,n))}return t;case 0:return Yo(e,t,t.type,t.pendingProps,n);case 1:return qo(e,t,r=t.type,s=So(r,t.pendingProps),n);case 3:e:{if(G(t,t.stateNode.containerInfo),null===e)throw Error(i(387));r=t.pendingProps;var a=t.memoizedState;s=a.element,ya(e,t),ja(t,r,null,n);var o=t.memoizedState;if(r=o.cache,ks(0,Rs,r),r!==a.cache&&Ts(t,[Rs],n,!0),Sa(),r=o.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Xo(e,t,r,n);break e}if(r!==s){ws(s=Gr(Error(i(424)),t)),t=Xo(e,t,r,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(us=Ad(e.firstChild),cs=t,ds=!0,hs=null,fs=!0,n=ma(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(bs(),r===s){t=sl(e,t,n);break e}Mo(e,t,r,n)}t=t.child}return t;case 26:return Uo(e,t),null===e?(n=Vd(t.type,null,t.pendingProps,null))?t.memoizedState=n:ds||(n=t.type,e=t.pendingProps,(r=gd(q.current).createElement(n))[He]=t,r[We]=e,hd(r,n,e),et(r),t.stateNode=r):t.memoizedState=Vd(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Q(t),null===e&&ds&&(r=t.stateNode=Fd(t.type,t.pendingProps,q.current),cs=t,fs=!0,s=us,Nd(t.type)?(Md=s,us=Ad(r.firstChild)):us=s),Mo(e,t,t.pendingProps.children,n),Uo(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&ds&&((s=r=us)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var s=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[Ge])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(a=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(a!==s.rel||e.getAttribute("href")!==(null==s.href||""===s.href?null:s.href)||e.getAttribute("crossorigin")!==(null==s.crossOrigin?null:s.crossOrigin)||e.getAttribute("title")!==(null==s.title?null:s.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((a=e.getAttribute("src"))!==(null==s.src?null:s.src)||e.getAttribute("type")!==(null==s.type?null:s.type)||e.getAttribute("crossorigin")!==(null==s.crossOrigin?null:s.crossOrigin))&&a&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var a=null==s.name?null:""+s.name;if("hidden"===s.type&&e.getAttribute("name")===a)return e}if(null===(e=Ad(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,fs))?(t.stateNode=r,cs=t,us=Ad(r.firstChild),fs=!1,s=!0):s=!1),s||ps(t)),Q(t),s=t.type,a=t.pendingProps,o=null!==e?e.memoizedProps:null,r=a.children,bd(s,a)?r=null:null!==o&&bd(s,o)&&(t.flags|=32),null!==t.memoizedState&&(s=ei(e,t,ri,null,null,n),uh._currentValue=s),Uo(e,t),Mo(e,t,r,n),t.child;case 6:return null===e&&ds&&((e=n=us)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=Ad(e.nextSibling)))return null}return e}(n,t.pendingProps,fs))?(t.stateNode=n,cs=t,us=null,e=!0):e=!1),e||ps(t)),null;case 13:return $o(e,t,n);case 4:return G(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=fa(t,null,r,n):Mo(e,t,r,n),t.child;case 11:return Lo(e,t,t.type,t.pendingProps,n);case 7:return Mo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Mo(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,ks(0,t.type,r.value),Mo(e,t,r.children,n),t.child;case 9:return s=t.type._context,r=t.pendingProps.children,Os(t),r=r(s=Ds(s)),t.flags|=1,Mo(e,t,r,n),t.child;case 14:return zo(e,t,t.type,t.pendingProps,n);case 15:return Fo(e,t,t.type,t.pendingProps,n);case 19:return rl(e,t,n);case 31:return function(e,t,n){var r=t.pendingProps,s=0!==(128&t.flags);if(t.flags&=-129,null===e){if(ds){if("hidden"===r.mode)return e=Ho(t,r),t.lanes=536870912,Io(null,e);if(La(t),(e=us)?null!==(e=null!==(e=Pd(e,fs))&&"&"===e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==ts?{id:ns,overflow:rs}:null,retryLane:536870912,hydrationErrors:null},(n=Vr(e)).return=t,t.child=n,cs=t,us=null):e=null,null===e)throw ps(t);return t.lanes=536870912,null}return Ho(t,r)}var a=e.memoizedState;if(null!==a){var o=a.dehydrated;if(La(t),s)if(256&t.flags)t.flags&=-257,t=Wo(e,t,n);else{if(null===t.memoizedState)throw Error(i(558));t.child=e.child,t.flags|=128,t=null}else if(Ao||Es(e,t,n,!1),s=0!==(n&e.childLanes),Ao||s){if(null!==(r=mc)&&0!==(o=Le(r,n))&&o!==a.retryLane)throw a.retryLane=o,Ar(e,o),Gc(r,e,o),Do;iu(),t=Wo(e,t,n)}else e=a.treeContext,us=Ad(o.nextSibling),cs=t,ds=!0,hs=null,fs=!1,null!==e&&ls(t,e),(t=Ho(t,r)).flags|=4096;return t}return(e=Br(e.child,{mode:r.mode,children:r.children})).ref=t.ref,t.child=e,e.return=t,e}(e,t,n);case 22:return Ro(e,t,n,t.pendingProps);case 24:return Os(t),r=Ds(Rs),null===e?(null===(s=Gs())&&(s=mc,a=Is(),s.pooledCache=a,a.refCount++,null!==a&&(s.pooledCacheLanes|=n),s=a),t.memoizedState={parent:r,cache:s},ga(t),ks(0,Rs,s)):(0!==(e.lanes&n)&&(ya(e,t),ja(t,null,null,n),Sa()),s=e.memoizedState,a=t.memoizedState,s.parent!==r?(s={parent:r,cache:r},t.memoizedState=s,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=s),ks(0,Rs,r)):(r=a.cache,ks(0,Rs,r),r!==s.cache&&Ts(t,[Rs],n,!0))),Mo(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(i(156,t.tag))}function ol(e){e.flags|=4}function ll(e,t,n,r,s){if((t=0!==(32&e.mode))&&(t=!1),t){if(e.flags|=16777216,(335544128&s)===s)if(e.stateNode.complete)e.flags|=8192;else{if(!ru())throw sa=ea,Js;e.flags|=8192}}else e.flags&=-16777217}function cl(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!sh(t)){if(!ru())throw sa=ea,Js;e.flags|=8192}}function ul(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Pe():536870912,e.lanes|=t,Tc|=t)}function dl(e,t){if(!ds)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function hl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=65011712&s.subtreeFlags,r|=65011712&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function fl(e,t,n){var r=t.pendingProps;switch(os(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return hl(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),Ns(Rs),K(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(xs(t)?ol(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,vs())),hl(t),null;case 26:var s=t.type,a=t.memoizedState;return null===e?(ol(t),null!==a?(hl(t),cl(t,a)):(hl(t),ll(t,s,0,0,n))):a?a!==e.memoizedState?(ol(t),hl(t),cl(t,a)):(hl(t),t.flags&=-16777217):((e=e.memoizedProps)!==r&&ol(t),hl(t),ll(t,s,0,0,n)),null;case 27:if($(t),n=q.current,s=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&ol(t);else{if(!r){if(null===t.stateNode)throw Error(i(166));return hl(t),null}e=Y.current,xs(t)?gs(t):(e=Fd(s,r,n),t.stateNode=e,ol(t))}return hl(t),null;case 5:if($(t),s=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&ol(t);else{if(!r){if(null===t.stateNode)throw Error(i(166));return hl(t),null}if(a=Y.current,xs(t))gs(t);else{var o=gd(q.current);switch(a){case 1:a=o.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:a=o.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":a=o.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":a=o.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":(a=o.createElement("div")).innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a="string"===typeof r.is?o.createElement("select",{is:r.is}):o.createElement("select"),r.multiple?a.multiple=!0:r.size&&(a.size=r.size);break;default:a="string"===typeof r.is?o.createElement(s,{is:r.is}):o.createElement(s)}}a[He]=t,a[We]=r;e:for(o=t.child;null!==o;){if(5===o.tag||6===o.tag)a.appendChild(o.stateNode);else if(4!==o.tag&&27!==o.tag&&null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break e;for(;null===o.sibling;){if(null===o.return||o.return===t)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}t.stateNode=a;e:switch(hd(a,s,r),s){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&ol(t)}}return hl(t),ll(t,t.type,null===e||e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&ol(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));if(e=q.current,xs(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(s=cs))switch(s.tag){case 27:case 5:r=s.memoizedProps}e[He]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||cd(e.nodeValue,n)))||ps(t,!0)}else(e=gd(e).createTextNode(r))[He]=t,t.stateNode=e}return hl(t),null;case 31:if(n=t.memoizedState,null===e||null!==e.memoizedState){if(r=xs(t),null!==n){if(null===e){if(!r)throw Error(i(318));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(i(557));e[He]=t}else bs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;hl(t),e=!1}else n=vs(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return 256&t.flags?(Ra(t),t):(Ra(t),null);if(0!==(128&t.flags))throw Error(i(558))}return hl(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(s=xs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(i(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(i(317));s[He]=t}else bs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;hl(t),s=!1}else s=vs(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=s),s=!0;if(!s)return 256&t.flags?(Ra(t),t):(Ra(t),null)}return Ra(t),0!==(128&t.flags)?(t.lanes=n,t):(n=null!==r,e=null!==e&&null!==e.memoizedState,n&&(s=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(s=r.alternate.memoizedState.cachePool.pool),a=null,null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(a=r.memoizedState.cachePool.pool),a!==s&&(r.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),ul(t,t.updateQueue),hl(t),null);case 4:return K(),null===e&&Zu(t.stateNode.containerInfo),hl(t),null;case 10:return Ns(t.type),hl(t),null;case 19:if(B(Ia),null===(r=t.memoizedState))return hl(t),null;if(s=0!==(128&t.flags),null===(a=r.rendering))if(s)dl(r,!1);else{if(0!==Sc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(a=Ba(e))){for(t.flags|=128,dl(r,!1),e=a.updateQueue,t.updateQueue=e,ul(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Hr(n,e),n=n.sibling;return H(Ia,1&Ia.current|2),ds&&ss(t,r.treeForkCount),t.child}e=e.sibling}null!==r.tail&&le()>Mc&&(t.flags|=128,s=!0,dl(r,!1),t.lanes=4194304)}else{if(!s)if(null!==(e=Ba(a))){if(t.flags|=128,s=!0,e=e.updateQueue,t.updateQueue=e,ul(t,e),dl(r,!0),null===r.tail&&"hidden"===r.tailMode&&!a.alternate&&!ds)return hl(t),null}else 2*le()-r.renderingStartTime>Mc&&536870912!==n&&(t.flags|=128,s=!0,dl(r,!1),t.lanes=4194304);r.isBackwards?(a.sibling=t.child,t.child=a):(null!==(e=r.last)?e.sibling=a:t.child=a,r.last=a)}return null!==r.tail?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=le(),e.sibling=null,n=Ia.current,H(Ia,s?1&n|2:1&n),ds&&ss(t,r.treeForkCount),e):(hl(t),null);case 22:case 23:return Ra(t),Oa(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(hl(t),6&t.subtreeFlags&&(t.flags|=8192)):hl(t),null!==(n=t.updateQueue)&&ul(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&B(Xs),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Ns(Rs),hl(t),null;case 25:case 30:return null}throw Error(i(156,t.tag))}function ml(e,t){switch(os(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ns(Rs),K(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return $(t),null;case 31:if(null!==t.memoizedState){if(Ra(t),null===t.alternate)throw Error(i(340));bs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 13:if(Ra(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));bs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return B(Ia),null;case 4:return K(),null;case 10:return Ns(t.type),null;case 22:case 23:return Ra(t),Oa(),null!==e&&B(Xs),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return Ns(Rs),null;default:return null}}function pl(e,t){switch(os(t),t.tag){case 3:Ns(Rs),K();break;case 26:case 27:case 5:$(t);break;case 4:K();break;case 31:null!==t.memoizedState&&Ra(t);break;case 13:Ra(t);break;case 19:B(Ia);break;case 10:Ns(t.type);break;case 22:case 23:Ra(t),Oa(),null!==e&&B(Xs);break;case 24:Ns(Rs)}}function gl(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var s=r.next;n=s;do{if((n.tag&e)===e){r=void 0;var a=n.create,i=n.inst;r=a(),i.destroy=r}n=n.next}while(n!==s)}}catch(o){Su(t,t.return,o)}}function yl(e,t,n){try{var r=t.updateQueue,s=null!==r?r.lastEffect:null;if(null!==s){var a=s.next;r=a;do{if((r.tag&e)===e){var i=r.inst,o=i.destroy;if(void 0!==o){i.destroy=void 0,s=t;var l=n,c=o;try{c()}catch(u){Su(s,l,u)}}}r=r.next}while(r!==a)}}catch(u){Su(t,t.return,u)}}function xl(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{Na(t,n)}catch(r){Su(e,e.return,r)}}}function bl(e,t,n){n.props=So(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){Su(e,t,r)}}function vl(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"===typeof n?e.refCleanup=n(r):n.current=r}}catch(s){Su(e,t,s)}}function wl(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(s){Su(e,t,s)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(a){Su(e,t,a)}else n.current=null}function Cl(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(s){Su(e,e.return,s)}}function Sl(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,a=null,o=null,l=null,c=null,u=null,d=null;for(m in n){var h=n[m];if(n.hasOwnProperty(m)&&null!=h)switch(m){case"checked":case"value":break;case"defaultValue":c=h;default:r.hasOwnProperty(m)||ud(e,t,m,null,r,h)}}for(var f in r){var m=r[f];if(h=n[f],r.hasOwnProperty(f)&&(null!=m||null!=h))switch(f){case"type":a=m;break;case"name":s=m;break;case"checked":u=m;break;case"defaultChecked":d=m;break;case"value":o=m;break;case"defaultValue":l=m;break;case"children":case"dangerouslySetInnerHTML":if(null!=m)throw Error(i(137,t));break;default:m!==h&&ud(e,t,f,m,r,h)}}return void xt(e,o,l,c,u,d,a,s);case"select":for(a in m=o=l=f=null,n)if(c=n[a],n.hasOwnProperty(a)&&null!=c)switch(a){case"value":break;case"multiple":m=c;default:r.hasOwnProperty(a)||ud(e,t,a,null,r,c)}for(s in r)if(a=r[s],c=n[s],r.hasOwnProperty(s)&&(null!=a||null!=c))switch(s){case"value":f=a;break;case"defaultValue":l=a;break;case"multiple":o=a;default:a!==c&&ud(e,t,s,a,r,c)}return t=l,n=o,r=m,void(null!=f?wt(e,!!n,f,!1):!!r!==!!n&&(null!=t?wt(e,!!n,t,!0):wt(e,!!n,n?[]:"",!1)));case"textarea":for(l in m=f=null,n)if(s=n[l],n.hasOwnProperty(l)&&null!=s&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:ud(e,t,l,null,r,s)}for(o in r)if(s=r[o],a=n[o],r.hasOwnProperty(o)&&(null!=s||null!=a))switch(o){case"value":f=s;break;case"defaultValue":m=s;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=s)throw Error(i(91));break;default:s!==a&&ud(e,t,o,s,r,a)}return void Ct(e,f,m);case"option":for(var p in n)if(f=n[p],n.hasOwnProperty(p)&&null!=f&&!r.hasOwnProperty(p))if("selected"===p)e.selected=!1;else ud(e,t,p,null,r,f);for(c in r)if(f=r[c],m=n[c],r.hasOwnProperty(c)&&f!==m&&(null!=f||null!=m))if("selected"===c)e.selected=f&&"function"!==typeof f&&"symbol"!==typeof f;else ud(e,t,c,f,r,m);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)f=n[g],n.hasOwnProperty(g)&&null!=f&&!r.hasOwnProperty(g)&&ud(e,t,g,null,r,f);for(u in r)if(f=r[u],m=n[u],r.hasOwnProperty(u)&&f!==m&&(null!=f||null!=m))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(i(137,t));break;default:ud(e,t,u,f,r,m)}return;default:if(Tt(t)){for(var y in n)f=n[y],n.hasOwnProperty(y)&&void 0!==f&&!r.hasOwnProperty(y)&&dd(e,t,y,void 0,r,f);for(d in r)f=r[d],m=n[d],!r.hasOwnProperty(d)||f===m||void 0===f&&void 0===m||dd(e,t,d,f,r,m);return}}for(var x in n)f=n[x],n.hasOwnProperty(x)&&null!=f&&!r.hasOwnProperty(x)&&ud(e,t,x,null,r,f);for(h in r)f=r[h],m=n[h],!r.hasOwnProperty(h)||f===m||null==f&&null==m||ud(e,t,h,f,r,m)}(r,e.type,n,t),r[We]=t}catch(s){Su(e,e.return,s)}}function jl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&Nd(e.type)||4===e.tag}function kl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||jl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&Nd(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function Nl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Dt));else if(4!==r&&(27===r&&Nd(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(Nl(e,t,n),e=e.sibling;null!==e;)Nl(e,t,n),e=e.sibling}function _l(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&Nd(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(_l(e,t,n),e=e.sibling;null!==e;)_l(e,t,n),e=e.sibling}function Tl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,s=t.attributes;s.length;)t.removeAttributeNode(s[0]);hd(t,r,n),t[He]=e,t[We]=n}catch(a){Su(e,e.return,a)}}var El=!1,Pl=!1,Ol=!1,Dl="function"===typeof WeakSet?WeakSet:Set,Al=null;function Ml(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Gl(e,n),4&r&&gl(5,n);break;case 1:if(Gl(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(i){Su(n,n.return,i)}else{var s=So(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(s,t,e.__reactInternalSnapshotBeforeUpdate)}catch(o){Su(n,n.return,o)}}64&r&&xl(n),512&r&&vl(n,n.return);break;case 3:if(Gl(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{Na(e,t)}catch(i){Su(n,n.return,i)}}break;case 27:null===t&&4&r&&Tl(n);case 26:case 5:Gl(e,n),null===t&&4&r&&Cl(n),512&r&&vl(n,n.return);break;case 12:Gl(e,n);break;case 31:Gl(e,n),4&r&&Bl(e,n);break;case 13:Gl(e,n),4&r&&Hl(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$~"===e.data)e._reactRetry=t;else if("$?"!==e.data||"loading"!==n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=_u.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||El)){t=null!==t&&null!==t.memoizedState||Pl,s=El;var a=Pl;El=r,(Pl=t)&&!a?Ql(e,n,0!==(8772&n.subtreeFlags)):Gl(e,n),El=s,Pl=a}break;case 30:break;default:Gl(e,n)}}function Ll(e){var t=e.alternate;null!==t&&(e.alternate=null,Ll(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Ke(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var zl=null,Fl=!1;function Rl(e,t,n){for(n=n.child;null!==n;)Il(e,t,n),n=n.sibling}function Il(e,t,n){if(xe&&"function"===typeof xe.onCommitFiberUnmount)try{xe.onCommitFiberUnmount(ye,n)}catch(a){}switch(n.tag){case 26:Pl||wl(n,t),Rl(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:Pl||wl(n,t);var r=zl,s=Fl;Nd(n.type)&&(zl=n.stateNode,Fl=!1),Rl(e,t,n),Rd(n.stateNode),zl=r,Fl=s;break;case 5:Pl||wl(n,t);case 6:if(r=zl,s=Fl,zl=null,Rl(e,t,n),Fl=s,null!==(zl=r))if(Fl)try{(9===zl.nodeType?zl.body:"HTML"===zl.nodeName?zl.ownerDocument.body:zl).removeChild(n.stateNode)}catch(i){Su(n,t,i)}else try{zl.removeChild(n.stateNode)}catch(i){Su(n,t,i)}break;case 18:null!==zl&&(Fl?(_d(9===(e=zl).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Yh(e)):_d(zl,n.stateNode));break;case 4:r=zl,s=Fl,zl=n.stateNode.containerInfo,Fl=!0,Rl(e,t,n),zl=r,Fl=s;break;case 0:case 11:case 14:case 15:yl(2,n,t),Pl||yl(4,n,t),Rl(e,t,n);break;case 1:Pl||(wl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&bl(n,t,r)),Rl(e,t,n);break;case 21:Rl(e,t,n);break;case 22:Pl=(r=Pl)||null!==n.memoizedState,Rl(e,t,n),Pl=r;break;default:Rl(e,t,n)}}function Bl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&null!==(e=e.memoizedState))){e=e.dehydrated;try{Yh(e)}catch(n){Su(t,t.return,n)}}}function Hl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Yh(e)}catch(n){Su(t,t.return,n)}}function Wl(e,t){var n=function(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Dl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Dl),t;default:throw Error(i(435,e.tag))}}(e);t.forEach(function(t){if(!n.has(t)){n.add(t);var r=Tu.bind(null,e,t);t.then(r,r)}})}function Ul(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var s=n[r],a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 27:if(Nd(l.type)){zl=l.stateNode,Fl=!1;break e}break;case 5:zl=l.stateNode,Fl=!1;break e;case 3:case 4:zl=l.stateNode.containerInfo,Fl=!0;break e}l=l.return}if(null===zl)throw Error(i(160));Il(a,o,s),zl=null,Fl=!1,null!==(a=s.alternate)&&(a.return=null),s.return=null}if(13886&t.subtreeFlags)for(t=t.child;null!==t;)Vl(t,e),t=t.sibling}var Yl=null;function Vl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ul(t,e),ql(e),4&r&&(yl(3,e,e.return),gl(3,e),yl(5,e,e.return));break;case 1:Ul(t,e),ql(e),512&r&&(Pl||null===n||wl(n,n.return)),64&r&&El&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var s=Yl;if(Ul(t,e),ql(e),512&r&&(Pl||null===n||wl(n,n.return)),4&r){var a=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,s=s.ownerDocument||s;t:switch(r){case"title":(!(a=s.getElementsByTagName("title")[0])||a[Ge]||a[He]||"http://www.w3.org/2000/svg"===a.namespaceURI||a.hasAttribute("itemprop"))&&(a=s.createElement(r),s.head.insertBefore(a,s.querySelector("head > title"))),hd(a,r,n),a[He]=e,et(a),r=a;break e;case"link":var o=nh("link","href",s).get(r+(n.href||""));if(o)for(var l=0;l<o.length;l++)if((a=o[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&a.getAttribute("rel")===(null==n.rel?null:n.rel)&&a.getAttribute("title")===(null==n.title?null:n.title)&&a.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){o.splice(l,1);break t}hd(a=s.createElement(r),r,n),s.head.appendChild(a);break;case"meta":if(o=nh("meta","content",s).get(r+(n.content||"")))for(l=0;l<o.length;l++)if((a=o[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&a.getAttribute("name")===(null==n.name?null:n.name)&&a.getAttribute("property")===(null==n.property?null:n.property)&&a.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&a.getAttribute("charset")===(null==n.charSet?null:n.charSet)){o.splice(l,1);break t}hd(a=s.createElement(r),r,n),s.head.appendChild(a);break;default:throw Error(i(468,r))}a[He]=e,et(a),r=a}e.stateNode=r}else rh(s,e.type,e.stateNode);else e.stateNode=$d(s,r,e.memoizedProps);else a!==r?(null===a?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):a.count--,null===r?rh(s,e.type,e.stateNode):$d(s,r,e.memoizedProps)):null===r&&null!==e.stateNode&&Sl(e,e.memoizedProps,n.memoizedProps)}break;case 27:Ul(t,e),ql(e),512&r&&(Pl||null===n||wl(n,n.return)),null!==n&&4&r&&Sl(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Ul(t,e),ql(e),512&r&&(Pl||null===n||wl(n,n.return)),32&e.flags){s=e.stateNode;try{jt(s,"")}catch(p){Su(e,e.return,p)}}4&r&&null!=e.stateNode&&Sl(e,s=e.memoizedProps,null!==n?n.memoizedProps:s),1024&r&&(Ol=!0);break;case 6:if(Ul(t,e),ql(e),4&r){if(null===e.stateNode)throw Error(i(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(p){Su(e,e.return,p)}}break;case 3:if(th=null,s=Yl,Yl=Hd(t.containerInfo),Ul(t,e),Yl=s,ql(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Yh(t.containerInfo)}catch(p){Su(e,e.return,p)}Ol&&(Ol=!1,Xl(e));break;case 4:r=Yl,Yl=Hd(e.stateNode.containerInfo),Ul(t,e),ql(e),Yl=r;break;case 12:default:Ul(t,e),ql(e);break;case 31:case 19:Ul(t,e),ql(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Wl(e,r)));break;case 13:Ul(t,e),ql(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(Dc=le()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Wl(e,r)));break;case 22:s=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,u=El,d=Pl;if(El=u||s,Pl=d||c,Ul(t,e),Pl=d,El=u,ql(e),8192&r)e:for(t=e.stateNode,t._visibility=s?-2&t._visibility:1|t._visibility,s&&(null===n||c||El||Pl||Kl(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(a=c.stateNode,s)"function"===typeof(o=a.style).setProperty?o.setProperty("display","none","important"):o.display="none";else{l=c.stateNode;var h=c.memoizedProps.style,f=void 0!==h&&null!==h&&h.hasOwnProperty("display")?h.display:null;l.style.display=null==f||"boolean"===typeof f?"":(""+f).trim()}}catch(p){Su(c,c.return,p)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=s?"":c.memoizedProps}catch(p){Su(c,c.return,p)}}}else if(18===t.tag){if(null===n){c=t;try{var m=c.stateNode;s?Td(m,!0):Td(c.stateNode,!1)}catch(p){Su(c,c.return,p)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,Wl(e,n))));case 30:case 21:}}function ql(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(jl(r)){n=r;break}r=r.return}if(null==n)throw Error(i(160));switch(n.tag){case 27:var s=n.stateNode;_l(e,kl(e),s);break;case 5:var a=n.stateNode;32&n.flags&&(jt(a,""),n.flags&=-33),_l(e,kl(e),a);break;case 3:case 4:var o=n.stateNode.containerInfo;Nl(e,kl(e),o);break;default:throw Error(i(161))}}catch(l){Su(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Xl(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Xl(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Gl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Ml(e,t.alternate,t),t=t.sibling}function Kl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:yl(4,t,t.return),Kl(t);break;case 1:wl(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&bl(t,t.return,n),Kl(t);break;case 27:Rd(t.stateNode);case 26:case 5:wl(t,t.return),Kl(t);break;case 22:null===t.memoizedState&&Kl(t);break;default:Kl(t)}e=e.sibling}}function Ql(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,s=e,a=t,i=a.flags;switch(a.tag){case 0:case 11:case 15:Ql(s,a,n),gl(4,a);break;case 1:if(Ql(s,a,n),"function"===typeof(s=(r=a).stateNode).componentDidMount)try{s.componentDidMount()}catch(c){Su(r,r.return,c)}if(null!==(s=(r=a).updateQueue)){var o=r.stateNode;try{var l=s.shared.hiddenCallbacks;if(null!==l)for(s.shared.hiddenCallbacks=null,s=0;s<l.length;s++)ka(l[s],o)}catch(c){Su(r,r.return,c)}}n&&64&i&&xl(a),vl(a,a.return);break;case 27:Tl(a);case 26:case 5:Ql(s,a,n),n&&null===r&&4&i&&Cl(a),vl(a,a.return);break;case 12:Ql(s,a,n);break;case 31:Ql(s,a,n),n&&4&i&&Bl(s,a);break;case 13:Ql(s,a,n),n&&4&i&&Hl(s,a);break;case 22:null===a.memoizedState&&Ql(s,a,n),vl(a,a.return);break;case 30:break;default:Ql(s,a,n)}t=t.sibling}}function $l(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Bs(n))}function Jl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Bs(e))}function Zl(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)ec(e,t,n,r),t=t.sibling}function ec(e,t,n,r){var s=t.flags;switch(t.tag){case 0:case 11:case 15:Zl(e,t,n,r),2048&s&&gl(9,t);break;case 1:case 31:case 13:default:Zl(e,t,n,r);break;case 3:Zl(e,t,n,r),2048&s&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Bs(e)));break;case 12:if(2048&s){Zl(e,t,n,r),e=t.stateNode;try{var a=t.memoizedProps,i=a.id,o=a.onPostCommit;"function"===typeof o&&o(i,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){Su(t,t.return,l)}}else Zl(e,t,n,r);break;case 23:break;case 22:a=t.stateNode,i=t.alternate,null!==t.memoizedState?2&a._visibility?Zl(e,t,n,r):nc(e,t):2&a._visibility?Zl(e,t,n,r):(a._visibility|=2,tc(e,t,n,r,0!==(10256&t.subtreeFlags)||!1)),2048&s&&$l(i,t);break;case 24:Zl(e,t,n,r),2048&s&&Jl(t.alternate,t)}}function tc(e,t,n,r,s){for(s=s&&(0!==(10256&t.subtreeFlags)||!1),t=t.child;null!==t;){var a=e,i=t,o=n,l=r,c=i.flags;switch(i.tag){case 0:case 11:case 15:tc(a,i,o,l,s),gl(8,i);break;case 23:break;case 22:var u=i.stateNode;null!==i.memoizedState?2&u._visibility?tc(a,i,o,l,s):nc(a,i):(u._visibility|=2,tc(a,i,o,l,s)),s&&2048&c&&$l(i.alternate,i);break;case 24:tc(a,i,o,l,s),s&&2048&c&&Jl(i.alternate,i);break;default:tc(a,i,o,l,s)}t=t.sibling}}function nc(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,s=r.flags;switch(r.tag){case 22:nc(n,r),2048&s&&$l(r.alternate,r);break;case 24:nc(n,r),2048&s&&Jl(r.alternate,r);break;default:nc(n,r)}t=t.sibling}}var rc=8192;function sc(e,t,n){if(e.subtreeFlags&rc)for(e=e.child;null!==e;)ac(e,t,n),e=e.sibling}function ac(e,t,n){switch(e.tag){case 26:sc(e,t,n),e.flags&rc&&null!==e.memoizedState&&function(e,t,n,r){if("stylesheet"===n.type&&("string"!==typeof r.media||!1!==matchMedia(r.media).matches)&&0===(4&n.state.loading)){if(null===n.instance){var s=qd(r.href),a=t.querySelector(Xd(s));if(a)return null!==(t=a._p)&&"object"===typeof t&&"function"===typeof t.then&&(e.count++,e=ih.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=a,void et(a);a=t.ownerDocument||t,r=Gd(r),(s=Id.get(s))&&Zd(r,s),et(a=a.createElement("link"));var i=a;i._p=new Promise(function(e,t){i.onload=e,i.onerror=t}),hd(a,"link",r),n.instance=a}null===e.stylesheets&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&0===(3&n.state.loading)&&(e.count++,n=ih.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}(n,Yl,e.memoizedState,e.memoizedProps);break;case 5:default:sc(e,t,n);break;case 3:case 4:var r=Yl;Yl=Hd(e.stateNode.containerInfo),sc(e,t,n),Yl=r;break;case 22:null===e.memoizedState&&(null!==(r=e.alternate)&&null!==r.memoizedState?(r=rc,rc=16777216,sc(e,t,n),rc=r):sc(e,t,n))}}function ic(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function oc(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Al=r,uc(r,e)}ic(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)lc(e),e=e.sibling}function lc(e){switch(e.tag){case 0:case 11:case 15:oc(e),2048&e.flags&&yl(9,e,e.return);break;case 3:case 12:default:oc(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,cc(e)):oc(e)}}function cc(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Al=r,uc(r,e)}ic(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:yl(8,t,t.return),cc(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,cc(t));break;default:cc(t)}e=e.sibling}}function uc(e,t){for(;null!==Al;){var n=Al;switch(n.tag){case 0:case 11:case 15:yl(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Bs(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,Al=r;else e:for(n=e;null!==Al;){var s=(r=Al).sibling,a=r.return;if(Ll(r),r===n){Al=null;break e}if(null!==s){s.return=a,Al=s;break e}Al=a}}}var dc={getCacheForType:function(e){var t=Ds(Rs),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return Ds(Rs).controller.signal}},hc="function"===typeof WeakMap?WeakMap:Map,fc=0,mc=null,pc=null,gc=0,yc=0,xc=null,bc=!1,vc=!1,wc=!1,Cc=0,Sc=0,jc=0,kc=0,Nc=0,_c=0,Tc=0,Ec=null,Pc=null,Oc=!1,Dc=0,Ac=0,Mc=1/0,Lc=null,zc=null,Fc=0,Rc=null,Ic=null,Bc=0,Hc=0,Wc=null,Uc=null,Yc=0,Vc=null;function qc(){return 0!==(2&fc)&&0!==gc?gc&-gc:null!==M.T?Wu():Re()}function Xc(){if(0===_c)if(0===(536870912&gc)||ds){var e=je;0===(3932160&(je<<=1))&&(je=262144),_c=e}else _c=536870912;return null!==(e=Da.current)&&(e.flags|=32),_c}function Gc(e,t,n){(e!==mc||2!==yc&&9!==yc)&&null===e.cancelPendingCommit||(tu(e,0),Jc(e,gc,_c,!1)),De(e,n),0!==(2&fc)&&e===mc||(e===mc&&(0===(2&fc)&&(kc|=n),4===Sc&&Jc(e,gc,_c,!1)),Lu(e))}function Kc(e,t,n){if(0!==(6&fc))throw Error(i(327));for(var r=!n&&0===(127&t)&&0===(t&e.expiredLanes)||Te(e,t),s=r?function(e,t){var n=fc;fc|=2;var r=su(),s=au();mc!==e||gc!==t?(Lc=null,Mc=le()+500,tu(e,t)):vc=Te(e,t);e:for(;;)try{if(0!==yc&&null!==pc){t=pc;var a=xc;t:switch(yc){case 1:yc=0,xc=null,hu(e,t,a,1);break;case 2:case 9:if(ta(a)){yc=0,xc=null,du(t);break}t=function(){2!==yc&&9!==yc||mc!==e||(yc=7),Lu(e)},a.then(t,t);break e;case 3:yc=7;break e;case 4:yc=5;break e;case 7:ta(a)?(yc=0,xc=null,du(t)):(yc=0,xc=null,hu(e,t,a,7));break;case 5:var o=null;switch(pc.tag){case 26:o=pc.memoizedState;case 5:case 27:var l=pc;if(o?sh(o):l.stateNode.complete){yc=0,xc=null;var c=l.sibling;if(null!==c)pc=c;else{var u=l.return;null!==u?(pc=u,fu(u)):pc=null}break t}}yc=0,xc=null,hu(e,t,a,5);break;case 6:yc=0,xc=null,hu(e,t,a,6);break;case 8:eu(),Sc=6;break e;default:throw Error(i(462))}}cu();break}catch(d){nu(e,d)}return js=Ss=null,M.H=r,M.A=s,fc=n,null!==pc?0:(mc=null,gc=0,Pr(),Sc)}(e,t):ou(e,t,!0),a=r;;){if(0===s){vc&&!r&&Jc(e,t,0,!1);break}if(n=e.current.alternate,!a||$c(n)){if(2===s){if(a=t,e.errorRecoveryDisabledLanes&a)var o=0;else o=0!==(o=-536870913&e.pendingLanes)?o:536870912&o?536870912:0;if(0!==o){t=o;e:{var l=e;s=Ec;var c=l.current.memoizedState.isDehydrated;if(c&&(tu(l,o).flags|=256),2!==(o=ou(l,o,!1))){if(wc&&!c){l.errorRecoveryDisabledLanes|=a,kc|=a,s=4;break e}a=Pc,Pc=s,null!==a&&(null===Pc?Pc=a:Pc.push.apply(Pc,a))}s=o}if(a=!1,2!==s)continue}}if(1===s){tu(e,0),Jc(e,t,0,!0);break}e:{switch(r=e,a=s){case 0:case 1:throw Error(i(345));case 4:if((4194048&t)!==t)break;case 6:Jc(r,t,_c,!bc);break e;case 2:Pc=null;break;case 3:case 5:break;default:throw Error(i(329))}if((62914560&t)===t&&10<(s=Dc+300-le())){if(Jc(r,t,_c,!bc),0!==_e(r,0,!0))break e;Bc=t,r.timeoutHandle=wd(Qc.bind(null,r,n,Pc,Lc,Oc,t,_c,kc,Tc,bc,a,"Throttled",-0,0),s)}else Qc(r,n,Pc,Lc,Oc,t,_c,kc,Tc,bc,a,null,-0,0)}break}s=ou(e,t,!1),a=!1}Lu(e)}function Qc(e,t,n,r,s,a,i,o,l,c,u,d,h,f){if(e.timeoutHandle=-1,8192&(d=t.subtreeFlags)||16785408===(16785408&d)){ac(t,a,d={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Dt});var m=(62914560&a)===a?Dc-le():(4194048&a)===a?Ac-le():0;if(null!==(m=function(e,t){return e.stylesheets&&0===e.count&&lh(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var r=setTimeout(function(){if(e.stylesheets&&lh(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4+t);0<e.imgBytes&&0===ah&&(ah=62500*function(){if("function"===typeof performance.getEntriesByType){for(var e=0,t=0,n=performance.getEntriesByType("resource"),r=0;r<n.length;r++){var s=n[r],a=s.transferSize,i=s.initiatorType,o=s.duration;if(a&&o&&fd(i)){for(i=0,o=s.responseEnd,r+=1;r<n.length;r++){var l=n[r],c=l.startTime;if(c>o)break;var u=l.transferSize,d=l.initiatorType;u&&fd(d)&&(i+=u*((l=l.responseEnd)<o?1:(o-c)/(l-c)))}if(--r,t+=8*(a+i)/(s.duration/1e3),10<++e)break}}if(0<e)return t/e/1e6}return navigator.connection&&"number"===typeof(e=navigator.connection.downlink)?e:5}());var s=setTimeout(function(){if(e.waitingForImages=!1,0===e.count&&(e.stylesheets&&lh(e,e.stylesheets),e.unsuspend)){var t=e.unsuspend;e.unsuspend=null,t()}},(e.imgBytes>ah?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(r),clearTimeout(s)}}:null}(d,m)))return Bc=a,e.cancelPendingCommit=m(pu.bind(null,e,t,a,n,r,s,i,o,l,u,d,null,h,f)),void Jc(e,a,i,!c)}pu(e,t,a,n,r,s,i,o,l)}function $c(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var s=n[r],a=s.getSnapshot;s=s.value;try{if(!Jn(a(),s))return!1}catch(i){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Jc(e,t,n,r){t&=~Nc,t&=~kc,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var s=t;0<s;){var a=31-ve(s),i=1<<a;r[a]=-1,s&=~i}0!==n&&Ae(e,n,t)}function Zc(){return 0!==(6&fc)||(zu(0,!1),!1)}function eu(){if(null!==pc){if(0===yc)var e=pc.return;else js=Ss=null,ii(e=pc),oa=null,la=0,e=pc;for(;null!==e;)pl(e.alternate,e),e=e.return;pc=null}}function tu(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,Cd(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Bc=0,eu(),mc=e,pc=n=Br(e.current,null),gc=t,yc=0,xc=null,bc=!1,vc=Te(e,t),wc=!1,Tc=_c=Nc=kc=jc=Sc=0,Pc=Ec=null,Oc=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var s=31-ve(r),a=1<<s;t|=e[s],r&=~a}return Cc=t,Pr(),n}function nu(e,t){Wa=null,M.H=po,t===$s||t===Zs?(t=aa(),yc=3):t===Js?(t=aa(),yc=4):yc=t===Do?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,xc=t,null===pc&&(Sc=1,_o(e,Gr(t,e.current)))}function ru(){var e=Da.current;return null===e||((4194048&gc)===gc?null===Aa:((62914560&gc)===gc||0!==(536870912&gc))&&e===Aa)}function su(){var e=M.H;return M.H=po,null===e?po:e}function au(){var e=M.A;return M.A=dc,e}function iu(){Sc=4,bc||(4194048&gc)!==gc&&null!==Da.current||(vc=!0),0===(134217727&jc)&&0===(134217727&kc)||null===mc||Jc(mc,gc,_c,!1)}function ou(e,t,n){var r=fc;fc|=2;var s=su(),a=au();mc===e&&gc===t||(Lc=null,tu(e,t)),t=!1;var i=Sc;e:for(;;)try{if(0!==yc&&null!==pc){var o=pc,l=xc;switch(yc){case 8:eu(),i=6;break e;case 3:case 2:case 9:case 6:null===Da.current&&(t=!0);var c=yc;if(yc=0,xc=null,hu(e,o,l,c),n&&vc){i=0;break e}break;default:c=yc,yc=0,xc=null,hu(e,o,l,c)}}lu(),i=Sc;break}catch(u){nu(e,u)}return t&&e.shellSuspendCounter++,js=Ss=null,fc=r,M.H=s,M.A=a,null===pc&&(mc=null,gc=0,Pr()),i}function lu(){for(;null!==pc;)uu(pc)}function cu(){for(;null!==pc&&!ie();)uu(pc)}function uu(e){var t=il(e.alternate,e,Cc);e.memoizedProps=e.pendingProps,null===t?fu(e):pc=t}function du(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Vo(n,t,t.pendingProps,t.type,void 0,gc);break;case 11:t=Vo(n,t,t.pendingProps,t.type.render,t.ref,gc);break;case 5:ii(t);default:pl(n,t),t=il(n,t=pc=Hr(t,Cc),Cc)}e.memoizedProps=e.pendingProps,null===t?fu(e):pc=t}function hu(e,t,n,r){js=Ss=null,ii(t),oa=null,la=0;var s=t.return;try{if(function(e,t,n,r,s){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&Es(t,n,s,!0),null!==(n=Da.current)){switch(n.tag){case 31:case 13:return null===Aa?iu():null===n.alternate&&0===Sc&&(Sc=3),n.flags&=-257,n.flags|=65536,n.lanes=s,r===ea?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),ju(e,r,s)),!1;case 22:return n.flags|=65536,r===ea?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),ju(e,r,s)),!1}throw Error(i(435,n.tag))}return ju(e,r,s),iu(),!1}if(ds)return null!==(t=Da.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=s,r!==ms&&ws(Gr(e=Error(i(422),{cause:r}),n))):(r!==ms&&ws(Gr(t=Error(i(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,s&=-s,e.lanes|=s,r=Gr(r,n),wa(e,s=Eo(e.stateNode,r,s)),4!==Sc&&(Sc=2)),!1;var a=Error(i(520),{cause:r});if(a=Gr(a,n),null===Ec?Ec=[a]:Ec.push(a),4!==Sc&&(Sc=2),null===t)return!0;r=Gr(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=s&-s,n.lanes|=e,wa(n,e=Eo(n.stateNode,r,e)),!1;case 1:if(t=n.type,a=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==a&&"function"===typeof a.componentDidCatch&&(null===zc||!zc.has(a))))return n.flags|=65536,s&=-s,n.lanes|=s,Oo(s=Po(s),e,n,r),wa(n,s),!1}n=n.return}while(null!==n);return!1}(e,s,t,n,gc))return Sc=1,_o(e,Gr(n,e.current)),void(pc=null)}catch(a){if(null!==s)throw pc=s,a;return Sc=1,_o(e,Gr(n,e.current)),void(pc=null)}32768&t.flags?(ds||1===r?e=!0:vc||0!==(536870912&gc)?e=!1:(bc=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=Da.current)&&13===r.tag&&(r.flags|=16384))),mu(t,e)):fu(t)}function fu(e){var t=e;do{if(0!==(32768&t.flags))return void mu(t,bc);e=t.return;var n=fl(t.alternate,t,Cc);if(null!==n)return void(pc=n);if(null!==(t=t.sibling))return void(pc=t);pc=t=e}while(null!==t);0===Sc&&(Sc=5)}function mu(e,t){do{var n=ml(e.alternate,e);if(null!==n)return n.flags&=32767,void(pc=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(pc=e);pc=e=n}while(null!==e);Sc=6,pc=null}function pu(e,t,n,r,s,a,o,l,c){e.cancelPendingCommit=null;do{vu()}while(0!==Fc);if(0!==(6&fc))throw Error(i(327));if(null!==t){if(t===e.current)throw Error(i(177));if(a=t.lanes|t.childLanes,function(e,t,n,r,s,a){var i=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var o=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=i&~n;0<n;){var u=31-ve(n),d=1<<u;o[u]=0,l[u]=-1;var h=c[u];if(null!==h)for(c[u]=null,u=0;u<h.length;u++){var f=h[u];null!==f&&(f.lane&=-536870913)}n&=~d}0!==r&&Ae(e,r,0),0!==a&&0===s&&0!==e.tag&&(e.suspendedLanes|=a&~(i&~t))}(e,n,a|=Er,o,l,c),e===mc&&(pc=mc=null,gc=0),Ic=t,Rc=e,Bc=n,Hc=a,Wc=s,Uc=r,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,se(he,function(){return wu(),null})):(e.callbackNode=null,e.callbackPriority=0),r=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||r){r=M.T,M.T=null,s=L.p,L.p=2,o=fc,fc|=4;try{!function(e,t){if(e=e.containerInfo,md=bh,sr(e=rr(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var s=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(g){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var m;h!==n||0!==s&&3!==h.nodeType||(l=o+s),h!==a||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(m=h.firstChild);)f=h,h=m;for(;;){if(h===e)break t;if(f===n&&++u===s&&(l=o),f===a&&++d===r&&(c=o),null!==(m=h.nextSibling))break;f=(h=f).parentNode}h=m}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(pd={focusedElem:e,selectionRange:n},bh=!1,Al=t;null!==Al;)if(e=(t=Al).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Al=e;else for(;null!==Al;){switch(a=(t=Al).alternate,e=t.flags,t.tag){case 0:if(0!==(4&e)&&null!==(e=null!==(e=t.updateQueue)?e.events:null))for(n=0;n<e.length;n++)(s=e[n]).ref.impl=s.nextImpl;break;case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==a){e=void 0,n=t,s=a.memoizedProps,a=a.memoizedState,r=n.stateNode;try{var p=So(n.type,s);e=r.getSnapshotBeforeUpdate(p,a),r.__reactInternalSnapshotBeforeUpdate=e}catch(y){Su(n,n.return,y)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))Ed(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Ed(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(i(163))}if(null!==(e=t.sibling)){e.return=t.return,Al=e;break}Al=t.return}}(e,t)}finally{fc=o,L.p=s,M.T=r}}Fc=1,gu(),yu(),xu()}}function gu(){if(1===Fc){Fc=0;var e=Rc,t=Ic,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=M.T,M.T=null;var r=L.p;L.p=2;var s=fc;fc|=4;try{Vl(t,e);var a=pd,i=rr(e.containerInfo),o=a.focusedElem,l=a.selectionRange;if(i!==o&&o&&o.ownerDocument&&nr(o.ownerDocument.documentElement,o)){if(null!==l&&sr(o)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in o)o.selectionStart=c,o.selectionEnd=Math.min(u,o.value.length);else{var d=o.ownerDocument||document,h=d&&d.defaultView||window;if(h.getSelection){var f=h.getSelection(),m=o.textContent.length,p=Math.min(l.start,m),g=void 0===l.end?p:Math.min(l.end,m);!f.extend&&p>g&&(i=g,g=p,p=i);var y=tr(o,p),x=tr(o,g);if(y&&x&&(1!==f.rangeCount||f.anchorNode!==y.node||f.anchorOffset!==y.offset||f.focusNode!==x.node||f.focusOffset!==x.offset)){var b=d.createRange();b.setStart(y.node,y.offset),f.removeAllRanges(),p>g?(f.addRange(b),f.extend(x.node,x.offset)):(b.setEnd(x.node,x.offset),f.addRange(b))}}}}for(d=[],f=o;f=f.parentNode;)1===f.nodeType&&d.push({element:f,left:f.scrollLeft,top:f.scrollTop});for("function"===typeof o.focus&&o.focus(),o=0;o<d.length;o++){var v=d[o];v.element.scrollLeft=v.left,v.element.scrollTop=v.top}}bh=!!md,pd=md=null}finally{fc=s,L.p=r,M.T=n}}e.current=t,Fc=2}}function yu(){if(2===Fc){Fc=0;var e=Rc,t=Ic,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=M.T,M.T=null;var r=L.p;L.p=2;var s=fc;fc|=4;try{Ml(e,t.alternate,t)}finally{fc=s,L.p=r,M.T=n}}Fc=3}}function xu(){if(4===Fc||3===Fc){Fc=0,oe();var e=Rc,t=Ic,n=Bc,r=Uc;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?Fc=5:(Fc=0,Ic=Rc=null,bu(e,e.pendingLanes));var s=e.pendingLanes;if(0===s&&(zc=null),Fe(n),t=t.stateNode,xe&&"function"===typeof xe.onCommitFiberRoot)try{xe.onCommitFiberRoot(ye,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==r){t=M.T,s=L.p,L.p=2,M.T=null;try{for(var a=e.onRecoverableError,i=0;i<r.length;i++){var o=r[i];a(o.value,{componentStack:o.stack})}}finally{M.T=t,L.p=s}}0!==(3&Bc)&&vu(),Lu(e),s=e.pendingLanes,0!==(261930&n)&&0!==(42&s)?e===Vc?Yc++:(Yc=0,Vc=e):Yc=0,zu(0,!1)}}function bu(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Bs(t)))}function vu(){return gu(),yu(),xu(),wu()}function wu(){if(5!==Fc)return!1;var e=Rc,t=Hc;Hc=0;var n=Fe(Bc),r=M.T,s=L.p;try{L.p=32>n?32:n,M.T=null,n=Wc,Wc=null;var a=Rc,o=Bc;if(Fc=0,Ic=Rc=null,Bc=0,0!==(6&fc))throw Error(i(331));var l=fc;if(fc|=4,lc(a.current),ec(a,a.current,o,n),fc=l,zu(0,!1),xe&&"function"===typeof xe.onPostCommitFiberRoot)try{xe.onPostCommitFiberRoot(ye,a)}catch(c){}return!0}finally{L.p=s,M.T=r,bu(e,t)}}function Cu(e,t,n){t=Gr(n,t),null!==(e=ba(e,t=Eo(e.stateNode,t,2),2))&&(De(e,2),Lu(e))}function Su(e,t,n){if(3===e.tag)Cu(e,e,n);else for(;null!==t;){if(3===t.tag){Cu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===zc||!zc.has(r))){e=Gr(n,e),null!==(r=ba(t,n=Po(2),2))&&(Oo(n,r,t,e),De(r,2),Lu(r));break}}t=t.return}}function ju(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new hc;var s=new Set;r.set(t,s)}else void 0===(s=r.get(t))&&(s=new Set,r.set(t,s));s.has(n)||(wc=!0,s.add(n),e=ku.bind(null,e,t,n),t.then(e,e))}function ku(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,mc===e&&(gc&n)===n&&(4===Sc||3===Sc&&(62914560&gc)===gc&&300>le()-Dc?0===(2&fc)&&tu(e,0):Nc|=n,Tc===gc&&(Tc=0)),Lu(e)}function Nu(e,t){0===t&&(t=Pe()),null!==(e=Ar(e,t))&&(De(e,t),Lu(e))}function _u(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Nu(e,n)}function Tu(e,t){var n=0;switch(e.tag){case 31:case 13:var r=e.stateNode,s=e.memoizedState;null!==s&&(n=s.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(i(314))}null!==r&&r.delete(t),Nu(e,n)}var Eu=null,Pu=null,Ou=!1,Du=!1,Au=!1,Mu=0;function Lu(e){e!==Pu&&null===e.next&&(null===Pu?Eu=Pu=e:Pu=Pu.next=e),Du=!0,Ou||(Ou=!0,jd(function(){0!==(6&fc)?se(ue,Fu):Ru()}))}function zu(e,t){if(!Au&&Du){Au=!0;do{for(var n=!1,r=Eu;null!==r;){if(!t)if(0!==e){var s=r.pendingLanes;if(0===s)var a=0;else{var i=r.suspendedLanes,o=r.pingedLanes;a=(1<<31-ve(42|e)+1)-1,a=201326741&(a&=s&~(i&~o))?201326741&a|1:a?2|a:0}0!==a&&(n=!0,Hu(r,a))}else a=gc,0===(3&(a=_e(r,r===mc?a:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||Te(r,a)||(n=!0,Hu(r,a));r=r.next}}while(n);Au=!1}}function Fu(){Ru()}function Ru(){Du=Ou=!1;var e=0;0!==Mu&&function(){var e=window.event;if(e&&"popstate"===e.type)return e!==vd&&(vd=e,!0);return vd=null,!1}()&&(e=Mu);for(var t=le(),n=null,r=Eu;null!==r;){var s=r.next,a=Iu(r,t);0===a?(r.next=null,null===n?Eu=s:n.next=s,null===s&&(Pu=n)):(n=r,(0!==e||0!==(3&a))&&(Du=!0)),r=s}0!==Fc&&5!==Fc||zu(e,!1),0!==Mu&&(Mu=0)}function Iu(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,a=-62914561&e.pendingLanes;0<a;){var i=31-ve(a),o=1<<i,l=s[i];-1===l?0!==(o&n)&&0===(o&r)||(s[i]=Ee(o,t)):l<=t&&(e.expiredLanes|=o),a&=~o}if(n=gc,n=_e(e,e===(t=mc)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===yc||9===yc)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&ae(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||Te(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&ae(r),Fe(n)){case 2:case 8:n=de;break;case 32:default:n=he;break;case 268435456:n=me}return r=Bu.bind(null,e),n=se(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&ae(r),e.callbackPriority=2,e.callbackNode=null,2}function Bu(e,t){if(0!==Fc&&5!==Fc)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(vu()&&e.callbackNode!==n)return null;var r=gc;return 0===(r=_e(e,e===mc?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Kc(e,r,t),Iu(e,le()),null!=e.callbackNode&&e.callbackNode===n?Bu.bind(null,e):null)}function Hu(e,t){if(vu())return null;Kc(e,t,!0)}function Wu(){if(0===Mu){var e=Us;0===e&&(e=Se,0===(261888&(Se<<=1))&&(Se=256)),Mu=e}return Mu}function Uu(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:Ot(""+e)}function Yu(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Vu=0;Vu<jr.length;Vu++){var qu=jr[Vu];kr(qu.toLowerCase(),"on"+(qu[0].toUpperCase()+qu.slice(1)))}kr(gr,"onAnimationEnd"),kr(yr,"onAnimationIteration"),kr(xr,"onAnimationStart"),kr("dblclick","onDoubleClick"),kr("focusin","onFocus"),kr("focusout","onBlur"),kr(br,"onTransitionRun"),kr(vr,"onTransitionStart"),kr(wr,"onTransitionCancel"),kr(Cr,"onTransitionEnd"),st("onMouseEnter",["mouseout","mouseover"]),st("onMouseLeave",["mouseout","mouseover"]),st("onPointerEnter",["pointerout","pointerover"]),st("onPointerLeave",["pointerout","pointerover"]),rt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),rt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),rt("onBeforeInput",["compositionend","keypress","textInput","paste"]),rt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),rt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),rt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Gu=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Xu));function Ku(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var i=r.length-1;0<=i;i--){var o=r[i],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==a&&s.isPropagationStopped())break e;a=o,s.currentTarget=c;try{a(s)}catch(u){Nr(u)}s.currentTarget=null,a=l}else for(i=0;i<r.length;i++){if(l=(o=r[i]).instance,c=o.currentTarget,o=o.listener,l!==a&&s.isPropagationStopped())break e;a=o,s.currentTarget=c;try{a(s)}catch(u){Nr(u)}s.currentTarget=null,a=l}}}}function Qu(e,t){var n=t[Ye];void 0===n&&(n=t[Ye]=new Set);var r=e+"__bubble";n.has(r)||(ed(t,e,2,!1),n.add(r))}function $u(e,t,n){var r=0;t&&(r|=4),ed(n,e,r,t)}var Ju="_reactListening"+Math.random().toString(36).slice(2);function Zu(e){if(!e[Ju]){e[Ju]=!0,tt.forEach(function(t){"selectionchange"!==t&&(Gu.has(t)||$u(t,!1,e),$u(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ju]||(t[Ju]=!0,$u("selectionchange",!1,t))}}function ed(e,t,n,r){switch(Nh(t)){case 2:var s=vh;break;case 8:s=wh;break;default:s=Ch}n=s.bind(null,t,n,e),s=void 0,!Wt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),r?void 0!==s?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):void 0!==s?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function td(e,t,n,r,s){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var i=r.tag;if(3===i||4===i){var o=r.stateNode.containerInfo;if(o===s)break;if(4===i)for(i=r.return;null!==i;){var c=i.tag;if((3===c||4===c)&&i.stateNode.containerInfo===s)return;i=i.return}for(;null!==o;){if(null===(i=Qe(o)))return;if(5===(c=i.tag)||6===c||26===c||27===c){r=a=i;continue e}o=o.parentNode}}r=r.return}It(function(){var r=a,s=Mt(n),i=[];e:{var o=Sr.get(e);if(void 0!==o){var c=nn,u=e;switch(e){case"keypress":if(0===Gt(n))break e;case"keydown":case"keyup":c=xn;break;case"focusin":u="focus",c=cn;break;case"focusout":u="blur",c=cn;break;case"beforeblur":case"afterblur":c=cn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=on;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=ln;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=vn;break;case gr:case yr:case xr:c=un;break;case Cr:c=wn;break;case"scroll":case"scrollend":c=sn;break;case"wheel":c=Cn;break;case"copy":case"cut":case"paste":c=dn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=bn;break;case"toggle":case"beforetoggle":c=Sn}var d=0!==(4&t),h=!d&&("scroll"===e||"scrollend"===e),f=d?null!==o?o+"Capture":null:o;d=[];for(var m,p=r;null!==p;){var g=p;if(m=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===m||null===f||null!=(g=Bt(p,f))&&d.push(nd(p,g,m)),h)break;p=p.return}0<d.length&&(o=new c(o,u,null,n,s),i.push({event:o,listeners:d}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===At||!(u=n.relatedTarget||n.fromElement)||!Qe(u)&&!u[Ue])&&(c||o)&&(o=s.window===s?s:(o=s.ownerDocument)?o.defaultView||o.parentWindow:window,c?(c=r,null!==(u=(u=n.relatedTarget||n.toElement)?Qe(u):null)&&(h=l(u),d=u.tag,u!==h||5!==d&&27!==d&&6!==d)&&(u=null)):(c=null,u=r),c!==u)){if(d=on,g="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(d=bn,g="onPointerLeave",f="onPointerEnter",p="pointer"),h=null==c?o:Je(c),m=null==u?o:Je(u),(o=new d(g,p+"leave",c,n,s)).target=h,o.relatedTarget=m,g=null,Qe(s)===r&&((d=new d(f,p+"enter",u,n,s)).target=m,d.relatedTarget=h,g=d),h=g,c&&u)e:{for(d=sd,p=u,m=0,g=f=c;g;g=d(g))m++;g=0;for(var y=p;y;y=d(y))g++;for(;0<m-g;)f=d(f),m--;for(;0<g-m;)p=d(p),g--;for(;m--;){if(f===p||null!==p&&f===p.alternate){d=f;break e}f=d(f),p=d(p)}d=null}else d=null;null!==c&&ad(i,o,c,d,!1),null!==u&&null!==h&&ad(i,h,u,d,!0)}if("select"===(c=(o=r?Je(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===c&&"file"===o.type)var x=Hn;else if(Ln(o))if(Wn)x=$n;else{x=Kn;var b=Gn}else!(c=o.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==o.type&&"radio"!==o.type?r&&Tt(r.elementType)&&(x=Hn):x=Qn;switch(x&&(x=x(e,r))?zn(i,x,n,s):(b&&b(e,o,r),"focusout"===e&&r&&"number"===o.type&&null!=r.memoizedProps.value&&vt(o,"number",o.value)),b=r?Je(r):window,e){case"focusin":(Ln(b)||"true"===b.contentEditable)&&(ir=b,or=r,lr=null);break;case"focusout":lr=or=ir=null;break;case"mousedown":cr=!0;break;case"contextmenu":case"mouseup":case"dragend":cr=!1,ur(i,n,s);break;case"selectionchange":if(ar)break;case"keydown":case"keyup":ur(i,n,s)}var v;if(kn)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else An?On(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Tn&&"ko"!==n.locale&&(An||"onCompositionStart"!==w?"onCompositionEnd"===w&&An&&(v=Xt()):(Vt="value"in(Yt=s)?Yt.value:Yt.textContent,An=!0)),0<(b=rd(r,w)).length&&(w=new hn(w,e,null,n,s),i.push({event:w,listeners:b}),v?w.data=v:null!==(v=Dn(n))&&(w.data=v))),(v=_n?function(e,t){switch(e){case"compositionend":return Dn(t);case"keypress":return 32!==t.which?null:(Pn=!0,En);case"textInput":return(e=t.data)===En&&Pn?null:e;default:return null}}(e,n):function(e,t){if(An)return"compositionend"===e||!kn&&On(e,t)?(e=Xt(),qt=Vt=Yt=null,An=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Tn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(w=rd(r,"onBeforeInput")).length&&(b=new hn("onBeforeInput","beforeinput",null,n,s),i.push({event:b,listeners:w}),b.data=v)),function(e,t,n,r,s){if("submit"===t&&n&&n.stateNode===s){var a=Uu((s[We]||null).action),i=r.submitter;i&&null!==(t=(t=i[We]||null)?Uu(t.formAction):i.getAttribute("formAction"))&&(a=t,i=null);var o=new nn("action","action",null,r,s);e.push({event:o,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==Mu){var e=i?Yu(s,i):new FormData(s);eo(n,{pending:!0,data:e,method:s.method,action:a},null,e)}}else"function"===typeof a&&(o.preventDefault(),e=i?Yu(s,i):new FormData(s),eo(n,{pending:!0,data:e,method:s.method,action:a},a,e))},currentTarget:s}]})}}(i,e,r,n,s)}Ku(i,t)})}function nd(e,t,n){return{instance:e,listener:t,currentTarget:n}}function rd(e,t){for(var n=t+"Capture",r=[];null!==e;){var s=e,a=s.stateNode;if(5!==(s=s.tag)&&26!==s&&27!==s||null===a||(null!=(s=Bt(e,n))&&r.unshift(nd(e,s,a)),null!=(s=Bt(e,t))&&r.push(nd(e,s,a))),3===e.tag)return r;e=e.return}return[]}function sd(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function ad(e,t,n,r,s){for(var a=t._reactName,i=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(o=o.tag,null!==l&&l===r)break;5!==o&&26!==o&&27!==o||null===c||(l=c,s?null!=(c=Bt(n,a))&&i.unshift(nd(n,c,l)):s||null!=(c=Bt(n,a))&&i.push(nd(n,c,l))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}var id=/\r\n?/g,od=/\u0000|\uFFFD/g;function ld(e){return("string"===typeof e?e:""+e).replace(id,"\n").replace(od,"")}function cd(e,t){return t=ld(t),ld(e)===t}function ud(e,t,n,r,s,a){switch(n){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||jt(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&jt(e,""+r);break;case"className":ct(e,"class",r);break;case"tabIndex":ct(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":ct(e,n,r);break;case"style":_t(e,r,a);break;case"data":if("object"!==t){ct(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Ot(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof a&&("formAction"===n?("input"!==t&&ud(e,t,"name",s.name,s,null),ud(e,t,"formEncType",s.formEncType,s,null),ud(e,t,"formMethod",s.formMethod,s,null),ud(e,t,"formTarget",s.formTarget,s,null)):(ud(e,t,"encType",s.encType,s,null),ud(e,t,"method",s.method,s,null),ud(e,t,"target",s.target,s,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Ot(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=Dt);break;case"onScroll":null!=r&&Qu("scroll",e);break;case"onScrollEnd":null!=r&&Qu("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(i(61));if(null!=(n=r.__html)){if(null!=s.children)throw Error(i(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}n=Ot(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Qu("beforetoggle",e),Qu("toggle",e),lt(e,"popover",r);break;case"xlinkActuate":ut(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":ut(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":ut(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":ut(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":ut(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":ut(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":ut(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":ut(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":ut(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":lt(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&lt(e,n=Et.get(n)||n,r)}}function dd(e,t,n,r,s,a){switch(n){case"style":_t(e,r,a);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(i(61));if(null!=(n=r.__html)){if(null!=s.children)throw Error(i(60));e.innerHTML=n}}break;case"children":"string"===typeof r?jt(e,r):("number"===typeof r||"bigint"===typeof r)&&jt(e,""+r);break;case"onScroll":null!=r&&Qu("scroll",e);break;case"onScrollEnd":null!=r&&Qu("scrollend",e);break;case"onClick":null!=r&&(e.onclick=Dt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:nt.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(s=n.endsWith("Capture"),t=n.slice(2,s?n.length-7:void 0),"function"===typeof(a=null!=(a=e[We]||null)?a[n]:null)&&e.removeEventListener(t,a,s),"function"!==typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):lt(e,n,r):("function"!==typeof a&&null!==a&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,s)))}}function hd(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Qu("error",e),Qu("load",e);var r,s=!1,a=!1;for(r in n)if(n.hasOwnProperty(r)){var o=n[r];if(null!=o)switch(r){case"src":s=!0;break;case"srcSet":a=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:ud(e,t,r,o,n,null)}}return a&&ud(e,t,"srcSet",n.srcSet,n,null),void(s&&ud(e,t,"src",n.src,n,null));case"input":Qu("invalid",e);var l=r=o=a=null,c=null,u=null;for(s in n)if(n.hasOwnProperty(s)){var d=n[s];if(null!=d)switch(s){case"name":a=d;break;case"type":o=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":r=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(i(137,t));break;default:ud(e,t,s,d,n,null)}}return void bt(e,r,l,c,u,o,a,!1);case"select":for(a in Qu("invalid",e),s=o=r=null,n)if(n.hasOwnProperty(a)&&null!=(l=n[a]))switch(a){case"value":r=l;break;case"defaultValue":o=l;break;case"multiple":s=l;default:ud(e,t,a,l,n,null)}return t=r,n=o,e.multiple=!!s,void(null!=t?wt(e,!!s,t,!1):null!=n&&wt(e,!!s,n,!0));case"textarea":for(o in Qu("invalid",e),r=a=s=null,n)if(n.hasOwnProperty(o)&&null!=(l=n[o]))switch(o){case"value":s=l;break;case"defaultValue":a=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(i(91));break;default:ud(e,t,o,l,n,null)}return void St(e,s,a,r);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(s=n[c]))if("selected"===c)e.selected=s&&"function"!==typeof s&&"symbol"!==typeof s;else ud(e,t,c,s,n,null);return;case"dialog":Qu("beforetoggle",e),Qu("toggle",e),Qu("cancel",e),Qu("close",e);break;case"iframe":case"object":Qu("load",e);break;case"video":case"audio":for(s=0;s<Xu.length;s++)Qu(Xu[s],e);break;case"image":Qu("error",e),Qu("load",e);break;case"details":Qu("toggle",e);break;case"embed":case"source":case"link":Qu("error",e),Qu("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(s=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:ud(e,t,u,s,n,null)}return;default:if(Tt(t)){for(d in n)n.hasOwnProperty(d)&&(void 0!==(s=n[d])&&dd(e,t,d,s,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(s=n[l])&&ud(e,t,l,s,n,null))}function fd(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}var md=null,pd=null;function gd(e){return 9===e.nodeType?e:e.ownerDocument}function yd(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function xd(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function bd(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var vd=null;var wd="function"===typeof setTimeout?setTimeout:void 0,Cd="function"===typeof clearTimeout?clearTimeout:void 0,Sd="function"===typeof Promise?Promise:void 0,jd="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof Sd?function(e){return Sd.resolve(null).then(e).catch(kd)}:wd;function kd(e){setTimeout(function(){throw e})}function Nd(e){return"head"===e}function _d(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)||"/&"===n){if(0===r)return e.removeChild(s),void Yh(t);r--}else if("$"===n||"$?"===n||"$~"===n||"$!"===n||"&"===n)r++;else if("html"===n)Rd(e.ownerDocument.documentElement);else if("head"===n){Rd(n=e.ownerDocument.head);for(var a=n.firstChild;a;){var i=a.nextSibling,o=a.nodeName;a[Ge]||"SCRIPT"===o||"STYLE"===o||"LINK"===o&&"stylesheet"===a.rel.toLowerCase()||n.removeChild(a),a=i}}else"body"===n&&Rd(e.ownerDocument.body);n=s}while(n);Yh(t)}function Td(e,t){var n=e;e=0;do{var r=n.nextSibling;if(1===n.nodeType?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",""===n.getAttribute("style")&&n.removeAttribute("style")):3===n.nodeType&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===e)break;e--}else"$"!==n&&"$?"!==n&&"$~"!==n&&"$!"!==n||e++;n=r}while(n)}function Ed(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Ed(n),Ke(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function Pd(e,t){for(;8!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!t)return null;if(null===(e=Ad(e.nextSibling)))return null}return e}function Od(e){return"$?"===e.data||"$~"===e.data}function Dd(e){return"$!"===e.data||"$?"===e.data&&"loading"!==e.ownerDocument.readyState}function Ad(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"$~"===t||"&"===t||"F!"===t||"F"===t)break;if("/$"===t||"/&"===t)return null}}return e}var Md=null;function Ld(e){e=e.nextSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n||"/&"===n){if(0===t)return Ad(e.nextSibling);t--}else"$"!==n&&"$!"!==n&&"$?"!==n&&"$~"!==n&&"&"!==n||t++}e=e.nextSibling}return null}function zd(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n||"$~"===n||"&"===n){if(0===t)return e;t--}else"/$"!==n&&"/&"!==n||t++}e=e.previousSibling}return null}function Fd(e,t,n){switch(t=gd(n),e){case"html":if(!(e=t.documentElement))throw Error(i(452));return e;case"head":if(!(e=t.head))throw Error(i(453));return e;case"body":if(!(e=t.body))throw Error(i(454));return e;default:throw Error(i(451))}}function Rd(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Ke(e)}var Id=new Map,Bd=new Set;function Hd(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Wd=L.d;L.d={f:function(){var e=Wd.f(),t=Zc();return e||t},r:function(e){var t=$e(e);null!==t&&5===t.tag&&"form"===t.type?no(t):Wd.r(e)},D:function(e){Wd.D(e),Yd("dns-prefetch",e,null)},C:function(e,t){Wd.C(e,t),Yd("preconnect",e,t)},L:function(e,t,n){Wd.L(e,t,n);var r=Ud;if(r&&e&&t){var s='link[rel="preload"][as="'+yt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(s+='[imagesrcset="'+yt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(s+='[imagesizes="'+yt(n.imageSizes)+'"]')):s+='[href="'+yt(e)+'"]';var a=s;switch(t){case"style":a=qd(e);break;case"script":a=Kd(e)}Id.has(a)||(e=f({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),Id.set(a,e),null!==r.querySelector(s)||"style"===t&&r.querySelector(Xd(a))||"script"===t&&r.querySelector(Qd(a))||(hd(t=r.createElement("link"),"link",e),et(t),r.head.appendChild(t)))}},m:function(e,t){Wd.m(e,t);var n=Ud;if(n&&e){var r=t&&"string"===typeof t.as?t.as:"script",s='link[rel="modulepreload"][as="'+yt(r)+'"][href="'+yt(e)+'"]',a=s;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":a=Kd(e)}if(!Id.has(a)&&(e=f({rel:"modulepreload",href:e},t),Id.set(a,e),null===n.querySelector(s))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Qd(a)))return}hd(r=n.createElement("link"),"link",e),et(r),n.head.appendChild(r)}}},X:function(e,t){Wd.X(e,t);var n=Ud;if(n&&e){var r=Ze(n).hoistableScripts,s=Kd(e),a=r.get(s);a||((a=n.querySelector(Qd(s)))||(e=f({src:e,async:!0},t),(t=Id.get(s))&&eh(e,t),et(a=n.createElement("script")),hd(a,"link",e),n.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},r.set(s,a))}},S:function(e,t,n){Wd.S(e,t,n);var r=Ud;if(r&&e){var s=Ze(r).hoistableStyles,a=qd(e);t=t||"default";var i=s.get(a);if(!i){var o={loading:0,preload:null};if(i=r.querySelector(Xd(a)))o.loading=5;else{e=f({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Id.get(a))&&Zd(e,n);var l=i=r.createElement("link");et(l),hd(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){o.loading|=1}),l.addEventListener("error",function(){o.loading|=2}),o.loading|=4,Jd(i,t,r)}i={type:"stylesheet",instance:i,count:1,state:o},s.set(a,i)}}},M:function(e,t){Wd.M(e,t);var n=Ud;if(n&&e){var r=Ze(n).hoistableScripts,s=Kd(e),a=r.get(s);a||((a=n.querySelector(Qd(s)))||(e=f({src:e,async:!0,type:"module"},t),(t=Id.get(s))&&eh(e,t),et(a=n.createElement("script")),hd(a,"link",e),n.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},r.set(s,a))}}};var Ud="undefined"===typeof document?null:document;function Yd(e,t,n){var r=Ud;if(r&&"string"===typeof t&&t){var s=yt(t);s='link[rel="'+e+'"][href="'+s+'"]',"string"===typeof n&&(s+='[crossorigin="'+n+'"]'),Bd.has(s)||(Bd.add(s),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(s)&&(hd(t=r.createElement("link"),"link",e),et(t),r.head.appendChild(t)))}}function Vd(e,t,n,r){var s,a,o,l,c=(c=q.current)?Hd(c):null;if(!c)throw Error(i(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=qd(n.href),(r=(n=Ze(c).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=qd(n.href);var u=Ze(c).hoistableStyles,d=u.get(e);if(d||(c=c.ownerDocument||c,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,d),(u=c.querySelector(Xd(e)))&&!u._p&&(d.instance=u,d.state.loading=5),Id.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Id.set(e,n),u||(s=c,a=e,o=n,l=d.state,s.querySelector('link[rel="preload"][as="style"]['+a+"]")?l.loading=1:(a=s.createElement("link"),l.preload=a,a.addEventListener("load",function(){return l.loading|=1}),a.addEventListener("error",function(){return l.loading|=2}),hd(a,"link",o),et(a),s.head.appendChild(a))))),t&&null===r)throw Error(i(528,""));return d}if(t&&null!==r)throw Error(i(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Kd(n),(r=(n=Ze(c).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,e))}}function qd(e){return'href="'+yt(e)+'"'}function Xd(e){return'link[rel="stylesheet"]['+e+"]"}function Gd(e){return f({},e,{"data-precedence":e.precedence,precedence:null})}function Kd(e){return'[src="'+yt(e)+'"]'}function Qd(e){return"script[async]"+e}function $d(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+yt(n.href)+'"]');if(r)return t.instance=r,et(r),r;var s=f({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return et(r=(e.ownerDocument||e).createElement("style")),hd(r,"style",s),Jd(r,n.precedence,e),t.instance=r;case"stylesheet":s=qd(n.href);var a=e.querySelector(Xd(s));if(a)return t.state.loading|=4,t.instance=a,et(a),a;r=Gd(n),(s=Id.get(s))&&Zd(r,s),et(a=(e.ownerDocument||e).createElement("link"));var o=a;return o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),hd(a,"link",r),t.state.loading|=4,Jd(a,n.precedence,e),t.instance=a;case"script":return a=Kd(n.src),(s=e.querySelector(Qd(a)))?(t.instance=s,et(s),s):(r=n,(s=Id.get(a))&&eh(r=f({},n),s),et(s=(e=e.ownerDocument||e).createElement("script")),hd(s,"link",r),e.head.appendChild(s),t.instance=s);case"void":return null;default:throw Error(i(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Jd(r,n.precedence,e));return t.instance}function Jd(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=r.length?r[r.length-1]:null,a=s,i=0;i<r.length;i++){var o=r[i];if(o.dataset.precedence===t)a=o;else if(a!==s)break}a?a.parentNode.insertBefore(e,a.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Zd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function eh(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var th=null;function nh(e,t,n){if(null===th){var r=new Map,s=th=new Map;s.set(n,r)}else(r=(s=th).get(n))||(r=new Map,s.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),s=0;s<n.length;s++){var a=n[s];if(!(a[Ge]||a[He]||"link"===e&&"stylesheet"===a.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==a.namespaceURI){var i=a.getAttribute(t)||"";i=e+i;var o=r.get(i);o?o.push(a):r.set(i,[a])}}return r}function rh(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function sh(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var ah=0;function ih(){if(this.count--,0===this.count&&(0===this.imgCount||!this.waitingForImages))if(this.stylesheets)lh(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var oh=null;function lh(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,oh=new Map,t.forEach(ch,e),oh=null,ih.call(e))}function ch(e,t){if(!(4&t.state.loading)){var n=oh.get(e);if(n)var r=n.get(null);else{n=new Map,oh.set(e,n);for(var s=e.querySelectorAll("link[data-precedence],style[data-precedence]"),a=0;a<s.length;a++){var i=s[a];"LINK"!==i.nodeName&&"not all"===i.getAttribute("media")||(n.set(i.dataset.precedence,i),r=i)}r&&n.set(null,r)}i=(s=t.instance).getAttribute("data-precedence"),(a=n.get(i)||r)===r&&n.set(null,s),n.set(i,s),this.count++,r=ih.bind(this),s.addEventListener("load",r),s.addEventListener("error",r),a?a.parentNode.insertBefore(s,a.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(s,e.firstChild),t.state.loading|=4}}var uh={$$typeof:w,Provider:null,Consumer:null,_currentValue:z,_currentValue2:z,_threadCount:0};function dh(e,t,n,r,s,a,i,o,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Oe(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Oe(0),this.hiddenUpdates=Oe(null),this.identifierPrefix=r,this.onUncaughtError=s,this.onCaughtError=a,this.onRecoverableError=i,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function hh(e,t,n,r,s,a,i,o,l,c,u,d){return e=new dh(e,t,n,i,l,c,u,d,o),t=1,!0===a&&(t|=24),a=Rr(3,null,null,t),e.current=a,a.stateNode=e,(t=Is()).refCount++,e.pooledCache=t,t.refCount++,a.memoizedState={element:r,isDehydrated:n,cache:t},ga(a),e}function fh(e){return e?e=zr:zr}function mh(e,t,n,r,s,a){s=fh(s),null===r.context?r.context=s:r.pendingContext=s,(r=xa(t)).payload={element:n},null!==(a=void 0===a?null:a)&&(r.callback=a),null!==(n=ba(e,r,t))&&(Gc(n,0,t),va(n,e,t))}function ph(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function gh(e,t){ph(e,t),(e=e.alternate)&&ph(e,t)}function yh(e){if(13===e.tag||31===e.tag){var t=Ar(e,67108864);null!==t&&Gc(t,0,67108864),gh(e,67108864)}}function xh(e){if(13===e.tag||31===e.tag){var t=qc(),n=Ar(e,t=ze(t));null!==n&&Gc(n,0,t),gh(e,t)}}var bh=!0;function vh(e,t,n,r){var s=M.T;M.T=null;var a=L.p;try{L.p=2,Ch(e,t,n,r)}finally{L.p=a,M.T=s}}function wh(e,t,n,r){var s=M.T;M.T=null;var a=L.p;try{L.p=8,Ch(e,t,n,r)}finally{L.p=a,M.T=s}}function Ch(e,t,n,r){if(bh){var s=Sh(r);if(null===s)td(e,t,r,jh,n),Lh(e,r);else if(function(e,t,n,r,s){switch(t){case"focusin":return Th=zh(Th,e,t,n,r,s),!0;case"dragenter":return Eh=zh(Eh,e,t,n,r,s),!0;case"mouseover":return Ph=zh(Ph,e,t,n,r,s),!0;case"pointerover":var a=s.pointerId;return Oh.set(a,zh(Oh.get(a)||null,e,t,n,r,s)),!0;case"gotpointercapture":return a=s.pointerId,Dh.set(a,zh(Dh.get(a)||null,e,t,n,r,s)),!0}return!1}(s,e,t,n,r))r.stopPropagation();else if(Lh(e,r),4&t&&-1<Mh.indexOf(e)){for(;null!==s;){var a=$e(s);if(null!==a)switch(a.tag){case 3:if((a=a.stateNode).current.memoizedState.isDehydrated){var i=Ne(a.pendingLanes);if(0!==i){var o=a;for(o.pendingLanes|=2,o.entangledLanes|=2;i;){var l=1<<31-ve(i);o.entanglements[1]|=l,i&=~l}Lu(a),0===(6&fc)&&(Mc=le()+500,zu(0,!1))}}break;case 31:case 13:null!==(o=Ar(a,2))&&Gc(o,0,2),Zc(),gh(a,2)}if(null===(a=Sh(r))&&td(e,t,r,jh,n),a===s)break;s=a}null!==s&&r.stopPropagation()}else td(e,t,r,null,n)}}function Sh(e){return kh(e=Mt(e))}var jh=null;function kh(e){if(jh=null,null!==(e=Qe(e))){var t=l(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=c(t)))return e;e=null}else if(31===n){if(null!==(e=u(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return jh=e,null}function Nh(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ce()){case ue:return 2;case de:return 8;case he:case fe:return 32;case me:return 268435456;default:return 32}default:return 32}}var _h=!1,Th=null,Eh=null,Ph=null,Oh=new Map,Dh=new Map,Ah=[],Mh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Lh(e,t){switch(e){case"focusin":case"focusout":Th=null;break;case"dragenter":case"dragleave":Eh=null;break;case"mouseover":case"mouseout":Ph=null;break;case"pointerover":case"pointerout":Oh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dh.delete(t.pointerId)}}function zh(e,t,n,r,s,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[s]},null!==t&&(null!==(t=$e(t))&&yh(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function Fh(e){var t=Qe(e.target);if(null!==t){var n=l(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=c(n)))return e.blockedOn=t,void Ie(e.priority,function(){xh(n)})}else if(31===t){if(null!==(t=u(n)))return e.blockedOn=t,void Ie(e.priority,function(){xh(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Rh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Sh(e.nativeEvent);if(null!==n)return null!==(t=$e(n))&&yh(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);At=r,n.target.dispatchEvent(r),At=null,t.shift()}return!0}function Ih(e,t,n){Rh(e)&&n.delete(t)}function Bh(){_h=!1,null!==Th&&Rh(Th)&&(Th=null),null!==Eh&&Rh(Eh)&&(Eh=null),null!==Ph&&Rh(Ph)&&(Ph=null),Oh.forEach(Ih),Dh.forEach(Ih)}function Hh(e,t){e.blockedOn===t&&(e.blockedOn=null,_h||(_h=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Bh)))}var Wh=null;function Uh(e){Wh!==e&&(Wh=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Wh===e&&(Wh=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],s=e[t+2];if("function"!==typeof r){if(null===kh(r||n))continue;break}var a=$e(n);null!==a&&(e.splice(t,3),t-=3,eo(a,{pending:!0,data:s,method:n.method,action:r},r,s))}}))}function Yh(e){function t(t){return Hh(t,e)}null!==Th&&Hh(Th,e),null!==Eh&&Hh(Eh,e),null!==Ph&&Hh(Ph,e),Oh.forEach(t),Dh.forEach(t);for(var n=0;n<Ah.length;n++){var r=Ah[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<Ah.length&&null===(n=Ah[0]).blockedOn;)Fh(n),null===n.blockedOn&&Ah.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var s=n[r],a=n[r+1],i=s[We]||null;if("function"===typeof a)i||Uh(n);else if(i){var o=null;if(a&&a.hasAttribute("formAction")){if(s=a,i=a[We]||null)o=i.formAction;else if(null!==kh(s))continue}else o=i.action;"function"===typeof o?n[r+1]=o:(n.splice(r,3),r-=3),Uh(n)}}}function Vh(){function e(e){e.canIntercept&&"react-transition"===e.info&&e.intercept({handler:function(){return new Promise(function(e){return s=e})},focusReset:"manual",scroll:"manual"})}function t(){null!==s&&(s(),s=null),r||setTimeout(n,20)}function n(){if(!r&&!navigation.transition){var e=navigation.currentEntry;e&&null!=e.url&&navigation.navigate(e.url,{state:e.getState(),info:"react-transition",history:"replace"})}}if("object"===typeof navigation){var r=!1,s=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){r=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),null!==s&&(s(),s=null)}}}function qh(e){this._internalRoot=e}function Xh(e){this._internalRoot=e}Xh.prototype.render=qh.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));mh(t.current,qc(),e,t,null,null)},Xh.prototype.unmount=qh.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;mh(e.current,2,null,e,null,null),Zc(),t[Ue]=null}},Xh.prototype.unstable_scheduleHydration=function(e){if(e){var t=Re();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ah.length&&0!==t&&t<Ah[n].priority;n++);Ah.splice(n,0,e),0===n&&Fh(e)}};var Gh=s.version;if("19.2.3"!==Gh)throw Error(i(527,Gh,"19.2.3"));L.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(null===s)break;var a=s.alternate;if(null===a){if(null!==(r=s.return)){n=r;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return d(s),e;if(a===r)return d(s),t;a=a.sibling}throw Error(i(188))}if(n.return!==r.return)n=s,r=a;else{for(var o=!1,c=s.child;c;){if(c===n){o=!0,n=s,r=a;break}if(c===r){o=!0,r=s,n=a;break}c=c.sibling}if(!o){for(c=a.child;c;){if(c===n){o=!0,n=a,r=s;break}if(c===r){o=!0,r=a,n=s;break}c=c.sibling}if(!o)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?h(e):null)?null:e.stateNode};var Kh={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:M,reconcilerVersion:"19.2.3"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Qh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qh.isDisabled&&Qh.supportsFiber)try{ye=Qh.inject(Kh),xe=Qh}catch(Jh){}}t.createRoot=function(e,t){if(!o(e))throw Error(i(299));var n=!1,r="",s=jo,a=ko,l=No;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(s=t.onUncaughtError),void 0!==t.onCaughtError&&(a=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError)),t=hh(e,1,!1,null,0,n,r,null,s,a,l,Vh),e[Ue]=t.current,Zu(e),new qh(t)},t.hydrateRoot=function(e,t,n){if(!o(e))throw Error(i(299));var r=!1,s="",a=jo,l=ko,c=No,u=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onUncaughtError&&(a=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.formState&&(u=n.formState)),(t=hh(e,1,!0,t,0,r,s,u,a,l,c,Vh)).context=fh(null),n=t.current,(s=xa(r=ze(r=qc()))).callback=null,ba(n,s,r),n=r,t.current.lanes=n,De(t,n),Lu(t),e[Ue]=t.current,Zu(e),new Xh(t)},t.version="19.2.3"},43(e,t,n){"use strict";e.exports=n(288)},173(e,t,n){e.exports=n(497)()},218(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},288(e,t){"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.for("react.activity"),m=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,y={};function x(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}function b(){}function v(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}x.prototype.isReactComponent={},x.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},x.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=x.prototype;var w=v.prototype=new b;w.constructor=v,g(w,x.prototype),w.isPureReactComponent=!0;var C=Array.isArray;function S(){}var j={H:null,A:null,T:null,S:null},k=Object.prototype.hasOwnProperty;function N(e,t,r){var s=r.ref;return{$$typeof:n,type:e,key:t,ref:void 0!==s?s:null,props:r}}function _(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function E(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function P(e,t,s,a,i){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l,c,u=!1;if(null===e)u=!0;else switch(o){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0;break;case h:return P((u=e._init)(e._payload),t,s,a,i)}}if(u)return i=i(e),u=""===a?"."+E(e,0):a,C(i)?(s="",null!=u&&(s=u.replace(T,"$&/")+"/"),P(i,t,s,"",function(e){return e})):null!=i&&(_(i)&&(l=i,c=s+(null==i.key||e&&e.key===i.key?"":(""+i.key).replace(T,"$&/")+"/")+u,i=N(l.type,c,l.props)),t.push(i)),1;u=0;var d,f=""===a?".":a+":";if(C(e))for(var p=0;p<e.length;p++)u+=P(a=e[p],t,s,o=f+E(a,p),i);else if("function"===typeof(p=null===(d=e)||"object"!==typeof d?null:"function"===typeof(d=m&&d[m]||d["@@iterator"])?d:null))for(e=p.call(e),p=0;!(a=e.next()).done;)u+=P(a=a.value,t,s,o=f+E(a,p++),i);else if("object"===o){if("function"===typeof e.then)return P(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(S,S):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,s,a,i);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function O(e,t,n){if(null==e)return e;var r=[],s=0;return P(e,r,"","",function(e){return t.call(n,e,s++)}),r}function D(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var A="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},M={map:O,forEach:function(e,t,n){O(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return O(e,function(){t++}),t},toArray:function(e){return O(e,function(e){return e})||[]},only:function(e){if(!_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};t.Activity=f,t.Children=M,t.Component=x,t.Fragment=s,t.Profiler=i,t.PureComponent=v,t.StrictMode=a,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=j,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return j.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cacheSignal=function(){return null},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=g({},e.props),s=e.key;if(null!=t)for(a in void 0!==t.key&&(s=""+t.key),t)!k.call(t,a)||"key"===a||"__self"===a||"__source"===a||"ref"===a&&void 0===t.ref||(r[a]=t[a]);var a=arguments.length-2;if(1===a)r.children=n;else if(1<a){for(var i=Array(a),o=0;o<a;o++)i[o]=arguments[o+2];r.children=i}return N(e.type,s,r)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:o,_context:e},e},t.createElement=function(e,t,n){var r,s={},a=null;if(null!=t)for(r in void 0!==t.key&&(a=""+t.key),t)k.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(s[r]=t[r]);var i=arguments.length-2;if(1===i)s.children=n;else if(1<i){for(var o=Array(i),l=0;l<i;l++)o[l]=arguments[l+2];s.children=o}if(e&&e.defaultProps)for(r in i=e.defaultProps)void 0===s[r]&&(s[r]=i[r]);return N(e,a,s)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=_,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:D}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=j.T,n={};j.T=n;try{var r=e(),s=j.S;null!==s&&s(n,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(S,A)}catch(a){A(a)}finally{null!==t&&null!==n.types&&(t.types=n.types),j.T=t}},t.unstable_useCacheRefresh=function(){return j.H.useCacheRefresh()},t.use=function(e){return j.H.use(e)},t.useActionState=function(e,t,n){return j.H.useActionState(e,t,n)},t.useCallback=function(e,t){return j.H.useCallback(e,t)},t.useContext=function(e){return j.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return j.H.useDeferredValue(e,t)},t.useEffect=function(e,t){return j.H.useEffect(e,t)},t.useEffectEvent=function(e){return j.H.useEffectEvent(e)},t.useId=function(){return j.H.useId()},t.useImperativeHandle=function(e,t,n){return j.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return j.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return j.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return j.H.useMemo(e,t)},t.useOptimistic=function(e,t){return j.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return j.H.useReducer(e,t,n)},t.useRef=function(e){return j.H.useRef(e)},t.useState=function(e){return j.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return j.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return j.H.useTransition()},t.version="19.2.3"},391(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4)},497(e,t,n){"use strict";var r=n(218);function s(){}function a(){}a.resetWarningCache=s,e.exports=function(){function e(e,t,n,s,a,i){if(i!==r){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:s};return n.PropTypes=n,n}},579(e,t,n){"use strict";e.exports=n(799)},672(e,t,n){"use strict";var r=n(43);function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var i={d:{f:a,r:function(){throw Error(s(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},o=Symbol.for("react.portal");var l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(s(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:o,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=i.p;try{if(l.T=null,i.p=2,e)return e()}finally{l.T=t,i.p=n,i.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,i.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&i.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin),s="string"===typeof t.integrity?t.integrity:void 0,a="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?i.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:s,fetchPriority:a}):"script"===n&&i.d.X(e,{crossOrigin:r,integrity:s,fetchPriority:a,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);i.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&i.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin);i.d.L(e,n,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);i.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else i.d.m(e)},t.requestFormReset=function(e){i.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.2.3"},799(e,t){"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function s(e,t,r){var s=null;if(void 0!==r&&(s=""+r),void 0!==t.key&&(s=""+t.key),"key"in t)for(var a in r={},t)"key"!==a&&(r[a]=t[a]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:s,ref:void 0!==t?t:null,props:r}}t.Fragment=r,t.jsx=s,t.jsxs=s},853(e,t,n){"use strict";e.exports=n(896)},896(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,s=e[r];if(!(0<a(s,t)))break e;e[r]=t,e[n]=s,n=r}}function r(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,s=e.length,i=s>>>1;r<i;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>a(l,n))c<s&&0>a(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<s&&0>a(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,m=!1,p=!1,g=!1,y=!1,x="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,v="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)s(u);else{if(!(t.startTime<=e))break;s(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function C(e){if(g=!1,w(e),!p)if(null!==r(c))p=!0,j||(j=!0,S());else{var t=r(u);null!==t&&D(C,t.startTime-e)}}var S,j=!1,k=-1,N=5,_=-1;function T(){return!!y||!(t.unstable_now()-_<N)}function E(){if(y=!1,j){var e=t.unstable_now();_=e;var n=!0;try{e:{p=!1,g&&(g=!1,b(k),k=-1),m=!0;var a=f;try{t:{for(w(e),h=r(c);null!==h&&!(h.expirationTime>e&&T());){var i=h.callback;if("function"===typeof i){h.callback=null,f=h.priorityLevel;var o=i(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof o){h.callback=o,w(e),n=!0;break t}h===r(c)&&s(c),w(e)}else s(c);h=r(c)}if(null!==h)n=!0;else{var l=r(u);null!==l&&D(C,l.startTime-e),n=!1}}break e}finally{h=null,f=a,m=!1}n=void 0}}finally{n?S():j=!1}}}if("function"===typeof v)S=function(){v(E)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,O=P.port2;P.port1.onmessage=E,S=function(){O.postMessage(null)}}else S=function(){x(E,0)};function D(e,n){k=x(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_requestPaint=function(){y=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,s,a){var i=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?i+a:i:a=i,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:s,priorityLevel:e,startTime:a,expirationTime:o=a+o,sortIndex:-1},a>i?(e.sortIndex=a,n(u,e),null===r(c)&&e===r(u)&&(g?(b(k),k=-1):g=!0,D(C,a-i))):(e.sortIndex=o,n(c,e),p||m||(p=!0,j||(j=!0,S()))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},900(e){"use strict";e.exports=JSON.parse('{"description":"The iconic font, CSS, and SVG framework","keywords":["font","awesome","fontawesome","icon","svg","bootstrap"],"homepage":"https://fontawesome.com","bugs":{"url":"https://github.com/FortAwesome/Font-Awesome/issues"},"author":"The Font Awesome Team (https://github.com/orgs/FortAwesome/people)","repository":{"type":"git","url":"https://github.com/FortAwesome/Font-Awesome"},"engines":{"node":">=6"},"dependencies":{"@fortawesome/fontawesome-common-types":"6.7.2"},"version":"6.7.2","name":"@fortawesome/fontawesome-svg-core","main":"index.js","module":"index.mjs","jsnext:main":"index.mjs","style":"styles.css","license":"MIT","types":"./index.d.ts","exports":{".":{"types":"./index.d.ts","module":"./index.mjs","import":"./index.mjs","require":"./index.js","style":"./styles.css","default":"./index.js"},"./index":{"types":"./index.d.ts","module":"./index.mjs","import":"./index.mjs","require":"./index.js","default":"./index.js"},"./index.js":{"types":"./index.d.ts","module":"./index.mjs","import":"./index.mjs","require":"./index.js","default":"./index.js"},"./plugins":{"types":"./index.d.ts","module":"./plugins.mjs","import":"./plugins.mjs","default":"./plugins.mjs"},"./import.macro":"./import.macro.js","./import.macro.js":"./import.macro.js","./styles":"./styles.css","./styles.css":"./styles.css","./package.json":"./package.json"},"sideEffects":["./index.js","./index.mjs","./styles.css"]}')},950(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(672)}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,s){if(1&s&&(r=this(r)),8&s)return r;if("object"===typeof r&&r){if(4&s&&r.__esModule)return r;if(16&s&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var i={};e=e||[null,t({}),t([]),t(t)];for(var o=2&s&&r;("object"==typeof o||"function"==typeof o)&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach(e=>i[e]=()=>r[e]);return i.default=()=>r,n.d(a,i),a}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,r)=>(n.f[r](e,t),t),[])),n.u=e=>"static/js/"+e+".77fdc491.chunk.js",n.miniCssF=e=>{},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="thehappycase:";n.l=(r,s,a,i)=>{if(e[r])e[r].push(s);else{var o,l;if(void 0!==a)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+a){o=d;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+a),o.src=r),e[r]=[s];var h=(t,n)=>{o.onerror=o.onload=null,clearTimeout(f);var s=e[r];if(delete e[r],o.parentNode&&o.parentNode.removeChild(o),s&&s.forEach(e=>e(n)),t)return t(n)},f=setTimeout(h.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=h.bind(null,o.onerror),o.onload=h.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="./",(()=>{var e={792:0};n.f.j=(t,r)=>{var s=n.o(e,t)?e[t]:void 0;if(0!==s)if(s)r.push(s[2]);else{var a=new Promise((n,r)=>s=e[t]=[n,r]);r.push(s[2]=a);var i=n.p+n.u(t),o=new Error;n.l(i,r=>{if(n.o(e,t)&&(0!==(s=e[t])&&(e[t]=void 0),s)){var a=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.src;o.message="Loading chunk "+t+" failed.\n("+a+": "+i+")",o.name="ChunkLoadError",o.type=a,o.request=i,s[1](o)}},"chunk-"+t,t)}};var t=(t,r)=>{var s,a,[i,o,l]=r,c=0;if(i.some(t=>0!==e[t])){for(s in o)n.o(o,s)&&(n.m[s]=o[s]);if(l)l(n)}for(t&&t(r);c<i.length;c++)a=i[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkthehappycase=self.webpackChunkthehappycase||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e=n(43),t=n.t(e,2),r=n(391);function s(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function i(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}function o(e,t,n){return(t=i(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){o(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const u=["sri"],d=["page"],h=["page","matches"],f=["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition","unstable_defaultShouldRevalidate"],m=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],p=["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition","unstable_defaultShouldRevalidate"];var g="popstate";function y(){return j(function(e,t){let{pathname:n,search:r,hash:s}=e.location;return w("",{pathname:n,search:r,hash:s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:C(t)},null,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function x(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function b(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(oo){}}}function v(e,t){return{usr:e.state,key:e.key,idx:t}}function w(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return c(c({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?S(t):t),{},{state:n,key:t&&t.key||r||Math.random().toString(36).substring(2,10)})}function C(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function S(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function j(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:s=document.defaultView,v5Compat:a=!1}=r,i=s.history,o="POP",l=null,u=d();function d(){return(i.state||{idx:null}).idx}function h(){o="POP";let e=d(),t=null==e?null:e-u;u=e,l&&l({action:o,location:m.location,delta:t})}function f(e){return k(e)}null==u&&(u=0,i.replaceState(c(c({},i.state),{},{idx:u}),""));let m={get action(){return o},get location(){return e(s,i)},listen(e){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(g,h),l=e,()=>{s.removeEventListener(g,h),l=null}},createHref:e=>t(s,e),createURL:f,encodeLocation(e){let t=f(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){o="PUSH";let r=w(m.location,e,t);n&&n(r,e),u=d()+1;let c=v(r,u),h=m.createHref(r);try{i.pushState(c,"",h)}catch(f){if(f instanceof DOMException&&"DataCloneError"===f.name)throw f;s.location.assign(h)}a&&l&&l({action:o,location:m.location,delta:1})},replace:function(e,t){o="REPLACE";let r=w(m.location,e,t);n&&n(r,e),u=d();let s=v(r,u),c=m.createHref(r);i.replaceState(s,"",c),a&&l&&l({action:o,location:m.location,delta:0})},go:e=>i.go(e)};return m}function k(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="http://localhost";"undefined"!==typeof window&&(n="null"!==window.location.origin?window.location.origin:window.location.href),x(n,"No window.location.(origin|href) available to create URL");let r="string"===typeof e?e:C(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}new WeakMap;function N(e,t){return _(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function _(e,t,n,r){let s=W(("string"===typeof t?S(t):t).pathname||"/",n);if(null==s)return null;let a=T(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(a);let i=null;for(let o=0;null==i&&o<a.length;++o){let e=H(s);i=R(a[o],e,r)}return i}function T(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=function(e,a){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s,o=arguments.length>3?arguments[3]:void 0,l={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:a,route:e};if(l.relativePath.startsWith("/")){if(!l.relativePath.startsWith(r)&&i)return;x(l.relativePath.startsWith(r),'Absolute route path "'.concat(l.relativePath,'" nested under path "').concat(r,'" is not valid. An absolute child route path must start with the combined path of all its parent routes.')),l.relativePath=l.relativePath.slice(r.length)}let c=Q([r,l.relativePath]),u=n.concat(l);e.children&&e.children.length>0&&(x(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'.concat(c,'".')),T(e.children,t,u,c,i)),(null!=e.path||e.index)&&t.push({path:c,score:F(c,e.index),routesMeta:u})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!==(n=e.path)&&void 0!==n&&n.includes("?"))for(let r of E(e.path))a(e,t,!0,r);else a(e,t)}),t}function E(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,s=n.endsWith("?"),a=n.replace(/\?$/,"");if(0===r.length)return s?[a,""]:[a];let i=E(r.join("/")),o=[];return o.push(...i.map(e=>""===e?a:[a,e].join("/"))),s&&o.push(...i),o.map(t=>e.startsWith("/")&&""===t?"/":t)}var P=/^:[\w-]+$/,O=3,D=2,A=1,M=10,L=-2,z=e=>"*"===e;function F(e,t){let n=e.split("/"),r=n.length;return n.some(z)&&(r+=L),t&&(r+=D),n.filter(e=>!z(e)).reduce((e,t)=>e+(P.test(t)?O:""===t?A:M),r)}function R(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:r}=e,s={},a="/",i=[];for(let o=0;o<r.length;++o){let e=r[o],l=o===r.length-1,c="/"===a?t:t.slice(a.length)||"/",u=I({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=I({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(s,u.params),i.push({params:s,pathname:Q([a,u.pathname]),pathnameBase:$(Q([a,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(a=Q([a,u.pathnameBase]))}return i}function I(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=B(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let a=s[0],i=a.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:r.reduce((e,t,n)=>{let{paramName:r,isOptional:s}=t;if("*"===r){let e=o[n]||"";i=a.slice(0,a.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[r]=s&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:a,pathnameBase:i,pattern:e}}function B(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];b("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'.concat(e,'" will be treated as if it were "').concat(e.replace(/\*$/,"/*"),'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "').concat(e.replace(/\*$/,"/*"),'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),s+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":""!==e&&"/"!==e&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function H(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return b(!1,'The URL path "'.concat(e,'" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (').concat(t,").")),e}}function W(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}var U=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Y=e=>U.test(e);function V(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}function q(e,t,n,r){return"Cannot include a '".concat(e,"' character in a manually specified `to.").concat(t,"` field [").concat(JSON.stringify(r),"].  Please separate it out to the `to.").concat(n,'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.')}function X(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function G(e){let t=X(e);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function K(e,t,n){let r,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?r=S(e):(r=c({},e),x(!r.pathname||!r.pathname.includes("?"),q("?","pathname","search",r)),x(!r.pathname||!r.pathname.includes("#"),q("#","pathname","hash",r)),x(!r.search||!r.search.includes("#"),q("#","search","hash",r)));let a,i=""===e||""===r.pathname,o=i?"/":r.pathname;if(null==o)a=n;else{let e=t.length-1;if(!s&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;r.pathname=t.join("/")}a=e>=0?t[e]:"/"}let l=function(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:r,search:s="",hash:a=""}="string"===typeof e?S(e):e;if(r)if(Y(r))t=r;else{if(r.includes("//")){let e=r;r=r.replace(/\/\/+/g,"/"),b(!1,"Pathnames cannot have embedded double slashes - normalizing ".concat(e," -> ").concat(r))}t=r.startsWith("/")?V(r.substring(1),"/"):V(r,n)}else t=n;return{pathname:t,search:J(s),hash:Z(a)}}(r,a),u=o&&"/"!==o&&o.endsWith("/"),d=(i||"."===o)&&n.endsWith("/");return l.pathname.endsWith("/")||!u&&!d||(l.pathname+="/"),l}var Q=e=>e.join("/").replace(/\/\/+/g,"/"),$=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),J=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",Z=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";var ee=class{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.status=e,this.statusText=t||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function te(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}function ne(e){return e.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var re="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;function se(e,t){let n=e;if("string"!==typeof n||!U.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,s=!1;if(re)try{let e=new URL(window.location.href),r=n.startsWith("//")?new URL(e.protocol+n):new URL(n),a=W(r.pathname,t);r.origin===e.origin&&null!=a?n=a+r.search+r.hash:s=!0}catch(oo){b(!1,'<Link to="'.concat(n,'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.'))}return{absoluteURL:r,isExternal:s,to:n}}Symbol("Uninstrumented");Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var ae=["POST","PUT","PATCH","DELETE"],ie=(new Set(ae),["GET",...ae]);new Set(ie),Symbol("ResetLoaderData");var oe=e.createContext(null);oe.displayName="DataRouter";var le=e.createContext(null);le.displayName="DataRouterState";var ce=e.createContext(!1);function ue(){return e.useContext(ce)}var de=e.createContext({isTransitioning:!1});de.displayName="ViewTransition";var he=e.createContext(new Map);he.displayName="Fetchers";var fe=e.createContext(null);fe.displayName="Await";var me=e.createContext(null);me.displayName="Navigation";var pe=e.createContext(null);pe.displayName="Location";var ge=e.createContext({outlet:null,matches:[],isDataRoute:!1});ge.displayName="Route";var ye=e.createContext(null);ye.displayName="RouteError";var xe="REACT_ROUTER_ERROR";function be(){return null!=e.useContext(pe)}function ve(){return x(be(),"useLocation() may be used only in the context of a <Router> component."),e.useContext(pe).location}var we="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Ce(t){e.useContext(me).static||e.useLayoutEffect(t)}function Se(){let{isDataRoute:t}=e.useContext(ge);return t?function(){let{router:t}=Me("useNavigate"),n=ze("useNavigate"),r=e.useRef(!1);Ce(()=>{r.current=!0});let s=e.useCallback(async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};b(r.current,we),r.current&&("number"===typeof e?await t.navigate(e):await t.navigate(e,c({fromRouteId:n},s)))},[t,n]);return s}():function(){x(be(),"useNavigate() may be used only in the context of a <Router> component.");let t=e.useContext(oe),{basename:n,navigator:r}=e.useContext(me),{matches:s}=e.useContext(ge),{pathname:a}=ve(),i=JSON.stringify(G(s)),o=e.useRef(!1);Ce(()=>{o.current=!0});let l=e.useCallback(function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(b(o.current,we),!o.current)return;if("number"===typeof e)return void r.go(e);let l=K(e,JSON.parse(i),a,"path"===s.relative);null==t&&"/"!==n&&(l.pathname="/"===l.pathname?n:Q([n,l.pathname])),(s.replace?r.replace:r.push)(l,s.state,s)},[n,r,i,a,t]);return l}()}e.createContext(null);function je(t){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:r}=e.useContext(ge),{pathname:s}=ve(),a=JSON.stringify(G(r));return e.useMemo(()=>K(t,JSON.parse(a),s,"path"===n),[t,a,s,n])}function ke(t,n,r,s,a){x(be(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=e.useContext(me),{matches:o}=e.useContext(ge),l=o[o.length-1],u=l?l.params:{},d=l?l.pathname:"/",h=l?l.pathnameBase:"/",f=l&&l.route;{let e=f&&f.path||"";Ie(d,!f||e.endsWith("*")||e.endsWith("*?"),'You rendered descendant <Routes> (or called `useRoutes()`) at "'.concat(d,'" (under <Route path="').concat(e,'">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won\'t match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="').concat(e,'"> to <Route path="').concat("/"===e?"*":"".concat(e,"/*"),'">.'))}let m,p=ve();if(n){var g;let e="string"===typeof n?S(n):n;x("/"===h||(null===(g=e.pathname)||void 0===g?void 0:g.startsWith(h)),'When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "'.concat(h,'" but pathname "').concat(e.pathname,'" was given in the `location` prop.')),m=e}else m=p;let y=m.pathname||"/",v=y;if("/"!==h){let e=h.replace(/^\//,"").split("/");v="/"+y.replace(/^\//,"").split("/").slice(e.length).join("/")}let w=N(t,{pathname:v});b(f||null!=w,'No routes matched location "'.concat(m.pathname).concat(m.search).concat(m.hash,'" ')),b(null==w||void 0!==w[w.length-1].route.element||void 0!==w[w.length-1].route.Component||void 0!==w[w.length-1].route.lazy,'Matched leaf route at location "'.concat(m.pathname).concat(m.search).concat(m.hash,'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.'));let C=De(w&&w.map(e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:Q([h,i.encodeLocation?i.encodeLocation(e.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:Q([h,i.encodeLocation?i.encodeLocation(e.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathnameBase])})),o,r,s,a);return n&&C?e.createElement(pe.Provider,{value:{location:c({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:"POP"}},C):C}function Ne(){let t=Fe(),n=te(t)?"".concat(t.status," ").concat(t.statusText):t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,s="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:s},i={padding:"2px 4px",backgroundColor:s},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=e.createElement(e.Fragment,null,e.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),e.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",e.createElement("code",{style:i},"ErrorBoundary")," or"," ",e.createElement("code",{style:i},"errorElement")," prop on your route.")),e.createElement(e.Fragment,null,e.createElement("h2",null,"Unexpected Application Error!"),e.createElement("h3",{style:{fontStyle:"italic"}},n),r?e.createElement("pre",{style:a},r):null,o)}var _e=e.createElement(Ne,null),Te=class extends e.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){let t=this.state.error;if(this.context&&"object"===typeof t&&t&&"digest"in t&&"string"===typeof t.digest){const e=function(e){if(e.startsWith("".concat(xe,":").concat("ROUTE_ERROR_RESPONSE",":{")))try{let t=JSON.parse(e.slice(40));if("object"===typeof t&&t&&"number"===typeof t.status&&"string"===typeof t.statusText)return new ee(t.status,t.statusText,t.data)}catch(t){}}(t.digest);e&&(t=e)}let n=void 0!==t?e.createElement(ge.Provider,{value:this.props.routeContext},e.createElement(ye.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?e.createElement(Pe,{error:t},n):n}};Te.contextType=ce;var Ee=new WeakMap;function Pe(t){let{children:n,error:r}=t,{basename:s}=e.useContext(me);if("object"===typeof r&&r&&"digest"in r&&"string"===typeof r.digest){let t=function(e){if(e.startsWith("".concat(xe,":").concat("REDIRECT",":{")))try{let t=JSON.parse(e.slice(28));if("object"===typeof t&&t&&"number"===typeof t.status&&"string"===typeof t.statusText&&"string"===typeof t.location&&"boolean"===typeof t.reloadDocument&&"boolean"===typeof t.replace)return t}catch(t){}}(r.digest);if(t){let n=Ee.get(r);if(n)throw n;let a=se(t.location,s);if(re&&!Ee.get(r)){if(!a.isExternal&&!t.reloadDocument){const e=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(a.to,{replace:t.replace}));throw Ee.set(r,e),e}window.location.href=a.absoluteURL||a.to}return e.createElement("meta",{httpEquiv:"refresh",content:"0;url=".concat(a.absoluteURL||a.to)})}}return n}function Oe(t){let{routeContext:n,match:r,children:s}=t,a=e.useContext(oe);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),e.createElement(ge.Provider,{value:n},s)}function De(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(null==t){if(!r)return null;if(r.errors)t=r.matches;else{if(0!==n.length||r.initialized||!(r.matches.length>0))return null;t=r.matches}}let a=t,i=null===r||void 0===r?void 0:r.errors;if(null!=i){let e=a.findIndex(e=>e.route.id&&void 0!==(null===i||void 0===i?void 0:i[e.route.id]));x(e>=0,"Could not find a matching route for errors on route IDs: ".concat(Object.keys(i).join(","))),a=a.slice(0,Math.min(a.length,e+1))}let o=!1,l=-1;if(r)for(let e=0;e<a.length;e++){let t=a[e];if((t.route.HydrateFallback||t.route.hydrateFallbackElement)&&(l=e),t.route.id){let{loaderData:e,errors:n}=r,s=t.route.loader&&!e.hasOwnProperty(t.route.id)&&(!n||void 0===n[t.route.id]);if(t.route.lazy||s){o=!0,a=l>=0?a.slice(0,l+1):[a[0]];break}}}let c=r&&s?(e,t)=>{var n,a;s(e,{location:r.location,params:null!==(n=null===(a=r.matches)||void 0===a||null===(a=a[0])||void 0===a?void 0:a.params)&&void 0!==n?n:{},unstable_pattern:ne(r.matches),errorInfo:t})}:void 0;return a.reduceRight((t,s,u)=>{let d,h=!1,f=null,m=null;r&&(d=i&&s.route.id?i[s.route.id]:void 0,f=s.route.errorElement||_e,o&&(l<0&&0===u?(Ie("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,m=null):l===u&&(h=!0,m=s.route.hydrateFallbackElement||null)));let p=n.concat(a.slice(0,u+1)),g=()=>{let n;return n=d?f:h?m:s.route.Component?e.createElement(s.route.Component,null):s.route.element?s.route.element:t,e.createElement(Oe,{match:s,routeContext:{outlet:t,matches:p,isDataRoute:null!=r},children:n})};return r&&(s.route.ErrorBoundary||s.route.errorElement||0===u)?e.createElement(Te,{location:r.location,revalidation:r.revalidation,component:f,error:d,children:g(),routeContext:{outlet:null,matches:p,isDataRoute:!0},onError:c}):g()},null)}function Ae(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function Me(t){let n=e.useContext(oe);return x(n,Ae(t)),n}function Le(t){let n=e.useContext(le);return x(n,Ae(t)),n}function ze(t){let n=function(t){let n=e.useContext(ge);return x(n,Ae(t)),n}(t),r=n.matches[n.matches.length-1];return x(r.route.id,"".concat(t,' can only be used on routes that contain a unique "id"')),r.route.id}function Fe(){var t;let n=e.useContext(ye),r=Le("useRouteError"),s=ze("useRouteError");return void 0!==n?n:null===(t=r.errors)||void 0===t?void 0:t[s]}var Re={};function Ie(e,t,n){t||Re[e]||(Re[e]=!0,b(!1,n))}var Be={};function He(e,t){e||Be[t]||(Be[t]=!0,console.warn(t))}t.useOptimistic;e.memo(function(e){let{routes:t,future:n,state:r,onError:s}=e;return ke(t,void 0,r,s,n)});function We(e){x(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Ue(t){let{basename:n="/",children:r=null,location:s,navigationType:a="POP",navigator:i,static:o=!1,unstable_useTransitions:l}=t;x(!be(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=n.replace(/^\/*/,"/"),u=e.useMemo(()=>({basename:c,navigator:i,static:o,unstable_useTransitions:l,future:{}}),[c,i,o,l]);"string"===typeof s&&(s=S(s));let{pathname:d="/",search:h="",hash:f="",state:m=null,key:p="default"}=s,g=e.useMemo(()=>{let e=W(d,c);return null==e?null:{location:{pathname:e,search:h,hash:f,state:m,key:p},navigationType:a}},[c,d,h,f,m,p,a]);return b(null!=g,'<Router basename="'.concat(c,'"> is not able to match the URL "').concat(d).concat(h).concat(f,"\" because it does not start with the basename, so the <Router> won't render anything.")),null==g?null:e.createElement(me.Provider,{value:u},e.createElement(pe.Provider,{children:r,value:g}))}function Ye(e){let{children:t,location:n}=e;return ke(Ve(t),n)}e.Component;function Ve(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=[];return e.Children.forEach(t,(t,s)=>{if(!e.isValidElement(t))return;let a=[...n,s];if(t.type===e.Fragment)return void r.push.apply(r,Ve(t.props.children,a));x(t.type===We,"[".concat("string"===typeof t.type?t.type:t.type.name,"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>")),x(!t.props.index||!t.props.children,"An index route cannot have child routes.");let i={id:t.props.id||a.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,Component:t.props.Component,index:t.props.index,path:t.props.path,middleware:t.props.middleware,loader:t.props.loader,action:t.props.action,hydrateFallbackElement:t.props.hydrateFallbackElement,HydrateFallback:t.props.HydrateFallback,errorElement:t.props.errorElement,ErrorBoundary:t.props.ErrorBoundary,hasErrorBoundary:!0===t.props.hasErrorBoundary||null!=t.props.ErrorBoundary||null!=t.props.errorElement,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle,lazy:t.props.lazy};t.props.children&&(i.children=Ve(t.props.children,a)),r.push(i)}),r}var qe="get",Xe="application/x-www-form-urlencoded";function Ge(e){return"undefined"!==typeof HTMLElement&&e instanceof HTMLElement}function Ke(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return new URLSearchParams("string"===typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(e=>[n,e]):[[n,r]])},[]))}var Qe=null;var $e=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Je(e){return null==e||$e.has(e)?e:(b(!1,'"'.concat(e,'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` and will default to "').concat(Xe,'"')),null)}function Ze(e,t){let n,r,s,a,i;if(Ge(o=e)&&"form"===o.tagName.toLowerCase()){let i=e.getAttribute("action");r=i?W(i,t):null,n=e.getAttribute("method")||qe,s=Je(e.getAttribute("enctype"))||Xe,a=new FormData(e)}else if(function(e){return Ge(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return Ge(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let i=e.form;if(null==i)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let o=e.getAttribute("formaction")||i.getAttribute("action");if(r=o?W(o,t):null,n=e.getAttribute("formmethod")||i.getAttribute("method")||qe,s=Je(e.getAttribute("formenctype"))||Je(i.getAttribute("enctype"))||Xe,a=new FormData(i,e),!function(){if(null===Qe)try{new FormData(document.createElement("form"),0),Qe=!1}catch(oo){Qe=!0}return Qe}()){let{name:t,type:n,value:r}=e;if("image"===n){let e=t?"".concat(t,"."):"";a.append("".concat(e,"x"),"0"),a.append("".concat(e,"y"),"0")}else t&&a.append(t,r)}}else{if(Ge(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=qe,r=null,s=Xe,i=e}var o;return a&&"text/plain"===s&&(i=a,a=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:a,body:i}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");"undefined"!==typeof window?window:"undefined"!==typeof globalThis&&globalThis;function et(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}Symbol("SingleFetchRedirect");function tt(e,t,n){let r="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return"/"===r.pathname?r.pathname="_root.".concat(n):t&&"/"===W(r.pathname,t)?r.pathname="".concat(t.replace(/\/$/,""),"/_root.").concat(n):r.pathname="".concat(r.pathname.replace(/\/$/,""),".").concat(n),r}async function nt(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error("Error loading route module `".concat(e.module,"`, reloading page...")),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function rt(e){return null!=e&&"string"===typeof e.page}function st(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function at(e,t,n,r,s,a){let i=(e,t)=>!n[t]||e.route.id!==n[t].route.id,o=(e,t)=>{var r;return n[t].pathname!==e.pathname||(null===(r=n[t].route.path)||void 0===r?void 0:r.endsWith("*"))&&n[t].params["*"]!==e.params["*"]};return"assets"===a?t.filter((e,t)=>i(e,t)||o(e,t)):"data"===a?t.filter((t,a)=>{let l=r.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(i(t,a)||o(t,a))return!0;if(t.route.shouldRevalidate){var c;let r=t.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:(null===(c=n[0])||void 0===c?void 0:c.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof r)return r}return!0}):[]}function it(e,t){let{includeHydrateFallback:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=e.map(e=>{let r=t.routes[e.route.id];if(!r)return[];let s=[r.module];return r.clientActionModule&&(s=s.concat(r.clientActionModule)),r.clientLoaderModule&&(s=s.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(s=s.concat(r.hydrateFallbackModule)),r.imports&&(s=s.concat(r.imports)),s}).flat(1),[...new Set(r)];var r}function ot(e,t){let n=new Set,r=new Set(t);return e.reduce((e,s)=>{if(t&&!rt(s)&&"script"===s.as&&s.href&&r.has(s.href))return e;let a=JSON.stringify(function(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}(s));return n.has(a)||(n.add(a),e.push({key:a,link:s})),e},[])}function lt(e,t){return"lazy"===e.mode&&!0===t}function ct(){let t=e.useContext(oe);return et(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function ut(){let t=e.useContext(le);return et(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var dt=e.createContext(void 0);function ht(){let t=e.useContext(dt);return et(t,"You must render this element inside a <HydratedRouter> element"),t}function ft(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function mt(e,t,n){if(n&&!xt)return[e[0]];if(t){let n=e.findIndex(e=>void 0!==t[e.route.id]);return e.slice(0,n+1)}return e}dt.displayName="FrameworkContext";function pt(t){let{page:n}=t,r=s(t,d),{router:a}=ct(),i=e.useMemo(()=>N(a.routes,n,a.basename),[a.routes,n,a.basename]);return i?e.createElement(yt,c({page:n,matches:i},r)):null}function gt(t){let{manifest:n,routeModules:r}=ht(),[s,a]=e.useState([]);return e.useEffect(()=>{let e=!1;return async function(e,t,n){return ot((await Promise.all(e.map(async e=>{let r=t.routes[e.route.id];if(r){let e=await nt(r,n);return e.links?e.links():[]}return[]}))).flat(1).filter(st).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?c(c({},e),{},{rel:"prefetch",as:"style"}):c(c({},e),{},{rel:"prefetch"})))}(t,n,r).then(t=>{e||a(t)}),()=>{e=!0}},[t,n,r]),s}function yt(t){let{page:n,matches:r}=t,a=s(t,h),i=ve(),{manifest:o,routeModules:l}=ht(),{basename:u}=ct(),{loaderData:d,matches:f}=ut(),m=e.useMemo(()=>at(n,r,f,o,i,"data"),[n,r,f,o,i]),p=e.useMemo(()=>at(n,r,f,o,i,"assets"),[n,r,f,o,i]),g=e.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let e=new Set,t=!1;if(r.forEach(n=>{var r;let s=o.routes[n.route.id];s&&s.hasLoader&&(!m.some(e=>e.route.id===n.route.id)&&n.route.id in d&&null!==(r=l[n.route.id])&&void 0!==r&&r.shouldRevalidate||s.hasClientLoader?t=!0:e.add(n.route.id))}),0===e.size)return[];let s=tt(n,u,"data");return t&&e.size>0&&s.searchParams.set("_routes",r.filter(t=>e.has(t.route.id)).map(e=>e.route.id).join(",")),[s.pathname+s.search]},[u,d,i,o,m,r,n,l]),y=e.useMemo(()=>it(p,o),[p,o]),x=gt(p);return e.createElement(e.Fragment,null,g.map(t=>e.createElement("link",c({key:t,rel:"prefetch",as:"fetch",href:t},a))),y.map(t=>e.createElement("link",c({key:t,rel:"modulepreload",href:t},a))),x.map(t=>{let{key:n,link:r}=t;return e.createElement("link",c({key:n,nonce:a.nonce},r))}))}var xt=!1;function bt(t){let{manifest:n,serverHandoffString:r,isSpaMode:a,renderMeta:i,routeDiscovery:o,ssr:l}=ht(),{router:d,static:h,staticContext:f}=ct(),{matches:m}=ut(),p=ue(),g=lt(o,l);i&&(i.didRenderScripts=!0);let y=mt(m,null,a);e.useEffect(()=>{0},[]);let x=e.useMemo(()=>{var a;if(p)return null;let i=f?"window.__reactRouterContext = ".concat(r,";").concat("window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());"):" ",o=h?"".concat(null!==n.hmr&&void 0!==a&&a.runtime?"import ".concat(JSON.stringify(n.hmr.runtime),";"):"").concat(g?"":"import ".concat(JSON.stringify(n.url)),";\n").concat(y.map((e,t)=>{let r="route".concat(t),s=n.routes[e.route.id];et(s,"Route ".concat(e.route.id," not found in manifest"));let{clientActionModule:a,clientLoaderModule:i,clientMiddlewareModule:o,hydrateFallbackModule:l,module:c}=s,u=[...a?[{module:a,varName:"".concat(r,"_clientAction")}]:[],...i?[{module:i,varName:"".concat(r,"_clientLoader")}]:[],...o?[{module:o,varName:"".concat(r,"_clientMiddleware")}]:[],...l?[{module:l,varName:"".concat(r,"_HydrateFallback")}]:[],{module:c,varName:"".concat(r,"_main")}];return 1===u.length?"import * as ".concat(r," from ").concat(JSON.stringify(c),";"):[u.map(e=>"import * as ".concat(e.varName,' from "').concat(e.module,'";')).join("\n"),"const ".concat(r," = {").concat(u.map(e=>"...".concat(e.varName)).join(","),"};")].join("\n")}).join("\n"),"\n  ").concat(g?"window.__reactRouterManifest = ".concat(JSON.stringify(function(e,t){let{sri:n}=e,r=s(e,u),a=new Set(t.state.matches.map(e=>e.route.id)),i=t.state.location.pathname.split("/").filter(Boolean),o=["/"];for(i.pop();i.length>0;)o.push("/".concat(i.join("/"))),i.pop();o.forEach(e=>{let n=N(t.routes,e,t.basename);n&&n.forEach(e=>a.add(e.route.id))});let l=[...a].reduce((e,t)=>Object.assign(e,{[t]:r.routes[t]}),{});return c(c({},r),{},{routes:l,sri:!!n||void 0})}(n,d),null,2),";"):"","\n  window.__reactRouterRouteModules = {").concat(y.map((e,t)=>"".concat(JSON.stringify(e.route.id),":route").concat(t)).join(","),"};\n\nimport(").concat(JSON.stringify(n.entry.module),");"):" ";return e.createElement(e.Fragment,null,e.createElement("script",c(c({},t),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:i},type:void 0})),e.createElement("script",c(c({},t),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:o},type:"module",async:!0})))},[]),b=xt||p?[]:(n.entry.imports.concat(it(y,n,{includeHydrateFallback:!0})),[...new Set(v)]);var v;let w="object"===typeof n.sri?n.sri:{};return He(!p,"The <Scripts /> element is a no-op when using RSC and can be safely removed."),xt||p?null:e.createElement(e.Fragment,null,"object"===typeof n.sri?e.createElement("script",{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:w})}}):null,g?null:e.createElement("link",{rel:"modulepreload",href:n.url,crossOrigin:t.crossOrigin,integrity:w[n.url],suppressHydrationWarning:!0}),e.createElement("link",{rel:"modulepreload",href:n.entry.module,crossOrigin:t.crossOrigin,integrity:w[n.entry.module],suppressHydrationWarning:!0}),b.map(n=>e.createElement("link",{key:n,rel:"modulepreload",href:n,crossOrigin:t.crossOrigin,integrity:w[n],suppressHydrationWarning:!0})),x)}function vt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach(t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)})}}e.Component;function wt(t){let{error:n,isOutsideRemixApp:r}=t;console.error(n);let s,a=e.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if(te(n))return e.createElement(Ct,{title:"Unhandled Thrown Response!"},e.createElement("h1",{style:{fontSize:"24px"}},n.status," ",n.statusText),a);if(n instanceof Error)0;else{let e=null==n?"Unknown Error":"object"===typeof n&&"toString"in n?n.toString():JSON.stringify(n);new Error(e)}return e.createElement(Ct,{title:"Application Error!",isOutsideRemixApp:r},e.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),e.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},s.stack),a)}function Ct(t){var n;let{title:r,renderScripts:s,isOutsideRemixApp:a,children:i}=t,{routeModules:o}=ht();return null!==o.root&&void 0!==n&&n.Layout&&!a?i:e.createElement("html",{lang:"en"},e.createElement("head",null,e.createElement("meta",{charSet:"utf-8"}),e.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),e.createElement("title",null,r)),e.createElement("body",null,e.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},i,s?e.createElement(bt,null):null)))}var St="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{St&&(window.__reactRouterVersion="7.11.0")}catch(oo){}function jt(t){let{basename:n,children:r,unstable_useTransitions:s,window:a}=t,i=e.useRef();null==i.current&&(i.current=y({window:a,v5Compat:!0}));let o=i.current,[l,c]=e.useState({action:o.action,location:o.location}),u=e.useCallback(t=>{!1===s?c(t):e.startTransition(()=>c(t))},[s]);return e.useLayoutEffect(()=>o.listen(u),[o,u]),e.createElement(Ue,{basename:n,children:r,location:l.location,navigationType:l.action,navigator:o,unstable_useTransitions:s})}var kt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Nt=e.forwardRef(function(t,n){let{onClick:r,discover:a="render",prefetch:i="none",relative:o,reloadDocument:l,replace:u,state:d,target:h,to:m,preventScrollReset:p,viewTransition:g,unstable_defaultShouldRevalidate:y}=t,b=s(t,f),{basename:v,unstable_useTransitions:w}=e.useContext(me),S="string"===typeof m&&kt.test(m),j=se(m,v);m=j.to;let k=function(t){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};x(be(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:s}=e.useContext(me),{hash:a,pathname:i,search:o}=je(t,{relative:n}),l=i;return"/"!==r&&(l="/"===i?r:Q([r,i])),s.createHref({pathname:l,search:o,hash:a})}(m,{relative:o}),[N,_,T]=function(t,n){let r=e.useContext(dt),[s,a]=e.useState(!1),[i,o]=e.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:h}=n,f=e.useRef(null);e.useEffect(()=>{if("render"===t&&o(!0),"viewport"===t){let e=new IntersectionObserver(e=>{e.forEach(e=>{o(e.isIntersecting)})},{threshold:.5});return f.current&&e.observe(f.current),()=>{e.disconnect()}}},[t]),e.useEffect(()=>{if(s){let e=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(e)}}},[s]);let m=()=>{a(!0)},p=()=>{a(!1),o(!1)};return r?"intent"!==t?[i,f,{}]:[i,f,{onFocus:ft(l,m),onBlur:ft(c,p),onMouseEnter:ft(u,m),onMouseLeave:ft(d,p),onTouchStart:ft(h,m)}]:[!1,f,{}]}(i,b),E=function(t){let{target:n,replace:r,state:s,preventScrollReset:a,relative:i,viewTransition:o,unstable_defaultShouldRevalidate:l,unstable_useTransitions:c}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=Se(),d=ve(),h=je(t,{relative:i});return e.useCallback(f=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(f,n)){f.preventDefault();let n=void 0!==r?r:C(d)===C(h),m=()=>u(t,{replace:n,state:s,preventScrollReset:a,relative:i,viewTransition:o,unstable_defaultShouldRevalidate:l});c?e.startTransition(()=>m()):m()}},[d,u,h,r,s,n,t,a,i,o,l,c])}(m,{replace:u,state:d,target:h,preventScrollReset:p,relative:o,viewTransition:g,unstable_defaultShouldRevalidate:y,unstable_useTransitions:w});let P=e.createElement("a",c(c(c({},b),T),{},{href:j.absoluteURL||k,onClick:j.isExternal||l?r:function(e){r&&r(e),e.defaultPrevented||E(e)},ref:vt(n,_),target:h,"data-discover":S||"render"!==a?void 0:"true"}));return N&&!S?e.createElement(e.Fragment,null,P,e.createElement(pt,{page:k})):P});Nt.displayName="Link";var _t=e.forwardRef(function(t,n){let{"aria-current":r="page",caseSensitive:a=!1,className:i="",end:o=!1,style:l,to:u,viewTransition:d,children:h}=t,f=s(t,m),p=je(u,{relative:f.relative}),g=ve(),y=e.useContext(le),{navigator:b,basename:v}=e.useContext(me),w=null!=y&&function(t){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.useContext(de);x(null!=r,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=Pt("useViewTransitionState"),a=je(t,{relative:n});if(!r.isTransitioning)return!1;let i=W(r.currentLocation.pathname,s)||r.currentLocation.pathname,o=W(r.nextLocation.pathname,s)||r.nextLocation.pathname;return null!=I(a.pathname,o)||null!=I(a.pathname,i)}(p)&&!0===d,C=b.encodeLocation?b.encodeLocation(p).pathname:p.pathname,S=g.pathname,j=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;a||(S=S.toLowerCase(),j=j?j.toLowerCase():null,C=C.toLowerCase()),j&&v&&(j=W(j,v)||j);const k="/"!==C&&C.endsWith("/")?C.length-1:C.length;let N,_=S===C||!o&&S.startsWith(C)&&"/"===S.charAt(k),T=null!=j&&(j===C||!o&&j.startsWith(C)&&"/"===j.charAt(C.length)),E={isActive:_,isPending:T,isTransitioning:w},P=_?r:void 0;N="function"===typeof i?i(E):[i,_?"active":null,T?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let O="function"===typeof l?l(E):l;return e.createElement(Nt,c(c({},f),{},{"aria-current":P,className:N,ref:n,style:O,to:u,viewTransition:d}),"function"===typeof h?h(E):h)});_t.displayName="NavLink";var Tt=e.forwardRef((t,n)=>{let{discover:r="render",fetcherKey:a,navigate:i,reloadDocument:o,replace:l,state:u,method:d=qe,action:h,onSubmit:f,relative:m,preventScrollReset:g,viewTransition:y,unstable_defaultShouldRevalidate:b}=t,v=s(t,p),{unstable_useTransitions:w}=e.useContext(me),S=Mt(),j=function(t){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:r}=e.useContext(me),s=e.useContext(ge);x(s,"useFormAction must be used inside a RouteContext");let[a]=s.matches.slice(-1),i=c({},je(t||".",{relative:n})),o=ve();if(null==t){i.search=o.search;let e=new URLSearchParams(i.search),t=e.getAll("index"),n=t.some(e=>""===e);if(n){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let n=e.toString();i.search=n?"?".concat(n):""}}t&&"."!==t||!a.route.index||(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index");"/"!==r&&(i.pathname="/"===i.pathname?r:Q([r,i.pathname]));return C(i)}(h,{relative:m}),k="get"===d.toLowerCase()?"get":"post",N="string"===typeof h&&kt.test(h);return e.createElement("form",c(c({ref:n,method:k,action:j,onSubmit:o?f:t=>{if(f&&f(t),t.defaultPrevented)return;t.preventDefault();let n=t.nativeEvent.submitter,r=(null===n||void 0===n?void 0:n.getAttribute("formmethod"))||d,s=()=>S(n||t.currentTarget,{fetcherKey:a,method:r,navigate:i,replace:l,state:u,relative:m,preventScrollReset:g,viewTransition:y,unstable_defaultShouldRevalidate:b});w&&!1!==i?e.startTransition(()=>s()):s()}},v),{},{"data-discover":N||"render"!==r?void 0:"true"}))});function Et(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function Pt(t){let n=e.useContext(oe);return x(n,Et(t)),n}function Ot(t){b("undefined"!==typeof URLSearchParams,"You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let n=e.useRef(Ke(t)),r=e.useRef(!1),s=ve(),a=e.useMemo(()=>function(e,t){let n=Ke(e);return t&&t.forEach((e,r)=>{n.has(r)||t.getAll(r).forEach(e=>{n.append(r,e)})}),n}(s.search,r.current?null:n.current),[s.search]),i=Se(),o=e.useCallback((e,t)=>{const n=Ke("function"===typeof e?e(new URLSearchParams(a)):e);r.current=!0,i("?"+n,t)},[i,a]);return[a,o]}Tt.displayName="Form";var Dt=0,At=()=>"__".concat(String(++Dt),"__");function Mt(){let{router:t}=Pt("useSubmit"),{basename:n}=e.useContext(me),r=ze("useRouteId"),s=t.fetch,a=t.navigate;return e.useCallback(async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:i,method:o,encType:l,formData:c,body:u}=Ze(e,n);if(!1===t.navigate){let e=t.fetcherKey||At();await s(e,r,t.action||i,{unstable_defaultShouldRevalidate:t.unstable_defaultShouldRevalidate,preventScrollReset:t.preventScrollReset,formData:c,body:u,formMethod:t.method||o,formEncType:t.encType||l,flushSync:t.flushSync})}else await a(t.action||i,{unstable_defaultShouldRevalidate:t.unstable_defaultShouldRevalidate,preventScrollReset:t.preventScrollReset,formData:c,body:u,formMethod:t.method||o,formEncType:t.encType||l,replace:t.replace,state:t.state,fromRouteId:r,flushSync:t.flushSync,viewTransition:t.viewTransition})},[s,a,n,r])}var Lt=n(579);const zt=(0,e.createContext)(),Ft=()=>{const t=(0,e.useContext)(zt);if(!t)throw new Error("useCurrency must be used within a CurrencyProvider");return t},Rt={GBP:1,USD:1.27,EUR:1.17,CAD:1.72,AUD:1.92,BRL:6.35,PLN:5.05,CZK:29.5,HUF:450,RON:5.85,BGN:2.29,DKK:8.7,SEK:13.2,CHF:1.12,NOK:13.5},It={GBP:"\xa3",USD:"$",EUR:"\u20ac",CAD:"C$",AUD:"A$",BRL:"R$",PLN:"z\u0142",CZK:"K\u010d",HUF:"Ft",RON:"lei",BGN:"\u043b\u0432",DKK:"kr",SEK:"kr",CHF:"CHF",NOK:"kr"},Bt=t=>{let{children:n}=t;const[r,s]=(0,e.useState)(()=>localStorage.getItem("selectedCurrency")||"GBP");(0,e.useEffect)(()=>{localStorage.setItem("selectedCurrency",r)},[r]);const a=e=>e*(Rt[r]||1),i={currency:r,setCurrency:s,convertPrice:a,formatPrice:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;const n=a(e);return"".concat(It[r]||"\xa3").concat(n.toFixed(t))},currencySymbol:It[r]||"\xa3",exchangeRates:Rt,currencySymbols:It};return(0,Lt.jsx)(zt.Provider,{value:i,children:n})};function Ht(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ut(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wt(Object(n),!0).forEach(function(t){Ht(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wt(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const Yt=()=>{};let Vt={},qt={},Xt=null,Gt={mark:Yt,measure:Yt};try{"undefined"!==typeof window&&(Vt=window),"undefined"!==typeof document&&(qt=document),"undefined"!==typeof MutationObserver&&(Xt=MutationObserver),"undefined"!==typeof performance&&(Gt=performance)}catch(oo){}const{userAgent:Kt=""}=Vt.navigator||{},Qt=Vt,$t=qt,Jt=Xt,Zt=Gt,en=(Qt.document,!!$t.documentElement&&!!$t.head&&"function"===typeof $t.addEventListener&&"function"===typeof $t.createElement),tn=~Kt.indexOf("MSIE")||~Kt.indexOf("Trident/");var nn={classic:{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fab:"brands","fa-brands":"brands"},duotone:{fa:"solid",fad:"solid","fa-solid":"solid","fa-duotone":"solid",fadr:"regular","fa-regular":"regular",fadl:"light","fa-light":"light",fadt:"thin","fa-thin":"thin"},sharp:{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"},"sharp-duotone":{fa:"solid",fasds:"solid","fa-solid":"solid",fasdr:"regular","fa-regular":"regular",fasdl:"light","fa-light":"light",fasdt:"thin","fa-thin":"thin"}},rn=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],sn="classic",an="duotone",on=[sn,an,"sharp","sharp-duotone"],ln=new Map([["classic",{defaultShortPrefixId:"fas",defaultStyleId:"solid",styleIds:["solid","regular","light","thin","brands"],futureStyleIds:[],defaultFontWeight:900}],["sharp",{defaultShortPrefixId:"fass",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["duotone",{defaultShortPrefixId:"fad",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["sharp-duotone",{defaultShortPrefixId:"fasds",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}]]),cn=["fak","fa-kit","fakd","fa-kit-duotone"],un={fak:"kit","fa-kit":"kit"},dn={fakd:"kit-duotone","fa-kit-duotone":"kit-duotone"},hn=["fak","fakd"],fn={kit:"fak"},mn={"kit-duotone":"fakd"},pn={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},gn=["fak","fa-kit","fakd","fa-kit-duotone"],yn={classic:{fab:"fa-brands",fad:"fa-duotone",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},duotone:{fadr:"fa-regular",fadl:"fa-light",fadt:"fa-thin"},sharp:{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"},"sharp-duotone":{fasds:"fa-solid",fasdr:"fa-regular",fasdl:"fa-light",fasdt:"fa-thin"}},xn=["fa","fas","far","fal","fat","fad","fadr","fadl","fadt","fab","fass","fasr","fasl","fast","fasds","fasdr","fasdl","fasdt","fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone","fa-solid","fa-regular","fa-light","fa-thin","fa-duotone","fa-brands"],bn=[1,2,3,4,5,6,7,8,9,10],vn=bn.concat([11,12,13,14,15,16,17,18,19,20]),wn=[...Object.keys({classic:["fas","far","fal","fat","fad"],duotone:["fadr","fadl","fadt"],sharp:["fass","fasr","fasl","fast"],"sharp-duotone":["fasds","fasdr","fasdl","fasdt"]}),"solid","regular","light","thin","duotone","brands","2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",pn.GROUP,pn.SWAP_OPACITY,pn.PRIMARY,pn.SECONDARY].concat(bn.map(e=>"".concat(e,"x"))).concat(vn.map(e=>"w-".concat(e)));const Cn="___FONT_AWESOME___",Sn=16,jn="svg-inline--fa",kn="data-fa-i2svg",Nn="data-fa-pseudo-element",_n="data-prefix",Tn="data-icon",En="fontawesome-i2svg",Pn=["HTML","HEAD","STYLE","SCRIPT"],On=(()=>{try{return!0}catch(e){return!1}})();function Dn(e){return new Proxy(e,{get:(e,t)=>t in e?e[t]:e[sn]})}const An=Ut({},nn);An[sn]=Ut(Ut(Ut(Ut({},{"fa-duotone":"duotone"}),nn[sn]),un),dn);const Mn=Dn(An),Ln=Ut({},{classic:{solid:"fas",regular:"far",light:"fal",thin:"fat",brands:"fab"},duotone:{solid:"fad",regular:"fadr",light:"fadl",thin:"fadt"},sharp:{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"},"sharp-duotone":{solid:"fasds",regular:"fasdr",light:"fasdl",thin:"fasdt"}});Ln[sn]=Ut(Ut(Ut(Ut({},{duotone:"fad"}),Ln[sn]),fn),mn);const zn=Dn(Ln),Fn=Ut({},yn);Fn[sn]=Ut(Ut({},Fn[sn]),{fak:"fa-kit"});const Rn=Dn(Fn),In=Ut({},{classic:{"fa-brands":"fab","fa-duotone":"fad","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},duotone:{"fa-regular":"fadr","fa-light":"fadl","fa-thin":"fadt"},sharp:{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"},"sharp-duotone":{"fa-solid":"fasds","fa-regular":"fasdr","fa-light":"fasdl","fa-thin":"fasdt"}});In[sn]=Ut(Ut({},In[sn]),{"fa-kit":"fak"});Dn(In);const Bn=/fa(s|r|l|t|d|dr|dl|dt|b|k|kd|ss|sr|sl|st|sds|sdr|sdl|sdt)?[\-\ ]/,Hn="fa-layers-text",Wn=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp Duotone|Sharp|Kit)?.*/i,Un=(Dn(Ut({},{classic:{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},duotone:{900:"fad",400:"fadr",300:"fadl",100:"fadt"},sharp:{900:"fass",400:"fasr",300:"fasl",100:"fast"},"sharp-duotone":{900:"fasds",400:"fasdr",300:"fasdl",100:"fasdt"}})),["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"]),Yn={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},Vn=["kit",...wn],qn=Qt.FontAwesomeConfig||{};if($t&&"function"===typeof $t.querySelector){[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(e=>{let[t,n]=e;const r=function(e){return""===e||"false"!==e&&("true"===e||e)}(function(e){var t=$t.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}(t));void 0!==r&&null!==r&&(qn[n]=r)})}const Xn={styleDefault:"solid",familyDefault:sn,cssPrefix:"fa",replacementClass:jn,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};qn.familyPrefix&&(qn.cssPrefix=qn.familyPrefix);const Gn=Ut(Ut({},Xn),qn);Gn.autoReplaceSvg||(Gn.observeMutations=!1);const Kn={};Object.keys(Xn).forEach(e=>{Object.defineProperty(Kn,e,{enumerable:!0,set:function(t){Gn[e]=t,Qn.forEach(e=>e(Kn))},get:function(){return Gn[e]}})}),Object.defineProperty(Kn,"familyPrefix",{enumerable:!0,set:function(e){Gn.cssPrefix=e,Qn.forEach(e=>e(Kn))},get:function(){return Gn.cssPrefix}}),Qt.FontAwesomeConfig=Kn;const Qn=[];const $n=Sn,Jn={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function Zn(){let e=12,t="";for(;e-- >0;)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[62*Math.random()|0];return t}function er(e){const t=[];for(let n=(e||[]).length>>>0;n--;)t[n]=e[n];return t}function tr(e){return e.classList?er(e.classList):(e.getAttribute("class")||"").split(" ").filter(e=>e)}function nr(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function rr(e){return Object.keys(e||{}).reduce((t,n)=>t+"".concat(n,": ").concat(e[n].trim(),";"),"")}function sr(e){return e.size!==Jn.size||e.x!==Jn.x||e.y!==Jn.y||e.rotate!==Jn.rotate||e.flipX||e.flipY}function ar(){const e="fa",t=jn,n=Kn.cssPrefix,r=Kn.replacementClass;let s=':root, :host {\n  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Free";\n  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Free";\n  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Pro";\n  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Pro";\n  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";\n  --fa-font-duotone-regular: normal 400 1em/1 "Font Awesome 6 Duotone";\n  --fa-font-duotone-light: normal 300 1em/1 "Font Awesome 6 Duotone";\n  --fa-font-duotone-thin: normal 100 1em/1 "Font Awesome 6 Duotone";\n  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";\n  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-duotone-solid: normal 900 1em/1 "Font Awesome 6 Sharp Duotone";\n  --fa-font-sharp-duotone-regular: normal 400 1em/1 "Font Awesome 6 Sharp Duotone";\n  --fa-font-sharp-duotone-light: normal 300 1em/1 "Font Awesome 6 Sharp Duotone";\n  --fa-font-sharp-duotone-thin: normal 100 1em/1 "Font Awesome 6 Sharp Duotone";\n}\n\nsvg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {\n  overflow: visible;\n  box-sizing: content-box;\n}\n\n.svg-inline--fa {\n  display: var(--fa-display, inline-block);\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n}\n.svg-inline--fa.fa-2xs {\n  vertical-align: 0.1em;\n}\n.svg-inline--fa.fa-xs {\n  vertical-align: 0em;\n}\n.svg-inline--fa.fa-sm {\n  vertical-align: -0.0714285705em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.2em;\n}\n.svg-inline--fa.fa-xl {\n  vertical-align: -0.25em;\n}\n.svg-inline--fa.fa-2xl {\n  vertical-align: -0.3125em;\n}\n.svg-inline--fa.fa-pull-left {\n  margin-right: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-pull-right {\n  margin-left: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-li {\n  width: var(--fa-li-width, 2em);\n  top: 0.25em;\n}\n.svg-inline--fa.fa-fw {\n  width: var(--fa-fw-width, 1.25em);\n}\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: 1em;\n}\n.fa-layers svg.svg-inline--fa {\n  transform-origin: center center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: var(--fa-counter-background-color, #ff253a);\n  border-radius: var(--fa-counter-border-radius, 1em);\n  box-sizing: border-box;\n  color: var(--fa-inverse, #fff);\n  line-height: var(--fa-counter-line-height, 1);\n  max-width: var(--fa-counter-max-width, 5em);\n  min-width: var(--fa-counter-min-width, 1.5em);\n  overflow: hidden;\n  padding: var(--fa-counter-padding, 0.25em 0.5em);\n  right: var(--fa-right, 0);\n  text-overflow: ellipsis;\n  top: var(--fa-top, 0);\n  transform: scale(var(--fa-counter-scale, 0.25));\n  transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: var(--fa-bottom, 0);\n  right: var(--fa-right, 0);\n  top: auto;\n  transform: scale(var(--fa-layers-scale, 0.25));\n  transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: var(--fa-bottom, 0);\n  left: var(--fa-left, 0);\n  right: auto;\n  top: auto;\n  transform: scale(var(--fa-layers-scale, 0.25));\n  transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  top: var(--fa-top, 0);\n  right: var(--fa-right, 0);\n  transform: scale(var(--fa-layers-scale, 0.25));\n  transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: var(--fa-left, 0);\n  right: auto;\n  top: var(--fa-top, 0);\n  transform: scale(var(--fa-layers-scale, 0.25));\n  transform-origin: top left;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-2xs {\n  font-size: 0.625em;\n  line-height: 0.1em;\n  vertical-align: 0.225em;\n}\n\n.fa-xs {\n  font-size: 0.75em;\n  line-height: 0.0833333337em;\n  vertical-align: 0.125em;\n}\n\n.fa-sm {\n  font-size: 0.875em;\n  line-height: 0.0714285718em;\n  vertical-align: 0.0535714295em;\n}\n\n.fa-lg {\n  font-size: 1.25em;\n  line-height: 0.05em;\n  vertical-align: -0.075em;\n}\n\n.fa-xl {\n  font-size: 1.5em;\n  line-height: 0.0416666682em;\n  vertical-align: -0.125em;\n}\n\n.fa-2xl {\n  font-size: 2em;\n  line-height: 0.03125em;\n  vertical-align: -0.1875em;\n}\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: var(--fa-li-margin, 2.5em);\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  left: calc(-1 * var(--fa-li-width, 2em));\n  position: absolute;\n  text-align: center;\n  width: var(--fa-li-width, 2em);\n  line-height: inherit;\n}\n\n.fa-border {\n  border-color: var(--fa-border-color, #eee);\n  border-radius: var(--fa-border-radius, 0.1em);\n  border-style: var(--fa-border-style, solid);\n  border-width: var(--fa-border-width, 0.08em);\n  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);\n}\n\n.fa-pull-left {\n  float: left;\n  margin-right: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-pull-right {\n  float: right;\n  margin-left: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-beat {\n  animation-name: fa-beat;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-bounce {\n  animation-name: fa-bounce;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n}\n\n.fa-fade {\n  animation-name: fa-fade;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-beat-fade {\n  animation-name: fa-beat-fade;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-flip {\n  animation-name: fa-flip;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-shake {\n  animation-name: fa-shake;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin {\n  animation-name: fa-spin;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 2s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin-reverse {\n  --fa-animation-direction: reverse;\n}\n\n.fa-pulse,\n.fa-spin-pulse {\n  animation-name: fa-spin;\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, steps(8));\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .fa-beat,\n.fa-bounce,\n.fa-fade,\n.fa-beat-fade,\n.fa-flip,\n.fa-pulse,\n.fa-shake,\n.fa-spin,\n.fa-spin-pulse {\n    animation-delay: -1ms;\n    animation-duration: 1ms;\n    animation-iteration-count: 1;\n    transition-delay: 0s;\n    transition-duration: 0s;\n  }\n}\n@keyframes fa-beat {\n  0%, 90% {\n    transform: scale(1);\n  }\n  45% {\n    transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@keyframes fa-bounce {\n  0% {\n    transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    transform: scale(1, 1) translateY(0);\n  }\n}\n@keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@keyframes fa-flip {\n  50% {\n    transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@keyframes fa-shake {\n  0% {\n    transform: rotate(-15deg);\n  }\n  4% {\n    transform: rotate(15deg);\n  }\n  8%, 24% {\n    transform: rotate(-18deg);\n  }\n  12%, 28% {\n    transform: rotate(18deg);\n  }\n  16% {\n    transform: rotate(-22deg);\n  }\n  20% {\n    transform: rotate(22deg);\n  }\n  32% {\n    transform: rotate(-12deg);\n  }\n  36% {\n    transform: rotate(12deg);\n  }\n  40%, 100% {\n    transform: rotate(0deg);\n  }\n}\n@keyframes fa-spin {\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  transform: scale(1, -1);\n}\n\n.fa-flip-both,\n.fa-flip-horizontal.fa-flip-vertical {\n  transform: scale(-1, -1);\n}\n\n.fa-rotate-by {\n  transform: rotate(var(--fa-rotate-angle, 0));\n}\n\n.fa-stack {\n  display: inline-block;\n  vertical-align: middle;\n  height: 2em;\n  position: relative;\n  width: 2.5em;\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n  z-index: var(--fa-stack-z-index, auto);\n}\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1.25em;\n}\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}\n\n.sr-only,\n.fa-sr-only {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.sr-only-focusable:not(:focus),\n.fa-sr-only-focusable:not(:focus) {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}';if(n!==e||r!==t){const a=new RegExp("\\.".concat(e,"\\-"),"g"),i=new RegExp("\\--".concat(e,"\\-"),"g"),o=new RegExp("\\.".concat(t),"g");s=s.replace(a,".".concat(n,"-")).replace(i,"--".concat(n,"-")).replace(o,".".concat(r))}return s}let ir=!1;function or(){Kn.autoAddCss&&!ir&&(!function(e){if(!e||!en)return;const t=$t.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;const n=$t.head.childNodes;let r=null;for(let s=n.length-1;s>-1;s--){const e=n[s],t=(e.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(t)>-1&&(r=e)}$t.head.insertBefore(t,r)}(ar()),ir=!0)}var lr={mixout:()=>({dom:{css:ar,insertCss:or}}),hooks:()=>({beforeDOMElementCreation(){or()},beforeI2svg(){or()}})};const cr=Qt||{};cr[Cn]||(cr[Cn]={}),cr[Cn].styles||(cr[Cn].styles={}),cr[Cn].hooks||(cr[Cn].hooks={}),cr[Cn].shims||(cr[Cn].shims=[]);var ur=cr[Cn];const dr=[],hr=function(){$t.removeEventListener("DOMContentLoaded",hr),fr=1,dr.map(e=>e())};let fr=!1;function mr(e){const{tag:t,attributes:n={},children:r=[]}=e;return"string"===typeof e?nr(e):"<".concat(t," ").concat(function(e){return Object.keys(e||{}).reduce((t,n)=>t+"".concat(n,'="').concat(nr(e[n]),'" '),"").trim()}(n),">").concat(r.map(mr).join(""),"</").concat(t,">")}function pr(e,t,n){if(e&&e[t]&&e[t][n])return{prefix:t,iconName:n,icon:e[t][n]}}en&&(fr=($t.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test($t.readyState),fr||$t.addEventListener("DOMContentLoaded",hr));var gr=function(e,t,n,r){var s,a,i,o=Object.keys(e),l=o.length,c=void 0!==r?function(e,t){return function(n,r,s,a){return e.call(t,n,r,s,a)}}(t,r):t;for(void 0===n?(s=1,i=e[o[0]]):(s=0,i=n);s<l;s++)i=c(i,e[a=o[s]],a,e);return i};function yr(e){const t=function(e){const t=[];let n=0;const r=e.length;for(;n<r;){const s=e.charCodeAt(n++);if(s>=55296&&s<=56319&&n<r){const r=e.charCodeAt(n++);56320==(64512&r)?t.push(((1023&s)<<10)+(1023&r)+65536):(t.push(s),n--)}else t.push(s)}return t}(e);return 1===t.length?t[0].toString(16):null}function xr(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return!!r.icon?t[r.iconName]=r.icon:t[n]=r,t},{})}function br(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{skipHooks:r=!1}=n,s=xr(t);"function"!==typeof ur.hooks.addPack||r?ur.styles[e]=Ut(Ut({},ur.styles[e]||{}),s):ur.hooks.addPack(e,xr(t)),"fas"===e&&br("fa",t)}const{styles:vr,shims:wr}=ur,Cr=Object.keys(Rn),Sr=Cr.reduce((e,t)=>(e[t]=Object.keys(Rn[t]),e),{});let jr=null,kr={},Nr={},_r={},Tr={},Er={};function Pr(e,t){const n=t.split("-"),r=n[0],s=n.slice(1).join("-");return r!==e||""===s||(a=s,~Vn.indexOf(a))?null:s;var a}const Or=()=>{const e=e=>gr(vr,(t,n,r)=>(t[r]=gr(n,e,{}),t),{});kr=e((e,t,n)=>{if(t[3]&&(e[t[3]]=n),t[2]){t[2].filter(e=>"number"===typeof e).forEach(t=>{e[t.toString(16)]=n})}return e}),Nr=e((e,t,n)=>{if(e[n]=n,t[2]){t[2].filter(e=>"string"===typeof e).forEach(t=>{e[t]=n})}return e}),Er=e((e,t,n)=>{const r=t[2];return e[n]=n,r.forEach(t=>{e[t]=n}),e});const t="far"in vr||Kn.autoFetchSvg,n=gr(wr,(e,n)=>{const r=n[0];let s=n[1];const a=n[2];return"far"!==s||t||(s="fas"),"string"===typeof r&&(e.names[r]={prefix:s,iconName:a}),"number"===typeof r&&(e.unicodes[r.toString(16)]={prefix:s,iconName:a}),e},{names:{},unicodes:{}});_r=n.names,Tr=n.unicodes,jr=Fr(Kn.styleDefault,{family:Kn.familyDefault})};var Dr;function Ar(e,t){return(kr[e]||{})[t]}function Mr(e,t){return(Er[e]||{})[t]}function Lr(e){return _r[e]||{prefix:null,iconName:null}}function zr(){return jr}Dr=e=>{jr=Fr(e.styleDefault,{family:Kn.familyDefault})},Qn.push(Dr),Or();function Fr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{family:n=sn}=t,r=Mn[n][e];if(n===an&&!e)return"fad";const s=zn[n][e]||zn[n][r],a=e in ur.styles?e:null;return s||a||null}function Rr(e){return e.sort().filter((e,t,n)=>n.indexOf(e)===t)}function Ir(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{skipLookups:n=!1}=t;let r=null;const s=xn.concat(gn),a=Rr(e.filter(e=>s.includes(e))),i=Rr(e.filter(e=>!xn.includes(e))),o=a.filter(e=>(r=e,!rn.includes(e))),[l=null]=o,c=function(e){let t=sn;const n=Cr.reduce((e,t)=>(e[t]="".concat(Kn.cssPrefix,"-").concat(t),e),{});return on.forEach(r=>{(e.includes(n[r])||e.some(e=>Sr[r].includes(e)))&&(t=r)}),t}(a),u=Ut(Ut({},function(e){let t=[],n=null;return e.forEach(e=>{const r=Pr(Kn.cssPrefix,e);r?n=r:e&&t.push(e)}),{iconName:n,rest:t}}(i)),{},{prefix:Fr(l,{family:c})});return Ut(Ut(Ut({},u),function(e){const{values:t,family:n,canonical:r,givenPrefix:s="",styles:a={},config:i={}}=e,o=n===an,l=t.includes("fa-duotone")||t.includes("fad"),c="duotone"===i.familyDefault,u="fad"===r.prefix||"fa-duotone"===r.prefix;!o&&(l||c||u)&&(r.prefix="fad");(t.includes("fa-brands")||t.includes("fab"))&&(r.prefix="fab");if(!r.prefix&&Br.includes(n)){if(Object.keys(a).find(e=>Hr.includes(e))||i.autoFetchSvg){const e=ln.get(n).defaultShortPrefixId;r.prefix=e,r.iconName=Mr(r.prefix,r.iconName)||r.iconName}}"fa"!==r.prefix&&"fa"!==s||(r.prefix=zr()||"fas");return r}({values:e,family:c,styles:vr,config:Kn,canonical:u,givenPrefix:r})),function(e,t,n){let{prefix:r,iconName:s}=n;if(e||!r||!s)return{prefix:r,iconName:s};const a="fa"===t?Lr(s):{},i=Mr(r,s);s=a.iconName||i||s,r=a.prefix||r,"far"!==r||vr.far||!vr.fas||Kn.autoFetchSvg||(r="fas");return{prefix:r,iconName:s}}(n,r,u))}const Br=on.filter(e=>e!==sn||e!==an),Hr=Object.keys(yn).filter(e=>e!==sn).map(e=>Object.keys(yn[e])).flat();let Wr=[],Ur={};const Yr={},Vr=Object.keys(Yr);function qr(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];return(Ur[e]||[]).forEach(e=>{t=e.apply(null,[t,...r])}),t}function Xr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];(Ur[e]||[]).forEach(e=>{e.apply(null,n)})}function Gr(){const e=arguments[0],t=Array.prototype.slice.call(arguments,1);return Yr[e]?Yr[e].apply(null,t):void 0}function Kr(e){"fa"===e.prefix&&(e.prefix="fas");let{iconName:t}=e;const n=e.prefix||zr();if(t)return t=Mr(n,t)||t,pr(Qr.definitions,n,t)||pr(ur.styles,n,t)}const Qr=new class{constructor(){this.definitions={}}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.reduce(this._pullDefinitions,{});Object.keys(r).forEach(e=>{this.definitions[e]=Ut(Ut({},this.definitions[e]||{}),r[e]),br(e,r[e]);const t=Rn[sn][e];t&&br(t,r[e]),Or()})}reset(){this.definitions={}}_pullDefinitions(e,t){const n=t.prefix&&t.iconName&&t.icon?{0:t}:t;return Object.keys(n).map(t=>{const{prefix:r,iconName:s,icon:a}=n[t],i=a[2];e[r]||(e[r]={}),i.length>0&&i.forEach(t=>{"string"===typeof t&&(e[r][t]=a)}),e[r][s]=a}),e}},$r={i2svg:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return en?(Xr("beforeI2svg",e),Gr("pseudoElements2svg",e),Gr("i2svg",e)):Promise.reject(new Error("Operation requires a DOM of some kind."))},watch:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{autoReplaceSvgRoot:t}=e;!1===Kn.autoReplaceSvg&&(Kn.autoReplaceSvg=!0),Kn.observeMutations=!0,function(e){en&&(fr?setTimeout(e,0):dr.push(e))}(()=>{es({autoReplaceSvgRoot:t}),Xr("watch",e)})}},Jr={icon:e=>{if(null===e)return null;if("object"===typeof e&&e.prefix&&e.iconName)return{prefix:e.prefix,iconName:Mr(e.prefix,e.iconName)||e.iconName};if(Array.isArray(e)&&2===e.length){const t=0===e[1].indexOf("fa-")?e[1].slice(3):e[1],n=Fr(e[0]);return{prefix:n,iconName:Mr(n,t)||t}}if("string"===typeof e&&(e.indexOf("".concat(Kn.cssPrefix,"-"))>-1||e.match(Bn))){const t=Ir(e.split(" "),{skipLookups:!0});return{prefix:t.prefix||zr(),iconName:Mr(t.prefix,t.iconName)||t.iconName}}if("string"===typeof e){const t=zr();return{prefix:t,iconName:Mr(t,e)||e}}}},Zr={noAuto:()=>{Kn.autoReplaceSvg=!1,Kn.observeMutations=!1,Xr("noAuto")},config:Kn,dom:$r,parse:Jr,library:Qr,findIconDefinition:Kr,toHtml:mr},es=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{autoReplaceSvgRoot:t=$t}=e;(Object.keys(ur.styles).length>0||Kn.autoFetchSvg)&&en&&Kn.autoReplaceSvg&&Zr.dom.i2svg({node:t})};function ts(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map(e=>mr(e))}}),Object.defineProperty(e,"node",{get:function(){if(!en)return;const t=$t.createElement("div");return t.innerHTML=e.html,t.children}}),e}function ns(e){const{icons:{main:t,mask:n},prefix:r,iconName:s,transform:a,symbol:i,title:o,maskId:l,titleId:c,extra:u,watchable:d=!1}=e,{width:h,height:f}=n.found?n:t,m=hn.includes(r),p=[Kn.replacementClass,s?"".concat(Kn.cssPrefix,"-").concat(s):""].filter(e=>-1===u.classes.indexOf(e)).filter(e=>""!==e||!!e).concat(u.classes).join(" ");let g={children:[],attributes:Ut(Ut({},u.attributes),{},{"data-prefix":r,"data-icon":s,class:p,role:u.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(h," ").concat(f)})};const y=m&&!~u.classes.indexOf("fa-fw")?{width:"".concat(h/f*16*.0625,"em")}:{};d&&(g.attributes[kn]=""),o&&(g.children.push({tag:"title",attributes:{id:g.attributes["aria-labelledby"]||"title-".concat(c||Zn())},children:[o]}),delete g.attributes.title);const x=Ut(Ut({},g),{},{prefix:r,iconName:s,main:t,mask:n,maskId:l,transform:a,symbol:i,styles:Ut(Ut({},y),u.styles)}),{children:b,attributes:v}=n.found&&t.found?Gr("generateAbstractMask",x)||{children:[],attributes:{}}:Gr("generateAbstractIcon",x)||{children:[],attributes:{}};return x.children=b,x.attributes=v,i?function(e){let{prefix:t,iconName:n,children:r,attributes:s,symbol:a}=e;const i=!0===a?"".concat(t,"-").concat(Kn.cssPrefix,"-").concat(n):a;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:Ut(Ut({},s),{},{id:i}),children:r}]}]}(x):function(e){let{children:t,main:n,mask:r,attributes:s,styles:a,transform:i}=e;if(sr(i)&&n.found&&!r.found){const{width:e,height:t}=n,r={x:e/t/2,y:.5};s.style=rr(Ut(Ut({},a),{},{"transform-origin":"".concat(r.x+i.x/16,"em ").concat(r.y+i.y/16,"em")}))}return[{tag:"svg",attributes:s,children:t}]}(x)}function rs(e){const{content:t,width:n,height:r,transform:s,title:a,extra:i,watchable:o=!1}=e,l=Ut(Ut(Ut({},i.attributes),a?{title:a}:{}),{},{class:i.classes.join(" ")});o&&(l[kn]="");const c=Ut({},i.styles);sr(s)&&(c.transform=function(e){let{transform:t,width:n=Sn,height:r=Sn,startCentered:s=!1}=e,a="";return a+=s&&tn?"translate(".concat(t.x/$n-n/2,"em, ").concat(t.y/$n-r/2,"em) "):s?"translate(calc(-50% + ".concat(t.x/$n,"em), calc(-50% + ").concat(t.y/$n,"em)) "):"translate(".concat(t.x/$n,"em, ").concat(t.y/$n,"em) "),a+="scale(".concat(t.size/$n*(t.flipX?-1:1),", ").concat(t.size/$n*(t.flipY?-1:1),") "),a+="rotate(".concat(t.rotate,"deg) "),a}({transform:s,startCentered:!0,width:n,height:r}),c["-webkit-transform"]=c.transform);const u=rr(c);u.length>0&&(l.style=u);const d=[];return d.push({tag:"span",attributes:l,children:[t]}),a&&d.push({tag:"span",attributes:{class:"sr-only"},children:[a]}),d}const{styles:ss}=ur;function as(e){const t=e[0],n=e[1],[r]=e.slice(4);let s=null;return s=Array.isArray(r)?{tag:"g",attributes:{class:"".concat(Kn.cssPrefix,"-").concat(Yn.GROUP)},children:[{tag:"path",attributes:{class:"".concat(Kn.cssPrefix,"-").concat(Yn.SECONDARY),fill:"currentColor",d:r[0]}},{tag:"path",attributes:{class:"".concat(Kn.cssPrefix,"-").concat(Yn.PRIMARY),fill:"currentColor",d:r[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:r}},{found:!0,width:t,height:n,icon:s}}const is={found:!1,width:512,height:512};function os(e,t){let n=t;return"fa"===t&&null!==Kn.styleDefault&&(t=zr()),new Promise((r,s)=>{if("fa"===n){const n=Lr(e)||{};e=n.iconName||e,t=n.prefix||t}if(e&&t&&ss[t]&&ss[t][e]){return r(as(ss[t][e]))}!function(e,t){On||Kn.showMissingIcons||!e||console.error('Icon with name "'.concat(e,'" and prefix "').concat(t,'" is missing.'))}(e,t),r(Ut(Ut({},is),{},{icon:Kn.showMissingIcons&&e&&Gr("missingIconAbstract")||{}}))})}const ls=()=>{},cs=Kn.measurePerformance&&Zt&&Zt.mark&&Zt.measure?Zt:{mark:ls,measure:ls},us='FA "6.7.2"',ds=e=>{cs.mark("".concat(us," ").concat(e," ends")),cs.measure("".concat(us," ").concat(e),"".concat(us," ").concat(e," begins"),"".concat(us," ").concat(e," ends"))};var hs=e=>(cs.mark("".concat(us," ").concat(e," begins")),()=>ds(e));const fs=()=>{};function ms(e){return"string"===typeof(e.getAttribute?e.getAttribute(kn):null)}function ps(e){return $t.createElementNS("http://www.w3.org/2000/svg",e)}function gs(e){return $t.createElement(e)}function ys(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{ceFn:n=("svg"===e.tag?ps:gs)}=t;if("string"===typeof e)return $t.createTextNode(e);const r=n(e.tag);Object.keys(e.attributes||[]).forEach(function(t){r.setAttribute(t,e.attributes[t])});return(e.children||[]).forEach(function(e){r.appendChild(ys(e,{ceFn:n}))}),r}const xs={replace:function(e){const t=e[0];if(t.parentNode)if(e[1].forEach(e=>{t.parentNode.insertBefore(ys(e),t)}),null===t.getAttribute(kn)&&Kn.keepOriginalSource){let e=$t.createComment(function(e){let t=" ".concat(e.outerHTML," ");return t="".concat(t,"Font Awesome fontawesome.com "),t}(t));t.parentNode.replaceChild(e,t)}else t.remove()},nest:function(e){const t=e[0],n=e[1];if(~tr(t).indexOf(Kn.replacementClass))return xs.replace(e);const r=new RegExp("".concat(Kn.cssPrefix,"-.*"));if(delete n[0].attributes.id,n[0].attributes.class){const e=n[0].attributes.class.split(" ").reduce((e,t)=>(t===Kn.replacementClass||t.match(r)?e.toSvg.push(t):e.toNode.push(t),e),{toNode:[],toSvg:[]});n[0].attributes.class=e.toSvg.join(" "),0===e.toNode.length?t.removeAttribute("class"):t.setAttribute("class",e.toNode.join(" "))}const s=n.map(e=>mr(e)).join("\n");t.setAttribute(kn,""),t.innerHTML=s}};function bs(e){e()}function vs(e,t){const n="function"===typeof t?t:fs;if(0===e.length)n();else{let t=bs;"async"===Kn.mutateApproach&&(t=Qt.requestAnimationFrame||bs),t(()=>{const t=!0===Kn.autoReplaceSvg?xs.replace:xs[Kn.autoReplaceSvg]||xs.replace,r=hs("mutate");e.map(t),r(),n()})}}let ws=!1;function Cs(){ws=!0}function Ss(){ws=!1}let js=null;function ks(e){if(!Jt)return;if(!Kn.observeMutations)return;const{treeCallback:t=fs,nodeCallback:n=fs,pseudoElementsCallback:r=fs,observeMutationsRoot:s=$t}=e;js=new Jt(e=>{if(ws)return;const s=zr();er(e).forEach(e=>{if("childList"===e.type&&e.addedNodes.length>0&&!ms(e.addedNodes[0])&&(Kn.searchPseudoElements&&r(e.target),t(e.target)),"attributes"===e.type&&e.target.parentNode&&Kn.searchPseudoElements&&r(e.target.parentNode),"attributes"===e.type&&ms(e.target)&&~Un.indexOf(e.attributeName))if("class"===e.attributeName&&function(e){const t=e.getAttribute?e.getAttribute(_n):null,n=e.getAttribute?e.getAttribute(Tn):null;return t&&n}(e.target)){const{prefix:t,iconName:n}=Ir(tr(e.target));e.target.setAttribute(_n,t||s),n&&e.target.setAttribute(Tn,n)}else(a=e.target)&&a.classList&&a.classList.contains&&a.classList.contains(Kn.replacementClass)&&n(e.target);var a})}),en&&js.observe(s,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}function Ns(e){const t=e.getAttribute("data-prefix"),n=e.getAttribute("data-icon"),r=void 0!==e.innerText?e.innerText.trim():"";let s=Ir(tr(e));return s.prefix||(s.prefix=zr()),t&&n&&(s.prefix=t,s.iconName=n),s.iconName&&s.prefix||(s.prefix&&r.length>0&&(s.iconName=function(e,t){return(Nr[e]||{})[t]}(s.prefix,e.innerText)||Ar(s.prefix,yr(e.innerText))),!s.iconName&&Kn.autoFetchSvg&&e.firstChild&&e.firstChild.nodeType===Node.TEXT_NODE&&(s.iconName=e.firstChild.data)),s}function _s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{styleParser:!0};const{iconName:n,prefix:r,rest:s}=Ns(e),a=function(e){const t=er(e.attributes).reduce((e,t)=>("class"!==e.name&&"style"!==e.name&&(e[t.name]=t.value),e),{}),n=e.getAttribute("title"),r=e.getAttribute("data-fa-title-id");return Kn.autoA11y&&(n?t["aria-labelledby"]="".concat(Kn.replacementClass,"-title-").concat(r||Zn()):(t["aria-hidden"]="true",t.focusable="false")),t}(e),i=qr("parseNodeAttributes",{},e);let o=t.styleParser?function(e){const t=e.getAttribute("style");let n=[];return t&&(n=t.split(";").reduce((e,t)=>{const n=t.split(":"),r=n[0],s=n.slice(1);return r&&s.length>0&&(e[r]=s.join(":").trim()),e},{})),n}(e):[];return Ut({iconName:n,title:e.getAttribute("title"),titleId:e.getAttribute("data-fa-title-id"),prefix:r,transform:Jn,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:s,styles:o,attributes:a}},i)}const{styles:Ts}=ur;function Es(e){const t="nest"===Kn.autoReplaceSvg?_s(e,{styleParser:!1}):_s(e);return~t.extra.classes.indexOf(Hn)?Gr("generateLayersText",e,t):Gr("generateSvgReplacementMutation",e,t)}function Ps(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!en)return Promise.resolve();const n=$t.documentElement.classList,r=e=>n.add("".concat(En,"-").concat(e)),s=e=>n.remove("".concat(En,"-").concat(e)),a=Kn.autoFetchSvg?[...cn,...xn]:rn.concat(Object.keys(Ts));a.includes("fa")||a.push("fa");const i=[".".concat(Hn,":not([").concat(kn,"])")].concat(a.map(e=>".".concat(e,":not([").concat(kn,"])"))).join(", ");if(0===i.length)return Promise.resolve();let o=[];try{o=er(e.querySelectorAll(i))}catch(u){}if(!(o.length>0))return Promise.resolve();r("pending"),s("complete");const l=hs("onTree"),c=o.reduce((e,t)=>{try{const n=Es(t);n&&e.push(n)}catch(u){On||"MissingIcon"===u.name&&console.error(u)}return e},[]);return new Promise((e,n)=>{Promise.all(c).then(n=>{vs(n,()=>{r("active"),r("complete"),s("pending"),"function"===typeof t&&t(),l(),e()})}).catch(e=>{l(),n(e)})})}function Os(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Es(e).then(e=>{e&&vs([e],t)})}const Ds=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{transform:n=Jn,symbol:r=!1,mask:s=null,maskId:a=null,title:i=null,titleId:o=null,classes:l=[],attributes:c={},styles:u={}}=t;if(!e)return;const{prefix:d,iconName:h,icon:f}=e;return ts(Ut({type:"icon"},e),()=>(Xr("beforeDOMElementCreation",{iconDefinition:e,params:t}),Kn.autoA11y&&(i?c["aria-labelledby"]="".concat(Kn.replacementClass,"-title-").concat(o||Zn()):(c["aria-hidden"]="true",c.focusable="false")),ns({icons:{main:as(f),mask:s?as(s.icon):{found:!1,width:null,height:null,icon:{}}},prefix:d,iconName:h,transform:Ut(Ut({},Jn),n),symbol:r,title:i,maskId:a,titleId:o,extra:{attributes:c,styles:u,classes:l}})))};var As={mixout(){return{icon:(e=Ds,function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=(t||{}).icon?t:Kr(t||{});let{mask:s}=n;return s&&(s=(s||{}).icon?s:Kr(s||{})),e(r,Ut(Ut({},n),{},{mask:s}))})};var e},hooks:()=>({mutationObserverCallbacks:e=>(e.treeCallback=Ps,e.nodeCallback=Os,e)}),provides(e){e.i2svg=function(e){const{node:t=$t,callback:n=()=>{}}=e;return Ps(t,n)},e.generateSvgReplacementMutation=function(e,t){const{iconName:n,title:r,titleId:s,prefix:a,transform:i,symbol:o,mask:l,maskId:c,extra:u}=t;return new Promise((t,d)=>{Promise.all([os(n,a),l.iconName?os(l.iconName,l.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(l=>{let[d,h]=l;t([e,ns({icons:{main:d,mask:h},prefix:a,iconName:n,transform:i,symbol:o,maskId:c,title:r,titleId:s,extra:u,watchable:!0})])}).catch(d)})},e.generateAbstractIcon=function(e){let{children:t,attributes:n,main:r,transform:s,styles:a}=e;const i=rr(a);let o;return i.length>0&&(n.style=i),sr(s)&&(o=Gr("generateAbstractTransformGrouping",{main:r,transform:s,containerWidth:r.width,iconWidth:r.width})),t.push(o||r.icon),{children:t,attributes:n}}}},Ms={mixout:()=>({layer(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{classes:n=[]}=t;return ts({type:"layer"},()=>{Xr("beforeDOMElementCreation",{assembler:e,params:t});let r=[];return e(e=>{Array.isArray(e)?e.map(e=>{r=r.concat(e.abstract)}):r=r.concat(e.abstract)}),[{tag:"span",attributes:{class:["".concat(Kn.cssPrefix,"-layers"),...n].join(" ")},children:r}]})}})},Ls={mixout:()=>({counter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{title:n=null,classes:r=[],attributes:s={},styles:a={}}=t;return ts({type:"counter",content:e},()=>(Xr("beforeDOMElementCreation",{content:e,params:t}),function(e){const{content:t,title:n,extra:r}=e,s=Ut(Ut(Ut({},r.attributes),n?{title:n}:{}),{},{class:r.classes.join(" ")}),a=rr(r.styles);a.length>0&&(s.style=a);const i=[];return i.push({tag:"span",attributes:s,children:[t]}),n&&i.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),i}({content:e.toString(),title:n,extra:{attributes:s,styles:a,classes:["".concat(Kn.cssPrefix,"-layers-counter"),...r]}})))}})},zs={mixout:()=>({text(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{transform:n=Jn,title:r=null,classes:s=[],attributes:a={},styles:i={}}=t;return ts({type:"text",content:e},()=>(Xr("beforeDOMElementCreation",{content:e,params:t}),rs({content:e,transform:Ut(Ut({},Jn),n),title:r,extra:{attributes:a,styles:i,classes:["".concat(Kn.cssPrefix,"-layers-text"),...s]}})))}}),provides(e){e.generateLayersText=function(e,t){const{title:n,transform:r,extra:s}=t;let a=null,i=null;if(tn){const t=parseInt(getComputedStyle(e).fontSize,10),n=e.getBoundingClientRect();a=n.width/t,i=n.height/t}return Kn.autoA11y&&!n&&(s.attributes["aria-hidden"]="true"),Promise.resolve([e,rs({content:e.innerHTML,width:a,height:i,transform:r,title:n,extra:s,watchable:!0})])}}};const Fs=new RegExp('"',"ug"),Rs=[1105920,1112319],Is=Ut(Ut(Ut(Ut({},{FontAwesome:{normal:"fas",400:"fas"}}),{"Font Awesome 6 Free":{900:"fas",400:"far"},"Font Awesome 6 Pro":{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},"Font Awesome 6 Brands":{400:"fab",normal:"fab"},"Font Awesome 6 Duotone":{900:"fad",400:"fadr",normal:"fadr",300:"fadl",100:"fadt"},"Font Awesome 6 Sharp":{900:"fass",400:"fasr",normal:"fasr",300:"fasl",100:"fast"},"Font Awesome 6 Sharp Duotone":{900:"fasds",400:"fasdr",normal:"fasdr",300:"fasdl",100:"fasdt"}}),{"Font Awesome 5 Free":{900:"fas",400:"far"},"Font Awesome 5 Pro":{900:"fas",400:"far",normal:"far",300:"fal"},"Font Awesome 5 Brands":{400:"fab",normal:"fab"},"Font Awesome 5 Duotone":{900:"fad"}}),{"Font Awesome Kit":{400:"fak",normal:"fak"},"Font Awesome Kit Duotone":{400:"fakd",normal:"fakd"}}),Bs=Object.keys(Is).reduce((e,t)=>(e[t.toLowerCase()]=Is[t],e),{}),Hs=Object.keys(Bs).reduce((e,t)=>{const n=Bs[t];return e[t]=n[900]||[...Object.entries(n)][0][1],e},{});function Ws(e,t){const n="".concat("data-fa-pseudo-element-pending").concat(t.replace(":","-"));return new Promise((r,s)=>{if(null!==e.getAttribute(n))return r();const a=er(e.children).filter(e=>e.getAttribute(Nn)===t)[0],i=Qt.getComputedStyle(e,t),o=i.getPropertyValue("font-family"),l=o.match(Wn),c=i.getPropertyValue("font-weight"),u=i.getPropertyValue("content");if(a&&!l)return e.removeChild(a),r();if(l&&"none"!==u&&""!==u){const u=i.getPropertyValue("content");let d=function(e,t){const n=e.replace(/^['"]|['"]$/g,"").toLowerCase(),r=parseInt(t),s=isNaN(r)?"normal":r;return(Bs[n]||{})[s]||Hs[n]}(o,c);const{value:h,isSecondary:f}=function(e){const t=e.replace(Fs,""),n=function(e,t){const n=e.length;let r,s=e.charCodeAt(t);return s>=55296&&s<=56319&&n>t+1&&(r=e.charCodeAt(t+1),r>=56320&&r<=57343)?1024*(s-55296)+r-56320+65536:s}(t,0),r=n>=Rs[0]&&n<=Rs[1],s=2===t.length&&t[0]===t[1];return{value:yr(s?t[0]:t),isSecondary:r||s}}(u),m=l[0].startsWith("FontAwesome");let p=Ar(d,h),g=p;if(m){const e=function(e){const t=Tr[e],n=Ar("fas",e);return t||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}(h);e.iconName&&e.prefix&&(p=e.iconName,d=e.prefix)}if(!p||f||a&&a.getAttribute(_n)===d&&a.getAttribute(Tn)===g)r();else{e.setAttribute(n,g),a&&e.removeChild(a);const i={iconName:null,title:null,titleId:null,prefix:null,transform:Jn,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}},{extra:o}=i;o.attributes[Nn]=t,os(p,d).then(s=>{const a=ns(Ut(Ut({},i),{},{icons:{main:s,mask:{prefix:null,iconName:null,rest:[]}},prefix:d,iconName:g,extra:o,watchable:!0})),l=$t.createElementNS("http://www.w3.org/2000/svg","svg");"::before"===t?e.insertBefore(l,e.firstChild):e.appendChild(l),l.outerHTML=a.map(e=>mr(e)).join("\n"),e.removeAttribute(n),r()}).catch(s)}}else r()})}function Us(e){return Promise.all([Ws(e,"::before"),Ws(e,"::after")])}function Ys(e){return e.parentNode!==document.head&&!~Pn.indexOf(e.tagName.toUpperCase())&&!e.getAttribute(Nn)&&(!e.parentNode||"svg"!==e.parentNode.tagName)}function Vs(e){if(en)return new Promise((t,n)=>{const r=er(e.querySelectorAll("*")).filter(Ys).map(Us),s=hs("searchPseudoElements");Cs(),Promise.all(r).then(()=>{s(),Ss(),t()}).catch(()=>{s(),Ss(),n()})})}var qs={hooks:()=>({mutationObserverCallbacks:e=>(e.pseudoElementsCallback=Vs,e)}),provides(e){e.pseudoElements2svg=function(e){const{node:t=$t}=e;Kn.searchPseudoElements&&Vs(t)}}};let Xs=!1;var Gs={mixout:()=>({dom:{unwatch(){Cs(),Xs=!0}}}),hooks:()=>({bootstrap(){ks(qr("mutationObserverCallbacks",{}))},noAuto(){js&&js.disconnect()},watch(e){const{observeMutationsRoot:t}=e;Xs?Ss():ks(qr("mutationObserverCallbacks",{observeMutationsRoot:t}))}})};const Ks=e=>e.toLowerCase().split(" ").reduce((e,t)=>{const n=t.toLowerCase().split("-"),r=n[0];let s=n.slice(1).join("-");if(r&&"h"===s)return e.flipX=!0,e;if(r&&"v"===s)return e.flipY=!0,e;if(s=parseFloat(s),isNaN(s))return e;switch(r){case"grow":e.size=e.size+s;break;case"shrink":e.size=e.size-s;break;case"left":e.x=e.x-s;break;case"right":e.x=e.x+s;break;case"up":e.y=e.y-s;break;case"down":e.y=e.y+s;break;case"rotate":e.rotate=e.rotate+s}return e},{size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0});var Qs={mixout:()=>({parse:{transform:e=>Ks(e)}}),hooks:()=>({parseNodeAttributes(e,t){const n=t.getAttribute("data-fa-transform");return n&&(e.transform=Ks(n)),e}}),provides(e){e.generateAbstractTransformGrouping=function(e){let{main:t,transform:n,containerWidth:r,iconWidth:s}=e;const a={transform:"translate(".concat(r/2," 256)")},i="translate(".concat(32*n.x,", ").concat(32*n.y,") "),o="scale(".concat(n.size/16*(n.flipX?-1:1),", ").concat(n.size/16*(n.flipY?-1:1),") "),l="rotate(".concat(n.rotate," 0 0)"),c={outer:a,inner:{transform:"".concat(i," ").concat(o," ").concat(l)},path:{transform:"translate(".concat(s/2*-1," -256)")}};return{tag:"g",attributes:Ut({},c.outer),children:[{tag:"g",attributes:Ut({},c.inner),children:[{tag:t.icon.tag,children:t.icon.children,attributes:Ut(Ut({},t.icon.attributes),c.path)}]}]}}}};const $s={x:0,y:0,width:"100%",height:"100%"};function Js(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}var Zs={hooks:()=>({parseNodeAttributes(e,t){const n=t.getAttribute("data-fa-mask"),r=n?Ir(n.split(" ").map(e=>e.trim())):{prefix:null,iconName:null,rest:[]};return r.prefix||(r.prefix=zr()),e.mask=r,e.maskId=t.getAttribute("data-fa-mask-id"),e}}),provides(e){e.generateAbstractMask=function(e){let{children:t,attributes:n,main:r,mask:s,maskId:a,transform:i}=e;const{width:o,icon:l}=r,{width:c,icon:u}=s,d=function(e){let{transform:t,containerWidth:n,iconWidth:r}=e;const s={transform:"translate(".concat(n/2," 256)")},a="translate(".concat(32*t.x,", ").concat(32*t.y,") "),i="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),o="rotate(".concat(t.rotate," 0 0)");return{outer:s,inner:{transform:"".concat(a," ").concat(i," ").concat(o)},path:{transform:"translate(".concat(r/2*-1," -256)")}}}({transform:i,containerWidth:c,iconWidth:o}),h={tag:"rect",attributes:Ut(Ut({},$s),{},{fill:"white"})},f=l.children?{children:l.children.map(Js)}:{},m={tag:"g",attributes:Ut({},d.inner),children:[Js(Ut({tag:l.tag,attributes:Ut(Ut({},l.attributes),d.path)},f))]},p={tag:"g",attributes:Ut({},d.outer),children:[m]},g="mask-".concat(a||Zn()),y="clip-".concat(a||Zn()),x={tag:"mask",attributes:Ut(Ut({},$s),{},{id:g,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[h,p]},b={tag:"defs",children:[{tag:"clipPath",attributes:{id:y},children:(v=u,"g"===v.tag?v.children:[v])},x]};var v;return t.push(b,{tag:"rect",attributes:Ut({fill:"currentColor","clip-path":"url(#".concat(y,")"),mask:"url(#".concat(g,")")},$s)}),{children:t,attributes:n}}}},ea={provides(e){let t=!1;Qt.matchMedia&&(t=Qt.matchMedia("(prefers-reduced-motion: reduce)").matches),e.missingIconAbstract=function(){const e=[],n={fill:"currentColor"},r={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};e.push({tag:"path",attributes:Ut(Ut({},n),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});const s=Ut(Ut({},r),{},{attributeName:"opacity"}),a={tag:"circle",attributes:Ut(Ut({},n),{},{cx:"256",cy:"364",r:"28"}),children:[]};return t||a.children.push({tag:"animate",attributes:Ut(Ut({},r),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:Ut(Ut({},s),{},{values:"1;0;1;1;0;1;"})}),e.push(a),e.push({tag:"path",attributes:Ut(Ut({},n),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:t?[]:[{tag:"animate",attributes:Ut(Ut({},s),{},{values:"1;0;0;0;0;1;"})}]}),t||e.push({tag:"path",attributes:Ut(Ut({},n),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:Ut(Ut({},s),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:e}}}};!function(e,t){let{mixoutsTo:n}=t;Wr=e,Ur={},Object.keys(Yr).forEach(e=>{-1===Vr.indexOf(e)&&delete Yr[e]}),Wr.forEach(e=>{const t=e.mixout?e.mixout():{};if(Object.keys(t).forEach(e=>{"function"===typeof t[e]&&(n[e]=t[e]),"object"===typeof t[e]&&Object.keys(t[e]).forEach(r=>{n[e]||(n[e]={}),n[e][r]=t[e][r]})}),e.hooks){const t=e.hooks();Object.keys(t).forEach(e=>{Ur[e]||(Ur[e]=[]),Ur[e].push(t[e])})}e.provides&&e.provides(Yr)})}([lr,As,Ms,Ls,zs,qs,Gs,Qs,Zs,ea,{hooks:()=>({parseNodeAttributes(e,t){const n=t.getAttribute("data-fa-symbol"),r=null!==n&&(""===n||n);return e.symbol=r,e}})}],{mixoutsTo:Zr});const ta=Zr.parse,na=Zr.icon;var ra=n(173),sa=n.n(ra);function aa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function ia(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function la(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oa(Object(n),!0).forEach(function(t){ia(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oa(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ca(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,s,a,i,o=[],l=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(e){c=!0,s=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw s}}return o}}(e,t)||ha(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ua(e){return function(e){if(Array.isArray(e))return aa(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ha(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function da(e){return da="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},da(e)}function ha(e,t){if(e){if("string"==typeof e)return aa(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?aa(e,t):void 0}}var fa;try{var ma=n(900);fa=ma.version}catch(oo){fa="undefined"!==typeof process&&{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_STRIPE_PUBLISHABLE_KEY:"pk_test_51SRxFZFJzpn39buGuSe4Smdsfrnrm8S3IeVJYCra5wXLFeVBGfAdOeFGYGBfStlhZnUlzUVFvajHzioLv92EVyWn00hOlOtcU4",REACT_APP_BACKEND_URL:"http://localhost:3001",REACT_APP_SUPABASE_URL:"https://cjpkfllqvakukzrqtcqc.supabase.co",REACT_APP_SUPABASE_ANON_KEY:"sb_publishable_Fz26XygnmLZDruazTuFDjg_4m4foumC",REACT_APP_API_URL:"https://localhost:3001"}.FA_VERSION||"7.0.0"}function pa(e){var t=e.beat,n=e.fade,r=e.beatFade,s=e.bounce,a=e.shake,i=e.flash,o=e.spin,l=e.spinPulse,c=e.spinReverse,u=e.pulse,d=e.fixedWidth,h=e.inverse,f=e.border,m=e.listItem,p=e.flip,g=e.size,y=e.rotation,x=e.pull,b=e.swapOpacity,v=e.rotateBy,w=e.widthAuto,C=function(e,t){for(var n=ca(e.split("-"),2),r=n[0],s=n[1],a=ca(t.split("-"),2),i=a[0],o=a[1],l=r.split("."),c=i.split("."),u=0;u<Math.max(l.length,c.length);u++){var d=l[u]||"0",h=c[u]||"0",f=parseInt(d,10),m=parseInt(h,10);if(f!==m)return f>m}for(var p=0;p<Math.max(l.length,c.length);p++){var g=l[p]||"0",y=c[p]||"0";if(g!==y&&g.length!==y.length)return g.length<y.length}return!(s&&!o)}(fa,"7.0.0"),S=ia(ia(ia(ia(ia(ia({"fa-beat":t,"fa-fade":n,"fa-beat-fade":r,"fa-bounce":s,"fa-shake":a,"fa-flash":i,"fa-spin":o,"fa-spin-reverse":c,"fa-spin-pulse":l,"fa-pulse":u,"fa-fw":d,"fa-inverse":h,"fa-border":f,"fa-li":m,"fa-flip":!0===p,"fa-flip-horizontal":"horizontal"===p||"both"===p,"fa-flip-vertical":"vertical"===p||"both"===p},"fa-".concat(g),"undefined"!==typeof g&&null!==g),"fa-rotate-".concat(y),"undefined"!==typeof y&&null!==y&&0!==y),"fa-pull-".concat(x),"undefined"!==typeof x&&null!==x),"fa-swap-opacity",b),"fa-rotate-by",C&&v),"fa-width-auto",C&&w);return Object.keys(S).map(function(e){return S[e]?e:null}).filter(function(e){return e})}function ga(e){return t=e,(t-=0)===t?e:(e=e.replace(/[\-_\s]+(.)?/g,function(e,t){return t?t.toUpperCase():""})).substr(0,1).toLowerCase()+e.substr(1);var t}var ya=["style"];var xa=!1;try{xa=!0}catch(oo){}function ba(e){return e&&"object"===da(e)&&e.prefix&&e.iconName&&e.icon?e:ta.icon?ta.icon(e):null===e?null:e&&"object"===da(e)&&e.prefix&&e.iconName?e:Array.isArray(e)&&2===e.length?{prefix:e[0],iconName:e[1]}:"string"===typeof e?{prefix:"fas",iconName:e}:void 0}function va(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?ia({},e,t):{}}var wa={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,rotateBy:!1,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1,widthAuto:!1},Ca=e.forwardRef(function(e,t){var n=la(la({},wa),e),r=n.icon,s=n.mask,a=n.symbol,i=n.className,o=n.title,l=n.titleId,c=n.maskId,u=ba(r),d=va("classes",[].concat(ua(pa(n)),ua((i||"").split(" ")))),h=va("transform","string"===typeof n.transform?ta.transform(n.transform):n.transform),f=va("mask",ba(s)),m=na(u,la(la(la(la({},d),h),f),{},{symbol:a,title:o,titleId:l,maskId:c}));if(!m)return function(){var e;!xa&&console&&"function"===typeof console.error&&(e=console).error.apply(e,arguments)}("Could not find icon",u),null;var p=m.abstract,g={ref:t};return Object.keys(n).forEach(function(e){wa.hasOwnProperty(e)||(g[e]=n[e])}),Sa(p[0],g)});Ca.displayName="FontAwesomeIcon",Ca.propTypes={beat:sa().bool,border:sa().bool,beatFade:sa().bool,bounce:sa().bool,className:sa().string,fade:sa().bool,flash:sa().bool,mask:sa().oneOfType([sa().object,sa().array,sa().string]),maskId:sa().string,fixedWidth:sa().bool,inverse:sa().bool,flip:sa().oneOf([!0,!1,"horizontal","vertical","both"]),icon:sa().oneOfType([sa().object,sa().array,sa().string]),listItem:sa().bool,pull:sa().oneOf(["right","left"]),pulse:sa().bool,rotation:sa().oneOf([0,90,180,270]),rotateBy:sa().bool,shake:sa().bool,size:sa().oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:sa().bool,spinPulse:sa().bool,spinReverse:sa().bool,symbol:sa().oneOfType([sa().bool,sa().string]),title:sa().string,titleId:sa().string,transform:sa().oneOfType([sa().string,sa().object]),swapOpacity:sa().bool,widthAuto:sa().bool};var Sa=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"===typeof n)return n;var s=(n.children||[]).map(function(n){return e(t,n)}),a=Object.keys(n.attributes||{}).reduce(function(e,t){var r=n.attributes[t];switch(t){case"class":e.attrs.className=r,delete n.attributes.class;break;case"style":e.attrs.style=r.split(";").map(function(e){return e.trim()}).filter(function(e){return e}).reduce(function(e,t){var n,r=t.indexOf(":"),s=ga(t.slice(0,r)),a=t.slice(r+1).trim();return s.startsWith("webkit")?e[(n=s,n.charAt(0).toUpperCase()+n.slice(1))]=a:e[s]=a,e},{});break;default:0===t.indexOf("aria-")||0===t.indexOf("data-")?e.attrs[t.toLowerCase()]=r:e.attrs[ga(t)]=r}return e},{attrs:{}}),i=r.style,o=void 0===i?{}:i,l=function(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}(r,ya);return a.attrs.style=la(la({},a.attrs.style),o),t.apply(void 0,[n.tag,la(la({},a.attrs),l)].concat(ua(s)))}.bind(null,e.createElement),ja={prefix:"fab",iconName:"cc-paypal",icon:[576,512,[],"f1f4","M186.3 258.2c0 12.2-9.7 21.5-22 21.5-9.2 0-16-5.2-16-15 0-12.2 9.5-22 21.7-22 9.3 0 16.3 5.7 16.3 15.5zM80.5 209.7l-4.7 0c-1.5 0-3 1-3.2 2.7l-4.3 26.7 8.2-.3c11 0 19.5-1.5 21.5-14.2 2.3-13.4-6.2-14.9-17.5-14.9zm284 0l-4.5 0c-1.8 0-3 1-3.2 2.7l-4.2 26.7 8-.3c13 0 22-3 22-18-.1-10.6-9.6-11.1-18.1-11.1zM576 80l0 352c0 26.5-21.5 48-48 48L48 480c-26.5 0-48-21.5-48-48L0 80C0 53.5 21.5 32 48 32l480 0c26.5 0 48 21.5 48 48zM128.3 215.4c0-21-16.2-28-34.7-28l-40 0c-2.5 0-5 2-5.2 4.7L32 294.2c-.3 2 1.2 4 3.2 4l19 0c2.7 0 5.2-2.9 5.5-5.7l4.5-26.6c1-7.2 13.2-4.7 18-4.7 28.6 0 46.1-17 46.1-45.8zm84.2 8.8l-19 0c-3.8 0-4 5.5-4.2 8.2-5.8-8.5-14.2-10-23.7-10-24.5 0-43.2 21.5-43.2 45.2 0 19.5 12.2 32.2 31.7 32.2 9 0 20.2-4.9 26.5-11.9-.5 1.5-1 4.7-1 6.2 0 2.3 1 4 3.2 4l17.2 0c2.7 0 5-2.9 5.5-5.7l10.2-64.3c.3-1.9-1.2-3.9-3.2-3.9zM253 322.1l63.7-92.6c.5-.5 .5-1 .5-1.7 0-1.7-1.5-3.5-3.2-3.5l-19.2 0c-1.7 0-3.5 1-4.5 2.5l-26.5 39-11-37.5c-.8-2.2-3-4-5.5-4l-18.7 0c-1.7 0-3.2 1.8-3.2 3.5 0 1.2 19.5 56.8 21.2 62.1-2.7 3.8-20.5 28.6-20.5 31.6 0 1.8 1.5 3.2 3.2 3.2l19.2 0c1.8-.1 3.5-1.1 4.5-2.6zM412.3 215.4c0-21-16.2-28-34.7-28l-39.7 0c-2.7 0-5.2 2-5.5 4.7l-16.2 102c-.2 2 1.3 4 3.2 4l20.5 0c2 0 3.5-1.5 4-3.2l4.5-29c1-7.2 13.2-4.7 18-4.7 28.4 0 45.9-17 45.9-45.8zm84.2 8.8l-19 0c-3.8 0-4 5.5-4.3 8.2-5.5-8.5-14-10-23.7-10-24.5 0-43.2 21.5-43.2 45.2 0 19.5 12.2 32.2 31.7 32.2 9.3 0 20.5-4.9 26.5-11.9-.3 1.5-1 4.7-1 6.2 0 2.3 1 4 3.2 4l17.3 0c2.7 0 5-2.9 5.5-5.7l10.2-64.3c.3-1.9-1.2-3.9-3.2-3.9zM544 190.9c0-2-1.5-3.5-3.2-3.5l-18.5 0c-1.5 0-3 1.2-3.2 2.7l-16.2 104-.3 .5c0 1.8 1.5 3.5 3.5 3.5l16.5 0c2.5 0 5-2.9 5.2-5.7l16.2-101.2 0-.3zm-90 51.8c-12.2 0-21.7 9.7-21.7 22 0 9.7 7 15 16.2 15 12 0 21.7-9.2 21.7-21.5 .1-9.8-6.9-15.5-16.2-15.5z"]},ka={prefix:"fab",iconName:"facebook",icon:[512,512,[62e3],"f09a","M512 256C512 114.6 397.4 0 256 0S0 114.6 0 256C0 376 82.7 476.8 194.2 504.5l0-170.3-52.8 0 0-78.2 52.8 0 0-33.7c0-87.1 39.4-127.5 125-127.5 16.2 0 44.2 3.2 55.7 6.4l0 70.8c-6-.6-16.5-1-29.6-1-42 0-58.2 15.9-58.2 57.2l0 27.8 83.6 0-14.4 78.2-69.3 0 0 175.9C413.8 494.8 512 386.9 512 256z"]},Na={prefix:"fab",iconName:"cc-visa",icon:[576,512,[],"f1f0","M470.1 231.3s7.6 37.2 9.3 45l-33.4 0c3.3-8.9 16-43.5 16-43.5-.2 .3 3.3-9.1 5.3-14.9l2.8 13.4zM576 80l0 352c0 26.5-21.5 48-48 48L48 480c-26.5 0-48-21.5-48-48L0 80C0 53.5 21.5 32 48 32l480 0c26.5 0 48 21.5 48 48zM152.5 331.2l63.2-155.2-42.5 0-39.3 106-4.3-21.5-14-71.4c-2.3-9.9-9.4-12.7-18.2-13.1l-64.7 0-.7 3.1c15.8 4 29.9 9.8 42.2 17.1l35.8 135 42.5 0zm94.4 .2l25.2-155.4-40.2 0-25.1 155.4 40.1 0zm139.9-50.8c.2-17.7-10.6-31.2-33.7-42.3-14.1-7.1-22.7-11.9-22.7-19.2 .2-6.6 7.3-13.4 23.1-13.4 13.1-.3 22.7 2.8 29.9 5.9l3.6 1.7 5.5-33.6c-7.9-3.1-20.5-6.6-36-6.6-39.7 0-67.6 21.2-67.8 51.4-.3 22.3 20 34.7 35.2 42.2 15.5 7.6 20.8 12.6 20.8 19.3-.2 10.4-12.6 15.2-24.1 15.2-16 0-24.6-2.5-37.7-8.3l-5.3-2.5-5.6 34.9c9.4 4.3 26.8 8.1 44.8 8.3 42.2 .1 69.7-20.8 70-53zM528 331.4l-32.4-155.4-31.1 0c-9.6 0-16.9 2.8-21 12.9l-59.7 142.5 42.2 0s6.9-19.2 8.4-23.3l51.6 0c1.2 5.5 4.8 23.3 4.8 23.3l37.2 0z"]},_a={prefix:"fab",iconName:"tiktok",icon:[448,512,[],"e07b","M448.5 209.9c-44 .1-87-13.6-122.8-39.2l0 178.7c0 33.1-10.1 65.4-29 92.6s-45.6 48-76.6 59.6-64.8 13.5-96.9 5.3-60.9-25.9-82.7-50.8-35.3-56-39-88.9 2.9-66.1 18.6-95.2 40-52.7 69.6-67.7 62.9-20.5 95.7-16l0 89.9c-15-4.7-31.1-4.6-46 .4s-27.9 14.6-37 27.3-14 28.1-13.9 43.9 5.2 31 14.5 43.7 22.4 22.1 37.4 26.9 31.1 4.8 46-.1 28-14.4 37.2-27.1 14.2-28.1 14.2-43.8l0-349.4 88 0c-.1 7.4 .6 14.9 1.9 22.2 3.1 16.3 9.4 31.9 18.7 45.7s21.3 25.6 35.2 34.6c19.9 13.1 43.2 20.1 67 20.1l0 87.4z"]},Ta={prefix:"fab",iconName:"instagram",icon:[448,512,[],"f16d","M224.3 141a115 115 0 1 0 -.6 230 115 115 0 1 0 .6-230zm-.6 40.4a74.6 74.6 0 1 1 .6 149.2 74.6 74.6 0 1 1 -.6-149.2zm93.4-45.1a26.8 26.8 0 1 1 53.6 0 26.8 26.8 0 1 1 -53.6 0zm129.7 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM399 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"]},Ea={prefix:"fab",iconName:"whatsapp",icon:[448,512,[],"f232","M380.9 97.1c-41.9-42-97.7-65.1-157-65.1-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480 117.7 449.1c32.4 17.7 68.9 27 106.1 27l.1 0c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157zm-157 341.6c-33.2 0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3 18.6-68.1-4.4-7c-18.5-29.4-28.2-63.3-28.2-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1s56.2 81.2 56.1 130.5c0 101.8-84.9 184.6-186.6 184.6zM325.1 300.5c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8s-14.3 18-17.6 21.8c-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7 .9-6.9-.5-9.7s-12.5-30.1-17.1-41.2c-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2s-9.7 1.4-14.8 6.9c-5.1 5.6-19.4 19-19.4 46.3s19.9 53.7 22.6 57.4c2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4s4.6-24.1 3.2-26.4c-1.3-2.5-5-3.9-10.5-6.6z"]},Pa={prefix:"fab",iconName:"etsy",icon:[384,512,[],"f2d7","M384 348c-1.8 10.7-13.8 110-15.5 132-117.9-4.3-219.9-4.7-368.5 0l0-25.5c45.5-8.9 60.6-8 61-35.2 1.8-72.3 3.5-244.1 0-322-1-28.5-12.1-26.8-61-36L0 35.8c73.9 2.4 255.9 8.6 363-3.8-3.5 38.2-7.8 126.5-7.8 126.5l-23.2 0C320.9 115.7 313.2 68 277.3 68l-137 0c-10.2 0-10.7 3.5-10.7 9.8l0 163.8c58 .5 88.5-2.5 88.5-2.5 29.8-1 27.6-8.5 40.7-65.3l25.8 0c-4.4 101.4-3.9 61.8-1.8 160.3L257 334c-9.2-40.1-9.1-61-39.5-61.5 0 0-21.5-2-88-2l0 139c0 26 14.3 38.3 44.3 38.3l89.3 0c63.6 0 66.6-25 98.7-99.8l22.2 0z"]},Oa={prefix:"fab",iconName:"cc-amex",icon:[576,512,[],"f1f3","M0 432c0 26.5 21.5 48 48 48l480 0c26.5 0 48-21.5 48-48l0-1.1-61.7 0-31.9-35.1-31.9 35.1-203.7 0 0-163.8-65.8 0 81.7-184.7 78.6 0 28.1 63.2 0-63.2 97.2 0 16.9 47.6 17-47.6 75.5 0 0-2.4c0-26.5-21.5-48-48-48L48 32C21.5 32 0 53.5 0 80L0 432zm440.4-21.7l42.2-46.3 42 46.3 51.4 0-68-72.1 68-72.1-50.6 0-42 46.7-41.5-46.7-51.4 0 67.5 72.5-67.4 71.6 0-33.1-83 0 0-22.2 80.9 0 0-32.3-80.9 0 0-22.4 83 0 0-33.1-122 0 0 143.2 171.8 0zm96.3-72l39.3 41.9 0-83.3-39.3 41.4zm-36.3-92l36.9-100.6 0 100.6 38.7 0 0-143.3-60.2 0-32.2 89.3-31.9-89.3-61.2 0 0 143.1-63.2-143.1-51.2 0-62.4 143.3 43 0 11.9-28.7 65.9 0 12 28.7 82.7 0 0-100.3 36.8 100.3 34.4 0zM282 185.4l19.5-46.9 19.4 46.9-38.9 0z"]},Da={prefix:"fab",iconName:"cc-mastercard",icon:[576,512,[],"f1f1","M482.9 410.3c0 6.8-4.6 11.7-11.2 11.7-6.8 0-11.2-5.2-11.2-11.7s4.4-11.7 11.2-11.7c6.6 0 11.2 5.2 11.2 11.7zM172.1 398.6c-7.1 0-11.2 5.2-11.2 11.7S165 422 172.1 422c6.5 0 10.9-4.9 10.9-11.7-.1-6.5-4.4-11.7-10.9-11.7zm117.5-.3c-5.4 0-8.7 3.5-9.5 8.7l19.1 0c-.9-5.7-4.4-8.7-9.6-8.7zm107.8 .3c-6.8 0-10.9 5.2-10.9 11.7s4.1 11.7 10.9 11.7 11.2-4.9 11.2-11.7c0-6.5-4.4-11.7-11.2-11.7zm105.9 26.1c0 .3 .3 .5 .3 1.1 0 .3-.3 .5-.3 1.1-.3 .3-.3 .5-.5 .8-.3 .3-.5 .5-1.1 .5-.3 .3-.5 .3-1.1 .3-.3 0-.5 0-1.1-.3-.3 0-.5-.3-.8-.5-.3-.3-.5-.5-.5-.8-.3-.5-.3-.8-.3-1.1 0-.5 0-.8 .3-1.1 0-.5 .3-.8 .5-1.1 .3-.3 .5-.3 .8-.5 .5-.3 .8-.3 1.1-.3 .5 0 .8 0 1.1 .3 .5 .3 .8 .3 1.1 .5s.2 .6 .5 1.1zm-2.2 1.4c.5 0 .5-.3 .8-.3 .3-.3 .3-.5 .3-.8s0-.5-.3-.8c-.3 0-.5-.3-1.1-.3l-1.6 0 0 3.5 .8 0 0-1.4 .3 0 1.1 1.4 .8 0-1.1-1.3zM576 81l0 352c0 26.5-21.5 48-48 48L48 481c-26.5 0-48-21.5-48-48L0 81C0 54.5 21.5 33 48 33l480 0c26.5 0 48 21.5 48 48zM64 220.6c0 76.5 62.1 138.5 138.5 138.5 27.2 0 53.9-8.2 76.5-23.1-72.9-59.3-72.4-171.2 0-230.5-22.6-15-49.3-23.1-76.5-23.1-76.4-.1-138.5 62-138.5 138.2zM288 329.4c70.5-55 70.2-162.2 0-217.5-70.2 55.3-70.5 162.6 0 217.5zM145.7 405.7c0-8.7-5.7-14.4-14.7-14.7-4.6 0-9.5 1.4-12.8 6.5-2.4-4.1-6.5-6.5-12.2-6.5-3.8 0-7.6 1.4-10.6 5.4l0-4.4-8.2 0 0 36.7 8.2 0c0-18.9-2.5-30.2 9-30.2 10.2 0 8.2 10.2 8.2 30.2l7.9 0c0-18.3-2.5-30.2 9-30.2 10.2 0 8.2 10 8.2 30.2l8.2 0 0-23-.2 0zM190.6 392l-7.9 0 0 4.4c-2.7-3.3-6.5-5.4-11.7-5.4-10.3 0-18.2 8.2-18.2 19.3 0 11.2 7.9 19.3 18.2 19.3 5.2 0 9-1.9 11.7-5.4l0 4.6 7.9 0 0-36.8zm40.5 25.6c0-15-22.9-8.2-22.9-15.2 0-5.7 11.9-4.8 18.5-1.1l3.3-6.5c-9.4-6.1-30.2-6-30.2 8.2 0 14.3 22.9 8.3 22.9 15 0 6.3-13.5 5.8-20.7 .8l-3.5 6.3c11.2 7.6 32.6 6 32.6-7.5zm35.4 9.3l-2.2-6.8c-3.8 2.1-12.2 4.4-12.2-4.1l0-16.6 13.1 0 0-7.4-13.1 0 0-11.2-8.2 0 0 11.2-7.6 0 0 7.3 7.6 0 0 16.7c0 17.6 17.3 14.4 22.6 10.9zm13.3-13.4l27.5 0c0-16.2-7.4-22.6-17.4-22.6-10.6 0-18.2 7.9-18.2 19.3 0 20.5 22.6 23.9 33.8 14.2l-3.8-6c-7.8 6.4-19.6 5.8-21.9-4.9zM338.9 392c-4.6-2-11.6-1.8-15.2 4.4l0-4.4-8.2 0 0 36.7 8.2 0 0-20.7c0-11.6 9.5-10.1 12.8-8.4l2.4-7.6zm10.6 18.3c0-11.4 11.6-15.1 20.7-8.4l3.8-6.5c-11.6-9.1-32.7-4.1-32.7 15 0 19.8 22.4 23.8 32.7 15l-3.8-6.5c-9.2 6.5-20.7 2.6-20.7-8.6zM416.2 392l-8.2 0 0 4.4c-8.3-11-29.9-4.8-29.9 13.9 0 19.2 22.4 24.7 29.9 13.9l0 4.6 8.2 0 0-36.8zm33.7 0c-2.4-1.2-11-2.9-15.2 4.4l0-4.4-7.9 0 0 36.7 7.9 0 0-20.7c0-11 9-10.3 12.8-8.4l2.4-7.6zm40.3-14.9l-7.9 0 0 19.3c-8.2-10.9-29.9-5.1-29.9 13.9 0 19.4 22.5 24.6 29.9 13.9l0 4.6 7.9 0 0-51.7zm7.6-75.1l0 4.6 .8 0 0-4.6 1.9 0 0-.8-4.6 0 0 .8 1.9 0zm6.6 123.8c0-.5 0-1.1-.3-1.6-.3-.3-.5-.8-.8-1.1s-.8-.5-1.1-.8c-.5 0-1.1-.3-1.6-.3-.3 0-.8 .3-1.4 .3-.5 .3-.8 .5-1.1 .8-.5 .3-.8 .8-.8 1.1-.3 .5-.3 1.1-.3 1.6 0 .3 0 .8 .3 1.4 0 .3 .3 .8 .8 1.1 .3 .3 .5 .5 1.1 .8 .5 .3 1.1 .3 1.4 .3 .5 0 1.1 0 1.6-.3 .3-.3 .8-.5 1.1-.8s.5-.8 .8-1.1c.3-.6 .3-1.1 .3-1.4zm3.2-124.7l-1.4 0-1.6 3.5-1.6-3.5-1.4 0 0 5.4 .8 0 0-4.1 1.6 3.5 1.1 0 1.4-3.5 0 4.1 1.1 0 0-5.4zm4.4-80.5c0-76.2-62.1-138.3-138.5-138.3-27.2 0-53.9 8.2-76.5 23.1 72.1 59.3 73.2 171.5 0 230.5 22.6 15 49.5 23.1 76.5 23.1 76.4 .1 138.5-61.9 138.5-138.4z"]};const Aa=e=>{let{isMobile:t=!1}=e;const n=t?"text-sm":"text-md",r=t?"flex":"hidden md:flex items-center gap-4";return(0,Lt.jsxs)("div",{className:r,children:[(0,Lt.jsx)("a",{href:"https://instagram.com/thehappycase.store",target:"_blank",rel:"noopener noreferrer",className:"".concat(t?"w-8 h-8 flex items-center justify-center":""," transition-opacity hover:opacity-80"),"aria-label":"Follow us on Instagram",children:(0,Lt.jsx)(Ca,{icon:Ta,className:n,style:{color:"#E4405F"}})}),(0,Lt.jsx)("a",{href:"https://tiktok.com/@thehappycase.store",target:"_blank",rel:"noopener noreferrer",className:"".concat(t?"w-8 h-8 flex items-center justify-center":""," transition-opacity hover:opacity-80"),"aria-label":"Follow us on TikTok",children:(0,Lt.jsx)(Ca,{icon:_a,className:n,style:{color:"#000000"}})}),(0,Lt.jsx)("a",{href:"https://facebook.com/thehappycase",target:"_blank",rel:"noopener noreferrer",className:"".concat(t?"w-8 h-8 flex items-center justify-center":""," transition-opacity hover:opacity-80"),"aria-label":"Follow us on Facebook",children:(0,Lt.jsx)(Ca,{icon:ka,className:n,style:{color:"#1877F2"}})}),(0,Lt.jsx)("a",{href:"https://www.etsy.com/shop/TheHappyCaseShop?ref=dashboard-header",target:"_blank",rel:"noopener noreferrer",className:"".concat(t?"w-8 h-8 flex items-center justify-center":""," transition-opacity hover:opacity-80"),"aria-label":"Visit our Etsy shop",children:(0,Lt.jsx)(Ca,{icon:Pa,className:n,style:{color:"#F45800"}})})]})},Ma={prefix:"fas",iconName:"bag-shopping",icon:[448,512,["shopping-bag"],"f290","M160 112c0-35.3 28.7-64 64-64s64 28.7 64 64l0 48-128 0 0-48zm-48 48l-64 0c-26.5 0-48 21.5-48 48L0 416c0 53 43 96 96 96l256 0c53 0 96-43 96-96l0-208c0-26.5-21.5-48-48-48l-64 0 0-48C336 50.1 285.9 0 224 0S112 50.1 112 112l0 48zm24 48a24 24 0 1 1 0 48 24 24 0 1 1 0-48zm152 24a24 24 0 1 1 48 0 24 24 0 1 1 -48 0z"]},La=Ma,za={prefix:"fas",iconName:"chevron-up",icon:[512,512,[],"f077","M233.4 105.4c12.5-12.5 32.8-12.5 45.3 0l192 192c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L256 173.3 86.6 342.6c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3l192-192z"]},Fa={prefix:"fas",iconName:"globe",icon:[512,512,[127760],"f0ac","M352 256c0 22.2-1.2 43.6-3.3 64l-185.3 0c-2.2-20.4-3.3-41.8-3.3-64s1.2-43.6 3.3-64l185.3 0c2.2 20.4 3.3 41.8 3.3 64zm28.8-64l123.1 0c5.3 20.5 8.1 41.9 8.1 64s-2.8 43.5-8.1 64l-123.1 0c2.1-20.6 3.2-42 3.2-64s-1.1-43.4-3.2-64zm112.6-32l-116.7 0c-10-63.9-29.8-117.4-55.3-151.6c78.3 20.7 142 77.5 171.9 151.6zm-149.1 0l-176.6 0c6.1-36.4 15.5-68.6 27-94.7c10.5-23.6 22.2-40.7 33.5-51.5C239.4 3.2 248.7 0 256 0s16.6 3.2 27.8 13.8c11.3 10.8 23 27.9 33.5 51.5c11.6 26 20.9 58.2 27 94.7zm-209 0L18.6 160C48.6 85.9 112.2 29.1 190.6 8.4C165.1 42.6 145.3 96.1 135.3 160zM8.1 192l123.1 0c-2.1 20.6-3.2 42-3.2 64s1.1 43.4 3.2 64L8.1 320C2.8 299.5 0 278.1 0 256s2.8-43.5 8.1-64zM194.7 446.6c-11.6-26-20.9-58.2-27-94.6l176.6 0c-6.1 36.4-15.5 68.6-27 94.6c-10.5 23.6-22.2 40.7-33.5 51.5C272.6 508.8 263.3 512 256 512s-16.6-3.2-27.8-13.8c-11.3-10.8-23-27.9-33.5-51.5zM135.3 352c10 63.9 29.8 117.4 55.3 151.6C112.2 482.9 48.6 426.1 18.6 352l116.7 0zm358.1 0c-30 74.1-93.6 130.9-171.9 151.6c25.5-34.2 45.2-87.7 55.3-151.6l116.7 0z"]},Ra={prefix:"fas",iconName:"star",icon:[576,512,[11088,61446],"f005","M316.9 18C311.6 7 300.4 0 288.1 0s-23.4 7-28.8 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3l128.3-68.5 128.3 68.5c10.8 5.7 23.9 4.9 33.8-2.3s14.9-19.3 12.9-31.3L438.5 329 542.7 225.9c8.6-8.5 11.7-21.2 7.9-32.7s-13.7-19.9-25.7-21.7L381.2 150.3 316.9 18z"]},Ia={prefix:"fas",iconName:"circle-check",icon:[512,512,[61533,"check-circle"],"f058","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM369 209L241 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L335 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"]},Ba=Ia,Ha={prefix:"fas",iconName:"palette",icon:[512,512,[127912],"f53f","M512 256c0 .9 0 1.8 0 2.7c-.4 36.5-33.6 61.3-70.1 61.3L344 320c-26.5 0-48 21.5-48 48c0 3.4 .4 6.7 1 9.9c2.1 10.2 6.5 20 10.8 29.9c6.1 13.8 12.1 27.5 12.1 42c0 31.8-21.6 60.7-53.4 62c-3.5 .1-7 .2-10.6 .2C114.6 512 0 397.4 0 256S114.6 0 256 0S512 114.6 512 256zM128 288a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zm0-96a32 32 0 1 0 0-64 32 32 0 1 0 0 64zM288 96a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zm96 96a32 32 0 1 0 0-64 32 32 0 1 0 0 64z"]},Wa={prefix:"fas",iconName:"shield-halved",icon:[512,512,["shield-alt"],"f3ed","M256 0c4.6 0 9.2 1 13.4 2.9L457.7 82.8c22 9.3 38.4 31 38.3 57.2c-.5 99.2-41.3 280.7-213.6 363.2c-16.7 8-36.1 8-52.8 0C57.3 420.7 16.5 239.2 16 140c-.1-26.2 16.3-47.9 38.3-57.2L242.7 2.9C246.8 1 251.4 0 256 0zm0 66.8l0 378.1C394 378 431.1 230.1 432 141.4L256 66.8s0 0 0 0z"]},Ua=Wa,Ya={prefix:"fas",iconName:"trash",icon:[448,512,[],"f1f8","M135.2 17.7L128 32 32 32C14.3 32 0 46.3 0 64S14.3 96 32 96l384 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-96 0-7.2-14.3C307.4 6.8 296.3 0 284.2 0L163.8 0c-12.1 0-23.2 6.8-28.6 17.7zM416 128L32 128 53.2 467c1.6 25.3 22.6 45 47.9 45l245.8 0c25.3 0 46.3-19.7 47.9-45L416 128z"]},Va={prefix:"fas",iconName:"arrow-left",icon:[448,512,[8592],"f060","M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.2 288 416 288c17.7 0 32-14.3 32-32s-14.3-32-32-32l-306.7 0L214.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"]},qa={prefix:"fas",iconName:"tag",icon:[448,512,[127991],"f02b","M0 80L0 229.5c0 17 6.7 33.3 18.7 45.3l176 176c25 25 65.5 25 90.5 0L418.7 317.3c25-25 25-65.5 0-90.5l-176-176c-12-12-28.3-18.7-45.3-18.7L48 32C21.5 32 0 53.5 0 80zm112 32a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"]},Xa={prefix:"fas",iconName:"truck",icon:[640,512,[128666,9951],"f0d1","M48 0C21.5 0 0 21.5 0 48L0 368c0 26.5 21.5 48 48 48l16 0c0 53 43 96 96 96s96-43 96-96l128 0c0 53 43 96 96 96s96-43 96-96l32 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l0-64 0-32 0-18.7c0-17-6.7-33.3-18.7-45.3L512 114.7c-12-12-28.3-18.7-45.3-18.7L416 96l0-48c0-26.5-21.5-48-48-48L48 0zM416 160l50.7 0L544 237.3l0 18.7-128 0 0-96zM112 416a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zm368-48a48 48 0 1 1 0 96 48 48 0 1 1 0-96z"]},Ga={prefix:"fas",iconName:"house",icon:[576,512,[127968,63498,63500,"home","home-alt","home-lg-alt"],"f015","M575.8 255.5c0 18-15 32.1-32 32.1l-32 0 .7 160.2c0 2.7-.2 5.4-.5 8.1l0 16.2c0 22.1-17.9 40-40 40l-16 0c-1.1 0-2.2 0-3.3-.1c-1.4 .1-2.8 .1-4.2 .1L416 512l-24 0c-22.1 0-40-17.9-40-40l0-24 0-64c0-17.7-14.3-32-32-32l-64 0c-17.7 0-32 14.3-32 32l0 64 0 24c0 22.1-17.9 40-40 40l-24 0-31.9 0c-1.5 0-3-.1-4.5-.2c-1.2 .1-2.4 .2-3.6 .2l-16 0c-22.1 0-40-17.9-40-40l0-112c0-.9 0-1.9 .1-2.8l0-69.7-32 0c-18 0-32-14-32-32.1c0-9 3-17 10-24L266.4 8c7-7 15-8 22-8s15 2 21 7L564.8 231.5c8 7 12 15 11 24z"]},Ka=Ga,Qa={prefix:"fas",iconName:"font",icon:[448,512,[],"f031","M254 52.8C249.3 40.3 237.3 32 224 32s-25.3 8.3-30 20.8L57.8 416 32 416c-17.7 0-32 14.3-32 32s14.3 32 32 32l96 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-1.8 0 18-48 159.6 0 18 48-1.8 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l96 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-25.8 0L254 52.8zM279.8 304l-111.6 0L224 155.1 279.8 304z"]},$a={prefix:"fas",iconName:"chevron-down",icon:[512,512,[],"f078","M233.4 406.6c12.5 12.5 32.8 12.5 45.3 0l192-192c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L256 338.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l192 192z"]},Ja={prefix:"fas",iconName:"chevron-left",icon:[320,512,[9001],"f053","M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l192 192c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256 246.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-192 192z"]},Za={prefix:"fas",iconName:"chevron-right",icon:[320,512,[9002],"f054","M310.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L242.7 256 73.4 86.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l192 192z"]},ei={prefix:"fas",iconName:"briefcase",icon:[512,512,[128188],"f0b1","M184 48l144 0c4.4 0 8 3.6 8 8l0 40L176 96l0-40c0-4.4 3.6-8 8-8zm-56 8l0 40L64 96C28.7 96 0 124.7 0 160l0 96 192 0 128 0 192 0 0-96c0-35.3-28.7-64-64-64l-64 0 0-40c0-30.9-25.1-56-56-56L184 0c-30.9 0-56 25.1-56 56zM512 288l-192 0 0 32c0 17.7-14.3 32-32 32l-64 0c-17.7 0-32-14.3-32-32l0-32L0 288 0 416c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-128z"]},ti={prefix:"fas",iconName:"plane",icon:[576,512,[],"f072","M482.3 192c34.2 0 93.7 29 93.7 64c0 36-59.5 64-93.7 64l-116.6 0L265.2 495.9c-5.7 10-16.3 16.1-27.8 16.1l-56.2 0c-10.6 0-18.3-10.2-15.4-20.4l49-171.6L112 320 68.8 377.6c-3 4-7.8 6.4-12.8 6.4l-42 0c-7.8 0-14-6.3-14-14c0-1.3 .2-2.6 .5-3.9L32 256 .5 145.9c-.4-1.3-.5-2.6-.5-3.9c0-7.8 6.3-14 14-14l42 0c5 0 9.8 2.4 12.8 6.4L112 192l102.9 0-49-171.6C162.9 10.2 170.6 0 181.2 0l56.2 0c11.5 0 22.1 6.2 27.8 16.1L365.7 192l116.6 0z"]};const ni={GBP:"UK",USD:"USA",EUR:"Euro",BRL:"Brazil",CAD:"Canada",AUD:"Australia",PLN:"Poland",CZK:"Czech Republic",HUF:"Hungary",RON:"Romania",BGN:"Bulgaria",DKK:"Denmark",SEK:"Sweden",CHF:"Switzerland",NOK:"Norway"},ri={GBP:"\ud83c\uddec\ud83c\udde7",USD:"\ud83c\uddfa\ud83c\uddf8",EUR:"\ud83c\uddea\ud83c\uddfa",BRL:"\ud83c\udde7\ud83c\uddf7",CAD:"\ud83c\udde8\ud83c\udde6",AUD:"\ud83c\udde6\ud83c\uddfa",PLN:"\ud83c\uddf5\ud83c\uddf1",CZK:"\ud83c\udde8\ud83c\uddff",HUF:"\ud83c\udded\ud83c\uddfa",RON:"\ud83c\uddf7\ud83c\uddf4",BGN:"\ud83c\udde7\ud83c\uddec",DKK:"\ud83c\udde9\ud83c\uddf0",SEK:"\ud83c\uddf8\ud83c\uddea",CHF:"\ud83c\udde8\ud83c\udded",NOK:"\ud83c\uddf3\ud83c\uddf4"},si=[{code:"PLN",symbol:"z\u0142",name:"Poland",flag:"\ud83c\uddf5\ud83c\uddf1"},{code:"CZK",symbol:"K\u010d",name:"Czech Republic",flag:"\ud83c\udde8\ud83c\uddff"},{code:"HUF",symbol:"Ft",name:"Hungary",flag:"\ud83c\udded\ud83c\uddfa"},{code:"RON",symbol:"lei",name:"Romania",flag:"\ud83c\uddf7\ud83c\uddf4"},{code:"BGN",symbol:"\u043b\u0432",name:"Bulgaria",flag:"\ud83c\udde7\ud83c\uddec"},{code:"DKK",symbol:"kr",name:"Denmark",flag:"\ud83c\udde9\ud83c\uddf0"},{code:"SEK",symbol:"kr",name:"Sweden",flag:"\ud83c\uddf8\ud83c\uddea"},{code:"CHF",symbol:"Fr",name:"Switzerland",flag:"\ud83c\udde8\ud83c\udded"},{code:"NOK",symbol:"kr",name:"Norway",flag:"\ud83c\uddf3\ud83c\uddf4"}],ai=[{code:"GBP",symbol:"\xa3",name:"UK",flag:"\ud83c\uddec\ud83c\udde7"},{code:"USD",symbol:"$",name:"USA",flag:"\ud83c\uddfa\ud83c\uddf8"},{code:"EUR",symbol:"\u20ac",name:"Euro",flag:"\ud83c\uddea\ud83c\uddfa"},{code:"BRL",symbol:"R$",name:"Brazil",flag:"\ud83c\udde7\ud83c\uddf7"},{code:"CAD",symbol:"C$",name:"Canada",flag:"\ud83c\udde8\ud83c\udde6"},{code:"AUD",symbol:"A$",name:"Australia",flag:"\ud83c\udde6\ud83c\uddfa"}],ii=t=>{let{variant:n="desktop",onSelect:r}=t;const{currency:s,setCurrency:a,currencySymbol:i}=Ft(),[o,l]=(0,e.useState)(!1),[c,u]=(0,e.useState)(!1),d=(0,e.useRef)(null),h=()=>{const e=ni[s]||s;return"".concat(ri[s]||""," ").concat(i," ").concat(s," - ").concat(e)},f=e=>{a(e),l(!1),u(!1),r&&r()},m=()=>l(!o);(0,e.useEffect)(()=>{const e=e=>{o&&d.current&&!d.current.contains(e.target)&&(l(!1),u(!1))};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[o]);const p="mobile"===n,g=["PLN","CZK","HUF","RON","BGN","DKK","SEK","CHF","NOK"].includes(s);return p?(0,Lt.jsxs)("div",{className:"relative",ref:d,children:[(0,Lt.jsxs)("button",{onClick:e=>{e.stopPropagation(),m()},className:"w-full text-left hover:text-gray-900 font-light transition-all duration-200 flex items-center justify-between text-xs uppercase tracking-wider font-inter ".concat(o?"bg-gray-50":""),style:{color:"#6b7280"},children:[(0,Lt.jsx)("span",{children:h()}),(0,Lt.jsx)(Ca,{icon:$a,className:"ml-2 text-xs transition-transform duration-200 ".concat(o?"rotate-180":"")})]}),o&&(0,Lt.jsxs)("div",{className:"bg-gray-50 border-t border-gray-100 transition-all duration-200 max-h-[70vh] overflow-y-auto w-full",onClick:e=>e.stopPropagation(),children:[ai.map(e=>(0,Lt.jsx)("button",{onClick:t=>{t.stopPropagation(),f(e.code)},className:"w-full text-left px-8 py-2.5 text-xs transition-colors font-inter ".concat(s===e.code?"bg-gray-100 font-medium":"hover:bg-gray-100"),style:{color:s===e.code?"#111827":"#374151"},children:(0,Lt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Lt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Lt.jsx)("span",{children:e.flag}),(0,Lt.jsxs)("span",{children:[e.symbol," ",e.code]})]}),"Euro"!==e.name&&(0,Lt.jsx)("span",{className:"text-xs text-gray-500",children:e.name})]})},e.code)),(0,Lt.jsxs)("div",{children:[(0,Lt.jsxs)("button",{onClick:e=>{e.stopPropagation(),u(!c)},className:"w-full text-left px-8 py-2.5 text-xs transition-colors font-inter ".concat(g?"bg-gray-100 font-medium":"hover:bg-gray-100"," flex items-center justify-between"),style:{color:g?"#111827":"#374151"},children:[(0,Lt.jsx)("div",{className:"flex items-center justify-between flex-1",children:(0,Lt.jsx)("span",{className:"text-xs text-gray-500",children:"Other European Countries"})}),(0,Lt.jsx)(Ca,{icon:$a,className:"ml-2 text-xs transition-transform duration-200 ".concat(c?"rotate-180":"")})]}),c&&(0,Lt.jsx)("div",{className:"pl-8 max-h-64 overflow-y-auto",onClick:e=>e.stopPropagation(),children:si.map(e=>(0,Lt.jsxs)("button",{onClick:t=>{t.stopPropagation(),f(e.code)},className:"w-full text-left px-4 py-2 text-xs transition-colors font-inter ".concat(s===e.code?"bg-gray-100 font-medium":"hover:bg-gray-100"," flex items-center justify-between"),style:{color:s===e.code?"#111827":"#374151"},children:[(0,Lt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Lt.jsx)("span",{children:e.flag}),(0,Lt.jsxs)("span",{children:[e.symbol," ",e.code]})]}),(0,Lt.jsx)("span",{className:"text-xs text-gray-500",children:e.name})]},e.code))})]})]})]}):(0,Lt.jsxs)("div",{className:"relative",ref:d,children:[(0,Lt.jsxs)("button",{onClick:e=>{e.stopPropagation(),m()},className:"px-2 md:px-3 py-1 text-gray-700 hover:text-gray-900 focus:outline-none transition-colors flex items-center text-[12px] md:text-xs font-inter","aria-label":"Select currency",children:[(0,Lt.jsx)("span",{className:"mr-1 whitespace-nowrap",children:h()}),(0,Lt.jsx)(Ca,{icon:$a,className:"text-[6px] md:text-xs transition-transform ml-1 ".concat(o?"rotate-180":"")})]}),o&&(0,Lt.jsxs)("div",{className:"absolute right-0 mt-2 bg-white min-w-40 max-h-[80vh] overflow-y-auto",style:{zIndex:9999},onClick:e=>e.stopPropagation(),children:[ai.map(e=>(0,Lt.jsx)("button",{onClick:t=>{t.stopPropagation(),f(e.code)},className:"w-full text-left px-4 py-2 text-xs transition-colors font-inter ".concat(s===e.code?"bg-gray-50":"hover:bg-gray-50"),style:{color:s===e.code?"#111827":"#6b7280"},children:(0,Lt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Lt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Lt.jsx)("span",{children:e.flag}),(0,Lt.jsxs)("span",{children:[e.symbol," ",e.code]})]}),"Euro"!==e.name&&(0,Lt.jsx)("span",{className:"text-xs text-gray-500",children:e.name})]})},e.code)),(0,Lt.jsxs)("div",{children:[(0,Lt.jsxs)("button",{onClick:e=>{e.stopPropagation(),u(!c)},className:"w-full text-left px-4 py-2 text-xs transition-colors font-inter ".concat(g?"bg-gray-50 font-medium":"hover:bg-gray-50"," flex items-center justify-between"),style:{color:g?"#111827":"#6b7280"},children:[(0,Lt.jsx)("div",{className:"flex items-center justify-between flex-1",children:(0,Lt.jsx)("span",{className:"text-xs text-gray-500",children:"Other European Countries"})}),(0,Lt.jsx)(Ca,{icon:$a,className:"ml-2 text-xs transition-transform ".concat(c?"rotate-180":"")})]}),c&&(0,Lt.jsx)("div",{className:"pl-4 ml-2 max-h-64 overflow-y-auto",onClick:e=>e.stopPropagation(),children:si.map(e=>(0,Lt.jsxs)("button",{onClick:t=>{t.stopPropagation(),f(e.code)},className:"w-full text-left px-3 py-1.5 text-xs transition-colors font-inter ".concat(s===e.code?"bg-gray-50 font-medium":"hover:bg-gray-50"," flex items-center justify-between"),style:{color:s===e.code?"#111827":"#6b7280"},children:[(0,Lt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Lt.jsx)("span",{children:e.flag}),(0,Lt.jsxs)("span",{children:[e.symbol," ",e.code]})]}),(0,Lt.jsx)("span",{className:"text-xs text-gray-500",children:e.name})]},e.code))})]})]})]})},oi=()=>{const{formatPrice:t}=Ft(),[n,r]=(0,e.useState)(0),s=(0,e.useMemo)(()=>["\ud83c\udf0d SHIP WORLDWIDE FROM THE UK","\ud83d\udd12 WEBSITE 100% SAFE","\u2764\ufe0f MADE WITH LOVE "],[t]);return(0,e.useEffect)(()=>{const e=setInterval(()=>{r(e=>(e+1)%s.length)},3e3);return()=>clearInterval(e)},[s.length]),(0,Lt.jsx)("div",{className:"text-gray-700 text-center py-2 px-4 relative bg-yellow-100 border-b border-gray-100",children:(0,Lt.jsxs)("div",{className:"flex items-center justify-between max-w-7xl mx-auto",children:[(0,Lt.jsx)("div",{className:"lg:w-20"}),(0,Lt.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,Lt.jsx)("div",{className:"text-xs font-light font-inter",children:s[n]},n)}),(0,Lt.jsxs)("div",{className:"hidden md:flex items-center justify-end gap-2 md:gap-6",children:[(0,Lt.jsx)(Aa,{}),(0,Lt.jsx)(ii,{variant:"desktop"})]})]})})},li=()=>(0,Lt.jsx)(Nt,{to:"/",className:"hover:opacity-90 transition-opacity duration-300","aria-label":"HappyCase home",children:(0,Lt.jsxs)("div",{className:"flex flex-col cursor-pointer transition-all duration-300 text-gray-900 font-fredoka",children:[(0,Lt.jsx)("span",{className:"text-[8px] sm:text-[9px] md:text-[10px] lg:text-xs font-bold leading-tight tracking-[0.35em] text-blue-900 uppercase",children:"THE"}),(0,Lt.jsx)("span",{className:"text-base sm:text-lg md:text-xl lg:text-2xl xl:text-3xl font-bold leading-none text-blue-900 uppercase",children:"HAPPY"}),(0,Lt.jsx)("span",{className:"text-end text-[8px] sm:text-[9px] md:text-[10px] lg:text-xs font-bold leading-tight tracking-[0.35em] text-blue-900 uppercase",children:"CASE"})]})}),ci=e=>{let{isMobile:t=!1,onLinkClick:n}=e;const r=t?"px-4 py-2 hover:text-gray-900 hover:bg-gray-50 font-light block transition-colors text-sm uppercase tracking-wider hover:border-b-2 hover:border-blue-500":"px-3 py-1.5 hover:text-gray-900 font-light block transition-all duration-200 text-sm uppercase tracking-wider text-gray-600 hover:border-b-2 hover:border-blue-500",s=[{to:"/",label:"Home"},{to:"/CreateYours",label:"Create Yours"},{to:"/PassportCases",label:"Passport Cases"},{to:"/Charms",label:"Charms"}];return t?(0,Lt.jsx)("ul",{className:"flex flex-col space-y-1 font-inter",children:s.map(e=>(0,Lt.jsx)("li",{children:(0,Lt.jsx)(Nt,{to:e.to,className:r,style:{color:"#6b7280"},onClick:n,children:e.label})},e.to))}):(0,Lt.jsx)("ul",{className:"hidden lg:flex lg:items-center lg:space-x-1 flex-1 justify-center font-inter",children:s.map(e=>(0,Lt.jsx)("li",{children:(0,Lt.jsx)(Nt,{to:e.to,className:r,children:e.label})},e.to))})},ui=JSON.parse('{"cases":[{"id":1,"name":"Economy Case","type":"economy","images":["/TheHappyCase/images/SmartCase/economycaselightpink.png","/TheHappyCase/images/SmartCase/economycasered.png","/TheHappyCase/images/SmartCase/economycasejeansblue.png","/TheHappyCase/images/SmartCase/economycasebrown.png","/TheHappyCase/images/SmartCase/economycaselightblue.png","/TheHappyCase/images/SmartCase/economycasedarkbrown.png","/TheHappyCase/images/SmartCase/economycaseblack.png","/TheHappyCase/images/SmartCase/economycaselightbrown.png"],"colors":[{"color":"#f49f90","image":"/TheHappyCase/images/SmartCase/economycaselightpink.png"},{"color":"#cb0025","image":"/TheHappyCase/images/SmartCase/economycasered.png"},{"color":"#9cb4b8","image":"/TheHappyCase/images/SmartCase/economycaselightblue.png"},{"color":"#627386","image":"/TheHappyCase/images/SmartCase/economycasejeansblue.png"},{"color":"#3a4763","image":"/TheHappyCase/images/SmartCase/economycasedarkblue.png"},{"color":"#c96e50","image":"/TheHappyCase/images/SmartCase/economycaselightbrown.png"},{"color":"#b0582c","image":"/TheHappyCase/images/SmartCase/economycasebrown.png"},{"color":"#59332e","image":"/TheHappyCase/images/SmartCase/economycasedarkbrown.png"},{"color":"#506258","image":"/TheHappyCase/images/SmartCase/economycasegreen.png"},{"color":"#89837e","image":"/TheHappyCase/images/SmartCase/economycasegray.png"},{"color":"#413f44","image":"/TheHappyCase/images/SmartCase/economycaseblack.png"}],"specifications":{"dimensions":"14.9cm (W) x 10.7cm (H) x 1cm (D)","rfid":"Yes","material":"PU Leather","closure":"Magnetic Snap Closure","cardSlots":"3","features":"RFID Protection, Water Resistant, Lightweight Design","interior":"Document Pocket, Boarding Pass Slot, SIM Card Slot","care":"Wipe clean with damp cloth"},"basePrice":8},{"id":2,"name":"Business Class Case","type":"business","images":["/TheHappyCase/images/BusinessClassCase/businessclasscasegray.png","/TheHappyCase/images/BusinessClassCase/businessclasscaselightpink.png","/TheHappyCase/images/BusinessClassCase/businessclasscasebrown.png","/TheHappyCase/images/BusinessClassCase/businessclasscaseblack.png","/TheHappyCase/images/BusinessClassCase/businessclasscaseblack.png","/TheHappyCase/images/BusinessClassCase/businessclassinside.png","/TheHappyCase/images/BusinessClassCase/businessclassinside2.png"],"colors":[{"color":"#c8b593","image":"/TheHappyCase/images/BusinessClassCase/businessclasscasegray.png"},{"color":"#da8ca6","image":"/TheHappyCase/images/BusinessClassCase/businessclasscaselightpink.png"},{"color":"#daaf49","image":"/TheHappyCase/images/BusinessClassCase/businessclasscaseyellow.png"},{"color":"#d33d72","image":"/TheHappyCase/images/BusinessClassCase/businessclasscasepink.png"},{"color":"#c49154","image":"/TheHappyCase/images/BusinessClassCase/businessclasscasebrown.png"},{"color":"#36312b","image":"/TheHappyCase/images/BusinessClassCase/businessclasscaseblack.png"}],"specifications":{"dimensions":"14cm (W) x 9.5cm (H) x 1cm (D)","rfid":"No","material":"Genuine Leather","closure":"No Closure","cardSlots":"4","interior":"Passport Pocket, Document Pocket","care":"Clean with leather conditioner, avoid excessive moisture"},"basePrice":12},{"id":3,"name":"First Class Case","type":"firstclass","images":["/TheHappyCase/images/FirstClassCase/firstclassbrown.png","/TheHappyCase/images/FirstClassCase/firstclasscaseblack.png","/TheHappyCase/images/FirstClassCase/firstclasscasenavyblue.png","/TheHappyCase/images/FirstClassCase/firstclasscasebrickred.png","/TheHappyCase/images/FirstClassCase/firstclasscasepink.png","/TheHappyCase/images/FirstClassCase/firstclasscasebrown.png","/TheHappyCase/images/FirstClassCase/firstclasscaseblue.png","/TheHappyCase/images/FirstClassCase/firstclasscasegray.png","/TheHappyCase/images/FirstClassCase/firstclasscasepurple.png","/TheHappyCase/images/FirstClassCase/firstclasscasegreen.png","/TheHappyCase/images/FirstClassCase/firstclasscasedarkpink.png"],"colors":[{"color":"#d17956","image":"/TheHappyCase/images/FirstClassCase/firstclasscasebrown.png"},{"color":"#c76f82","image":"/TheHappyCase/images/FirstClassCase/firstclasscasebrickred.png"},{"color":"#adcfa8","image":"/TheHappyCase/images/FirstClassCase/firstclasscasegreen.png"},{"color":"#ab8b72","image":"/TheHappyCase/images/FirstClassCase/firstclasscasedarkpink.png"},{"color":"#bfa29c","image":"/TheHappyCase/images/FirstClassCase/firstclasscasepink.png"},{"color":"#a799ab","image":"/TheHappyCase/images/FirstClassCase/firstclasscasepurple.png"},{"color":"#afab9b","image":"/TheHappyCase/images/FirstClassCase/firstclasscasegray.png"},{"color":"#5f6074","image":"/TheHappyCase/images/FirstClassCase/firstclasscasenavyblue.png"},{"color":"#768695","image":"/TheHappyCase/images/FirstClassCase/firstclasscaseblue.png"},{"color":"#cea55c","image":"/TheHappyCase/images/FirstClassCase/firstclasscaselightbrown.png"},{"color":"#272a34","image":"/TheHappyCase/images/FirstClassCase/firstclasscaseblack.png"}],"specifications":{"dimensions":"14cm (W) x 10.5cm (H) x 1.5cm (D)","rfid":"Yes","material":"Genuine Leather","closure":"Button Snap Closure","cardSlots":"3","interior":" Document Pocket, Boarding Pass Slot, SIM Card Slot","features":"Coin Pouch, RFID Protection, Water Resistant"},"basePrice":12}],"pins":{"flags":[{"id":1,"name":"Albania Flag","src":"/TheHappyCase/images/Flags/albania.png","price":2,"size":0.5,"continent":"europe"},{"id":2,"name":"Armenia Flag","src":"/TheHappyCase/images/Flags/armenia.png","price":2,"size":0.5,"continent":"europe"},{"id":3,"name":"Belgium Flag","src":"/TheHappyCase/images/Flags/belgium.png","price":2,"size":0.5,"continent":"europe"},{"id":4,"name":"Bosnia  Flag","src":"/TheHappyCase/images/Flags/bosnia.png","price":2,"size":0.5,"continent":"europe"},{"id":5,"name":"Brazil Flag","src":"/TheHappyCase/images/Flags/brazil.png","price":2,"size":0.5,"continent":"americas"},{"id":6,"name":"British Virgin Islands Flag","src":"/TheHappyCase/images/Flags/britishvirginislands.png","price":2,"size":0.5,"continent":"americas"},{"id":7,"name":"Croatia Flag","src":"/TheHappyCase/images/Flags/croatia.png","price":2,"size":0.5,"continent":"europe"},{"id":8,"name":"Dublin Flag","src":"/TheHappyCase/images/Flags/dublin.png","price":2,"size":0.5,"continent":"europe"},{"id":9,"name":"Egypt Flag","src":"/TheHappyCase/images/Flags/egypt.png","price":2,"size":0.5,"continent":"africa"},{"id":10,"name":"France Flag","src":"/TheHappyCase/images/Flags/france.png","price":2,"size":0.5,"continent":"europe"},{"id":11,"name":"Germany Flag","src":"/TheHappyCase/images/Flags/germany.png","price":2,"size":0.5,"continent":"europe"},{"id":12,"name":"India Flag","src":"/TheHappyCase/images/Flags/india.png","price":2,"size":0.5,"continent":"asia"},{"id":13,"name":"Italy Flag","src":"/TheHappyCase/images/Flags/italy.png","price":2,"size":0.5,"continent":"europe"},{"id":14,"name":"Jamaica  Flag","src":"/TheHappyCase/images/Flags/jamaica.png","price":2,"size":0.5,"continent":"americas"},{"id":15,"name":"Japan  Flag","src":"/TheHappyCase/images/Flags/japan.png","price":2,"size":0.5,"continent":"americas"},{"id":16,"name":"Hungary Flag","src":"/TheHappyCase/images/Flags/hungary.png","price":2,"size":0.5,"continent":"americas"},{"id":17,"name":"LGBTQIA+ Flag","src":"/TheHappyCase/images/Flags/lgbtqia.png","price":2,"size":0.5,"continent":"special"},{"id":18,"name":"Netherlands Flag","src":"/TheHappyCase/images/Flags/netherlands.png","price":2,"size":0.5,"continent":"europe"},{"id":19,"name":"Norway Flag","src":"/TheHappyCase/images/Flags/norway.png","price":2,"size":0.5,"continent":"europe"},{"id":20,"name":"Portugal Flag","src":"/TheHappyCase/images/Flags/portugal.png","price":2,"size":0.5,"continent":"europe"},{"id":21,"name":"Puerto Rico  Flag","src":"/TheHappyCase/images/Flags/puertorico.png","price":2,"size":0.5,"continent":"americas"},{"id":22,"name":"Scotland Flag","src":"/TheHappyCase/images/Flags/scotland.png","price":2,"size":0.5,"continent":"europe"},{"id":23,"name":"South Africa Flag","src":"/TheHappyCase/images/Flags/southafrica.png","price":2,"size":0.5,"continent":"africa"},{"id":24,"name":"Spain Flag","src":"/TheHappyCase/images/Flags/spain.png","price":2,"size":0.5,"continent":"europe"},{"id":25,"name":"Sweden Flag","src":"/TheHappyCase/images/Flags/sweden.png","price":2,"size":0.5,"continent":"europe"},{"id":26,"name":"Switzerland Flag","src":"/TheHappyCase/images/Flags/switzerland.png","price":2,"size":0.5,"continent":"europe"},{"id":27,"name":"United Kingdon Flag","src":"/TheHappyCase/images/Flags/uk.png","price":2,"size":0.5,"continent":"europe"},{"id":28,"name":"United States Flag","src":"/TheHappyCase/images/Flags/eua.png","price":2,"size":0.5,"continent":"americas"}],"colorful":[{"id":1,"name":"Be a Good Human","src":"/TheHappyCase/images/ColorfulPins/beagoodhuman.png","price":2,"size":0.7,"subCategory":"inspiration"},{"id":2,"name":"Airplane","src":"/TheHappyCase/images/ColorfulPins/airplane.png","price":2,"size":0.75,"subCategory":"travel"},{"id":3,"name":"Heart Globe","src":"/TheHappyCase/images/ColorfulPins/heartglobe.png","price":2,"size":0.7},{"id":4,"name":"Dream Big","src":"/TheHappyCase/images/ColorfulPins/dreambig.png","price":2,"size":0.9,"subCategory":"inspiration"},{"id":5,"name":"Paw","src":"/TheHappyCase/images/ColorfulPins/paw.png","price":2,"size":0.4},{"id":6,"name":"Colorful Camera","src":"/TheHappyCase/images/ColorfulPins/camera.png","price":2,"size":0.55,"subCategory":"camera"},{"id":7,"name":"Be Kind","src":"/TheHappyCase/images/ColorfulPins/bekind.png","price":2,"size":0.75,"subCategory":"inspiration"},{"id":8,"name":"Football","src":"/TheHappyCase/images/ColorfulPins/football.png","price":2,"size":0.75},{"id":9,"name":"Ticket to Happiness","src":"/TheHappyCase/images/ColorfulPins/tickettohappiness.png","price":2,"size":0.8,"subCategory":"inspiration"},{"id":10,"name":"Be Happy","src":"/TheHappyCase/images/ColorfulPins/behappy.png","price":2,"size":0.75,"subCategory":"inspiration"},{"id":11,"name":"Lucky Leaf","src":"/TheHappyCase/images/ColorfulPins/luckyleafcharm.png","price":2,"size":0.5,"subCategory":"nature"},{"id":12,"name":"Beer","src":"/TheHappyCase/images/ColorfulPins/beer.png","price":2,"size":0.65,"subCategory":"drinks"},{"id":13,"name":"Bottle of Wine","src":"/TheHappyCase/images/ColorfulPins/bottleofwine.png","price":2,"size":0.8,"subCategory":"drinks"},{"id":14,"name":"Heart Notification","src":"/TheHappyCase/images/ColorfulPins/heartnotification.png","price":2,"size":0.5,"subCategory":"hearts"},{"id":15,"name":"Small Boarding Pass","src":"/TheHappyCase/images/ColorfulPins/smallboardingpass.png","price":2,"size":0.75,"subCategory":"travel"},{"id":16,"name":"Little Heart","src":"/TheHappyCase/images/ColorfulPins/littleheart.png","price":2,"size":0.5,"subCategory":"hearts"},{"id":17,"name":"Disney","src":"/TheHappyCase/images/ColorfulPins/disney.png","price":2,"size":0.75,"subCategory":"disney"},{"id":18,"name":"Pluto","src":"/TheHappyCase/images/ColorfulPins/pluto.png","price":2,"size":0.85,"subCategory":"disney"},{"id":19,"name":"Round Minnnie","src":"/TheHappyCase/images/ColorfulPins/roundminnie.png","price":2,"size":0.85,"subCategory":"disney"},{"id":20,"name":"Round Mickey","src":"/TheHappyCase/images/ColorfulPins/roundmickey.png","price":2,"size":0.85,"subCategory":"disney"},{"id":21,"name":"Guufy","src":"/TheHappyCase/images/ColorfulPins/guufy.png","price":2,"size":0.85,"subCategory":"disney"},{"id":22,"name":"Map","src":"/TheHappyCase/images/ColorfulPins/map.png","price":2,"size":0.85,"subCategory":"travel"},{"id":23,"name":"London Phone","src":"/TheHappyCase/images/ColorfulPins/telephone.png","price":2,"size":0.85},{"id":24,"name":"Adventure Awaits Ticket","src":"/TheHappyCase/images/ColorfulPins/adventureawaits.png","price":2,"size":0.85,"subCategory":"travel"},{"id":25,"name":"Passport","src":"/TheHappyCase/images/ColorfulPins/passport.png","price":2,"size":0.75,"subCategory":"travel"},{"id":26,"name":"Coffee","src":"/TheHappyCase/images/ColorfulPins/coffee.png","price":2,"size":0.5,"subCategory":"drinks"},{"id":27,"name":"Coconut Tree","src":"/TheHappyCase/images/ColorfulPins/coconuttree.png","price":2,"size":0.8,"subCategory":"nature"},{"id":28,"name":"Wave","src":"/TheHappyCase/images/ColorfulPins/wave.png","price":3.5,"size":0.6},{"id":29,"name":"Suitcase","src":"/TheHappyCase/images/ColorfulPins/orangeluggage.png","price":2,"size":0.7,"subCategory":"travel"},{"id":30,"name":"Black Camera","src":"/TheHappyCase/images/ColorfulPins/blackcamera.png","price":2,"size":0.8,"subCategory":"camera"},{"id":31,"name":"Pink Camera","src":"/TheHappyCase/images/ColorfulPins/pinkcamera.png","price":2,"size":0.5,"subCategory":"camera"},{"id":32,"name":"Daisy Duck","src":"/TheHappyCase/images/ColorfulPins/daisyduck.png","price":2,"size":0.7,"subCategory":"disney"},{"id":33,"name":"Duck","src":"/TheHappyCase/images/ColorfulPins/duck.png","price":2,"size":0.75,"subCategory":"disney"},{"id":34,"name":"Minnie","src":"/TheHappyCase/images/ColorfulPins/minnie.png","price":2,"size":0.7,"subCategory":"disney"},{"id":35,"name":"Mickey Mouse","src":"/TheHappyCase/images/ColorfulPins/mickey.png","price":2,"size":0.75,"subCategory":"disney"},{"id":36,"name":"Combi","src":"/TheHappyCase/images/ColorfulPins/combi.png","price":2,"size":0.7,"subCategory":"travel"},{"id":37,"name":"Wine","src":"/TheHappyCase/images/ColorfulPins/wineglass.png","price":2,"size":0.4,"subCategory":"drinks"},{"id":38,"name":"Vacation","src":"/TheHappyCase/images/ColorfulPins/vacation.png","price":2,"size":0.8,"subCategory":"travel"},{"id":39,"name":"Love","src":"/TheHappyCase/images/ColorfulPins/love.png","price":2,"size":0.8,"subCategory":"travel"}],"bronze":[{"id":1,"name":"Airplane","src":"/TheHappyCase/images/BronzePins/airplane.png","price":1,"size":0.7,"subCategory":"travel"},{"id":2,"name":"Cardinal Points","src":"/TheHappyCase/images/BronzePins/cardinalpoints.png","price":1,"size":0.65,"subCategory":"symbols"},{"id":3,"name":"Camera","src":"/TheHappyCase/images/BronzePins/camera.png","price":1,"size":0.55,"subCategory":"symbols"},{"id":4,"name":"Globe","src":"/TheHappyCase/images/BronzePins/globe.png","price":1,"size":0.55,"subCategory":"travel"},{"id":5,"name":"Passport","src":"/TheHappyCase/images/BronzePins/passport.png","price":1,"size":0.4,"subCategory":"travel"},{"id":6,"name":"NYC Taxi","src":"/TheHappyCase/images/BronzePins/nyctaxi.png","price":1,"size":0.9,"subCategory":"travel"},{"id":7,"name":"Liberty Statue","src":"/TheHappyCase/images/BronzePins/libertystatue.png","price":1,"size":1,"subCategory":"travel"},{"id":8,"name":"Luggage","src":"/TheHappyCase/images/BronzePins/luggage.png","price":1,"size":0.45,"subCategory":"travel"},{"id":9,"name":"London Bus","src":"/TheHappyCase/images/BronzePins/london.png","price":1,"size":0.7,"subCategory":"travel"},{"id":10,"name":"Lucky Leaf","src":"/TheHappyCase/images/BronzePins/luckyleaf.png","price":1,"size":0.45,"subCategory":"nature"},{"id":11,"name":"Little Heart","src":"/TheHappyCase/images/BronzePins/littleheart.png","price":1,"size":0.25,"subCategory":"love"},{"id":12,"name":"Eiffel Towel","src":"/TheHappyCase/images/BronzePins/eiffeltowel.png","price":1,"size":0.8},{"id":13,"name":"Kangaroo","src":"/TheHappyCase/images/BronzePins/kangaroo.png","price":1,"size":0.9,"subCategory":"animals"},{"id":14,"name":"Koala","src":"/TheHappyCase/images/BronzePins/koala.png","price":1,"size":0.5,"subCategory":"animals"},{"id":15,"name":"Hamsa Hand","src":"/TheHappyCase/images/BronzePins/hamsahand.png","price":1,"size":0.9,"subCategory":"symbols"},{"id":16,"name":"Thailand","src":"/TheHappyCase/images/BronzePins/thailand.png","price":1,"size":0.9,"subCategory":"symbols"},{"id":17,"name":"Mummy","src":"/TheHappyCase/images/BronzePins/mummy.png","price":1,"size":0.7,"subCategory":"symbols"},{"id":18,"name":"Llama","src":"/TheHappyCase/images/BronzePins/llama.png","price":1,"size":0.7,"subCategory":"animals"},{"id":19,"name":"India","src":"/TheHappyCase/images/BronzePins/india.png","price":1,"size":0.5,"subCategory":"symbols"},{"id":20,"name":"Pyramid","src":"/TheHappyCase/images/BronzePins/pyramid.png","price":1,"size":0.8},{"id":21,"name":"Arc The Triomphe","src":"/TheHappyCase/images/BronzePins/arcthetriomphe.png","price":1,"size":0.5},{"id":22,"name":"Maple Leaf","src":"/TheHappyCase/images/BronzePins/mapleleaf.png","price":1,"size":0.6,"subCategory":"nature"},{"id":23,"name":"Love","src":"/TheHappyCase/images/BronzePins/love.png","price":1,"size":0.8,"subCategory":"love"},{"id":24,"name":"Airplane War","src":"/TheHappyCase/images/BronzePins/airplanewar.png","price":1,"size":0.8},{"id":25,"name":"Enjoy the Journey","src":"/TheHappyCase/images/BronzePins/enjoythejourney.png","price":1,"size":1,"subCategory":"symbols"},{"id":26,"name":"Heart","src":"/TheHappyCase/images/BronzePins/heart.png","price":1,"size":0.7,"subCategory":"love"},{"id":27,"name":"I love Jesus","src":"/TheHappyCase/images/BronzePins/ilovejesus.png","price":1,"size":0.5,"subCategory":"love"},{"id":28,"name":"Butterfly","src":"/TheHappyCase/images/BronzePins/butterfly.png","price":1,"size":0.7,"subCategory":"nature"},{"id":29,"name":"Squirrel","src":"/TheHappyCase/images/BronzePins/squirrel.png","price":1,"size":0.5},{"id":30,"name":"Canada","src":"/TheHappyCase/images/BronzePins/canada.png","price":1,"size":0.6,"subCategory":"symbols"},{"id":31,"name":"Flipflop","src":"/TheHappyCase/images/BronzePins/flipflop.png","price":1,"size":0.5,"subCategory":"nature"},{"id":32,"name":"Paw","src":"/TheHappyCase/images/BronzePins/paw.png","price":1,"size":0.5,"subCategory":"animals"},{"id":33,"name":"PawDog","src":"/TheHappyCase/images/BronzePins/pawheart.png","price":1,"size":0.45,"subCategory":"animals"},{"id":34,"name":"I love my dog","src":"/TheHappyCase/images/BronzePins/ilovemydog.png","price":1,"size":0.5,"subCategory":"animals"},{"id":35,"name":"Money","src":"/TheHappyCase/images/BronzePins/money.png","price":1,"size":0.55},{"id":36,"name":"Dog Bone","src":"/TheHappyCase/images/BronzePins/dogbone.png","price":1,"size":0.5,"subCategory":"animals"}]}}'),di=e=>{if(e.customDesign||e.designImage)return"custom-".concat(e.id||Date.now());if("charm"===e.type||e.category&&e.pin){var t,n;const r=e.category||e.pin&&e.pin.category||"colorful",s=(null===(t=e.pin)||void 0===t?void 0:t.name)||(null===(n=e.pin)||void 0===n?void 0:n.src)||e.name||"";return"charm-".concat(r,"-").concat(s)}if(e.caseType&&e.color){if(e.pins&&e.pins.length>0){const t=e.pins.map(e=>e.name||e.src).sort().join("-");return"case-".concat(e.caseType,"-").concat(e.color,"-pins-").concat(t)}return"case-".concat(e.caseType,"-").concat(e.color)}return e.id&&e.id.startsWith("case-")?"unique-".concat(e.id):e.id?"item-".concat(e.id):"item-".concat(Date.now())},hi=(e,t)=>di(e)===di(t),fi="https://localhost:3001",mi=e=>{const t=fi||"",n=e.startsWith("/")?e:"/".concat(e);if(t){const e=t.endsWith("/")?t.slice(0,-1):t,r="".concat(e).concat(n);return r}return n};let pi=!1;const gi=async()=>{try{const t=mi("/api/inventory");console.log("\ud83d\udd04 Fetching inventory from:",t);const n=new AbortController,r=setTimeout(()=>n.abort(),1e4);try{const e=await fetch(t,{signal:n.signal,headers:{"Content-Type":"application/json"}});if(clearTimeout(r),e.ok){const t=await e.json();if(t.success&&t.inventory){const e={cases:t.inventory.cases,caseColors:t.inventory.caseColors,pins:t.inventory.pins};return localStorage.setItem("productQuantities",JSON.stringify(e)),localStorage.setItem("productQuantitiesTimestamp",Date.now().toString()),console.log("\u2705 Inventory loaded from Supabase inventory_items table"),e}}else 404!==e.status&&console.warn("\u26a0\ufe0f Inventory API returned status ".concat(e.status,": ").concat(e.statusText))}catch(e){if(clearTimeout(r),"AbortError"===e.name)console.debug("Inventory fetch timed out, using localStorage fallback");else{if(!e.message||!e.message.includes("Failed to fetch"))throw e;console.debug("Backend server not available, using localStorage fallback")}}}catch(t){console.debug("Failed to fetch inventory from Supabase, using localStorage fallback:",t.message)}return null},yi=async()=>{const e=localStorage.getItem("productQuantities"),t=localStorage.getItem("productQuantitiesTimestamp"),n=t&&Date.now()-parseInt(t)<3e5;if(e&&n)try{return void JSON.parse(e)}catch(oo){localStorage.removeItem("productQuantities"),localStorage.removeItem("productQuantitiesTimestamp")}if(!await gi())try{var r,s,a,i,o,l;const e={cases:ui.cases.map(e=>{var t;return null!==(t=e.quantity)&&void 0!==t?t:null}),caseColors:ui.cases.map(e=>{var t;return(null===(t=e.colors)||void 0===t?void 0:t.map(e=>{var t;return null!==(t=e.quantity)&&void 0!==t?t:null}))||[]}),pins:{flags:(null===(r=ui.pins)||void 0===r||null===(s=r.flags)||void 0===s?void 0:s.map(e=>{var t;return null!==(t=e.quantity)&&void 0!==t?t:null}))||[],colorful:(null===(a=ui.pins)||void 0===a||null===(i=a.colorful)||void 0===i?void 0:i.map(e=>{var t;return null!==(t=e.quantity)&&void 0!==t?t:null}))||[],bronze:(null===(o=ui.pins)||void 0===o||null===(l=o.bronze)||void 0===l?void 0:l.map(e=>{var t;return null!==(t=e.quantity)&&void 0!==t?t:null}))||[]}},t=e.cases.some(e=>null!==e)||e.caseColors.some(e=>e.some(e=>null!==e))||Object.values(e.pins).some(e=>e.some(e=>null!==e));t&&(localStorage.setItem("productQuantities",JSON.stringify(e)),localStorage.setItem("productQuantitiesTimestamp",Date.now().toString()))}catch(c){pi||(console.error("Error initializing quantities:",c),pi=!0)}},xi=(e,t)=>{localStorage.getItem("productQuantities")||yi();const n=localStorage.getItem("productQuantities");let r=null;if(n)try{r=JSON.parse(n)}catch(i){console.error("Error parsing saved quantities:",i)}if(!r)return yi(),null;if(e.caseType&&e.color){const n=ui.cases.find(t=>t.type===e.caseType);if(!n)return null;let s=null;if(r&&r.caseColors){const t=ui.cases.findIndex(t=>t.type===e.caseType);if(-1!==t&&r.caseColors[t]){const a=n.colors.findIndex(t=>t.color===e.color);-1!==a&&void 0!==r.caseColors[t][a]&&(s=r.caseColors[t][a])}}if(null===s&&r&&r.cases){const t=ui.cases.findIndex(t=>t.type===e.caseType);-1!==t&&void 0!==r.cases[t]&&(s=r.cases[t])}if(null===s||void 0===s)return null;const a=s-t.reduce((t,n)=>n.caseType===e.caseType&&n.color===e.color?t+(n.quantity||1):t,0);return Math.max(0,a)}if("charm"===e.type||e.category||e.pin){var s,a;const n=e.category||e.pin&&e.pin.category,i=(null===(s=e.pin)||void 0===s?void 0:s.name)||(null===(a=e.pin)||void 0===a?void 0:a.src)||e.name;if(!n||!i)return null;let o=null;if(ui.pins&&ui.pins[n]&&(o=ui.pins[n].find(e=>e.name===i||e.src===i)),!o)return null;let l=null;const c="flags"===n?"flags":n;if(r&&r.pins&&r.pins[c]){const e=ui.pins[c].findIndex(e=>e.name===i||e.src===i||e.id===o.id);-1!==e&&void 0!==r.pins[c][e]&&(l=r.pins[c][e])}if(null===l||void 0===l)return null;const u=l-t.reduce((t,n)=>hi(e,n)?t+(n.quantity||1):t,0);return Math.max(0,u)}return null},bi="happycase_cart",vi=(0,e.createContext)(),wi=(e,t)=>{switch(t.type){case"ADD_TO_CART":const r=c(c({},t.payload),{},{id:t.payload.id||Date.now(),quantity:t.payload.quantity||1}),s=e.items.findIndex(e=>hi(e,r));if(-1!==s){const t=e.items[s],n=xi(t,e.items),a=t.quantity||1,i=a+(r.quantity||1),o=r.quantity||1;if(null!==n&&(0===n||o>n))return e;const l=c(c({},t),{},{quantity:i}),u=e.items.map((e,t)=>t===s?l:e);return console.log("\u2705 CartContext - Item quantity incremented in cart:",{itemName:l.name,oldQuantity:a,newQuantity:i,item:l,allItemsInCart:u.map((e,t)=>({itemNumber:t+1,name:e.name,type:e.type,category:e.category,quantity:e.quantity,price:e.price,caseType:e.caseType,color:e.color,customDesign:e.customDesign,pin:e.pin?{name:e.pin.name,src:e.pin.src,category:e.pin.category}:null}))}),c(c({},e),{},{items:u,isDrawerOpen:!0})}{const t=xi(r,e.items),n=r.quantity||1;if(null!==t&&(0===t||n>t))return e;const s=c(c({},r),{},{quantity:r.quantity||1}),a=[...e.items,s];return console.log("\u2705 CartContext - Item successfully added to cart state:",{item:s,cartSize:a.length,allItemsInCart:a.map((e,t)=>({itemNumber:t+1,name:e.name,type:e.type,category:e.category,quantity:e.quantity,price:e.price,caseType:e.caseType,color:e.color,customDesign:e.customDesign,pin:e.pin?{name:e.pin.name,src:e.pin.src,category:e.pin.category}:null}))}),c(c({},e),{},{items:a,isDrawerOpen:!0})}case"REMOVE_FROM_CART":return c(c({},e),{},{items:e.items.filter((e,n)=>n!==t.payload)});case"CLEAR_CART":try{localStorage.removeItem(bi)}catch(n){console.error("Error clearing cart from localStorage:",n)}return c(c({},e),{},{items:[]});case"OPEN_CART_DRAWER":return c(c({},e),{},{isDrawerOpen:!0});case"CLOSE_CART_DRAWER":return c(c({},e),{},{isDrawerOpen:!1});case"INCREMENT_ITEM_QTY":console.log("\ud83d\udd04 INCREMENT_ITEM_QTY reducer called:",{payload:t.payload,payloadType:typeof t.payload,itemsCount:e.items.length});const a=e.items.map((n,r)=>{let s=!1;if("string"===typeof t.payload?s=void 0!==n.id&&n.id===t.payload:"number"===typeof t.payload&&(s=r===t.payload),s){console.log("\u2705 Item matched in reducer:",{name:n.name||n.caseName,id:n.id,index:r,currentQty:n.quantity});const t=xi(n,e.items),s=n.quantity||1;if(null===t||t>0){const e=c(c({},n),{},{quantity:s+1});return console.log("\u2705 Incrementing quantity:",{oldQty:s,newQty:e.quantity}),e}console.log("\u26a0\ufe0f Inventory limit reached, not incrementing")}return n});return console.log("\ud83d\udce6 Updated cart after increment:",a.map((e,t)=>({index:t,name:e.name||e.caseName,qty:e.quantity}))),c(c({},e),{},{items:a});case"DECREMENT_ITEM_QTY":console.log("\ud83d\udd04 DECREMENT_ITEM_QTY reducer called:",{payload:t.payload,payloadType:typeof t.payload,itemsCount:e.items.length});const i=e.items.map((e,n)=>{let r=!1;if("string"===typeof t.payload?r=void 0!==e.id&&e.id===t.payload:"number"===typeof t.payload&&(r=n===t.payload),r){const t=e.quantity||1;if(t>1){const r=c(c({},e),{},{quantity:t-1});return console.log("\u2705 Decrementing quantity:",{name:e.name||e.caseName,id:e.id,index:n,oldQty:t,newQty:r.quantity}),r}console.log("\u26a0\ufe0f Quantity already at minimum (1), not decrementing")}return e});return console.log("\ud83d\udce6 Updated cart after decrement:",i.map((e,t)=>({index:t,name:e.name||e.caseName,qty:e.quantity}))),c(c({},e),{},{items:i});case"SET_CHECKOUT_SESSION":return c(c({},e),{},{checkoutSession:t.payload});case"UPDATE_ITEM_NOTE":return c(c({},e),{},{items:e.items.map((e,n)=>n===t.payload.index?c(c({},e),{},{note:t.payload.note}):e)});default:return e}},Ci={items:(()=>{try{const e=localStorage.getItem(bi);if(e){const t=JSON.parse(e);if(Array.isArray(t))return t}}catch(e){console.error("Error loading cart from localStorage:",e),localStorage.removeItem(bi)}return[]})(),checkoutSession:null,isDrawerOpen:!1},Si=t=>{let{children:n}=t;const[r,s]=(0,e.useReducer)(wi,Ci);(0,e.useEffect)(()=>{try{r.items&&r.items.length>0?localStorage.setItem(bi,JSON.stringify(r.items)):localStorage.removeItem(bi)}catch(e){console.error("Error saving cart to localStorage:",e)}},[r.items]);const a={cart:r.items,checkoutSession:r.checkoutSession,isDrawerOpen:r.isDrawerOpen,addToCart:e=>{console.log("\ud83d\uded2 Adding item to cart:",{name:e.name,type:e.type,category:e.category,price:e.price,quantity:e.quantity||1,caseType:e.caseType,color:e.color,pins:e.pins?"".concat(e.pins.length," pins"):"no pins",pinsDetails:e.pinsDetails?"".concat(e.pinsDetails.length," pinsDetails"):"no pinsDetails",customDesign:e.customDesign,pin:e.pin?{name:e.pin.name,src:e.pin.src,category:e.pin.category}:"no pin",fullProduct:e}),s({type:"ADD_TO_CART",payload:e})},removeFromCart:e=>{s({type:"REMOVE_FROM_CART",payload:e})},clearCart:()=>{s({type:"CLEAR_CART"})},openCartDrawer:()=>{s({type:"OPEN_CART_DRAWER"})},closeCartDrawer:()=>{s({type:"CLOSE_CART_DRAWER"})},incrementItemQty:e=>s({type:"INCREMENT_ITEM_QTY",payload:e}),decrementItemQty:e=>s({type:"DECREMENT_ITEM_QTY",payload:e}),setCheckoutSession:e=>{s({type:"SET_CHECKOUT_SESSION",payload:e})},updateItemNote:(e,t)=>{s({type:"UPDATE_ITEM_NOTE",payload:{index:e,note:t}})},getTotalPrice:()=>r.items.reduce((e,t)=>{let n=0;if("charm"===t.type){n=(t.price||t.totalPrice||0)*(t.quantity||1)}else{n=(("number"===typeof t.basePrice?t.basePrice:t.price||t.totalPrice||0)+(t.pinsDetails&&t.pinsDetails.length?t.pinsDetails.reduce((e,t)=>e+(t.price||0),0):0))*(t.quantity||1)}return e+n},0),getTotalItems:()=>r.items.length,getTotalQuantity:()=>r.items.reduce((e,t)=>e+(t.quantity||1),0)};return(0,Lt.jsx)(vi.Provider,{value:a,children:n})},ji=()=>{const t=(0,e.useContext)(vi);if(!t)throw new Error("useCart must be used within a CartProvider");return t},ki=e=>{let{isMobile:t=!1}=e;const{getTotalQuantity:n}=ji(),r=n();return(0,Lt.jsxs)(Nt,{to:"/cart",className:"".concat(t?"flex md:hidden":"hidden md:flex"," items-center p-2 text-gray-900 hover:text-gray-700 relative transition-colors z-10"),"aria-label":"Go to cart",children:[(0,Lt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 640",className:"w-6 h-6",fill:"currentColor",children:(0,Lt.jsx)("path",{d:"M8 64C3.6 64 0 67.6 0 72C0 76.4 3.6 80 8 80L53.7 80C65.1 80 75 88.1 77.2 99.4L136.6 402.8C141.7 429.1 164.8 448 191.6 448L488 448C492.4 448 496 444.4 496 440C496 435.6 492.4 432 488 432L191.5 432C172.4 432 155.9 418.5 152.2 399.7L142.9 352L461.2 352C494.7 352 523.7 328.9 531.3 296.4L566.6 145.1C572.5 120 553.4 96 527.7 96L92.8 96C89 77.4 72.7 64 53.7 64L8 64zM96 112L527.7 112C543.2 112 554.6 126.4 551.1 141.5L515.8 292.7C509.9 318 487.3 336 461.3 336L139.8 336L96 112zM176 528C176 510.3 190.3 496 208 496C225.7 496 240 510.3 240 528C240 545.7 225.7 560 208 560C190.3 560 176 545.7 176 528zM256 528C256 501.5 234.5 480 208 480C181.5 480 160 501.5 160 528C160 554.5 181.5 576 208 576C234.5 576 256 554.5 256 528zM432 496C449.7 496 464 510.3 464 528C464 545.7 449.7 560 432 560C414.3 560 400 545.7 400 528C400 510.3 414.3 496 432 496zM432 576C458.5 576 480 554.5 480 528C480 501.5 458.5 480 432 480C405.5 480 384 501.5 384 528C384 554.5 405.5 576 432 576z"})}),r>0&&(0,Lt.jsx)("span",{className:"absolute top-0 right-0 bg-gray-900 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-medium",children:r})]})},Ni=e=>{let{isMobile:t=!1}=e;const n="https://wa.me/".concat("447450437243");return(0,Lt.jsx)("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"".concat(t?"flex md:hidden":"hidden md:flex"," items-center p-2 text-gray-500 hover:text-green-600 font-thin transition-colors z-10"),"aria-label":"Contact us on WhatsApp",children:(0,Lt.jsx)(Ca,{icon:Ea,className:"w-6 h-6 opacity-75"})})},_i=e=>{let{isOpen:t,onClick:n}=e;return(0,Lt.jsx)("button",{onClick:n,className:"lg:hidden text-gray-600 hover:text-gray-900 focus:outline-none transition-colors","aria-label":"Toggle menu",children:t?(0,Lt.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,Lt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})}):(0,Lt.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,Lt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})})},Ti=e=>{let{isOpen:t,onClose:n}=e;return t?(0,Lt.jsxs)("ul",{className:"flex flex-col fixed left-0 top-0 w-[70%] bg-white border-r border-gray-100 font-light space-y-1 z-50 overflow-y-auto shadow-lg font-inter",style:{height:"100vh",maxHeight:"100vh",paddingTop:"0",paddingBottom:"max(1.5rem, calc(1.5rem + env(safe-area-inset-bottom)))"},children:[(0,Lt.jsxs)("li",{className:"px-4 py-4 border-b border-gray-100 flex items-center justify-between",children:[(0,Lt.jsx)("div",{onClick:n,className:"scale-125",children:(0,Lt.jsx)(li,{})}),(0,Lt.jsx)("button",{onClick:n,className:"text-gray-600 hover:text-gray-900 focus:outline-none transition-colors","aria-label":"Close menu",children:(0,Lt.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:(0,Lt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1",d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Lt.jsx)(ci,{isMobile:!0,onLinkClick:n}),(0,Lt.jsx)("li",{className:"flex-1"}),(0,Lt.jsx)("li",{className:"pt-4 border-t border-gray-100",children:(0,Lt.jsxs)("div",{className:"px-4",children:[(0,Lt.jsx)("h3",{className:"text-caption uppercase tracking-wider text-gray-500 mb-3 font-thin font-inter",children:"Follow Us"}),(0,Lt.jsx)(Aa,{isMobile:!0})]})}),(0,Lt.jsx)("li",{className:"relative px-4 py-3 border-t border-gray-100",children:(0,Lt.jsx)(ii,{variant:"mobile",onSelect:n})})]}):null},Ei=()=>{const[t,n]=(0,e.useState)(!1);return(0,e.useEffect)(()=>{if(t){const e=window.scrollY;return document.body.style.position="fixed",document.body.style.top="-".concat(e,"px"),document.body.style.width="100%",document.body.style.overflow="hidden",()=>{document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,e)}}},[t]),(0,Lt.jsxs)(Lt.Fragment,{children:[(0,Lt.jsx)(oi,{}),(0,Lt.jsxs)("nav",{className:"flex bg-white border-b border-gray-100 justify-between items-center px-4 py-2 relative",children:[(0,Lt.jsxs)("div",{className:"flex items-center gap-3 lg:flex-none",children:[(0,Lt.jsx)(_i,{isOpen:t,onClick:()=>n(!t)}),(0,Lt.jsx)(li,{})]}),(0,Lt.jsx)(ci,{isMobile:!1}),(0,Lt.jsxs)("div",{className:"flex md:hidden items-center gap-2",children:[(0,Lt.jsx)(Ni,{isMobile:!0}),(0,Lt.jsx)(ki,{isMobile:!0})]}),(0,Lt.jsx)(Ti,{isOpen:t,onClose:()=>n(!1)}),(0,Lt.jsxs)("div",{className:"hidden md:flex items-center gap-2",children:[(0,Lt.jsx)(Ni,{isMobile:!1}),(0,Lt.jsx)(ki,{isMobile:!1})]})]})]})},Pi=t=>{let{children:n,className:r="",delay:s=0}=t;const[a,i]=(0,e.useState)(!1);return(0,e.useEffect)(()=>{const e=setTimeout(()=>{i(!0)},100+s);return()=>clearTimeout(e)},[s]),(0,Lt.jsx)("span",{className:"block overflow-hidden ".concat(r),style:{clipPath:a?"polygon(0 0, 100% 0, 100% 100%, 0 100%)":"polygon(0 100%, 100% 100%, 100% 100%, 0 100%)",transition:"clip-path 1.2s cubic-bezier(0.4, 0, 0.2, 1)",transitionDelay:"".concat(s,"ms")},children:n})},Oi=n.p+"static/media/hero.7092aa58a6bf57f3d0c8.mp4";const Di=function(){const t=(0,e.useRef)(null),n=Se(),[r,s]=(0,e.useState)(!1);return(0,e.useEffect)(()=>{const e=setTimeout(()=>{s(!0)},1700);return()=>clearTimeout(e)},[]),(0,e.useEffect)(()=>{const e=t.current;if(e){const t=async()=>{try{e.playbackRate=.5,await e.play(),console.log("\ud83c\udfa5 Video started playing automatically at 0.5x speed")}catch(t){console.error("\u274c Autoplay failed:",t),setTimeout(()=>{e.play().catch(e=>console.error("\u274c Second autoplay attempt failed:",e))},1e3)}};if(!(e.readyState>=2))return e.addEventListener("loadeddata",t),()=>e.removeEventListener("loadeddata",t);t()}},[]),(0,Lt.jsxs)("section",{className:"w-full h-[80vh] md:h-[80vh] relative overflow-hidden",children:[(0,Lt.jsxs)("div",{className:"absolute inset-0 w-full h-full",children:[(0,Lt.jsxs)("video",{ref:t,autoPlay:!0,muted:!0,playsInline:!0,loop:!0,preload:"auto",className:"w-full h-full object-cover",onLoadStart:()=>console.log("\ud83c\udfa5 Video loading started"),onCanPlay:()=>{console.log("\ud83c\udfa5 Video can play"),t.current&&t.current.play().catch(e=>console.log("Play failed on canplay:",e))},onError:e=>{console.error("\u274c Video error:",e),console.error("\u274c Video src:",e.target.src)},onLoadedData:()=>{console.log("\ud83c\udfa5 Video data loaded successfully"),t.current&&t.current.play().catch(e=>console.log("Play failed on loadeddata:",e))},style:{zIndex:1,minHeight:"100vh",minWidth:"100vw"},children:[(0,Lt.jsx)("source",{src:Oi,type:"video/mp4"}),(0,Lt.jsx)("source",{src:"/video.mp4",type:"video/mp4"}),"Your browser does not support the video tag."]}),(0,Lt.jsx)("div",{className:"absolute inset-0 bg-black/50 z-10"})]}),(0,Lt.jsx)("div",{className:"relative z-20 h-full flex items-end justify-center lg:justify-start",children:(0,Lt.jsxs)("div",{className:"flex flex-col items-center text-center lg:items-start lg:text-left px-4 mb-10 lg:px-10 lg:ml-10",children:[(0,Lt.jsx)("h1",{className:"text-title sm:text-title-lg md:text-title-xl lg:text-title-xl font-light text-white font-inter tracking-title",style:{textShadow:"2px 2px 8px rgba(0, 0, 0, 0.7)"},children:(0,Lt.jsx)(Pi,{delay:100,children:"Custom Your Own"})}),(0,Lt.jsx)("h1",{className:"text-title sm:text-title-lg md:text-title-xl lg:text-title-xl font-light text-white mb-4 font-inter tracking-title",style:{textShadow:"2px 2px 8px rgba(0, 0, 0, 0.7)"},children:(0,Lt.jsx)(Pi,{delay:300,children:"Passport Case"})}),(0,Lt.jsx)("button",{onClick:()=>{window.scrollTo({top:0,behavior:"instant"}),n("/CreateYours")},className:"px-8 py-3 text-sm uppercase tracking-wider shadow-lg w-fit font-inter bg-btn-primary-blue hover:bg-btn-primary-blue-hover text-btn-primary-blue-text border border-btn-primary-blue-border hover:border-btn-primary-blue-hover transition-opacity duration-700 ease-out ".concat(r?"opacity-100":"opacity-0"),children:"Shop Now"})]})})]})},Ai=["/TheHappyCase/images/designideas/designidea.png","/TheHappyCase/images/designideas/designidea1.png","/TheHappyCase/images/designideas/designidea2.png","/TheHappyCase/images/designideas/designidea3.png","/TheHappyCase/images/designideas/designidea4.png"],Mi=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const[n,r]=(0,e.useState)(!1),s=(0,e.useRef)(null),{threshold:a=.1,rootMargin:i="0px",triggerOnce:o=!0}=t;return(0,e.useEffect)(()=>{const e=s.current;if(!e)return;const t=new IntersectionObserver(n=>{let[s]=n;s.isIntersecting?(r(!0),o&&t.unobserve(e)):o||r(!1)},{threshold:a,rootMargin:i});return t.observe(e),()=>{e&&t.unobserve(e)}},[a,i,o]),[s,n]},Li=e=>{if(!e)return e;let t=e.replace(/^\/TheHappyCase\//,"/");const n=".";if(n&&t.startsWith("/")){const e=n.endsWith("/")?n.slice(0,-1):n;return"".concat(e).concat(t)}return t},zi=t=>{let{images:n}=t;const[r,s]=(0,e.useState)(new Set),[a,i]=Mi({threshold:.1}),o=["Colorful Pins","Bronze Pins","Mix Them","Flags"];return(0,e.useEffect)(()=>{if(!i)return;const e=[];return n.forEach((t,n)=>{const r=setTimeout(()=>{s(e=>new Set([...e,n]))},500+100*n);e.push(r)}),()=>{e.forEach(e=>clearTimeout(e))}},[n,i]),(0,Lt.jsx)("div",{ref:a,className:"w-full mb-12 md:mb-16",children:(0,Lt.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-4 gap-2 w-full px-0",children:n.map((e,t)=>{const n=r.has(t);return(0,Lt.jsxs)("div",{className:"group bg-white transition-all duration-700 ease-out  overflow-hidden ".concat(n?"opacity-100 translate-y-0":"opacity-0 translate-y-8"),children:[(0,Lt.jsx)("div",{className:"relative w-full aspect-square overflow-hidden sm:min-h-[300px] ",children:(0,Lt.jsx)("img",{src:Li(e),className:"absolute inset-0 w-full h-full object-cover transition-transform duration-300 group-hover:scale-110",alt:"Design Idea ".concat(t+1),loading:"lazy",fetchPriority:t<2?"high":"low",decoding:"async",width:"400",height:"400"})}),(0,Lt.jsx)("div",{className:"bg-white py-3 md:py-4",children:(0,Lt.jsx)("p",{className:"text-gray-900 text-center text-md md:text-base font-light leading-tight font-inter",children:o[t]||""})})]},t)})})})},Fi=e=>{let{image:t}=e;const[n,r]=Mi({threshold:.1}),s=Li(t);return(0,Lt.jsxs)("div",{ref:n,className:"w-full flex flex-col md:flex-row items-stretch",children:[(0,Lt.jsxs)("div",{className:"relative w-full md:w-1/2 h-[400px] sm:h-[450px] md:h-[650px] lg:h-[700px] xl:h-[750px] overflow-hidden bg-gray-100 flex items-start perfect-gift-bg",style:{backgroundImage:"url(".concat(s,")"),backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center"},children:[(0,Lt.jsx)("img",{src:s,className:"absolute inset-0 w-full h-full object-cover opacity-0 pointer-events-none",alt:"Perfect Gift",loading:"lazy",fetchPriority:"low",decoding:"async",width:"1200",height:"800","aria-hidden":"true"}),(0,Lt.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-black/30 via-black/20 to-black/40 md:hidden"}),(0,Lt.jsx)("div",{className:"absolute inset-0 flex items-center justify-center z-10 md:hidden",children:(0,Lt.jsx)("div",{className:"container mx-auto px-4 sm:px-6 max-w-4xl",children:(0,Lt.jsxs)("div",{className:"text-center space-y-4 sm:space-y-5",children:[(0,Lt.jsx)("h2",{className:"text-subtitle-lg md:text-title font-light text-white mb-4 sm:mb-5 font-inter tracking-title",children:r&&(0,Lt.jsx)(Pi,{delay:100,children:"The Perfect Gift for Every Moment"})}),(0,Lt.jsx)("p",{className:"text-sm sm:text-base text-white leading-relaxed font-light font-inter px-2 sm:px-4",children:"Created with love for all the travelers who carry their stories around the world."})]})})})]}),(0,Lt.jsx)("div",{className:"hidden md:flex md:w-1/2 items-center justify-center bg-white",children:(0,Lt.jsx)("div",{className:"container mx-auto px-6 md:px-8 lg:px-12 xl:px-16 py-12 lg:py-16",children:(0,Lt.jsxs)("div",{className:"space-y-6 lg:space-y-8",children:[(0,Lt.jsx)("h2",{className:"text-subtitle-lg md:text-title font-light text-gray-900 mb-6 font-inter tracking-title",children:r&&(0,Lt.jsx)(Pi,{delay:100,children:"The Perfect Gift for Every Moment"})}),(0,Lt.jsx)("p",{className:"text-base md:text-lg lg:text-xl xl:text-2xl text-gray-700 leading-relaxed font-light font-inter",children:"Created with love for birthdays, weddings, and for all the travelers who carry their stories around the world."})]})})})]})},Ri=e=>{let{image1:t,image2:n}=e;const[r]=Mi({threshold:.1}),s=Se(),a=Li(t),i=Li(n);return(0,Lt.jsx)("div",{ref:r,className:"w-full",children:(0,Lt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 md:gap-4",children:[(0,Lt.jsxs)("div",{className:"relative w-full  h-[400px] sm:h-[500px] md:h-[700px] lg:h-[800px] overflow-hidden bg-gray-100",children:[(0,Lt.jsx)("div",{className:"absolute inset-0 w-full h-full",style:{backgroundImage:"url(".concat(a,")"),backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center"},children:(0,Lt.jsx)("img",{src:a,className:"absolute inset-0 w-full h-full object-cover opacity-0 pointer-events-none",alt:"Design idea",loading:"lazy",fetchPriority:"low",decoding:"async",width:"1200",height:"800","aria-hidden":"true"})}),(0,Lt.jsx)("div",{className:"absolute bottom-0 left-0 right-0 flex items-end justify-center z-10 pb-6 md:pb-8",children:(0,Lt.jsx)("button",{onClick:()=>{window.scrollTo({top:0,behavior:"instant"}),s("/CreateYours")},className:"px-8 py-3 text-sm uppercase tracking-wider font-inter bg-btn-primary-blue hover:bg-btn-primary-blue-hover text-btn-primary-blue-text border border-btn-primary-blue-border hover:border-btn-primary-blue-hover transition-all duration-200 shadow-lg",children:"PERSONALISE"})})]}),(0,Lt.jsxs)("div",{className:"relative w-full h-[400px] sm:h-[500px] md:h-[700px] lg:h-[800px] overflow-hidden bg-gray-100",children:[(0,Lt.jsx)("div",{className:"absolute inset-0 w-full h-full",style:{backgroundImage:"url(".concat(i,")"),backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center"},children:(0,Lt.jsx)("img",{src:i,className:"absolute inset-0 w-full h-full object-cover opacity-0 pointer-events-none",alt:"Design idea",loading:"lazy",fetchPriority:"low",decoding:"async",width:"1200",height:"800","aria-hidden":"true"})}),(0,Lt.jsx)("div",{className:"absolute bottom-0 left-0 right-0 flex items-end justify-center z-10 pb-6 md:pb-8",children:(0,Lt.jsx)("button",{onClick:()=>{window.scrollTo({top:0,behavior:"instant"}),s("/CreateYours")},className:"px-8 py-3 text-sm uppercase tracking-wider font-inter bg-btn-primary-blue hover:bg-btn-primary-blue-hover text-btn-primary-blue-text border border-btn-primary-blue-border hover:border-btn-primary-blue-hover transition-all duration-200 shadow-lg",children:"PERSONALISE"})})]})]})})},Ii=()=>{const e=Ai.filter((e,t)=>4!==t);return(0,Lt.jsxs)("section",{className:"relative pt-8 md:pt-12 pb-20 md:pb-32 overflow-hidden bg-white",children:[(0,Lt.jsx)(zi,{images:e}),(0,Lt.jsx)(Fi,{image:Ai[4]}),(0,Lt.jsx)("div",{className:"relative z-10 mt-12 md:mt-16",children:(0,Lt.jsx)(Ri,{image1:"/TheHappyCase/images/designideas/designidea5.png",image2:"/TheHappyCase/images/designideas/designidea6.png"})})]})},Bi=t=>{let{item:n,displayName:r,formatPrice:s}=t;const[a,i]=(0,e.useState)(n.colors[0]||null),[o,l]=(0,e.useState)(!1),c=Li((null===a||void 0===a?void 0:a.image)||n.images[0]),u="firstclass"===n.type?Li("/TheHappyCase/images/FirstClassCase/firstclass.jpg"):"economy"===n.type?Li("/TheHappyCase/images/SmartCase/economycaseinside.jpg"):"business"===n.type?Li("/TheHappyCase/images/BusinessClassCase/businessclass.png"):null;return(0,Lt.jsxs)("div",{className:"group flex flex-col h-full",children:[(0,Lt.jsx)("div",{className:"relative mt-8",children:(0,Lt.jsxs)("div",{className:"aspect-square overflow-hidden w-full max-w-2xl mx-auto sm:max-w-xl md:max-w-3xl lg:max-w-4xl transition-all duration-300 hover:border-gray-300 h-[250px] sm:h-[300px] md:h-[450px] lg:h-[500px] relative",onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),children:[(0,Lt.jsx)("img",{src:c,alt:r,className:"w-full h-full object-contain transition-opacity duration-300 ".concat(o&&u?"opacity-0":"opacity-100"),style:{display:o&&u?"none":"block"},loading:"eager",fetchPriority:"high",decoding:"async",width:"400",height:"400"}),u&&(0,Lt.jsx)("img",{src:u,alt:"".concat(r," - Inside view"),className:"absolute inset-0 w-full h-full object-contain transition-all duration-300 ".concat(o?"opacity-100 scale-90":"opacity-0 scale-100"),style:{display:o?"block":"none"},loading:"lazy",fetchPriority:"low",decoding:"async",width:"400",height:"400"})]})}),n.colors&&n.colors.length>0&&(0,Lt.jsx)("div",{className:"col-span-2 text-center flex justify-center flex-wrap gap-1.5 sm:gap-2 mt-1 md:mt-4",children:n.colors.map((e,t)=>(0,Lt.jsx)("button",{onClick:()=>{i(e)},className:"w-6 h-6 sm:w-8 sm:h-8 rounded-full border-2 transition-all duration-200 ".concat((null===a||void 0===a?void 0:a.color)===e.color?"border-gray-900 ring-2 ring-gray-300 scale-110":"border-gray-200 hover:border-gray-400 hover:scale-105"),style:{backgroundColor:e.color},title:e.color},t))}),(0,Lt.jsxs)("div",{className:"text-center flex flex-col flex-grow",children:[(0,Lt.jsx)("h3",{className:"font-thin text-lg text-gray-800 mb-2 mt-4 ",children:r}),(0,Lt.jsx)("p",{className:"text-body-md text-gray-700 mb-6 font-bold font-inter",children:s(n.basePrice||0)}),(0,Lt.jsx)("div",{className:"mt-auto",children:(0,Lt.jsx)(Nt,{to:"/CreateYours",className:"inline-block w-full py-3 text-sm uppercase tracking-wider text-center shadow-lg font-inter bg-btn-primary-blue hover:bg-btn-primary-blue-hover text-btn-primary-blue-text border border-btn-primary-blue-border hover:border-btn-primary-blue-hover transition-all duration-200",children:"PERSONALIZE"})})]})]})},Hi=()=>{const{formatPrice:e}=Ft(),t={economy:"Economy Case",business:"Business Class Case",firstclass:"First Class Case"};return(0,Lt.jsx)("section",{className:"bg-white relative items-center justify-center py-20 md:py-24 overflow-hidden",children:(0,Lt.jsxs)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10 ",children:[(0,Lt.jsx)("div",{className:"text-center",children:(0,Lt.jsx)("h2",{className:"text-title md:text-title-lg font-light text-gray-900 mb-3 font-inter tracking-title",children:"Our Cases"})}),(0,Lt.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 gap-12 md:gap-16 w-full xl:max-w-7xl mx-auto items-stretch",children:ui.cases.map((n,r)=>(0,Lt.jsx)(Bi,{item:n,displayName:t[n.type]||n.name,formatPrice:e},r))})]})})},Wi=JSON.parse('{"Y":[{"id":1,"name":"Randi","rating":5,"text":"The case is perfect! So much nicer in person. The photos don\'t do it justice. Raphaela gives 5 star service! Don\'t second guess it. Just buy one!","location":"London, UK"},{"id":2,"name":"Viktorija","rating":5,"text":"The passport cover is absolutely beautiful, with all the little details that make it feel special. The quality is excellent as well. I\'m especially impressed with the seller\'s communication and helpfulness..she went above and beyond to ship it as quickly as possible so it would arrive in time. Highly recommended! \ud83d\ude04\ud83e\udef6\ud83c\udffd","location":"Podstrana, Croatia"},{"id":3,"name":"Nina","rating":5,"text":"Love love love this! Fantastic quality!","location":"Burnley, United Kingdom"},{"id":4,"name":"Daniela","rating":5,"text":"I\'m so happy with this passport! better than I expected. The material feels really sturdy and well-made, and the little decorative pins are SO cute, they give it such a fun, personal touch. The delivery was fast and arrived exactly how I ordered. Definitely recommend","location":"London, United Kingdom"},{"id":5,"name":"Luana","rating":5,"text":"I had been on the hunt for the perfect passport case for a while, and then I got one as a birthday gift. I instantly fell in love with it, so I decided to get another one. The quality is fantastic, and the ability to customise it is such a great idea. I\'ve already started buying them for the people I love, so they can protect their passports with such a beautiful case too!","location":"London, United Kingdom"},{"id":6,"name":"Ahmed","rating":5,"text":"Outstanding quality and service! The case survived my backpacking trip through Europe. Will definitely order again!","location":"Cairo, Egypt"},{"id":7,"name":"Imma","rating":5,"text":"This was a birthday gift for my friend and she loved it. Very good quality. I really recommend.","location":"London, United Kingdom"},{"id":8,"name":"Margherita","rating":5,"text":"I am so happy about this passport holder. Great quality and attention to details","location":"Brentford, United Kingdom"},{"id":9,"name":"Kristi","rating":5,"text":"The item was as cute and unique as pictured. Very excited for my next travels with it.","location":"White House, USA"},{"id":10,"name":"Sandra","rating":5,"text":"Great item.... very good quality \ud83d\udc4c","location":"London, United Kingdom"}]}'),Ui=()=>{const[e,t]=Mi({threshold:.1});return(0,Lt.jsxs)("div",{ref:e,className:"text-center mb-12 md:mb-16",children:[(0,Lt.jsx)("h2",{className:"text-subtitle-lg md:text-title font-light text-gray-900 mb-3 font-inter tracking-title",children:t&&(0,Lt.jsx)(Pi,{delay:100,children:"What Our Customers Say"})}),(0,Lt.jsx)("div",{className:"w-20 h-px bg-gray-300 mx-auto mt-4"})]})},Yi=e=>{let{onPrev:t,onNext:n}=e;return(0,Lt.jsxs)(Lt.Fragment,{children:[(0,Lt.jsx)("button",{onClick:t,className:"hidden md:flex absolute left-0 top-1/2 transform -translate-y-1/2 -translate-x-4 lg:-translate-x-8 z-20 w-10 h-10 lg:w-12 lg:h-12 items-center justify-center hover:border-btn-primary-blue-hover transition-all duration-200 group","aria-label":"Previous reviews",children:(0,Lt.jsx)(Ca,{icon:Ja,className:"text-gray-700 text-sm lg:text-base transition-colors"})}),(0,Lt.jsx)("button",{onClick:n,className:"hidden md:flex absolute right-0 top-1/2 transform -translate-y-1/2 translate-x-4 lg:translate-x-8 z-20 w-10 h-10 lg:w-12 lg:h-12 items-center justify-center  border   transition-all duration-200 group","aria-label":"Next reviews",children:(0,Lt.jsx)(Ca,{icon:Za,className:"text-gray-700 text-sm lg:text-base transition-colors"})})]})},Vi=e=>{let{review:t}=e;return(0,Lt.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100 p-6 sm:p-7 md:p-8 transition-all duration-300 hover:shadow-lg hover:border-gray-200 flex flex-col min-h-[320px] group",children:[(0,Lt.jsx)("div",{className:"flex items-center gap-2 mb-4 sm:mb-5",children:(n=t.rating,Array.from({length:5},(e,t)=>(0,Lt.jsx)(Ca,{icon:Ra,className:"text-base sm:text-lg ".concat(t<n?"text-yellow-400":"text-gray-200")},t)))}),(0,Lt.jsxs)("p",{className:"text-gray-700 mb-6 leading-relaxed text-base sm:text-lg flex-grow font-inter font-light",children:['"',t.text,'"']}),(0,Lt.jsxs)("div",{className:"flex items-center gap-3 sm:gap-4 mt-auto pt-4 border-t border-gray-100",children:[t.avatar&&(0,Lt.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center text-gray-900 font-semibold bg-gradient-to-br from-gray-50 to-gray-100 border border-gray-200 text-base flex-shrink-0 font-inter shadow-sm group-hover:shadow-md transition-shadow duration-300",children:t.avatar}),(0,Lt.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,Lt.jsx)("h4",{className:"font-semibold text-gray-900 text-base mb-1 font-inter",children:t.name}),(0,Lt.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,Lt.jsx)(Ca,{icon:Fa,className:"text-gray-400 text-xs flex-shrink-0"}),(0,Lt.jsx)("p",{className:"text-gray-500 text-sm font-inter",children:t.location})]})]})]})]});var n},qi=e=>{let{reviews:t}=e;return(0,Lt.jsx)(Lt.Fragment,{children:t.map(e=>(0,Lt.jsx)(Vi,{review:e,isMobile:!1},e.id))})},Xi=e=>{let{totalSlides:t,currentSlide:n,reviewsPerSlide:r,onSlideChange:s}=e;return(0,Lt.jsx)("div",{className:"flex justify-center gap-2 mt-8 sm:mt-10",children:Array.from({length:t},(e,t)=>{const a=Math.floor(n/r)===t;return(0,Lt.jsx)("button",{onClick:()=>s(t*r),className:"h-2 rounded-full transition-all duration-300 ".concat(a?"bg-gray-900 w-8 shadow-sm":"bg-gray-300 hover:bg-gray-400 w-2"),"aria-label":"Go to slide ".concat(t+1)},t)})})},Gi=()=>{const t=Wi.Y,[n,r]=(0,e.useState)(0),[s,a]=(0,e.useState)(1);(0,e.useEffect)(()=>{const e=()=>{window.innerWidth>=1024?a(3):window.innerWidth>=768?a(2):a(1)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const i=t.slice(n,n+s),o=Math.ceil(t.length/s);return(0,Lt.jsx)("div",{className:"bg-blue-100 py-20 md:py-28 lg:py-32 relative overflow-hidden",children:(0,Lt.jsxs)("div",{className:"max-w-7xl mx-auto relative z-10 px-4 sm:px-6 lg:px-8",children:[(0,Lt.jsx)(Ui,{}),(0,Lt.jsxs)("div",{className:"relative",children:[(0,Lt.jsx)(Yi,{onPrev:()=>{r(e=>e-s<0?Math.max(0,t.length-s):e-s)},onNext:()=>{r(e=>e+s>=t.length?0:e+s)}}),(0,Lt.jsx)("div",{className:"grid gap-6 sm:gap-8 md:gap-8 md:px-16 lg:px-20 ".concat(3===s?"grid-cols-1 md:grid-cols-2 lg:grid-cols-3":2===s?"grid-cols-1 md:grid-cols-2":"grid-cols-1"),children:(0,Lt.jsx)(qi,{reviews:i})}),(0,Lt.jsx)(Xi,{totalSlides:o,currentSlide:n,reviewsPerSlide:s,onSlideChange:r})]})]})})};const Ki=function(){const t=(new Date).getFullYear(),[n,r]=(0,e.useState)(!1),[s,a]=(0,e.useState)(!1),[i,o]=Mi({threshold:.1});return(0,Lt.jsxs)("footer",{ref:i,className:"bg-white border-t border-gray-100",children:[(0,Lt.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:(0,Lt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-8 md:gap-12",children:[(0,Lt.jsxs)("div",{className:"space-y-5 pb-6 md:pb-0  md:border-0",children:[(0,Lt.jsx)("div",{className:"flex items-center mb-2",children:(0,Lt.jsxs)(Nt,{to:"/",className:"hover:opacity-90 transition-opacity duration-300","aria-label":"HappyCase home",children:[(0,Lt.jsxs)("div",{className:"flex flex-col cursor-pointer transition-all duration-300 text-gray-900 font-fredoka",children:[(0,Lt.jsx)("span",{className:"text-[10px] md:text-xs font-bold leading-tight tracking-[0.35em] text-blue-900 uppercase",children:"THE"}),(0,Lt.jsx)("span",{className:"text-xl md:text-3xl font-bold leading-none flex items-center gap-0 text-blue-900 uppercase",children:"HAPPY".split("").map((e,t)=>(0,Lt.jsx)("span",{className:"inline-block animate-smile-curve",style:{animationDelay:"".concat(.1*t,"s")},children:e},t))}),(0,Lt.jsx)("span",{className:"text-end text-[10px] md:text-xs font-bold leading-tight tracking-[0.35em] text-blue-900 uppercase",children:"CASE"})]}),(0,Lt.jsx)("style",{children:"\n                  @keyframes smileCurve {\n                    0%, 100% {\n                      transform: translateY(0) rotate(0deg);\n                    }\n                    25% {\n                      transform: translateY(-2px) rotate(-2deg);\n                    }\n                    50% {\n                      transform: translateY(-4px) rotate(0deg);\n                    }\n                    75% {\n                      transform: translateY(-2px) rotate(2deg);\n                    }\n                  }\n                  .animate-smile-curve {\n                    animation: smileCurve 2s ease-in-out infinite;\n                  }\n                "})]})}),(0,Lt.jsx)("p",{className:"text-gray-900 text-body-sm leading-relaxed font-light pt-2 font-inter",children:"Creating personalized passport cases that bring joy to your travels. Made with love and attention to detail."}),(0,Lt.jsxs)("div",{className:"flex flex-col gap-3 pt-2",children:[(0,Lt.jsx)("p",{className:"text-body-sm text-gray-900 font-light font-inter",children:"Follow us!"}),(0,Lt.jsxs)("div",{className:"flex gap-4",children:[(0,Lt.jsx)("a",{href:"https://instagram.com/thehappycase.store",target:"_blank",rel:"noopener noreferrer",className:"transition-opacity hover:opacity-80","aria-label":"Follow us on Instagram",children:(0,Lt.jsx)(Ca,{icon:Ta,className:"text-lg",style:{color:"#E4405F"}})}),(0,Lt.jsx)("a",{href:"https://tiktok.com/@thehappycase.store",target:"_blank",rel:"noopener noreferrer",className:"transition-opacity hover:opacity-80","aria-label":"Follow us on TikTok",children:(0,Lt.jsx)(Ca,{icon:_a,className:"text-lg",style:{color:"#000000"}})}),(0,Lt.jsx)("a",{href:"https://facebook.com/thehappycase",target:"_blank",rel:"noopener noreferrer",className:"transition-opacity hover:opacity-80","aria-label":"Follow us on Facebook",children:(0,Lt.jsx)(Ca,{icon:ka,className:"text-lg",style:{color:"#1877F2"}})}),(0,Lt.jsx)("a",{href:"https://www.etsy.com/shop/TheHappyCaseShop?ref=dashboard-header",target:"_blank",rel:"noopener noreferrer",className:"transition-opacity hover:opacity-80","aria-label":"Visit our Etsy shop",children:(0,Lt.jsx)(Ca,{icon:Pa,className:"text-lg",style:{color:"#F45800"}})})]})]})]}),(0,Lt.jsxs)("div",{className:"space-y-3  md:pb-0 ",children:[(0,Lt.jsxs)("button",{onClick:()=>r(!n),className:"md:hidden flex items-center justify-between w-full text-caption uppercase tracking-wider text-gray-900 font-light hover:text-gray-800 transition-colors duration-200 mb-2 font-inter ",children:[o&&(0,Lt.jsx)(Pi,{delay:100,children:"Quick Links"}),(0,Lt.jsx)(Ca,{icon:n?za:$a,className:"text-xs ml-2"})]}),(0,Lt.jsx)("h4",{className:"hidden md:block text-caption uppercase tracking-wider text-gray-900 font-light mb-2 font-inter ",children:o&&(0,Lt.jsx)(Pi,{delay:100,children:"Quick Links"})}),n&&(0,Lt.jsxs)("ul",{className:"md:hidden space-y-3 ",children:[(0,Lt.jsx)("li",{children:(0,Lt.jsx)(Nt,{to:"/about",className:"text-caption text-gray-900 hover:text-gray-800 transition-colors duration-200 font-light font-inter",children:"About"})}),(0,Lt.jsx)("li",{children:(0,Lt.jsx)(Nt,{to:"/",className:"text-caption text-gray-900 hover:text-gray-800 transition-colors duration-200 font-light font-inter",children:"Home"})}),(0,Lt.jsx)("li",{children:(0,Lt.jsx)(Nt,{to:"/CreateYours",className:"text-caption text-gray-900 hover:text-gray-800 transition-colors duration-200 font-light font-inter",children:"Create Yours"})})]}),(0,Lt.jsxs)("ul",{className:"hidden md:block ",children:[(0,Lt.jsx)("li",{children:(0,Lt.jsx)(Nt,{to:"/about",className:"text-sm text-gray-900 hover:text-gray-800 transition-colors duration-200 font-light font-inter",children:"About"})}),(0,Lt.jsx)("li",{children:(0,Lt.jsx)(Nt,{to:"/",className:"text-sm text-gray-900 hover:text-gray-800 transition-colors duration-200 font-light font-inter",children:"Home"})}),(0,Lt.jsx)("li",{children:(0,Lt.jsx)(Nt,{to:"/CreateYours",className:"text-sm text-gray-900 hover:text-gray-800 transition-colors duration-200 font-light font-inter",children:"Create Yours"})})]})]}),(0,Lt.jsxs)("div",{className:"space-y-3",children:[(0,Lt.jsxs)("button",{onClick:()=>a(!s),className:"md:hidden flex items-center justify-between w-full text-caption uppercase tracking-wider text-gray-900 font-light hover:text-gray-800 transition-colors duration-200 mb-2 font-inter",children:[o&&(0,Lt.jsx)(Pi,{delay:200,children:"Customer Service"}),(0,Lt.jsx)(Ca,{icon:s?za:$a,className:"text-xs ml-2"})]}),(0,Lt.jsx)("h4",{className:"hidden md:block text-caption uppercase tracking-wider text-gray-900 font-light mb-2 font-inter",children:o&&(0,Lt.jsx)(Pi,{delay:200,children:"Customer Service"})}),s&&(0,Lt.jsxs)("ul",{className:"md:hidden space-y-3 ",children:[(0,Lt.jsx)("li",{children:(0,Lt.jsx)(Nt,{to:"/shipping",className:"text-sm text-gray-900 hover:text-gray-800 transition-colors duration-200 font-light font-inter",children:"Shipping and Processing Times"})}),(0,Lt.jsx)("li",{children:(0,Lt.jsx)(Nt,{to:"/returns",className:"text-sm text-gray-900 hover:text-gray-800 transition-colors duration-200 font-light font-inter",children:"Refund Policy"})})]}),(0,Lt.jsxs)("ul",{className:"hidden md:block space-y-1 ",children:[(0,Lt.jsx)("li",{children:(0,Lt.jsx)(Nt,{to:"/shipping",className:"text-sm text-gray-900 hover:text-gray-800 transition-colors duration-200 font-light font-inter",children:"Shipping and Processing Times"})}),(0,Lt.jsx)("li",{children:(0,Lt.jsx)(Nt,{to:"/returns",className:"text-sm text-gray-900 hover:text-gray-800 transition-colors duration-200 font-light font-inter",children:"Refund Policy"})})]})]})]})}),(0,Lt.jsx)("div",{className:" bg-white ",children:(0,Lt.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,Lt.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0",children:[(0,Lt.jsx)("div",{className:"flex items-center space-x-4",children:(0,Lt.jsxs)("div",{className:"flex space-x-3 items-center",children:[(0,Lt.jsx)(Ca,{icon:Na,className:"text-xl",style:{color:"#1434CB"}}),(0,Lt.jsx)(Ca,{icon:Da,className:"text-xl",style:{color:"#EB001B"}}),(0,Lt.jsx)(Ca,{icon:Oa,className:"text-xl",style:{color:"#006FCF"}}),(0,Lt.jsx)(Ca,{icon:ja,className:"text-xl",style:{color:"#003087"}})]})}),(0,Lt.jsx)("div",{className:"text-center md:text-right",children:(0,Lt.jsxs)("p",{className:"text-caption text-gray-900 font-light font-inter",children:["\xa9 ",t," The Happy Case. Made with love for all the travelers out there. All rights reserved."]})})]})})})]})},Qi=e=>{let{onClose:t}=e;return(0,Lt.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-100 flex-shrink-0",children:[(0,Lt.jsx)("h3",{className:"text-sm font-light uppercase tracking-wider text-gray-900 font-inter",children:"Your Cart"}),(0,Lt.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-900 transition-colors",children:(0,Lt.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Lt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M6 18L18 6M6 6l12 12"})})})]})},$i=()=>(0,Lt.jsx)("div",{className:"text-center text-gray-500 text-sm font-light font-inter",children:"Your cart is empty."}),Ji=e=>{let{quantity:t,onDecrement:n,onIncrement:r}=e;return(0,Lt.jsxs)("div",{className:"flex items-center gap-1 border border-gray-200 rounded-sm p-1",children:[(0,Lt.jsx)("button",{onClick:n,className:"w-6 h-6 flex items-center justify-center text-gray-600 hover:text-gray-900 transition-colors",children:"\u2212"}),(0,Lt.jsx)("div",{className:"px-2 py-0.5 text-xs text-gray-900 font-light font-inter",children:t||1}),(0,Lt.jsx)("button",{onClick:r,className:"w-6 h-6 flex items-center justify-center text-gray-600 hover:text-gray-900 transition-colors",children:"+"})]})},Zi=e=>{let{item:t,index:n,openNoteIndex:r,noteTexts:s,onToggleNote:a,onNoteChange:i,onSaveNote:o,onCancelNote:l}=e;const c=r===n,u=t.note&&!c;return(0,Lt.jsxs)(Lt.Fragment,{children:[c&&(0,Lt.jsxs)("div",{className:"mt-3 pt-3 ",children:[(0,Lt.jsx)("div",{className:"text-xs text-gray-500 mb-2 font-light font-inter",children:"Add a note for this item:"}),(0,Lt.jsx)("textarea",{value:void 0!==s[n]?s[n]:t.note||"",onChange:e=>i(n,e.target.value),placeholder:"Add any special instructions or notes...",className:"w-full px-3 py-2 text-xs border border-gray-200 rounded-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 font-light resize-none font-inter",rows:"3"}),(0,Lt.jsxs)("div",{className:"flex justify-end gap-2 mt-2",children:[(0,Lt.jsx)("button",{onClick:l,className:"px-3 py-1 text-xs uppercase tracking-wider text-gray-600 hover:text-gray-900 font-light transition-colors font-inter",children:"Cancel"}),(0,Lt.jsx)("button",{onClick:()=>o(n),className:"px-3 py-1 text-xs uppercase tracking-wider font-light font-inter bg-btn-primary hover:bg-btn-primary-hover text-btn-primary-text border border-btn-primary-border hover:border-btn-primary-hover transition-all duration-200",children:"Save"})]})]}),u&&(0,Lt.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-100",children:[(0,Lt.jsx)("div",{className:"text-xs text-gray-500 mb-1 font-light font-inter",children:"Note:"}),(0,Lt.jsx)("div",{className:"text-xs text-gray-700 font-light whitespace-pre-wrap font-inter",children:t.note})]}),(0,Lt.jsx)("div",{className:"mt-3 pt-3 border-t border-gray-100",children:(0,Lt.jsxs)("button",{onClick:()=>a(n),className:"text-xs text-gray-500 hover:text-gray-900 uppercase tracking-wider font-light transition-colors flex items-center gap-1 font-inter",children:[t.note?"Edit Note":"Add Note",(0,Lt.jsx)(Ca,{icon:c?za:$a,className:"text-xs"})]})})]})},eo=e=>{var t;let{item:n,index:r,formatPrice:s,onRemove:a,onIncrement:i,onDecrement:o,openNoteIndex:l,noteTexts:c,onToggleNote:u,onNoteChange:d,onSaveNote:h,onCancelNote:f,errorMessage:m}=e;const p=(e=>{if(!e)return"";let t=e;return t=t.replace(/\s*-\s*(Flag|Colorful Charm|Bronze Charm)$/i,""),t=t.replace(/\s+Flag$/i,""),t.trim()})(n.name||(null===(t=n.pin)||void 0===t?void 0:t.name)),g=n.quantity||1;return(0,Lt.jsxs)("div",{className:"mt-2",children:[(0,Lt.jsx)("div",{className:"flex items-start justify-between px-2 py-1",children:(0,Lt.jsxs)("div",{className:"flex items-start gap-3 flex-1",children:[(0,Lt.jsxs)("div",{className:"relative flex-shrink-0",children:[n.image?(0,Lt.jsx)("img",{src:Li(n.image),alt:p||"Charm",className:"w-20 h-20 object-contain rounded",loading:"lazy"}):(0,Lt.jsx)("div",{className:"w-20 h-20 rounded bg-gray-50 border border-gray-200 flex items-center justify-center",children:(0,Lt.jsx)("span",{className:"text-gray-400 text-xs",children:"Image"})}),m&&(0,Lt.jsx)("div",{className:"absolute ".concat(g>1?"-bottom-1 -right-1":"-top-1 -right-1"," bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center z-10 shadow-lg"),children:(0,Lt.jsx)("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Lt.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})})]}),(0,Lt.jsxs)("div",{className:"flex flex-col flex-1 min-w-0",children:[(0,Lt.jsx)("span",{className:"text-sm font-light text-gray-900 font-inter",children:p||"Charm"}),m&&(0,Lt.jsx)("div",{className:"mt-2 p-2 bg-red-50 border border-red-200 rounded-sm",children:(0,Lt.jsx)("p",{className:"text-xs text-red-700 font-inter leading-tight",children:m})})]})]})}),(0,Lt.jsx)("div",{className:"mt-3 flex flex-col gap-2",children:(0,Lt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Lt.jsx)(Ji,{quantity:n.quantity||1,item:n,onDecrement:()=>o(void 0!==n.id?n.id:r),onIncrement:()=>i(void 0!==n.id?n.id:r)}),(0,Lt.jsx)("div",{className:"text-right",children:(0,Lt.jsx)("div",{className:"text-sm font-medium text-gray-900 font-inter",children:s((n.price||n.totalPrice||0)*(n.quantity||1))})})]})}),(0,Lt.jsx)(Zi,{item:n,index:r,openNoteIndex:l,noteTexts:c,onToggleNote:u,onNoteChange:d,onSaveNote:h,onCancelNote:f})]})},to=e=>{if(!e)return"";let t=e;return t=t.replace(/\s*-\s*(Flag|Colorful Charm|Bronze Charm)$/i,""),t=t.replace(/\s+Flag$/i,""),t.trim()},no=e=>{let{item:t,index:n,formatPrice:r,onIncrement:s,onDecrement:a,openNoteIndex:i,noteTexts:o,onToggleNote:l,onNoteChange:u,onSaveNote:d,onCancelNote:h,errorMessage:f,charmErrors:m={}}=e;const p=Object.values((t.pinsDetails||[]).reduce((e,t)=>{const n=c({name:(null===t||void 0===t?void 0:t.name)||"Charm",src:(null===t||void 0===t?void 0:t.src)||"",price:(null===t||void 0===t?void 0:t.price)||0,category:(null===t||void 0===t?void 0:t.category)||"colorful"},t),r=n.src||n.name;return e[r]=e[r]||c(c({},n),{},{quantity:0}),e[r].quantity+=1,e},{})),g=t.designImage&&"string"===typeof t.designImage&&t.designImage.trim().length>0?t.designImage:t.caseImage||t.image,y="number"===typeof t.basePrice?t.basePrice:8,x=t.pinsDetails&&t.pinsDetails.length?t.pinsDetails.reduce((e,t)=>e+(t.price||0),0):Math.max(0,(t.totalPrice||0)-y),b=y+x,v=t.quantity||1;return(0,Lt.jsxs)("div",{className:"mt-2",children:[(0,Lt.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,Lt.jsx)("div",{className:"flex items-start justify-between px-2 py-1",children:(0,Lt.jsxs)("div",{className:"flex items-start gap-3 flex-1",children:[(0,Lt.jsxs)("div",{className:"relative flex-shrink-0",children:[g?(0,Lt.jsx)("img",{src:Li(g),alt:"Case preview",className:"w-20 h-22 object-contain rounded",loading:"lazy"}):t.color?(0,Lt.jsx)("div",{className:"w-20 h-22 rounded border-2 border-gray-300 flex items-center justify-center",style:{backgroundColor:t.color}}):(0,Lt.jsx)("div",{className:"w-20 h-22 rounded bg-gray-50 border border-gray-200 flex items-center justify-center",children:(0,Lt.jsx)("span",{className:"text-gray-400 text-xs",children:"Image"})}),f&&(0,Lt.jsx)("div",{className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center z-10 shadow-lg",children:(0,Lt.jsx)("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Lt.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})})]}),(0,Lt.jsxs)("div",{className:"flex flex-col flex-1 min-w-0",children:[(0,Lt.jsx)("span",{className:"text-sm font-light text-gray-900 font-inter",children:t.caseName||t.name||"Passport Case"}),t.color&&(0,Lt.jsxs)("div",{className:"flex items-center gap-1.5 mt-0.5",children:[(0,Lt.jsx)("span",{className:"text-xs text-gray-500 font-light font-inter",children:"Color:"}),(0,Lt.jsx)("div",{className:"w-3 h-3 rounded-full border border-gray-300",style:{backgroundColor:t.color}})]}),f&&(0,Lt.jsx)("div",{className:"mt-2 p-2 bg-red-50 border border-red-200 rounded-sm animate-pulse",children:(0,Lt.jsx)("p",{className:"text-xs text-red-700 font-inter leading-tight font-medium",children:f})})]})]})}),p.length>0&&p.map((e,t)=>{const n=e.name||e.src||"",r=e.category&&""!==e.category.trim()?e.category:"colorful",s="".concat(n,"-").concat(r),a=m[s];return(0,Lt.jsx)("div",{className:"flex items-center justify-between px-2 py-1",children:(0,Lt.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[(0,Lt.jsxs)("div",{className:"relative flex-shrink-0",children:[e.src?(0,Lt.jsx)("img",{src:Li(e.src),alt:e.name||"Charm",className:"w-16 h-16 object-contain",loading:"lazy"}):(0,Lt.jsx)("div",{className:"w-8 h-8 rounded bg-gray-200"}),a&&(0,Lt.jsx)("div",{className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-4 h-4 flex items-center justify-center z-10 shadow-lg",children:(0,Lt.jsx)("svg",{className:"w-2.5 h-2.5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Lt.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})})]}),(0,Lt.jsxs)("div",{className:"flex flex-col flex-1 min-w-0",children:[(0,Lt.jsxs)("span",{className:"text-sm font-light text-gray-900 font-inter",children:[to(e.name)||"Charm"," ",e.quantity>1?"(x".concat(e.quantity,")"):""]}),a&&(0,Lt.jsx)("div",{className:"mt-1 p-1.5 bg-red-50 border border-red-200 rounded-sm",children:(0,Lt.jsx)("p",{className:"text-xs text-red-700 font-inter leading-tight",children:a})})]})]})},t)})]}),(0,Lt.jsx)("div",{className:"mt-3 flex flex-col gap-2",children:(0,Lt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Lt.jsx)(Ji,{quantity:t.quantity||1,item:t,onDecrement:()=>a(void 0!==t.id?t.id:n),onIncrement:()=>s(void 0!==t.id?t.id:n)}),(0,Lt.jsx)("div",{className:"text-right",children:(0,Lt.jsx)("div",{className:"text-sm font-medium text-gray-900 font-inter",children:r(b*v)})})]})}),(0,Lt.jsx)(Zi,{item:t,index:n,openNoteIndex:i,noteTexts:o,onToggleNote:l,onNoteChange:u,onSaveNote:d,onCancelNote:h})]})},ro=e=>{let{item:t,index:n,formatPrice:r,onRemove:s,onIncrement:a,onDecrement:i,openNoteIndex:o,noteTexts:l,onToggleNote:c,onNoteChange:u,onSaveNote:d,onCancelNote:h,errorMessage:f,charmErrors:m}=e;return(0,Lt.jsx)("div",{className:" pb-4 flex items-start gap-3",children:(0,Lt.jsxs)("div",{className:"flex-1",children:[(0,Lt.jsx)("div",{className:"flex justify-end items-end mb-2",children:(0,Lt.jsx)("button",{onClick:()=>s(n),className:"text-xs text-gray-500 hover:text-gray-900 uppercase tracking-wider font-light transition-colors font-inter",children:"Remove"})}),"charm"===t.type?(0,Lt.jsx)(eo,{item:t,index:n,formatPrice:r,onRemove:s,onIncrement:a,onDecrement:i,openNoteIndex:o,noteTexts:l,onToggleNote:c,onNoteChange:u,onSaveNote:d,onCancelNote:h,errorMessage:f}):(0,Lt.jsx)(no,{item:t,index:n,formatPrice:r,onIncrement:a,onDecrement:i,openNoteIndex:o,noteTexts:l,onToggleNote:c,onNoteChange:u,onSaveNote:d,onCancelNote:h,errorMessage:f,charmErrors:m})]})})},so=e=>{let{totalPrice:t,formatPrice:n,cartLength:r,onClose:s}=e;const a=Se(),i=ve();return(0,Lt.jsxs)("div",{className:"p-4 border-t border-gray-100 bg-white flex-shrink-0",children:[(0,Lt.jsxs)("div",{className:"flex items-center justify-between mb-4 pb-4 border-b border-gray-100",children:[(0,Lt.jsx)("div",{className:"text-sm font-light text-gray-700 uppercase tracking-wider font-inter",children:"Subtotal:"}),(0,Lt.jsx)("div",{className:"text-lg font-medium text-gray-900 font-inter",children:n(t)})]}),(0,Lt.jsxs)("p",{className:"text-xs text-gray-500 text-center mb-4 font-light font-inter",children:[(0,Lt.jsx)(Nt,{to:"/shipping",className:"text-gray-500 hover:text-gray-900 underline transition-colors",children:"Shipping"})," calculated at checkout."]}),(0,Lt.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,Lt.jsx)("button",{className:"w-full py-2.5 text-xs uppercase tracking-wider text-gray-600 hover:text-gray-900 border border-gray-200 hover:border-gray-400 transition-all duration-200 font-light font-inter",onClick:()=>{s(),"/CreateYours"===i.pathname&&setTimeout(()=>{window.location.reload()},100)},children:"Continue Shopping"}),(0,Lt.jsx)("button",{className:"w-full py-2.5 text-xs uppercase tracking-wider font-light disabled:opacity-50 disabled:cursor-not-allowed font-inter bg-green-600 hover:bg-green-700 text-white border border-green-600 hover:border-green-700 transition-all duration-200",disabled:0===r,onClick:()=>{s(),a("/checkout")},children:"Proceed to Checkout"})]})]})},ao=()=>{const{cart:t,isDrawerOpen:n,closeCartDrawer:r,getTotalPrice:s,incrementItemQty:a,decrementItemQty:i,removeFromCart:o,updateItemNote:l}=ji(),{formatPrice:u}=Ft(),[d,h]=(0,e.useState)(null),[f,m]=(0,e.useState)({}),[p,g]=(0,e.useState)({}),y=(0,e.useRef)({});(0,e.useEffect)(()=>{const e=y.current;return Object.keys(p).forEach(t=>{e[t]&&clearTimeout(e[t]),e[t]=setTimeout(()=>{g(e=>{const n=c({},e);return("string"===typeof n[t]||n[t]&&"object"===typeof n[t])&&delete n[t],n}),delete e[t]},3e3)}),()=>{Object.values(e).forEach(e=>{clearTimeout(e)})}},[p]);const x=e=>{var n;d===e?h(null):(h(e),!f[e]&&null!==(n=t[e])&&void 0!==n&&n.note?m(c(c({},f),{},{[e]:t[e].note})):f[e]||m(c(c({},f),{},{[e]:""})))},b=(e,t)=>{m(c(c({},f),{},{[e]:t}))},v=e=>{l(e,f[e]||""),h(null)},w=e=>{var n;h(null),m(c(c({},f),{},{[e]:(null===(n=t[e])||void 0===n?void 0:n.note)||""}))},C=(e,n)=>{g(r=>{const s=c({},r);return t.forEach(t=>{"charm"===t.type&&hi(e,t)&&(s[t.id]=n)}),s})},S=e=>{g(n=>{const r=c({},n);return t.forEach(t=>{"charm"===t.type&&hi(e,t)&&delete r[t.id]}),r})},j=e=>{const n=t.find(t=>t.id===e)||t[e];if(!n)return void console.error("Item not found for increment:",e);const r=xi(n,t);if("charm"===n.type){var s,i,o;const c=n.category||(null===(s=n.pin)||void 0===s?void 0:s.category)||"colorful",d=(null===(i=n.pin)||void 0===i?void 0:i.name)||n.name||"",h=(null===(o=n.pin)||void 0===o?void 0:o.src)||"";if(null!==r&&0===r){var l;const e=n.name||(null===(l=n.pin)||void 0===l?void 0:l.name)||"Charm",t="Oops! We don't have any more ".concat(e," in stock right now, so you can't add more to your basket.");return void C(n,t)}if(null===r)return a(e),void S(n);let f=0;t.forEach(e=>{if("charm"===e.type){const t=e.pin||e,n=t.name||t.src,r=t.category||e.category||c;n!==d&&n!==h||r!==c||(f+=e.quantity||1)}});let m=0;t.forEach(e=>{if("charm"===e.type)return;(e.pins||e.pinsDetails||[]).forEach(t=>{if(!t)return;const n=t.name||t.src,r=t.src||"",s=t.category||c;(n===d||n===h||r===d||r===h)&&s===c&&(m+=e.quantity||1)})});const p=f+m;let g=0;t.forEach(e=>{"charm"===e.type&&hi(n,e)&&(g+=e.quantity||1)});if(0===r||p+1>r+g){var u;const e=n.name||(null===(u=n.pin)||void 0===u?void 0:u.name)||"Charm",t="Oops! We don't have any more ".concat(e," in stock right now, so you can't add more to your basket.");return void C(n,t)}return a(e),void S(n)}if(null===r){if(!n.customDesign&&!(n.pins&&Array.isArray(n.pins)&&n.pins.length>0)&&!(n.pinsDetails&&Array.isArray(n.pinsDetails)&&n.pinsDetails.length>0))return a(e),void g(t=>{const n=c({},t);return delete n[e],n})}else if(r<=0){const t=n.caseName||n.name||"Passport Case",r="Oops! We don't have any more ".concat(t," in stock right now, so you can't add more to your basket.");return void g(t=>{var n;return c(c({},t),{},{[e]:{case:r,charms:(null===(n=t[e])||void 0===n?void 0:n.charms)||{}}})})}if(n.customDesign||n.pins&&Array.isArray(n.pins)&&n.pins.length>0||n.pinsDetails&&Array.isArray(n.pinsDetails)&&n.pinsDetails.length>0){const r=n.pins||n.pinsDetails||[],s=n.quantity||1;for(const n of r){if(!n)continue;const a=n.category&&""!==n.category.trim()?n.category:"colorful",i=n.name||n.src||"",o=n.src||"",l={name:i,price:n.price||2,totalPrice:n.price||2,image:o,pin:n,category:a,type:"charm"},u=xi(l,t);if(null===u)continue;let d=0;t.forEach(e=>{if("charm"===e.type){const t=e.pin||e,n=t.name||t.src,r=t.category||e.category||a;n!==i&&n!==o||r!==a||(d+=e.quantity||1)}});let h=0;t.forEach(t=>{t.id!==e&&(t.pins&&Array.isArray(t.pins)&&t.pins.forEach(e=>{const n=e.name||e.src,r=e.category||a;n!==i&&n!==o||r!==a||(h+=t.quantity||1)}),t.pinsDetails&&Array.isArray(t.pinsDetails)&&t.pinsDetails.forEach(e=>{const n=e.name||e.src,r=e.category||a;n!==i&&n!==o||r!==a||(h+=t.quantity||1)}))});const f=r.filter(e=>{const t=e.pin||e,n=t.name||t.src,r=t.category||a;return(n===i||n===o)&&r===a}).length;if(0===u||d+h+f*s+f>u+d){const t="Oops! We don't have any more ".concat(n.name||"this charm"," in stock right now, so you can't add more to your basket."),r="".concat(i,"-").concat(a);return g(n=>{var s,a;return c(c({},n),{},{[e]:{case:(null===(s=n[e])||void 0===s?void 0:s.case)||null,charms:c(c({},(null===(a=n[e])||void 0===a?void 0:a.charms)||{}),{},{[r]:t})}})}),void C(l,t)}}}if(a(e),g(t=>{const r=c({},t);return n.customDesign||n.pins&&Array.isArray(n.pins)&&n.pins.length>0||n.pinsDetails&&Array.isArray(n.pinsDetails)&&n.pinsDetails.length>0?r[e]&&(r[e]={case:null,charms:r[e].charms||{}},r[e].case||r[e].charms&&0!==Object.keys(r[e].charms).length||delete r[e]):delete r[e],r}),n.customDesign||n.pins&&Array.isArray(n.pins)&&n.pins.length>0||n.pinsDetails&&Array.isArray(n.pinsDetails)&&n.pinsDetails.length>0){(n.pins||n.pinsDetails||[]).forEach(e=>{if(!e)return;const t={name:e.name||e.src||"",price:e.price||2,totalPrice:e.price||2,image:e.src||"",pin:e,category:e.category&&""!==e.category.trim()?e.category:"colorful",type:"charm"};S(t)})}},k=e=>{const n=t.find(t=>t.id===e)||t[e];i(e),n&&"charm"===n.type?S(n):g(t=>{const n=c({},t);return delete n[e],n})};return(0,Lt.jsxs)("div",{className:"fixed inset-0 z-50  ".concat(n?"pointer-events-auto":"pointer-events-none"),children:[(0,Lt.jsx)("div",{className:"absolute inset-0 bg-black  transition-opacity ".concat(n?"opacity-40":"opacity-0"),onClick:r}),(0,Lt.jsxs)("div",{className:"absolute right-0 top-0 h-full w-full sm:w-2/3 lg:w-2/5 bg-white shadow-2xl transform transition-transform duration-300 flex flex-col ".concat(n?"translate-x-0":"translate-x-full"),children:[(0,Lt.jsx)(Qi,{onClose:r}),(0,Lt.jsx)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 min-h-0",children:0===t.length?(0,Lt.jsx)($i,{}):t.map((e,t)=>{var n,r;return(0,Lt.jsx)(ro,{item:e,index:t,formatPrice:u,onRemove:o,onIncrement:j,onDecrement:k,openNoteIndex:d,noteTexts:f,onToggleNote:x,onNoteChange:b,onSaveNote:v,onCancelNote:w,errorMessage:"string"===typeof p[e.id]?p[e.id]:null===(n=p[e.id])||void 0===n?void 0:n.case,charmErrors:(null===(r=p[e.id])||void 0===r?void 0:r.charms)||{}},e.id)})}),(0,Lt.jsx)(so,{totalPrice:s(),formatPrice:u,cartLength:t.length,onClose:r})]})]})};function io(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function lo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oo(Object(n),!0).forEach(function(t){io(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oo(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function co(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function uo(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}class ho{constructor(){io(this,"browserShadowBlurConstant",1),io(this,"DPI",96),io(this,"devicePixelRatio","undefined"!=typeof window?window.devicePixelRatio:1),io(this,"perfLimitSizeTotal",2097152),io(this,"maxCacheSideLimit",4096),io(this,"minCacheSideLimit",256),io(this,"disableStyleCopyPaste",!1),io(this,"enableGLFiltering",!0),io(this,"textureSize",4096),io(this,"forceGLPutImageData",!1),io(this,"cachesBoundsOfCurve",!1),io(this,"fontPaths",{}),io(this,"NUM_FRACTION_DIGITS",4)}}const fo=new class extends ho{constructor(e){super(),this.configure(e)}configure(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.assign(this,e)}addFonts(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.fontPaths=lo(lo({},this.fontPaths),e)}removeFonts(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(e=>{delete this.fontPaths[e]})}clearFonts(){this.fontPaths={}}restoreDefaults(e){const t=new ho,n=(null==e?void 0:e.reduce((e,n)=>(e[n]=t[n],e),{}))||t;this.configure(n)}},mo=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return console[e]("fabric",...n)};class po extends Error{constructor(e,t){super("fabric: ".concat(e),t)}}class go extends po{constructor(e){super("".concat(e," 'options.signal' is in 'aborted' state"))}}class yo{}class xo extends yo{testPrecision(e,t){const n="precision ".concat(t," float;\nvoid main(){}"),r=e.createShader(e.FRAGMENT_SHADER);return!!r&&(e.shaderSource(r,n),e.compileShader(r),!!e.getShaderParameter(r,e.COMPILE_STATUS))}queryWebGL(e){const t=e.getContext("webgl");t&&(this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),this.GLPrecision=["highp","mediump","lowp"].find(e=>this.testPrecision(t,e)),t.getExtension("WEBGL_lose_context").loseContext(),mo("log","WebGL: max texture size ".concat(this.maxTextureSize)))}isSupported(e){return!!this.maxTextureSize&&this.maxTextureSize>=e}}const bo={};let vo;const wo=()=>vo||(vo={document:document,window:window,isTouchSupported:"ontouchstart"in window||"ontouchstart"in document||window&&window.navigator&&window.navigator.maxTouchPoints>0,WebGLProbe:new xo,dispose(){},copyPasteData:bo}),Co=()=>wo().document,So=()=>wo().window,jo=()=>{var e;return Math.max(null!==(e=fo.devicePixelRatio)&&void 0!==e?e:So().devicePixelRatio,1)},ko=new class{constructor(){io(this,"boundsOfCurveCache",{}),this.charWidthsCache=new Map}getFontCache(e){let{fontFamily:t,fontStyle:n,fontWeight:r}=e;t=t.toLowerCase();const s=this.charWidthsCache;s.has(t)||s.set(t,new Map);const a=s.get(t),i="".concat(n.toLowerCase(),"_").concat((r+"").toLowerCase());return a.has(i)||a.set(i,new Map),a.get(i)}clearFontCache(e){e?this.charWidthsCache.delete((e||"").toLowerCase()):this.charWidthsCache=new Map}limitDimsByArea(e){const{perfLimitSizeTotal:t}=fo,n=Math.sqrt(t*e);return[Math.floor(n),Math.floor(t/n)]}},No="6.9.1";function _o(){}const To=Math.PI/2,Eo=2*Math.PI,Po=Math.PI/180,Oo=Object.freeze([1,0,0,1,0,0]),Do=16,Ao=.4477152502,Mo="center",Lo="left",zo="top",Fo="bottom",Ro="right",Io="none",Bo=/\r?\n/,Ho="moving",Wo="scaling",Uo="rotating",Yo="rotate",Vo="skewing",qo="resizing",Xo="modifyPoly",Go="modifyPath",Ko="changed",Qo="scale",$o="scaleX",Jo="scaleY",Zo="skewX",el="skewY",tl="fill",nl="stroke",rl="modified",sl="json",al="svg",il=new class{constructor(){this[sl]=new Map,this[al]=new Map}has(e){return this[sl].has(e)}getClass(e){const t=this[sl].get(e);if(!t)throw new po("No class registered for ".concat(e));return t}setClass(e,t){t?this[sl].set(t,e):(this[sl].set(e.type,e),this[sl].set(e.type.toLowerCase(),e))}getSVGClass(e){return this[al].get(e)}setSVGClass(e,t){this[al].set(null!=t?t:e.type.toLowerCase(),e)}},ol=new class extends Array{remove(e){const t=this.indexOf(e);t>-1&&this.splice(t,1)}cancelAll(){const e=this.splice(0);return e.forEach(e=>e.abort()),e}cancelByCanvas(e){if(!e)return[];const t=this.filter(t=>{var n;return t.target===e||"object"==typeof t.target&&(null===(n=t.target)||void 0===n?void 0:n.canvas)===e});return t.forEach(e=>e.abort()),t}cancelByTarget(e){if(!e)return[];const t=this.filter(t=>t.target===e);return t.forEach(e=>e.abort()),t}};class ll{constructor(){io(this,"__eventListeners",{})}on(e,t){if(this.__eventListeners||(this.__eventListeners={}),"object"==typeof e)return Object.entries(e).forEach(e=>{let[t,n]=e;this.on(t,n)}),()=>this.off(e);if(t){const n=e;return this.__eventListeners[n]||(this.__eventListeners[n]=[]),this.__eventListeners[n].push(t),()=>this.off(n,t)}return()=>!1}once(e,t){if("object"==typeof e){const t=[];return Object.entries(e).forEach(e=>{let[n,r]=e;t.push(this.once(n,r))}),()=>t.forEach(e=>e())}if(t){const n=this.on(e,function(){for(var e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];t.call(this,...r),n()});return n}return()=>!1}_removeEventListener(e,t){if(this.__eventListeners[e])if(t){const n=this.__eventListeners[e],r=n.indexOf(t);r>-1&&n.splice(r,1)}else this.__eventListeners[e]=[]}off(e,t){if(this.__eventListeners)if(void 0===e)for(const n in this.__eventListeners)this._removeEventListener(n);else"object"==typeof e?Object.entries(e).forEach(e=>{let[t,n]=e;this._removeEventListener(t,n)}):this._removeEventListener(e,t)}fire(e,t){var n;if(!this.__eventListeners)return;const r=null===(n=this.__eventListeners[e])||void 0===n?void 0:n.concat();if(r)for(let s=0;s<r.length;s++)r[s].call(this,t||{})}}const cl=(e,t)=>{const n=e.indexOf(t);return-1!==n&&e.splice(n,1),e},ul=e=>{if(0===e)return 1;switch(Math.abs(e)/To){case 1:case 3:return 0;case 2:return-1}return Math.cos(e)},dl=e=>{if(0===e)return 0;const t=e/To,n=Math.sign(e);switch(t){case 1:return n;case 2:return 0;case 3:return-n}return Math.sin(e)};class hl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;"object"==typeof e?(this.x=e.x,this.y=e.y):(this.x=e,this.y=t)}add(e){return new hl(this.x+e.x,this.y+e.y)}addEquals(e){return this.x+=e.x,this.y+=e.y,this}scalarAdd(e){return new hl(this.x+e,this.y+e)}scalarAddEquals(e){return this.x+=e,this.y+=e,this}subtract(e){return new hl(this.x-e.x,this.y-e.y)}subtractEquals(e){return this.x-=e.x,this.y-=e.y,this}scalarSubtract(e){return new hl(this.x-e,this.y-e)}scalarSubtractEquals(e){return this.x-=e,this.y-=e,this}multiply(e){return new hl(this.x*e.x,this.y*e.y)}scalarMultiply(e){return new hl(this.x*e,this.y*e)}scalarMultiplyEquals(e){return this.x*=e,this.y*=e,this}divide(e){return new hl(this.x/e.x,this.y/e.y)}scalarDivide(e){return new hl(this.x/e,this.y/e)}scalarDivideEquals(e){return this.x/=e,this.y/=e,this}eq(e){return this.x===e.x&&this.y===e.y}lt(e){return this.x<e.x&&this.y<e.y}lte(e){return this.x<=e.x&&this.y<=e.y}gt(e){return this.x>e.x&&this.y>e.y}gte(e){return this.x>=e.x&&this.y>=e.y}lerp(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5;return t=Math.max(Math.min(1,t),0),new hl(this.x+(e.x-this.x)*t,this.y+(e.y-this.y)*t)}distanceFrom(e){const t=this.x-e.x,n=this.y-e.y;return Math.sqrt(t*t+n*n)}midPointFrom(e){return this.lerp(e)}min(e){return new hl(Math.min(this.x,e.x),Math.min(this.y,e.y))}max(e){return new hl(Math.max(this.x,e.x),Math.max(this.y,e.y))}toString(){return"".concat(this.x,",").concat(this.y)}setXY(e,t){return this.x=e,this.y=t,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setFromPoint(e){return this.x=e.x,this.y=e.y,this}swap(e){const t=this.x,n=this.y;this.x=e.x,this.y=e.y,e.x=t,e.y=n}clone(){return new hl(this.x,this.y)}rotate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fl;const n=dl(e),r=ul(e),s=this.subtract(t);return new hl(s.x*r-s.y*n,s.x*n+s.y*r).add(t)}transform(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new hl(e[0]*this.x+e[2]*this.y+(t?0:e[4]),e[1]*this.x+e[3]*this.y+(t?0:e[5]))}}const fl=new hl(0,0),ml=e=>!!e&&Array.isArray(e._objects);function pl(e){class t extends e{constructor(){super(...arguments),io(this,"_objects",[])}_onObjectAdded(e){}_onObjectRemoved(e){}_onStackOrderChanged(e){}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=this._objects.push(...t);return t.forEach(e=>this._onObjectAdded(e)),r}insertAt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return this._objects.splice(e,0,...n),n.forEach(e=>this._onObjectAdded(e)),this._objects.length}remove(){const e=this._objects,t=[];for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return r.forEach(n=>{const r=e.indexOf(n);-1!==r&&(e.splice(r,1),t.push(n),this._onObjectRemoved(n))}),t}forEachObject(e){this.getObjects().forEach((t,n,r)=>e(t,n,r))}getObjects(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?[...this._objects]:this._objects.filter(e=>e.isType(...t))}item(e){return this._objects[e]}isEmpty(){return 0===this._objects.length}size(){return this._objects.length}contains(e,n){return!!this._objects.includes(e)||!!n&&this._objects.some(n=>n instanceof t&&n.contains(e,!0))}complexity(){return this._objects.reduce((e,t)=>e+(t.complexity?t.complexity():0),0)}sendObjectToBack(e){return!(!e||e===this._objects[0])&&(cl(this._objects,e),this._objects.unshift(e),this._onStackOrderChanged(e),!0)}bringObjectToFront(e){return!(!e||e===this._objects[this._objects.length-1])&&(cl(this._objects,e),this._objects.push(e),this._onStackOrderChanged(e),!0)}sendObjectBackwards(e,t){if(!e)return!1;const n=this._objects.indexOf(e);if(0!==n){const r=this.findNewLowerIndex(e,n,t);return cl(this._objects,e),this._objects.splice(r,0,e),this._onStackOrderChanged(e),!0}return!1}bringObjectForward(e,t){if(!e)return!1;const n=this._objects.indexOf(e);if(n!==this._objects.length-1){const r=this.findNewUpperIndex(e,n,t);return cl(this._objects,e),this._objects.splice(r,0,e),this._onStackOrderChanged(e),!0}return!1}moveObjectTo(e,t){return e!==this._objects[t]&&(cl(this._objects,e),this._objects.splice(t,0,e),this._onStackOrderChanged(e),!0)}findNewLowerIndex(e,t,n){let r;if(n){r=t;for(let n=t-1;n>=0;--n)if(e.isOverlapping(this._objects[n])){r=n;break}}else r=t-1;return r}findNewUpperIndex(e,t,n){let r;if(n){r=t;for(let n=t+1;n<this._objects.length;++n)if(e.isOverlapping(this._objects[n])){r=n;break}}else r=t+1;return r}collectObjects(e){let{left:t,top:n,width:r,height:s}=e,{includeIntersecting:a=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=[],o=new hl(t,n),l=o.add(new hl(r,s));for(let c=this._objects.length-1;c>=0;c--){const e=this._objects[c];e.selectable&&e.visible&&(a&&e.intersectsWithRect(o,l)||e.isContainedWithinRect(o,l)||a&&e.containsPoint(o)||a&&e.containsPoint(l))&&i.push(e)}return i}}return t}class gl extends ll{_setOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(const t in e)this.set(t,e[t])}_setObject(e){for(const t in e)this._set(t,e[t])}set(e,t){return"object"==typeof e?this._setObject(e):this._set(e,t),this}_set(e,t){this[e]=t}toggle(e){const t=this.get(e);return"boolean"==typeof t&&this.set(e,!t),this}get(e){return this[e]}}function yl(e){return So().requestAnimationFrame(e)}function xl(e){return So().cancelAnimationFrame(e)}let bl=0;const vl=()=>bl++,wl=()=>{const e=Co().createElement("canvas");if(!e||void 0===e.getContext)throw new po("Failed to create `canvas` element");return e},Cl=()=>Co().createElement("img"),Sl=e=>{const t=wl();return t.width=e.width,t.height=e.height,t},jl=(e,t,n)=>e.toDataURL("image/".concat(t),n),kl=(e,t,n)=>new Promise((r,s)=>{e.toBlob(r,"image/".concat(t),n)}),Nl=e=>e*Po,_l=e=>e/Po,Tl=e=>e.every((e,t)=>e===Oo[t]),El=(e,t,n)=>new hl(e).transform(t,n),Pl=e=>{const t=1/(e[0]*e[3]-e[1]*e[2]),n=[t*e[3],-t*e[1],-t*e[2],t*e[0],0,0],{x:r,y:s}=new hl(e[4],e[5]).transform(n,!0);return n[4]=-r,n[5]=-s,n},Ol=(e,t,n)=>[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],n?0:e[0]*t[4]+e[2]*t[5]+e[4],n?0:e[1]*t[4]+e[3]*t[5]+e[5]],Dl=(e,t)=>e.reduceRight((e,n)=>n&&e?Ol(n,e,t):n||e,void 0)||Oo.concat(),Al=e=>{let[t,n]=e;return Math.atan2(n,t)},Ml=e=>{const t=Al(e),n=Math.pow(e[0],2)+Math.pow(e[1],2),r=Math.sqrt(n),s=(e[0]*e[3]-e[2]*e[1])/r,a=Math.atan2(e[0]*e[2]+e[1]*e[3],n);return{angle:_l(t),scaleX:r,scaleY:s,skewX:_l(a),skewY:0,translateX:e[4]||0,translateY:e[5]||0}},Ll=function(e){return[1,0,0,1,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0]};function zl(){let{angle:e=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{x:t=0,y:n=0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=Nl(e),s=ul(r),a=dl(r);return[s,a,-a,s,t?t-(s*t-a*n):0,n?n-(a*t+s*n):0]}const Fl=function(e){return[e,0,0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,0,0]},Rl=e=>Math.tan(Nl(e)),Il=e=>[1,0,Rl(e),1,0,0],Bl=e=>[1,Rl(e),0,1,0,0],Hl=e=>{let{scaleX:t=1,scaleY:n=1,flipX:r=!1,flipY:s=!1,skewX:a=0,skewY:i=0}=e,o=Fl(r?-t:t,s?-n:n);return a&&(o=Ol(o,Il(a),!0)),i&&(o=Ol(o,Bl(i),!0)),o},Wl=e=>{const{translateX:t=0,translateY:n=0,angle:r=0}=e;let s=Ll(t,n);r&&(s=Ol(s,zl({angle:r})));const a=Hl(e);return Tl(a)||(s=Ol(s,a)),s},Ul=function(e){let{signal:t,crossOrigin:n=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(r,s){if(t&&t.aborted)return s(new go("loadImage"));const a=Cl();let i;t&&(i=function(e){a.src="",s(e)},t.addEventListener("abort",i,{once:!0}));const o=function(){a.onload=a.onerror=null,i&&(null==t||t.removeEventListener("abort",i)),r(a)};e?(a.onload=o,a.onerror=function(){i&&(null==t||t.removeEventListener("abort",i)),s(new po("Error loading ".concat(a.src)))},n&&(a.crossOrigin=n),a.src=e):o()})},Yl=function(e){let{signal:t,reviver:n=_o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((r,s)=>{const a=[];t&&t.addEventListener("abort",s,{once:!0}),Promise.all(e.map(e=>il.getClass(e.type).fromObject(e,{signal:t}).then(t=>(n(e,t),a.push(t),t)))).then(r).catch(e=>{a.forEach(e=>{e.dispose&&e.dispose()}),s(e)}).finally(()=>{t&&t.removeEventListener("abort",s)})})},Vl=function(e){let{signal:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((n,r)=>{const s=[];t&&t.addEventListener("abort",r,{once:!0});const a=Object.values(e).map(e=>e&&e.type&&il.has(e.type)?Yl([e],{signal:t}).then(e=>{let[t]=e;return s.push(t),t}):e),i=Object.keys(e);Promise.all(a).then(e=>e.reduce((e,t,n)=>(e[i[n]]=t,e),{})).then(n).catch(e=>{s.forEach(e=>{e.dispose&&e.dispose()}),r(e)}).finally(()=>{t&&t.removeEventListener("abort",r)})})},ql=function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).reduce((t,n)=>(n in e&&(t[n]=e[n]),t),{})},Xl=(e,t)=>Object.keys(e).reduce((n,r)=>(t(e[r],r,e)&&(n[r]=e[r]),n),{}),Gl=(e,t)=>parseFloat(Number(e).toFixed(t)),Kl=e=>"matrix("+e.map(e=>Gl(e,fo.NUM_FRACTION_DIGITS)).join(" ")+")",Ql=e=>!!e&&void 0!==e.toLive,$l=e=>!!e&&"function"==typeof e.toObject,Jl=e=>!!e&&void 0!==e.offsetX&&"source"in e,Zl=e=>!!e&&"multiSelectionStacking"in e;function ec(e){const t=e&&tc(e);let n=0,r=0;if(!e||!t)return{left:n,top:r};let s=e;const a=t.documentElement,i=t.body||{scrollLeft:0,scrollTop:0};for(;s&&(s.parentNode||s.host)&&(s=s.parentNode||s.host,s===t?(n=i.scrollLeft||a.scrollLeft||0,r=i.scrollTop||a.scrollTop||0):(n+=s.scrollLeft||0,r+=s.scrollTop||0),1!==s.nodeType||"fixed"!==s.style.position););return{left:n,top:r}}const tc=e=>e.ownerDocument||null,nc=e=>{var t;return(null===(t=e.ownerDocument)||void 0===t?void 0:t.defaultView)||null},rc=function(e,t,n){let{width:r,height:s}=n,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;e.width=r,e.height=s,a>1&&(e.setAttribute("width",(r*a).toString()),e.setAttribute("height",(s*a).toString()),t.scale(a,a))},sc=(e,t)=>{let{width:n,height:r}=t;n&&(e.style.width="number"==typeof n?"".concat(n,"px"):n),r&&(e.style.height="number"==typeof r?"".concat(r,"px"):r)};function ac(e){return void 0!==e.onselectstart&&(e.onselectstart=()=>!1),e.style.userSelect=Io,e}class ic{constructor(e){io(this,"_originalCanvasStyle",void 0),io(this,"lower",void 0);const t=this.createLowerCanvas(e);this.lower={el:t,ctx:t.getContext("2d")}}createLowerCanvas(e){const t=(n=e)&&void 0!==n.getContext?e:e&&Co().getElementById(e)||wl();var n;if(t.hasAttribute("data-fabric"))throw new po("Trying to initialize a canvas that has already been initialized. Did you forget to dispose the canvas?");return this._originalCanvasStyle=t.style.cssText,t.setAttribute("data-fabric","main"),t.classList.add("lower-canvas"),t}cleanupDOM(e){let{width:t,height:n}=e;const{el:r}=this.lower;r.classList.remove("lower-canvas"),r.removeAttribute("data-fabric"),r.setAttribute("width","".concat(t)),r.setAttribute("height","".concat(n)),r.style.cssText=this._originalCanvasStyle||"",this._originalCanvasStyle=void 0}setDimensions(e,t){const{el:n,ctx:r}=this.lower;rc(n,r,e,t)}setCSSDimensions(e){sc(this.lower.el,e)}calcOffset(){return function(e){var t;const n=e&&tc(e),r={left:0,top:0};if(!n)return r;const s=(null===(t=nc(e))||void 0===t?void 0:t.getComputedStyle(e,null))||{};r.left+=parseInt(s.borderLeftWidth,10)||0,r.top+=parseInt(s.borderTopWidth,10)||0,r.left+=parseInt(s.paddingLeft,10)||0,r.top+=parseInt(s.paddingTop,10)||0;let a={left:0,top:0};const i=n.documentElement;void 0!==e.getBoundingClientRect&&(a=e.getBoundingClientRect());const o=ec(e);return{left:a.left+o.left-(i.clientLeft||0)+r.left,top:a.top+o.top-(i.clientTop||0)+r.top}}(this.lower.el)}dispose(){wo().dispose(this.lower.el),delete this.lower}}const oc={backgroundVpt:!0,backgroundColor:"",overlayVpt:!0,overlayColor:"",includeDefaultValues:!0,svgViewportTransformation:!0,renderOnAddRemove:!0,skipOffscreen:!0,enableRetinaScaling:!0,imageSmoothingEnabled:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,viewportTransform:[...Oo]},lc=["objects"];class cc extends(pl(gl)){get lowerCanvasEl(){var e;return null===(e=this.elements.lower)||void 0===e?void 0:e.el}get contextContainer(){var e;return null===(e=this.elements.lower)||void 0===e?void 0:e.ctx}static getDefaults(){return cc.ownDefaults}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),Object.assign(this,this.constructor.getDefaults()),this.set(t),this.initElements(e),this._setDimensionsImpl({width:this.width||this.elements.lower.el.width||0,height:this.height||this.elements.lower.el.height||0}),this.skipControlsDrawing=!1,this.viewportTransform=[...this.viewportTransform],this.calcViewportBoundaries()}initElements(e){this.elements=new ic(e)}add(){const e=super.add(...arguments);return arguments.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}insertAt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=super.insertAt(e,...n);return n.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),s}remove(){const e=super.remove(...arguments);return e.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}_onObjectAdded(e){e.canvas&&e.canvas!==this&&(mo("warn","Canvas is trying to add an object that belongs to a different canvas.\nResulting to default behavior: removing object from previous canvas and adding to new canvas"),e.canvas.remove(e)),e._set("canvas",this),e.setCoords(),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e){e._set("canvas",void 0),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onStackOrderChanged(){this.renderOnAddRemove&&this.requestRenderAll()}getRetinaScaling(){return this.enableRetinaScaling?jo():1}calcOffset(){return this._offset=this.elements.calcOffset()}getWidth(){return this.width}getHeight(){return this.height}setWidth(e,t){return this.setDimensions({width:e},t)}setHeight(e,t){return this.setDimensions({height:e},t)}_setDimensionsImpl(e){let{cssOnly:t=!1,backstoreOnly:n=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t){const t=lo({width:this.width,height:this.height},e);this.elements.setDimensions(t,this.getRetinaScaling()),this.hasLostContext=!0,this.width=t.width,this.height=t.height}n||this.elements.setCSSDimensions(e),this.calcOffset()}setDimensions(e,t){this._setDimensionsImpl(e,t),t&&t.cssOnly||this.requestRenderAll()}getZoom(){return this.viewportTransform[0]}setViewportTransform(e){this.viewportTransform=e,this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll()}zoomToPoint(e,t){const n=e,r=[...this.viewportTransform],s=El(e,Pl(r));r[0]=t,r[3]=t;const a=El(s,r);r[4]+=n.x-a.x,r[5]+=n.y-a.y,this.setViewportTransform(r)}setZoom(e){this.zoomToPoint(new hl(0,0),e)}absolutePan(e){const t=[...this.viewportTransform];return t[4]=-e.x,t[5]=-e.y,this.setViewportTransform(t)}relativePan(e){return this.absolutePan(new hl(-e.x-this.viewportTransform[4],-e.y-this.viewportTransform[5]))}getElement(){return this.elements.lower.el}clearContext(e){e.clearRect(0,0,this.width,this.height)}getContext(){return this.elements.lower.ctx}clear(){this.remove(...this.getObjects()),this.backgroundImage=void 0,this.overlayImage=void 0,this.backgroundColor="",this.overlayColor="",this.clearContext(this.getContext()),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll()}renderAll(){this.cancelRequestedRender(),this.destroyed||this.renderCanvas(this.getContext(),this._objects)}renderAndReset(){this.nextRenderHandle=0,this.renderAll()}requestRenderAll(){this.nextRenderHandle||this.disposed||this.destroyed||(this.nextRenderHandle=yl(()=>this.renderAndReset()))}calcViewportBoundaries(){const e=this.width,t=this.height,n=Pl(this.viewportTransform),r=El({x:0,y:0},n),s=El({x:e,y:t},n),a=r.min(s),i=r.max(s);return this.vptCoords={tl:a,tr:new hl(i.x,a.y),bl:new hl(a.x,i.y),br:i}}cancelRequestedRender(){this.nextRenderHandle&&(xl(this.nextRenderHandle),this.nextRenderHandle=0)}drawControls(e){}renderCanvas(e,t){if(this.destroyed)return;const n=this.viewportTransform,r=this.clipPath;this.calcViewportBoundaries(),this.clearContext(e),e.imageSmoothingEnabled=this.imageSmoothingEnabled,e.patternQuality="best",this.fire("before:render",{ctx:e}),this._renderBackground(e),e.save(),e.transform(n[0],n[1],n[2],n[3],n[4],n[5]),this._renderObjects(e,t),e.restore(),this.controlsAboveOverlay||this.skipControlsDrawing||this.drawControls(e),r&&(r._set("canvas",this),r.shouldCache(),r._transformDone=!0,r.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(e,r)),this._renderOverlay(e),this.controlsAboveOverlay&&!this.skipControlsDrawing&&this.drawControls(e),this.fire("after:render",{ctx:e}),this.__cleanupTask&&(this.__cleanupTask(),this.__cleanupTask=void 0)}drawClipPathOnCanvas(e,t){const n=this.viewportTransform;e.save(),e.transform(...n),e.globalCompositeOperation="destination-in",t.transform(e),e.scale(1/t.zoomX,1/t.zoomY),e.drawImage(t._cacheCanvas,-t.cacheTranslationX,-t.cacheTranslationY),e.restore()}_renderObjects(e,t){for(let n=0,r=t.length;n<r;++n)t[n]&&t[n].render(e)}_renderBackgroundOrOverlay(e,t){const n=this["".concat(t,"Color")],r=this["".concat(t,"Image")],s=this.viewportTransform,a=this["".concat(t,"Vpt")];if(!n&&!r)return;const i=Ql(n);if(n){if(e.save(),e.beginPath(),e.moveTo(0,0),e.lineTo(this.width,0),e.lineTo(this.width,this.height),e.lineTo(0,this.height),e.closePath(),e.fillStyle=i?n.toLive(e):n,a&&e.transform(...s),i){e.transform(1,0,0,1,n.offsetX||0,n.offsetY||0);const t=n.gradientTransform||n.patternTransform;t&&e.transform(...t)}e.fill(),e.restore()}if(r){e.save();const{skipOffscreen:t}=this;this.skipOffscreen=a,a&&e.transform(...s),r.render(e),this.skipOffscreen=t,e.restore()}}_renderBackground(e){this._renderBackgroundOrOverlay(e,"background")}_renderOverlay(e){this._renderBackgroundOrOverlay(e,"overlay")}getCenter(){return{top:this.height/2,left:this.width/2}}getCenterPoint(){return new hl(this.width/2,this.height/2)}centerObjectH(e){return this._centerObject(e,new hl(this.getCenterPoint().x,e.getCenterPoint().y))}centerObjectV(e){return this._centerObject(e,new hl(e.getCenterPoint().x,this.getCenterPoint().y))}centerObject(e){return this._centerObject(e,this.getCenterPoint())}viewportCenterObject(e){return this._centerObject(e,this.getVpCenter())}viewportCenterObjectH(e){return this._centerObject(e,new hl(this.getVpCenter().x,e.getCenterPoint().y))}viewportCenterObjectV(e){return this._centerObject(e,new hl(e.getCenterPoint().x,this.getVpCenter().y))}getVpCenter(){return El(this.getCenterPoint(),Pl(this.viewportTransform))}_centerObject(e,t){e.setXY(t,Mo,Mo),e.setCoords(),this.renderOnAddRemove&&this.requestRenderAll()}toDatalessJSON(e){return this.toDatalessObject(e)}toObject(e){return this._toObjectMethod("toObject",e)}toJSON(){return this.toObject()}toDatalessObject(e){return this._toObjectMethod("toDatalessObject",e)}_toObjectMethod(e,t){const n=this.clipPath,r=n&&!n.excludeFromExport?this._toObject(n,e,t):null;return lo(lo(lo({version:No},ql(this,t)),{},{objects:this._objects.filter(e=>!e.excludeFromExport).map(n=>this._toObject(n,e,t))},this.__serializeBgOverlay(e,t)),r?{clipPath:r}:null)}_toObject(e,t,n){let r;this.includeDefaultValues||(r=e.includeDefaultValues,e.includeDefaultValues=!1);const s=e[t](n);return this.includeDefaultValues||(e.includeDefaultValues=!!r),s}__serializeBgOverlay(e,t){const n={},r=this.backgroundImage,s=this.overlayImage,a=this.backgroundColor,i=this.overlayColor;return Ql(a)?a.excludeFromExport||(n.background=a.toObject(t)):a&&(n.background=a),Ql(i)?i.excludeFromExport||(n.overlay=i.toObject(t)):i&&(n.overlay=i),r&&!r.excludeFromExport&&(n.backgroundImage=this._toObject(r,e,t)),s&&!s.excludeFromExport&&(n.overlayImage=this._toObject(s,e,t)),n}toSVG(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;e.reviver=t;const n=[];return this._setSVGPreamble(n,e),this._setSVGHeader(n,e),this.clipPath&&n.push('<g clip-path="url(#'.concat(this.clipPath.clipPathId,')" >\n')),this._setSVGBgOverlayColor(n,"background"),this._setSVGBgOverlayImage(n,"backgroundImage",t),this._setSVGObjects(n,t),this.clipPath&&n.push("</g>\n"),this._setSVGBgOverlayColor(n,"overlay"),this._setSVGBgOverlayImage(n,"overlayImage",t),n.push("</svg>"),n.join("")}_setSVGPreamble(e,t){t.suppressPreamble||e.push('<?xml version="1.0" encoding="',t.encoding||"UTF-8",'" standalone="no" ?>\n','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ','"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n')}_setSVGHeader(e,t){const n=t.width||"".concat(this.width),r=t.height||"".concat(this.height),s=fo.NUM_FRACTION_DIGITS,a=t.viewBox;let i;if(a)i='viewBox="'.concat(a.x," ").concat(a.y," ").concat(a.width," ").concat(a.height,'" ');else if(this.svgViewportTransformation){const e=this.viewportTransform;i='viewBox="'.concat(Gl(-e[4]/e[0],s)," ").concat(Gl(-e[5]/e[3],s)," ").concat(Gl(this.width/e[0],s)," ").concat(Gl(this.height/e[3],s),'" ')}else i='viewBox="0 0 '.concat(this.width," ").concat(this.height,'" ');e.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',n,'" ','height="',r,'" ',i,'xml:space="preserve">\n',"<desc>Created with Fabric.js ",No,"</desc>\n","<defs>\n",this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(t),"</defs>\n")}createSVGClipPathMarkup(e){const t=this.clipPath;return t?(t.clipPathId="CLIPPATH_".concat(vl()),'<clipPath id="'.concat(t.clipPathId,'" >\n').concat(t.toClipPathSVG(e.reviver),"</clipPath>\n")):""}createSVGRefElementsMarkup(){return["background","overlay"].map(e=>{const t=this["".concat(e,"Color")];if(Ql(t)){const n=this["".concat(e,"Vpt")],r=this.viewportTransform,s={isType:()=>!1,width:this.width/(n?r[0]:1),height:this.height/(n?r[3]:1)};return t.toSVG(s,{additionalTransform:n?Kl(r):""})}}).join("")}createSVGFontFacesMarkup(){const e=[],t={},n=fo.fontPaths;this._objects.forEach(function t(n){e.push(n),ml(n)&&n._objects.forEach(t)}),e.forEach(e=>{if(!(r=e)||"function"!=typeof r._renderText)return;var r;const{styles:s,fontFamily:a}=e;!t[a]&&n[a]&&(t[a]=!0,s&&Object.values(s).forEach(e=>{Object.values(e).forEach(e=>{let{fontFamily:r=""}=e;!t[r]&&n[r]&&(t[r]=!0)})}))});const r=Object.keys(t).map(e=>"\t\t@font-face {\n\t\t\tfont-family: '".concat(e,"';\n\t\t\tsrc: url('").concat(n[e],"');\n\t\t}\n")).join("");return r?'\t<style type="text/css"><![CDATA[\n'.concat(r,"]]></style>\n"):""}_setSVGObjects(e,t){this.forEachObject(n=>{n.excludeFromExport||this._setSVGObject(e,n,t)})}_setSVGObject(e,t,n){e.push(t.toSVG(n))}_setSVGBgOverlayImage(e,t,n){const r=this[t];r&&!r.excludeFromExport&&r.toSVG&&e.push(r.toSVG(n))}_setSVGBgOverlayColor(e,t){const n=this["".concat(t,"Color")];if(n)if(Ql(n)){const r=n.repeat||"",s=this.width,a=this.height,i=this["".concat(t,"Vpt")]?Kl(Pl(this.viewportTransform)):"";e.push('<rect transform="'.concat(i," translate(").concat(s/2,",").concat(a/2,')" x="').concat(n.offsetX-s/2,'" y="').concat(n.offsetY-a/2,'" width="').concat("repeat-y"!==r&&"no-repeat"!==r||!Jl(n)?s:n.source.width,'" height="').concat("repeat-x"!==r&&"no-repeat"!==r||!Jl(n)?a:n.source.height,'" fill="url(#SVGID_').concat(n.id,')"></rect>\n'))}else e.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',n,'"',"></rect>\n")}loadFromJSON(e,t){let{signal:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)return Promise.reject(new po("`json` is undefined"));const r="string"==typeof e?JSON.parse(e):e,{objects:s=[]}=r,a=co(r,lc),{backgroundImage:i,background:o,overlayImage:l,overlay:c,clipPath:u}=a,d=this.renderOnAddRemove;return this.renderOnAddRemove=!1,Promise.all([Yl(s,{reviver:t,signal:n}),Vl({backgroundImage:i,backgroundColor:o,overlayImage:l,overlayColor:c,clipPath:u},{signal:n})]).then(e=>{let[t,n]=e;return this.clear(),this.add(...t),this.set(a),this.set(n),this.renderOnAddRemove=d,this})}clone(e){const t=this.toObject(e);return this.cloneWithoutData().loadFromJSON(t)}cloneWithoutData(){const e=Sl(this);return new this.constructor(e)}toDataURL(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{format:t="png",quality:n=1,multiplier:r=1,enableRetinaScaling:s=!1}=e,a=r*(s?this.getRetinaScaling():1);return jl(this.toCanvasElement(a,e),t,n)}toBlob(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{format:t="png",quality:n=1,multiplier:r=1,enableRetinaScaling:s=!1}=e,a=r*(s?this.getRetinaScaling():1);return kl(this.toCanvasElement(a,e),t,n)}toCanvasElement(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,{width:t,height:n,left:r,top:s,filter:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=(t||this.width)*e,o=(n||this.height)*e,l=this.getZoom(),c=this.width,u=this.height,d=this.skipControlsDrawing,h=l*e,f=this.viewportTransform,m=[h,0,0,h,(f[4]-(r||0))*e,(f[5]-(s||0))*e],p=this.enableRetinaScaling,g=Sl({width:i,height:o}),y=a?this._objects.filter(e=>a(e)):this._objects;return this.enableRetinaScaling=!1,this.viewportTransform=m,this.width=i,this.height=o,this.skipControlsDrawing=!0,this.calcViewportBoundaries(),this.renderCanvas(g.getContext("2d"),y),this.viewportTransform=f,this.width=c,this.height=u,this.calcViewportBoundaries(),this.enableRetinaScaling=p,this.skipControlsDrawing=d,g}dispose(){return!this.disposed&&this.elements.cleanupDOM({width:this.width,height:this.height}),ol.cancelByCanvas(this),this.disposed=!0,new Promise((e,t)=>{const n=()=>{this.destroy(),e(!0)};n.kill=t,this.__cleanupTask&&this.__cleanupTask.kill("aborted"),this.destroyed?e(!1):this.nextRenderHandle?this.__cleanupTask=n:n()})}destroy(){this.destroyed=!0,this.cancelRequestedRender(),this.forEachObject(e=>e.dispose()),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose(),this.backgroundImage=void 0,this.overlayImage&&this.overlayImage.dispose(),this.overlayImage=void 0,this.elements.dispose()}toString(){return"#<Canvas (".concat(this.complexity(),"): { objects: ").concat(this._objects.length," }>")}}io(cc,"ownDefaults",oc);const uc=["touchstart","touchmove","touchend"],dc=e=>{const t=ec(e.target),n=function(e){const t=e.changedTouches;return t&&t[0]?t[0]:e}(e);return new hl(n.clientX+t.left,n.clientY+t.top)},hc=e=>uc.includes(e.type)||"touch"===e.pointerType,fc=e=>{e.preventDefault(),e.stopPropagation()},mc=e=>{let t=0,n=0,r=0,s=0;for(let a=0,i=e.length;a<i;a++){const{x:i,y:o}=e[a];(i>r||!a)&&(r=i),(i<t||!a)&&(t=i),(o>s||!a)&&(s=o),(o<n||!a)&&(n=o)}return{left:t,top:n,width:r-t,height:s-n}},pc=["translateX","translateY","scaleX","scaleY"],gc=(e,t)=>yc(e,Ol(t,e.calcOwnMatrix())),yc=(e,t)=>{const n=Ml(t),{translateX:r,translateY:s,scaleX:a,scaleY:i}=n,o=co(n,pc),l=new hl(r,s);e.flipX=!1,e.flipY=!1,Object.assign(e,o),e.set({scaleX:a,scaleY:i}),e.setPositionByOrigin(l,Mo,Mo)},xc=e=>{e.scaleX=1,e.scaleY=1,e.skewX=0,e.skewY=0,e.flipX=!1,e.flipY=!1,e.rotate(0)},bc=e=>({scaleX:e.scaleX,scaleY:e.scaleY,skewX:e.skewX,skewY:e.skewY,angle:e.angle,left:e.left,flipX:e.flipX,flipY:e.flipY,top:e.top}),vc=(e,t,n)=>{const r=e/2,s=t/2,a=[new hl(-r,-s),new hl(r,-s),new hl(-r,s),new hl(r,s)].map(e=>e.transform(n)),i=mc(a);return new hl(i.width,i.height)},wc=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oo;return Ol(Pl(arguments.length>1&&void 0!==arguments[1]?arguments[1]:Oo),e)},Cc=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Oo,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Oo;return e.transform(wc(t,n))},Sc=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Oo,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Oo;return e.transform(wc(t,n),!0)},jc=(e,t,n)=>{const r=wc(t,n);return yc(e,Ol(r,e.calcOwnMatrix())),r},kc=(e,t)=>{var n;const{transform:{target:r}}=t;null===(n=r.canvas)||void 0===n||n.fire("object:".concat(e),lo(lo({},t),{},{target:r})),r.fire(e,t)},Nc={left:-.5,top:-.5,center:0,bottom:.5,right:.5},_c=e=>"string"==typeof e?Nc[e]:e-.5,Tc="not-allowed";function Ec(e){return _c(e.originX)===_c(Mo)&&_c(e.originY)===_c(Mo)}function Pc(e){return.5-_c(e)}const Oc=(e,t)=>e[t],Dc=(e,t,n,r)=>({e:e,transform:t,pointer:new hl(n,r)});function Ac(e,t){const n=e.getTotalAngle()+_l(Math.atan2(t.y,t.x))+360;return Math.round(n%360/45)}function Mc(e,t,n,r,s){var a;let{target:i,corner:o}=e;const l=i.controls[o],c=(null===(a=i.canvas)||void 0===a?void 0:a.getZoom())||1,u=i.padding/c,d=function(e,t,n,r){const s=e.getRelativeCenterPoint(),a=void 0!==n&&void 0!==r?e.translateToGivenOrigin(s,Mo,Mo,n,r):new hl(e.left,e.top);return(e.angle?t.rotate(-Nl(e.angle),s):t).subtract(a)}(i,new hl(r,s),t,n);return d.x>=u&&(d.x-=u),d.x<=-u&&(d.x+=u),d.y>=u&&(d.y-=u),d.y<=u&&(d.y+=u),d.x-=l.offsetX,d.y-=l.offsetY,d}const Lc=(e,t,n,r)=>{const{target:s,offsetX:a,offsetY:i}=t,o=n-a,l=r-i,c=!Oc(s,"lockMovementX")&&s.left!==o,u=!Oc(s,"lockMovementY")&&s.top!==l;return c&&s.set(Lo,o),u&&s.set(zo,l),(c||u)&&kc(Ho,Dc(e,t,n,r)),c||u},zc=e=>e.replace(/\s+/g," "),Fc={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#0FF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000",blanchedalmond:"#FFEBCD",blue:"#00F",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#0FF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#F0F",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#0F0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#F0F",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#639",red:"#F00",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFF",whitesmoke:"#F5F5F5",yellow:"#FF0",yellowgreen:"#9ACD32"},Rc=(e,t,n)=>(n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e),Ic=(e,t,n,r)=>{e/=255,t/=255,n/=255;const s=Math.max(e,t,n),a=Math.min(e,t,n);let i,o;const l=(s+a)/2;if(s===a)i=o=0;else{const r=s-a;switch(o=l>.5?r/(2-s-a):r/(s+a),s){case e:i=(t-n)/r+(t<n?6:0);break;case t:i=(n-e)/r+2;break;case n:i=(e-t)/r+4}i/=6}return[Math.round(360*i),Math.round(100*o),Math.round(100*l),r]},Bc=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"1";return parseFloat(e)/(e.endsWith("%")?100:1)},Hc=e=>Math.min(Math.round(e),255).toString(16).toUpperCase().padStart(2,"0"),Wc=e=>{let[t,n,r,s=1]=e;const a=Math.round(.3*t+.59*n+.11*r);return[a,a,a,s]};class Uc{constructor(e){if(io(this,"isUnrecognised",!1),e)if(e instanceof Uc)this.setSource([...e._source]);else if(Array.isArray(e)){const[t,n,r,s=1]=e;this.setSource([t,n,r,s])}else this.setSource(this._tryParsingColor(e));else this.setSource([0,0,0,1])}_tryParsingColor(e){return(e=e.toLowerCase())in Fc&&(e=Fc[e]),"transparent"===e?[255,255,255,0]:Uc.sourceFromHex(e)||Uc.sourceFromRgb(e)||Uc.sourceFromHsl(e)||(this.isUnrecognised=!0)&&[0,0,0,1]}getSource(){return this._source}setSource(e){this._source=e}toRgb(){const[e,t,n]=this.getSource();return"rgb(".concat(e,",").concat(t,",").concat(n,")")}toRgba(){return"rgba(".concat(this.getSource().join(","),")")}toHsl(){const[e,t,n]=Ic(...this.getSource());return"hsl(".concat(e,",").concat(t,"%,").concat(n,"%)")}toHsla(){const[e,t,n,r]=Ic(...this.getSource());return"hsla(".concat(e,",").concat(t,"%,").concat(n,"%,").concat(r,")")}toHex(){return this.toHexa().slice(0,6)}toHexa(){const[e,t,n,r]=this.getSource();return"".concat(Hc(e)).concat(Hc(t)).concat(Hc(n)).concat(Hc(Math.round(255*r)))}getAlpha(){return this.getSource()[3]}setAlpha(e){return this._source[3]=e,this}toGrayscale(){return this.setSource(Wc(this.getSource())),this}toBlackWhite(e){const[t,,,n]=Wc(this.getSource()),r=t<(e||127)?0:255;return this.setSource([r,r,r,n]),this}overlayWith(e){e instanceof Uc||(e=new Uc(e));const t=this.getSource(),n=e.getSource(),[r,s,a]=t.map((e,t)=>Math.round(.5*e+.5*n[t]));return this.setSource([r,s,a,t[3]]),this}static fromRgb(e){return Uc.fromRgba(e)}static fromRgba(e){return new Uc(Uc.sourceFromRgb(e))}static sourceFromRgb(e){const t=zc(e).match(/^rgba?\(\s?(\d{0,3}(?:\.\d+)?%?)\s?[\s|,]\s?(\d{0,3}(?:\.\d+)?%?)\s?[\s|,]\s?(\d{0,3}(?:\.\d+)?%?)\s?(?:\s?[,/]\s?(\d{0,3}(?:\.\d+)?%?)\s?)?\)$/i);if(t){const[e,n,r]=t.slice(1,4).map(e=>{const t=parseFloat(e);return e.endsWith("%")?Math.round(2.55*t):t});return[e,n,r,Bc(t[4])]}}static fromHsl(e){return Uc.fromHsla(e)}static fromHsla(e){return new Uc(Uc.sourceFromHsl(e))}static sourceFromHsl(e){const t=zc(e).match(/^hsla?\(\s?([+-]?\d{0,3}(?:\.\d+)?(?:deg|turn|rad)?)\s?[\s|,]\s?(\d{0,3}(?:\.\d+)?%?)\s?[\s|,]\s?(\d{0,3}(?:\.\d+)?%?)\s?(?:\s?[,/]\s?(\d*(?:\.\d+)?%?)\s?)?\)$/i);if(!t)return;const n=(Uc.parseAngletoDegrees(t[1])%360+360)%360/360,r=parseFloat(t[2])/100,s=parseFloat(t[3])/100;let a,i,o;if(0===r)a=i=o=s;else{const e=s<=.5?s*(r+1):s+r-s*r,t=2*s-e;a=Rc(t,e,n+1/3),i=Rc(t,e,n),o=Rc(t,e,n-1/3)}return[Math.round(255*a),Math.round(255*i),Math.round(255*o),Bc(t[4])]}static fromHex(e){return new Uc(Uc.sourceFromHex(e))}static sourceFromHex(e){if(e.match(/^#?(([0-9a-f]){3,4}|([0-9a-f]{2}){3,4})$/i)){const t=e.slice(e.indexOf("#")+1);let n;n=t.length<=4?t.split("").map(e=>e+e):t.match(/.{2}/g);const[r,s,a,i=255]=n.map(e=>parseInt(e,16));return[r,s,a,i/255]}}static parseAngletoDegrees(e){const t=e.toLowerCase(),n=parseFloat(t);return t.includes("rad")?_l(n):t.includes("turn")?360*n:n}}const Yc=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Do;const n=/\D{0,2}$/.exec(e),r=parseFloat(e),s=fo.DPI;switch(null==n?void 0:n[0]){case"mm":return r*s/25.4;case"cm":return r*s/2.54;case"in":return r*s;case"pt":return r*s/72;case"pc":return r*s/72*12;case"em":return r*t;default:return r}},Vc=e=>{const[t,n]=e.trim().split(" "),[r,s]=(a=t)&&a!==Io?[a.slice(1,4),a.slice(5,8)]:a===Io?[a,a]:["Mid","Mid"];var a;return{meetOrSlice:n||"meet",alignX:r,alignY:s}},qc=function(e,t){let n,r,s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t)if(t.toLive)n="url(#SVGID_".concat(t.id,")");else{const e=new Uc(t),s=e.getAlpha();n=e.toRgb(),1!==s&&(r=s.toString())}else n="none";return s?"".concat(e,": ").concat(n,"; ").concat(r?"".concat(e,"-opacity: ").concat(r,"; "):""):"".concat(e,'="').concat(n,'" ').concat(r?"".concat(e,'-opacity="').concat(r,'" '):"")};class Xc{getSvgStyles(e){const t=this.fillRule?this.fillRule:"nonzero",n=this.strokeWidth?this.strokeWidth:"0",r=this.strokeDashArray?this.strokeDashArray.join(" "):Io,s=this.strokeDashOffset?this.strokeDashOffset:"0",a=this.strokeLineCap?this.strokeLineCap:"butt",i=this.strokeLineJoin?this.strokeLineJoin:"miter",o=this.strokeMiterLimit?this.strokeMiterLimit:"4",l=void 0!==this.opacity?this.opacity:"1",c=this.visible?"":" visibility: hidden;",u=e?"":this.getSvgFilter(),d=qc(tl,this.fill);return[qc(nl,this.stroke),"stroke-width: ",n,"; ","stroke-dasharray: ",r,"; ","stroke-linecap: ",a,"; ","stroke-dashoffset: ",s,"; ","stroke-linejoin: ",i,"; ","stroke-miterlimit: ",o,"; ",d,"fill-rule: ",t,"; ","opacity: ",l,";",u,c].join("")}getSvgFilter(){return this.shadow?"filter: url(#SVGID_".concat(this.shadow.id,");"):""}getSvgCommons(){return[this.id?'id="'.concat(this.id,'" '):"",this.clipPath?'clip-path="url(#'.concat(this.clipPath.clipPathId,')" '):""].join("")}getSvgTransform(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e?this.calcTransformMatrix():this.calcOwnMatrix(),r='transform="'.concat(Kl(n));return"".concat(r).concat(t,'" ')}_toSVG(e){return[""]}toSVG(e){return this._createBaseSVGMarkup(this._toSVG(e),{reviver:e})}toClipPathSVG(e){return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(e),{reviver:e})}_createBaseClipPathSVGMarkup(e){let{reviver:t,additionalTransform:n=""}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=[this.getSvgTransform(!0,n),this.getSvgCommons()].join(""),s=e.indexOf("COMMON_PARTS");return e[s]=r,t?t(e.join("")):e.join("")}_createBaseSVGMarkup(e){let{noStyle:t,reviver:n,withShadow:r,additionalTransform:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=t?"":'style="'.concat(this.getSvgStyles(),'" '),i=r?'style="'.concat(this.getSvgFilter(),'" '):"",o=this.clipPath,l=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",c=o&&o.absolutePositioned,u=this.stroke,d=this.fill,h=this.shadow,f=[],m=e.indexOf("COMMON_PARTS");let p;o&&(o.clipPathId="CLIPPATH_".concat(vl()),p='<clipPath id="'.concat(o.clipPathId,'" >\n').concat(o.toClipPathSVG(n),"</clipPath>\n")),c&&f.push("<g ",i,this.getSvgCommons()," >\n"),f.push("<g ",this.getSvgTransform(!1),c?"":i+this.getSvgCommons()," >\n");const g=[a,l,t?"":this.addPaintOrder()," ",s?'transform="'.concat(s,'" '):""].join("");return e[m]=g,Ql(d)&&f.push(d.toSVG(this)),Ql(u)&&f.push(u.toSVG(this)),h&&f.push(h.toSVG(this)),o&&f.push(p),f.push(e.join("")),f.push("</g>\n"),c&&f.push("</g>\n"),n?n(f.join("")):f.join("")}addPaintOrder(){return this.paintFirst!==tl?' paint-order="'.concat(this.paintFirst,'" '):""}}function Gc(e){return new RegExp("^("+e.join("|")+")\\b","i")}const Kc="textDecorationThickness",Qc=["fontSize","fontWeight","fontFamily","fontStyle"],$c=["underline","overline","linethrough"],Jc=[...Qc,"lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],Zc=[...Jc,...$c,"textBackgroundColor","direction",Kc],eu=[...Qc,...$c,nl,"strokeWidth",tl,"deltaY","textBackgroundColor",Kc],tu={_reNewline:Bo,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:Lo,fontStyle:"normal",lineHeight:1.16,textBackgroundColor:"",stroke:null,shadow:null,path:void 0,pathStartOffset:0,pathSide:Lo,pathAlign:"baseline",charSpacing:0,deltaY:0,direction:"ltr",CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.28167,overline:-.81333},_fontSizeMult:1.13,[Kc]:66.667},nu="justify",ru="justify-left",su="justify-right",au="justify-center";var iu,ou,lu;const cu=String.raw(iu||(iu=uo(["[-+]?(?:d*.d+|d+.?)(?:[eE][-+]?d+)?"],["[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?"]))),uu=String.raw(ou||(ou=uo(["(?:s*,?s+|s*,s*)"],["(?:\\s*,?\\s+|\\s*,\\s*)"]))),du=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+cu+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+cu+"))?\\s+(.*)"),hu={cx:Lo,x:Lo,r:"radius",cy:zo,y:zo,display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing","text-decoration-thickness":Kc},fu="font-size",mu="clip-path",pu=(Gc(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]),Gc(["symbol","image","marker","pattern","view","svg"]),Gc(["symbol","g","a","svg","clipPath","defs"])),gu=(new RegExp(String.raw(lu||(lu=uo(["^s*(",")","(",")","(",")","(",")s*$"],["^\\s*(",")","(",")","(",")","(",")\\s*$"])),cu,uu,cu,uu,cu,uu,cu)),new hl(1,0)),yu=new hl,xu=(e,t)=>e.rotate(t),bu=(e,t)=>new hl(t).subtract(e),vu=e=>e.distanceFrom(yu),wu=(e,t)=>Math.atan2(ku(e,t),Nu(e,t)),Cu=e=>wu(gu,e),Su=e=>e.eq(yu)?e:e.scalarDivide(vu(e)),ju=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Su(new hl(-e.y,e.x).scalarMultiply(t?1:-1))},ku=(e,t)=>e.x*t.y-e.y*t.x,Nu=(e,t)=>e.x*t.x+e.y*t.y,_u=(e,t,n)=>{if(e.eq(t)||e.eq(n))return!0;const r=ku(t,n),s=ku(t,e),a=ku(n,e);return r>=0?s>=0&&a<=0:!(s<=0&&a>=0)},Tu="(-?\\d+(?:\\.\\d*)?(?:px)?(?:\\s?|$))?",Eu=new RegExp("(?:\\s|^)"+Tu+Tu+"("+cu+"?(?:px)?)?(?:\\s?|$)(?:$|\\s)");class Pu{constructor(e){const t="string"==typeof e?Pu.parseShadow(e):e;Object.assign(this,Pu.ownDefaults,t),this.id=vl()}static parseShadow(e){const t=e.trim(),[,n=0,r=0,s=0]=(Eu.exec(t)||[]).map(e=>parseFloat(e)||0);return{color:(t.replace(Eu,"")||"rgb(0,0,0)").trim(),offsetX:n,offsetY:r,blur:s}}toString(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")}toSVG(e){const t=xu(new hl(this.offsetX,this.offsetY),Nl(-e.angle)),n=new Uc(this.color);let r=40,s=40;return e.width&&e.height&&(r=100*Gl((Math.abs(t.x)+this.blur)/e.width,fo.NUM_FRACTION_DIGITS)+20,s=100*Gl((Math.abs(t.y)+this.blur)/e.height,fo.NUM_FRACTION_DIGITS)+20),e.flipX&&(t.x*=-1),e.flipY&&(t.y*=-1),'<filter id="SVGID_'.concat(this.id,'" y="-').concat(s,'%" height="').concat(100+2*s,'%" x="-').concat(r,'%" width="').concat(100+2*r,'%" >\n\t<feGaussianBlur in="SourceAlpha" stdDeviation="').concat(Gl(this.blur?this.blur/2:0,fo.NUM_FRACTION_DIGITS),'"></feGaussianBlur>\n\t<feOffset dx="').concat(Gl(t.x,fo.NUM_FRACTION_DIGITS),'" dy="').concat(Gl(t.y,fo.NUM_FRACTION_DIGITS),'" result="oBlur" ></feOffset>\n\t<feFlood flood-color="').concat(n.toRgb(),'" flood-opacity="').concat(n.getAlpha(),'"/>\n\t<feComposite in2="oBlur" operator="in" />\n\t<feMerge>\n\t\t<feMergeNode></feMergeNode>\n\t\t<feMergeNode in="SourceGraphic"></feMergeNode>\n\t</feMerge>\n</filter>\n')}toObject(){const e={color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling,type:this.constructor.type},t=Pu.ownDefaults;return this.includeDefaultValues?e:Xl(e,(e,n)=>e!==t[n])}static async fromObject(e){return new this(e)}}io(Pu,"ownDefaults",{color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1}),io(Pu,"type","shadow"),il.setClass(Pu,"shadow");const Ou=(e,t,n)=>Math.max(e,Math.min(t,n)),Du=[zo,Lo,$o,Jo,"flipX","flipY","originX","originY","angle","opacity","globalCompositeOperation","shadow","visible",Zo,el],Au=[tl,nl,"strokeWidth","strokeDashArray","width","height","paintFirst","strokeUniform","strokeLineCap","strokeDashOffset","strokeLineJoin","strokeMiterLimit","backgroundColor","clipPath"],Mu={top:0,left:0,width:0,height:0,angle:0,flipX:!1,flipY:!1,scaleX:1,scaleY:1,minScaleLimit:0,skewX:0,skewY:0,originX:Lo,originY:zo,strokeWidth:1,strokeUniform:!1,padding:0,opacity:1,paintFirst:tl,fill:"rgb(0,0,0)",fillRule:"nonzero",stroke:null,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,globalCompositeOperation:"source-over",backgroundColor:"",shadow:null,visible:!0,includeDefaultValues:!0,excludeFromExport:!1,objectCaching:!0,clipPath:void 0,inverted:!1,absolutePositioned:!1,centeredRotation:!0,centeredScaling:!1,dirty:!0},Lu=(e,t,n,r)=>(e<Math.abs(t)?(e=t,r=n/4):r=0===t&&0===e?n/Eo*Math.asin(1):n/Eo*Math.asin(t/e),{a:e,c:t,p:n,s:r}),zu=(e,t,n,r,s)=>e*Math.pow(2,10*(r-=1))*Math.sin((r*s-t)*Eo/n),Fu=(e,t,n,r)=>-n*Math.cos(e/r*To)+n+t,Ru=(e,t,n,r)=>(e/=r)<1/2.75?n*(7.5625*e*e)+t:e<2/2.75?n*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?n*(7.5625*(e-=2.25/2.75)*e+.9375)+t:n*(7.5625*(e-=2.625/2.75)*e+.984375)+t,Iu=(e,t,n,r)=>n-Ru(r-e,0,n,r)+t;var Bu=Object.freeze({__proto__:null,defaultEasing:Fu,easeInBack:function(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1.70158;return n*(e/=r)*e*((s+1)*e-s)+t},easeInBounce:Iu,easeInCirc:(e,t,n,r)=>-n*(Math.sqrt(1-(e/=r)*e)-1)+t,easeInCubic:(e,t,n,r)=>n*(e/r)**3+t,easeInElastic:(e,t,n,r)=>{const s=n;let a=0;if(0===e)return t;if(1===(e/=r))return t+n;a||(a=.3*r);const{a:i,s:o,p:l}=Lu(s,n,a,1.70158);return-zu(i,o,l,e,r)+t},easeInExpo:(e,t,n,r)=>0===e?t:n*2**(10*(e/r-1))+t,easeInOutBack:function(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1.70158;return(e/=r/2)<1?n/2*(e*e*((1+(s*=1.525))*e-s))+t:n/2*((e-=2)*e*((1+(s*=1.525))*e+s)+2)+t},easeInOutBounce:(e,t,n,r)=>e<r/2?.5*Iu(2*e,0,n,r)+t:.5*Ru(2*e-r,0,n,r)+.5*n+t,easeInOutCirc:(e,t,n,r)=>(e/=r/2)<1?-n/2*(Math.sqrt(1-e**2)-1)+t:n/2*(Math.sqrt(1-(e-=2)*e)+1)+t,easeInOutCubic:(e,t,n,r)=>(e/=r/2)<1?n/2*e**3+t:n/2*((e-2)**3+2)+t,easeInOutElastic:(e,t,n,r)=>{const s=n;let a=0;if(0===e)return t;if(2===(e/=r/2))return t+n;a||(a=r*(.3*1.5));const{a:i,s:o,p:l,c:c}=Lu(s,n,a,1.70158);return e<1?-.5*zu(i,o,l,e,r)+t:i*Math.pow(2,-10*(e-=1))*Math.sin((e*r-o)*Eo/l)*.5+c+t},easeInOutExpo:(e,t,n,r)=>0===e?t:e===r?t+n:(e/=r/2)<1?n/2*2**(10*(e-1))+t:n/2*-(2**(-10*--e)+2)+t,easeInOutQuad:(e,t,n,r)=>(e/=r/2)<1?n/2*e**2+t:-n/2*(--e*(e-2)-1)+t,easeInOutQuart:(e,t,n,r)=>(e/=r/2)<1?n/2*e**4+t:-n/2*((e-=2)*e**3-2)+t,easeInOutQuint:(e,t,n,r)=>(e/=r/2)<1?n/2*e**5+t:n/2*((e-2)**5+2)+t,easeInOutSine:(e,t,n,r)=>-n/2*(Math.cos(Math.PI*e/r)-1)+t,easeInQuad:(e,t,n,r)=>n*(e/=r)*e+t,easeInQuart:(e,t,n,r)=>n*(e/=r)*e**3+t,easeInQuint:(e,t,n,r)=>n*(e/r)**5+t,easeInSine:(e,t,n,r)=>-n*Math.cos(e/r*To)+n+t,easeOutBack:function(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1.70158;return n*((e=e/r-1)*e*((s+1)*e+s)+1)+t},easeOutBounce:Ru,easeOutCirc:(e,t,n,r)=>n*Math.sqrt(1-(e=e/r-1)*e)+t,easeOutCubic:(e,t,n,r)=>n*((e/r-1)**3+1)+t,easeOutElastic:(e,t,n,r)=>{const s=n;let a=0;if(0===e)return t;if(1===(e/=r))return t+n;a||(a=.3*r);const{a:i,s:o,p:l,c:c}=Lu(s,n,a,1.70158);return i*2**(-10*e)*Math.sin((e*r-o)*Eo/l)+c+t},easeOutExpo:(e,t,n,r)=>e===r?t+n:n*-(2**(-10*e/r)+1)+t,easeOutQuad:(e,t,n,r)=>-n*(e/=r)*(e-2)+t,easeOutQuart:(e,t,n,r)=>-n*((e=e/r-1)*e**3-1)+t,easeOutQuint:(e,t,n,r)=>n*((e/r-1)**5+1)+t,easeOutSine:(e,t,n,r)=>n*Math.sin(e/r*To)+t});const Hu=()=>!1;class Wu{constructor(e){let{startValue:t,byValue:n,duration:r=500,delay:s=0,easing:a=Fu,onStart:i=_o,onChange:o=_o,onComplete:l=_o,abort:c=Hu,target:u}=e;io(this,"_state","pending"),io(this,"durationProgress",0),io(this,"valueProgress",0),this.tick=this.tick.bind(this),this.duration=r,this.delay=s,this.easing=a,this._onStart=i,this._onChange=o,this._onComplete=l,this._abort=c,this.target=u,this.startValue=t,this.byValue=n,this.value=this.startValue,this.endValue=Object.freeze(this.calculate(this.duration).value)}get state(){return this._state}isDone(){return"aborted"===this._state||"completed"===this._state}start(){const e=e=>{"pending"===this._state&&(this.startTime=e||+new Date,this._state="running",this._onStart(),this.tick(this.startTime))};this.register(),this.delay>0?setTimeout(()=>yl(e),this.delay):yl(e)}tick(e){const t=(e||+new Date)-this.startTime,n=Math.min(t,this.duration);this.durationProgress=n/this.duration;const{value:r,valueProgress:s}=this.calculate(n);this.value=Object.freeze(r),this.valueProgress=s,"aborted"!==this._state&&(this._abort(this.value,this.valueProgress,this.durationProgress)?(this._state="aborted",this.unregister()):t>=this.duration?(this.durationProgress=this.valueProgress=1,this._onChange(this.endValue,this.valueProgress,this.durationProgress),this._state="completed",this._onComplete(this.endValue,this.valueProgress,this.durationProgress),this.unregister()):(this._onChange(this.value,this.valueProgress,this.durationProgress),yl(this.tick)))}register(){ol.push(this)}unregister(){ol.remove(this)}abort(){this._state="aborted",this.unregister()}}const Uu=["startValue","endValue"];class Yu extends Wu{constructor(e){let{startValue:t=0,endValue:n=100}=e;super(lo(lo({},co(e,Uu)),{},{startValue:t,byValue:n-t}))}calculate(e){const t=this.easing(e,this.startValue,this.byValue,this.duration);return{value:t,valueProgress:Math.abs((t-this.startValue)/this.byValue)}}}const Vu=["startValue","endValue"];class qu extends Wu{constructor(e){let{startValue:t=[0],endValue:n=[100]}=e;super(lo(lo({},co(e,Vu)),{},{startValue:t,byValue:n.map((e,n)=>e-t[n])}))}calculate(e){const t=this.startValue.map((t,n)=>this.easing(e,t,this.byValue[n],this.duration,n));return{value:t,valueProgress:Math.abs((t[0]-this.startValue[0])/this.byValue[0])}}}const Xu=["startValue","endValue","easing","onChange","onComplete","abort"],Gu=(e,t,n,r)=>t+n*(1-Math.cos(e/r*To)),Ku=e=>e&&((t,n,r)=>e(new Uc(t).toRgba(),n,r));class Qu extends Wu{constructor(e){let{startValue:t,endValue:n,easing:r=Gu,onChange:s,onComplete:a,abort:i}=e,o=co(e,Xu);const l=new Uc(t).getSource(),c=new Uc(n).getSource();super(lo(lo({},o),{},{startValue:l,byValue:c.map((e,t)=>e-l[t]),easing:r,onChange:Ku(s),onComplete:Ku(a),abort:Ku(i)}))}calculate(e){const[t,n,r,s]=this.startValue.map((t,n)=>this.easing(e,t,this.byValue[n],this.duration,n)),a=[...[t,n,r].map(Math.round),Ou(0,s,1)];return{value:a,valueProgress:a.map((e,t)=>0!==this.byValue[t]?Math.abs((e-this.startValue[t])/this.byValue[t]):0).find(e=>0!==e)||0}}}function $u(e){const t=(e=>Array.isArray(e.startValue)||Array.isArray(e.endValue))(e)?new qu(e):new Yu(e);return t.start(),t}function Ju(e){const t=new Qu(e);return t.start(),t}class Zu{constructor(e){this.status=e,this.points=[]}includes(e){return this.points.some(t=>t.eq(e))}append(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.points=this.points.concat(t.filter(e=>!this.includes(e))),this}static isPointContained(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(t.eq(n))return e.eq(t);if(t.x===n.x)return e.x===t.x&&(r||e.y>=Math.min(t.y,n.y)&&e.y<=Math.max(t.y,n.y));if(t.y===n.y)return e.y===t.y&&(r||e.x>=Math.min(t.x,n.x)&&e.x<=Math.max(t.x,n.x));{const s=bu(t,n),a=bu(t,e).divide(s);return r?Math.abs(a.x)===Math.abs(a.y):a.x===a.y&&a.x>=0&&a.x<=1}}static isPointInPolygon(e,t){const n=new hl(e).setX(Math.min(e.x-1,...t.map(e=>e.x)));let r=0;for(let s=0;s<t.length;s++){const a=this.intersectSegmentSegment(t[s],t[(s+1)%t.length],e,n);if(a.includes(e))return!0;r+=Number("Intersection"===a.status)}return r%2==1}static intersectLineLine(e,t,n,r){let s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];const i=t.x-e.x,o=t.y-e.y,l=r.x-n.x,c=r.y-n.y,u=e.x-n.x,d=e.y-n.y,h=l*d-c*u,f=i*d-o*u,m=c*i-l*o;if(0!==m){const t=h/m,n=f/m;return(s||0<=t&&t<=1)&&(a||0<=n&&n<=1)?new Zu("Intersection").append(new hl(e.x+t*i,e.y+t*o)):new Zu}if(0===h||0===f){const i=s||a||Zu.isPointContained(e,n,r)||Zu.isPointContained(t,n,r)||Zu.isPointContained(n,e,t)||Zu.isPointContained(r,e,t);return new Zu(i?"Coincident":void 0)}return new Zu("Parallel")}static intersectSegmentLine(e,t,n,r){return Zu.intersectLineLine(e,t,n,r,!1,!0)}static intersectSegmentSegment(e,t,n,r){return Zu.intersectLineLine(e,t,n,r,!1,!1)}static intersectLinePolygon(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const s=new Zu,a=n.length;for(let i,o,l,c=0;c<a;c++){if(i=n[c],o=n[(c+1)%a],l=Zu.intersectLineLine(e,t,i,o,r,!1),"Coincident"===l.status)return l;s.append(...l.points)}return s.points.length>0&&(s.status="Intersection"),s}static intersectSegmentPolygon(e,t,n){return Zu.intersectLinePolygon(e,t,n,!1)}static intersectPolygonPolygon(e,t){const n=new Zu,r=e.length,s=[];for(let a=0;a<r;a++){const i=e[a],o=e[(a+1)%r],l=Zu.intersectSegmentPolygon(i,o,t);"Coincident"===l.status?(s.push(l),n.append(i,o)):n.append(...l.points)}return s.length>0&&s.length===e.length?new Zu("Coincident"):(n.points.length>0&&(n.status="Intersection"),n)}static intersectPolygonRectangle(e,t,n){const r=t.min(n),s=t.max(n),a=new hl(s.x,r.y),i=new hl(r.x,s.y);return Zu.intersectPolygonPolygon(e,[r,a,s,i])}}class ed extends gl{getX(){return this.getXY().x}setX(e){this.setXY(this.getXY().setX(e))}getY(){return this.getXY().y}setY(e){this.setXY(this.getXY().setY(e))}getRelativeX(){return this.left}setRelativeX(e){this.left=e}getRelativeY(){return this.top}setRelativeY(e){this.top=e}getXY(){const e=this.getRelativeXY();return this.group?El(e,this.group.calcTransformMatrix()):e}setXY(e,t,n){this.group&&(e=El(e,Pl(this.group.calcTransformMatrix()))),this.setRelativeXY(e,t,n)}getRelativeXY(){return new hl(this.left,this.top)}setRelativeXY(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.originX,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.originY;this.setPositionByOrigin(e,t,n)}isStrokeAccountedForInDimensions(){return!1}getCoords(){const{tl:e,tr:t,br:n,bl:r}=this.aCoords||(this.aCoords=this.calcACoords()),s=[e,t,n,r];if(this.group){const e=this.group.calcTransformMatrix();return s.map(t=>El(t,e))}return s}intersectsWithRect(e,t){return"Intersection"===Zu.intersectPolygonRectangle(this.getCoords(),e,t).status}intersectsWithObject(e){const t=Zu.intersectPolygonPolygon(this.getCoords(),e.getCoords());return"Intersection"===t.status||"Coincident"===t.status||e.isContainedWithinObject(this)||this.isContainedWithinObject(e)}isContainedWithinObject(e){return this.getCoords().every(t=>e.containsPoint(t))}isContainedWithinRect(e,t){const{left:n,top:r,width:s,height:a}=this.getBoundingRect();return n>=e.x&&n+s<=t.x&&r>=e.y&&r+a<=t.y}isOverlapping(e){return this.intersectsWithObject(e)||this.isContainedWithinObject(e)||e.isContainedWithinObject(this)}containsPoint(e){return Zu.isPointInPolygon(e,this.getCoords())}isOnScreen(){if(!this.canvas)return!1;const{tl:e,br:t}=this.canvas.vptCoords;return!!this.getCoords().some(n=>n.x<=t.x&&n.x>=e.x&&n.y<=t.y&&n.y>=e.y)||!!this.intersectsWithRect(e,t)||this.containsPoint(e.midPointFrom(t))}isPartiallyOnScreen(){if(!this.canvas)return!1;const{tl:e,br:t}=this.canvas.vptCoords;return!!this.intersectsWithRect(e,t)||this.getCoords().every(n=>(n.x>=t.x||n.x<=e.x)&&(n.y>=t.y||n.y<=e.y))&&this.containsPoint(e.midPointFrom(t))}getBoundingRect(){return mc(this.getCoords())}getScaledWidth(){return this._getTransformedDimensions().x}getScaledHeight(){return this._getTransformedDimensions().y}scale(e){this._set($o,e),this._set(Jo,e),this.setCoords()}scaleToWidth(e){const t=this.getBoundingRect().width/this.getScaledWidth();return this.scale(e/this.width/t)}scaleToHeight(e){const t=this.getBoundingRect().height/this.getScaledHeight();return this.scale(e/this.height/t)}getCanvasRetinaScaling(){var e;return(null===(e=this.canvas)||void 0===e?void 0:e.getRetinaScaling())||1}getTotalAngle(){return this.group?_l(Al(this.calcTransformMatrix())):this.angle}getViewportTransform(){var e;return(null===(e=this.canvas)||void 0===e?void 0:e.viewportTransform)||Oo.concat()}calcACoords(){const e=zl({angle:this.angle}),{x:t,y:n}=this.getRelativeCenterPoint(),r=Ll(t,n),s=Ol(r,e),a=this._getTransformedDimensions(),i=a.x/2,o=a.y/2;return{tl:El({x:-i,y:-o},s),tr:El({x:i,y:-o},s),bl:El({x:-i,y:o},s),br:El({x:i,y:o},s)}}setCoords(){this.aCoords=this.calcACoords()}transformMatrixKey(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[];return!e&&this.group&&(t=this.group.transformMatrixKey(e)),t.push(this.top,this.left,this.width,this.height,this.scaleX,this.scaleY,this.angle,this.strokeWidth,this.skewX,this.skewY,+this.flipX,+this.flipY,_c(this.originX),_c(this.originY)),t}calcTransformMatrix(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.calcOwnMatrix();if(e||!this.group)return t;const n=this.transformMatrixKey(e),r=this.matrixCache;return r&&r.key.every((e,t)=>e===n[t])?r.value:(this.group&&(t=Ol(this.group.calcTransformMatrix(!1),t)),this.matrixCache={key:n,value:t},t)}calcOwnMatrix(){const e=this.transformMatrixKey(!0),t=this.ownMatrixCache;if(t&&t.key===e)return t.value;const n=this.getRelativeCenterPoint(),r={angle:this.angle,translateX:n.x,translateY:n.y,scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY},s=Wl(r);return this.ownMatrixCache={key:e,value:s},s}_getNonTransformedDimensions(){return new hl(this.width,this.height).scalarAdd(this.strokeWidth)}_calculateCurrentDimensions(e){return this._getTransformedDimensions(e).transform(this.getViewportTransform(),!0).scalarAdd(2*this.padding)}_getTransformedDimensions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=lo({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,width:this.width,height:this.height,strokeWidth:this.strokeWidth},e),n=t.strokeWidth;let r=n,s=0;this.strokeUniform&&(r=0,s=n);const a=t.width+r,i=t.height+r;let o;return o=0===t.skewX&&0===t.skewY?new hl(a*t.scaleX,i*t.scaleY):vc(a,i,Hl(t)),o.scalarAdd(s)}translateToGivenOrigin(e,t,n,r,s){let a=e.x,i=e.y;const o=_c(r)-_c(t),l=_c(s)-_c(n);if(o||l){const e=this._getTransformedDimensions();a+=o*e.x,i+=l*e.y}return new hl(a,i)}translateToCenterPoint(e,t,n){if(t===Mo&&n===Mo)return e;const r=this.translateToGivenOrigin(e,t,n,Mo,Mo);return this.angle?r.rotate(Nl(this.angle),e):r}translateToOriginPoint(e,t,n){const r=this.translateToGivenOrigin(e,Mo,Mo,t,n);return this.angle?r.rotate(Nl(this.angle),e):r}getCenterPoint(){const e=this.getRelativeCenterPoint();return this.group?El(e,this.group.calcTransformMatrix()):e}getRelativeCenterPoint(){return this.translateToCenterPoint(new hl(this.left,this.top),this.originX,this.originY)}getPointByOrigin(e,t){return this.translateToOriginPoint(this.getRelativeCenterPoint(),e,t)}setPositionByOrigin(e,t,n){const r=this.translateToCenterPoint(e,t,n),s=this.translateToOriginPoint(r,this.originX,this.originY);this.set({left:s.x,top:s.y})}_getLeftTopCoords(){return this.translateToOriginPoint(this.getRelativeCenterPoint(),Lo,zo)}}const td=["type"],nd=["extraParam"];let rd=class e extends ed{static getDefaults(){return e.ownDefaults}get type(){const e=this.constructor.type;return"FabricObject"===e?"object":e.toLowerCase()}set type(e){mo("warn","Setting type has no effect",e)}constructor(t){super(),io(this,"_cacheContext",null),Object.assign(this,e.ownDefaults),this.setOptions(t)}_createCacheCanvas(){this._cacheCanvas=wl(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0}_limitCacheSize(e){const t=e.width,n=e.height,r=fo.maxCacheSideLimit,s=fo.minCacheSideLimit;if(t<=r&&n<=r&&t*n<=fo.perfLimitSizeTotal)return t<s&&(e.width=s),n<s&&(e.height=s),e;const a=t/n,[i,o]=ko.limitDimsByArea(a),l=Ou(s,i,r),c=Ou(s,o,r);return t>l&&(e.zoomX/=t/l,e.width=l,e.capped=!0),n>c&&(e.zoomY/=n/c,e.height=c,e.capped=!0),e}_getCacheCanvasDimensions(){const e=this.getTotalObjectScaling(),t=this._getTransformedDimensions({skewX:0,skewY:0}),n=t.x*e.x/this.scaleX,r=t.y*e.y/this.scaleY;return{width:Math.ceil(n+2),height:Math.ceil(r+2),zoomX:e.x,zoomY:e.y,x:n,y:r}}_updateCacheCanvas(){const e=this._cacheCanvas,t=this._cacheContext,{width:n,height:r,zoomX:s,zoomY:a,x:i,y:o}=this._limitCacheSize(this._getCacheCanvasDimensions()),l=n!==e.width||r!==e.height,c=this.zoomX!==s||this.zoomY!==a;if(!e||!t)return!1;if(l||c){n!==e.width||r!==e.height?(e.width=n,e.height=r):(t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height));const l=i/2,c=o/2;return this.cacheTranslationX=Math.round(e.width/2-l)+l,this.cacheTranslationY=Math.round(e.height/2-c)+c,t.translate(this.cacheTranslationX,this.cacheTranslationY),t.scale(s,a),this.zoomX=s,this.zoomY=a,!0}return!1}setOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setOptions(e)}transform(e){const t=this.group&&!this.group._transformDone||this.group&&this.canvas&&e===this.canvas.contextTop,n=this.calcTransformMatrix(!t);e.transform(n[0],n[1],n[2],n[3],n[4],n[5])}getObjectScaling(){if(!this.group)return new hl(Math.abs(this.scaleX),Math.abs(this.scaleY));const e=Ml(this.calcTransformMatrix());return new hl(Math.abs(e.scaleX),Math.abs(e.scaleY))}getTotalObjectScaling(){const e=this.getObjectScaling();if(this.canvas){const t=this.canvas.getZoom(),n=this.getCanvasRetinaScaling();return e.scalarMultiply(t*n)}return e}getObjectOpacity(){let e=this.opacity;return this.group&&(e*=this.group.getObjectOpacity()),e}_constrainScale(e){return Math.abs(e)<this.minScaleLimit?e<0?-this.minScaleLimit:this.minScaleLimit:0===e?1e-4:e}_set(e,t){e!==$o&&e!==Jo||(t=this._constrainScale(t)),e===$o&&t<0?(this.flipX=!this.flipX,t*=-1):"scaleY"===e&&t<0?(this.flipY=!this.flipY,t*=-1):"shadow"!==e||!t||t instanceof Pu||(t=new Pu(t));const n=this[e]!==t;return this[e]=t,n&&this.constructor.cacheProperties.includes(e)&&(this.dirty=!0),this.parent&&(this.dirty||n&&this.constructor.stateProperties.includes(e))&&this.parent._set("dirty",!0),this}isNotVisible(){return 0===this.opacity||!this.width&&!this.height&&0===this.strokeWidth||!this.visible}render(e){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(e.save(),this._setupCompositeOperation(e),this.drawSelectionBackground(e),this.transform(e),this._setOpacity(e),this._setShadow(e),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(e)):(this._removeCacheCanvas(),this.drawObject(e,!1,{}),this.dirty=!1),e.restore())}drawSelectionBackground(e){}renderCache(e){if(e=e||{},this._cacheCanvas&&this._cacheContext||this._createCacheCanvas(),this.isCacheDirty()&&this._cacheContext){const{zoomX:t,zoomY:n,cacheTranslationX:r,cacheTranslationY:s}=this,{width:a,height:i}=this._cacheCanvas;this.drawObject(this._cacheContext,e.forClipping,{zoomX:t,zoomY:n,cacheTranslationX:r,cacheTranslationY:s,width:a,height:i,parentClipPaths:[]}),this.dirty=!1}}_removeCacheCanvas(){this._cacheCanvas=void 0,this._cacheContext=null}hasStroke(){return this.stroke&&"transparent"!==this.stroke&&0!==this.strokeWidth}hasFill(){return this.fill&&"transparent"!==this.fill}needsItsOwnCache(){return!!(this.paintFirst===nl&&this.hasFill()&&this.hasStroke()&&this.shadow)||!!this.clipPath}shouldCache(){return this.ownCaching=this.objectCaching&&(!this.parent||!this.parent.isOnACache())||this.needsItsOwnCache(),this.ownCaching}willDrawShadow(){return!!this.shadow&&(0!==this.shadow.offsetX||0!==this.shadow.offsetY)}drawClipPathOnCache(e,t,n){e.save(),t.inverted?e.globalCompositeOperation="destination-out":e.globalCompositeOperation="destination-in",e.setTransform(1,0,0,1,0,0),e.drawImage(n,0,0),e.restore()}drawObject(e,t,n){const r=this.fill,s=this.stroke;t?(this.fill="black",this.stroke="",this._setClippingProperties(e)):this._renderBackground(e),this._render(e),this._drawClipPath(e,this.clipPath,n),this.fill=r,this.stroke=s}createClipPathLayer(e,t){const n=Sl(t),r=n.getContext("2d");if(r.translate(t.cacheTranslationX,t.cacheTranslationY),r.scale(t.zoomX,t.zoomY),e._cacheCanvas=n,t.parentClipPaths.forEach(e=>{e.transform(r)}),t.parentClipPaths.push(e),e.absolutePositioned){const e=Pl(this.calcTransformMatrix());r.transform(e[0],e[1],e[2],e[3],e[4],e[5])}return e.transform(r),e.drawObject(r,!0,t),n}_drawClipPath(e,t,n){if(!t)return;t._transformDone=!0;const r=this.createClipPathLayer(t,n);this.drawClipPathOnCache(e,t,r)}drawCacheOnCanvas(e){e.scale(1/this.zoomX,1/this.zoomY),e.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)}isCacheDirty(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isNotVisible())return!1;const t=this._cacheCanvas,n=this._cacheContext;return!(!t||!n||e||!this._updateCacheCanvas())||!!(this.dirty||this.clipPath&&this.clipPath.absolutePositioned)&&(t&&n&&!e&&(n.save(),n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,t.width,t.height),n.restore()),!0)}_renderBackground(e){if(!this.backgroundColor)return;const t=this._getNonTransformedDimensions();e.fillStyle=this.backgroundColor,e.fillRect(-t.x/2,-t.y/2,t.x,t.y),this._removeShadow(e)}_setOpacity(e){this.group&&!this.group._transformDone?e.globalAlpha=this.getObjectOpacity():e.globalAlpha*=this.opacity}_setStrokeStyles(e,t){const n=t.stroke;n&&(e.lineWidth=t.strokeWidth,e.lineCap=t.strokeLineCap,e.lineDashOffset=t.strokeDashOffset,e.lineJoin=t.strokeLineJoin,e.miterLimit=t.strokeMiterLimit,Ql(n)?"percentage"===n.gradientUnits||n.gradientTransform||n.patternTransform?this._applyPatternForTransformedGradient(e,n):(e.strokeStyle=n.toLive(e),this._applyPatternGradientTransform(e,n)):e.strokeStyle=t.stroke)}_setFillStyles(e,t){let{fill:n}=t;n&&(Ql(n)?(e.fillStyle=n.toLive(e),this._applyPatternGradientTransform(e,n)):e.fillStyle=n)}_setClippingProperties(e){e.globalAlpha=1,e.strokeStyle="transparent",e.fillStyle="#000000"}_setLineDash(e,t){t&&0!==t.length&&e.setLineDash(t)}_setShadow(e){if(!this.shadow)return;const t=this.shadow,n=this.canvas,r=this.getCanvasRetinaScaling(),[s,,,a]=(null==n?void 0:n.viewportTransform)||Oo,i=s*r,o=a*r,l=t.nonScaling?new hl(1,1):this.getObjectScaling();e.shadowColor=t.color,e.shadowBlur=t.blur*fo.browserShadowBlurConstant*(i+o)*(l.x+l.y)/4,e.shadowOffsetX=t.offsetX*i*l.x,e.shadowOffsetY=t.offsetY*o*l.y}_removeShadow(e){this.shadow&&(e.shadowColor="",e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0)}_applyPatternGradientTransform(e,t){if(!Ql(t))return{offsetX:0,offsetY:0};const n=t.gradientTransform||t.patternTransform,r=-this.width/2+t.offsetX||0,s=-this.height/2+t.offsetY||0;return"percentage"===t.gradientUnits?e.transform(this.width,0,0,this.height,r,s):e.transform(1,0,0,1,r,s),n&&e.transform(n[0],n[1],n[2],n[3],n[4],n[5]),{offsetX:r,offsetY:s}}_renderPaintInOrder(e){this.paintFirst===nl?(this._renderStroke(e),this._renderFill(e)):(this._renderFill(e),this._renderStroke(e))}_render(e){}_renderFill(e){this.fill&&(e.save(),this._setFillStyles(e,this),"evenodd"===this.fillRule?e.fill("evenodd"):e.fill(),e.restore())}_renderStroke(e){if(this.stroke&&0!==this.strokeWidth){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this.strokeUniform){const t=this.getObjectScaling();e.scale(1/t.x,1/t.y)}this._setLineDash(e,this.strokeDashArray),this._setStrokeStyles(e,this),e.stroke(),e.restore()}}_applyPatternForTransformedGradient(e,t){var n;const r=this._limitCacheSize(this._getCacheCanvasDimensions()),s=this.getCanvasRetinaScaling(),a=r.x/this.scaleX/s,i=r.y/this.scaleY/s,o=Sl({width:Math.ceil(a),height:Math.ceil(i)}),l=o.getContext("2d");l&&(l.beginPath(),l.moveTo(0,0),l.lineTo(a,0),l.lineTo(a,i),l.lineTo(0,i),l.closePath(),l.translate(a/2,i/2),l.scale(r.zoomX/this.scaleX/s,r.zoomY/this.scaleY/s),this._applyPatternGradientTransform(l,t),l.fillStyle=t.toLive(e),l.fill(),e.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),e.scale(s*this.scaleX/r.zoomX,s*this.scaleY/r.zoomY),e.strokeStyle=null!==(n=l.createPattern(o,"no-repeat"))&&void 0!==n?n:"")}_findCenterFromElement(){return new hl(this.left+this.width/2,this.top+this.height/2)}clone(e){const t=this.toObject(e);return this.constructor.fromObject(t)}cloneAsImage(e){const t=this.toCanvasElement(e);return new(il.getClass("image"))(t)}toCanvasElement(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=bc(this),n=this.group,r=this.shadow,s=Math.abs,a=e.enableRetinaScaling?jo():1,i=(e.multiplier||1)*a,o=e.canvasProvider||(e=>new cc(e,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1}));delete this.group,e.withoutTransform&&xc(this),e.withoutShadow&&(this.shadow=null),e.viewportTransform&&jc(this,this.getViewportTransform()),this.setCoords();const l=wl(),c=this.getBoundingRect(),u=this.shadow,d=new hl;if(u){const e=u.blur,t=u.nonScaling?new hl(1,1):this.getObjectScaling();d.x=2*Math.round(s(u.offsetX)+e)*s(t.x),d.y=2*Math.round(s(u.offsetY)+e)*s(t.y)}const h=c.width+d.x,f=c.height+d.y;l.width=Math.ceil(h),l.height=Math.ceil(f);const m=o(l);"jpeg"===e.format&&(m.backgroundColor="#fff"),this.setPositionByOrigin(new hl(m.width/2,m.height/2),Mo,Mo);const p=this.canvas;m._objects=[this],this.set("canvas",m),this.setCoords();const g=m.toCanvasElement(i||1,e);return this.set("canvas",p),this.shadow=r,n&&(this.group=n),this.set(t),this.setCoords(),m._objects=[],m.destroy(),g}toDataURL(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return jl(this.toCanvasElement(e),e.format||"png",e.quality||1)}toBlob(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return kl(this.toCanvasElement(e),e.format||"png",e.quality||1)}isType(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.includes(this.constructor.type)||t.includes(this.type)}complexity(){return 1}toJSON(){return this.toObject()}rotate(e){const{centeredRotation:t,originX:n,originY:r}=this;if(t){const{x:e,y:t}=this.getRelativeCenterPoint();this.originX=Mo,this.originY=Mo,this.left=e,this.top=t}if(this.set("angle",e),t){const{x:e,y:t}=this.translateToOriginPoint(this.getRelativeCenterPoint(),n,r);this.left=e,this.top=t,this.originX=n,this.originY=r}}setOnGroup(){}_setupCompositeOperation(e){this.globalCompositeOperation&&(e.globalCompositeOperation=this.globalCompositeOperation)}dispose(){ol.cancelByTarget(this),this.off(),this._set("canvas",void 0),this._cacheCanvas&&wo().dispose(this._cacheCanvas),this._cacheCanvas=void 0,this._cacheContext=null}animate(e,t){return Object.entries(e).reduce((e,n)=>{let[r,s]=n;return e[r]=this._animate(r,s,t),e},{})}_animate(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=e.split("."),s=this.constructor.colorProperties.includes(r[r.length-1]),{abort:a,startValue:i,onChange:o,onComplete:l}=n,c=lo(lo({},n),{},{target:this,startValue:null!=i?i:r.reduce((e,t)=>e[t],this),endValue:t,abort:null==a?void 0:a.bind(this),onChange:(e,t,n)=>{r.reduce((t,n,s)=>(s===r.length-1&&(t[n]=e),t[n]),this),o&&o(e,t,n)},onComplete:(e,t,n)=>{this.setCoords(),l&&l(e,t,n)}});return s?Ju(c):$u(c)}isDescendantOf(e){const{parent:t,group:n}=this;return t===e||n===e||!!t&&t.isDescendantOf(e)||!!n&&n!==t&&n.isDescendantOf(e)}getAncestors(){const e=[];let t=this;do{t=t.parent,t&&e.push(t)}while(t);return e}findCommonAncestors(e){if(this===e)return{fork:[],otherFork:[],common:[this,...this.getAncestors()]};const t=this.getAncestors(),n=e.getAncestors();if(0===t.length&&n.length>0&&this===n[n.length-1])return{fork:[],otherFork:[e,...n.slice(0,n.length-1)],common:[this]};for(let r,s=0;s<t.length;s++){if(r=t[s],r===e)return{fork:[this,...t.slice(0,s)],otherFork:[],common:t.slice(s)};for(let a=0;a<n.length;a++){if(this===n[a])return{fork:[],otherFork:[e,...n.slice(0,a)],common:[this,...t]};if(r===n[a])return{fork:[this,...t.slice(0,s)],otherFork:[e,...n.slice(0,a)],common:t.slice(s)}}}return{fork:[this,...t],otherFork:[e,...n],common:[]}}hasCommonAncestors(e){const t=this.findCommonAncestors(e);return t&&!!t.common.length}isInFrontOf(e){if(this===e)return;const t=this.findCommonAncestors(e);if(t.fork.includes(e))return!0;if(t.otherFork.includes(this))return!1;const n=t.common[0]||this.canvas;if(!n)return;const r=t.fork.pop(),s=t.otherFork.pop(),a=n._objects.indexOf(r),i=n._objects.indexOf(s);return a>-1&&a>i}toObject(){const t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).concat(e.customProperties,this.constructor.customProperties||[]);let n;const r=fo.NUM_FRACTION_DIGITS,{clipPath:s,fill:a,stroke:i,shadow:o,strokeDashArray:l,left:c,top:u,originX:d,originY:h,width:f,height:m,strokeWidth:p,strokeLineCap:g,strokeDashOffset:y,strokeLineJoin:x,strokeUniform:b,strokeMiterLimit:v,scaleX:w,scaleY:C,angle:S,flipX:j,flipY:k,opacity:N,visible:_,backgroundColor:T,fillRule:E,paintFirst:P,globalCompositeOperation:O,skewX:D,skewY:A}=this;s&&!s.excludeFromExport&&(n=s.toObject(t.concat("inverted","absolutePositioned")));const M=e=>Gl(e,r),L=lo(lo({},ql(this,t)),{},{type:this.constructor.type,version:No,originX:d,originY:h,left:M(c),top:M(u),width:M(f),height:M(m),fill:$l(a)?a.toObject():a,stroke:$l(i)?i.toObject():i,strokeWidth:M(p),strokeDashArray:l?l.concat():l,strokeLineCap:g,strokeDashOffset:y,strokeLineJoin:x,strokeUniform:b,strokeMiterLimit:M(v),scaleX:M(w),scaleY:M(C),angle:M(S),flipX:j,flipY:k,opacity:M(N),shadow:o?o.toObject():o,visible:_,backgroundColor:T,fillRule:E,paintFirst:P,globalCompositeOperation:O,skewX:M(D),skewY:M(A)},n?{clipPath:n}:null);return this.includeDefaultValues?L:this._removeDefaultValues(L)}toDatalessObject(e){return this.toObject(e)}_removeDefaultValues(e){const t=this.constructor.getDefaults(),n=Object.keys(t).length>0?t:Object.getPrototypeOf(this);return Xl(e,(e,t)=>{if(t===Lo||t===zo||"type"===t)return!0;const r=n[t];return e!==r&&!(Array.isArray(e)&&Array.isArray(r)&&0===e.length&&0===r.length)})}toString(){return"#<".concat(this.constructor.type,">")}static _fromObject(e){let t=co(e,td),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{extraParam:r}=n,s=co(n,nd);return Vl(t,s).then(e=>r?(delete e[r],new this(t[r],e)):new this(e))}static fromObject(e,t){return this._fromObject(e,t)}};io(rd,"stateProperties",Du),io(rd,"cacheProperties",Au),io(rd,"ownDefaults",Mu),io(rd,"type","FabricObject"),io(rd,"colorProperties",[tl,nl,"backgroundColor"]),io(rd,"customProperties",[]),il.setClass(rd),il.setClass(rd,"object");const sd=(e,t,n)=>(r,s,a,i)=>{const o=t(r,s,a,i);return o&&kc(e,lo(lo({},Dc(r,s,a,i)),n)),o};function ad(e){return(t,n,r,s)=>{const{target:a,originX:i,originY:o}=n,l=a.getRelativeCenterPoint(),c=a.translateToOriginPoint(l,i,o),u=e(t,n,r,s);return a.setPositionByOrigin(c,n.originX,n.originY),u}}const id=sd(qo,ad((e,t,n,r)=>{const s=Mc(t,t.originX,t.originY,n,r);if(_c(t.originX)===_c(Mo)||_c(t.originX)===_c(Ro)&&s.x<0||_c(t.originX)===_c(Lo)&&s.x>0){const{target:e}=t,n=e.strokeWidth/(e.strokeUniform?e.scaleX:1),r=Ec(t)?2:1,a=e.width,i=Math.abs(s.x*r/e.scaleX)-n;return e.set("width",Math.max(i,1)),a!==e.width}return!1}));function od(e,t,n,r,s){r=r||{};const a=this.sizeX||r.cornerSize||s.cornerSize,i=this.sizeY||r.cornerSize||s.cornerSize,o=void 0!==r.transparentCorners?r.transparentCorners:s.transparentCorners,l=o?nl:tl,c=!o&&(r.cornerStrokeColor||s.cornerStrokeColor);let u,d=t,h=n;e.save(),e.fillStyle=r.cornerColor||s.cornerColor||"",e.strokeStyle=r.cornerStrokeColor||s.cornerStrokeColor||"",a>i?(u=a,e.scale(1,i/a),h=n*a/i):i>a?(u=i,e.scale(a/i,1),d=t*i/a):u=a,e.beginPath(),e.arc(d,h,u/2,0,Eo,!1),e[l](),c&&e.stroke(),e.restore()}function ld(e,t,n,r,s){r=r||{};const a=this.sizeX||r.cornerSize||s.cornerSize,i=this.sizeY||r.cornerSize||s.cornerSize,o=void 0!==r.transparentCorners?r.transparentCorners:s.transparentCorners,l=o?nl:tl,c=!o&&(r.cornerStrokeColor||s.cornerStrokeColor),u=a/2,d=i/2;e.save(),e.fillStyle=r.cornerColor||s.cornerColor||"",e.strokeStyle=r.cornerStrokeColor||s.cornerStrokeColor||"",e.translate(t,n);const h=s.getTotalAngle();e.rotate(Nl(h)),e["".concat(l,"Rect")](-u,-d,a,i),c&&e.strokeRect(-u,-d,a,i),e.restore()}class cd{constructor(e){io(this,"visible",!0),io(this,"actionName",Qo),io(this,"angle",0),io(this,"x",0),io(this,"y",0),io(this,"offsetX",0),io(this,"offsetY",0),io(this,"sizeX",0),io(this,"sizeY",0),io(this,"touchSizeX",0),io(this,"touchSizeY",0),io(this,"cursorStyle","crosshair"),io(this,"withConnection",!1),Object.assign(this,e)}shouldActivate(e,t,n,r){var s;let{tl:a,tr:i,br:o,bl:l}=r;return(null===(s=t.canvas)||void 0===s?void 0:s.getActiveObject())===t&&t.isControlVisible(e)&&Zu.isPointInPolygon(n,[a,i,o,l])}getActionHandler(e,t,n){return this.actionHandler}getMouseDownHandler(e,t,n){return this.mouseDownHandler}getMouseUpHandler(e,t,n){return this.mouseUpHandler}cursorStyleHandler(e,t,n){return t.cursorStyle}getActionName(e,t,n){return t.actionName}getVisibility(e,t){var n,r;return null!==(n=null===(r=e._controlsVisibility)||void 0===r?void 0:r[t])&&void 0!==n?n:this.visible}setVisibility(e,t,n){this.visible=e}positionHandler(e,t,n,r){return new hl(this.x*e.x+this.offsetX,this.y*e.y+this.offsetY).transform(t)}calcCornerCoords(e,t,n,r,s,a){const i=Dl([Ll(n,r),zl({angle:e}),Fl((s?this.touchSizeX:this.sizeX)||t,(s?this.touchSizeY:this.sizeY)||t)]);return{tl:new hl(-.5,-.5).transform(i),tr:new hl(.5,-.5).transform(i),br:new hl(.5,.5).transform(i),bl:new hl(-.5,.5).transform(i)}}render(e,t,n,r,s){"circle"===((r=r||{}).cornerStyle||s.cornerStyle)?od.call(this,e,t,n,r,s):ld.call(this,e,t,n,r,s)}}const ud=(e,t,n)=>n.lockRotation?Tc:t.cursorStyle,dd=sd(Uo,ad((e,t,n,r)=>{let{target:s,ex:a,ey:i,theta:o,originX:l,originY:c}=t;const u=s.translateToOriginPoint(s.getRelativeCenterPoint(),l,c);if(Oc(s,"lockRotation"))return!1;const d=Math.atan2(i-u.y,a-u.x),h=Math.atan2(r-u.y,n-u.x);let f=_l(h-d+o);if(s.snapAngle&&s.snapAngle>0){const e=s.snapAngle,t=s.snapThreshold||e,n=Math.ceil(f/e)*e,r=Math.floor(f/e)*e;Math.abs(f-r)<t?f=r:Math.abs(f-n)<t&&(f=n)}f<0&&(f=360+f),f%=360;const m=s.angle!==f;return s.angle=f,m}));function hd(e,t){const n=t.canvas,r=e[n.uniScaleKey];return n.uniformScaling&&!r||!n.uniformScaling&&r}function fd(e,t,n){const r=Oc(e,"lockScalingX"),s=Oc(e,"lockScalingY");if(r&&s)return!0;if(!t&&(r||s)&&n)return!0;if(r&&"x"===t)return!0;if(s&&"y"===t)return!0;const{width:a,height:i,strokeWidth:o}=e;return 0===a&&0===o&&"y"!==t||0===i&&0===o&&"x"!==t}const md=["e","se","s","sw","w","nw","n","ne","e"],pd=(e,t,n)=>{const r=hd(e,n);if(fd(n,0!==t.x&&0===t.y?"x":0===t.x&&0!==t.y?"y":"",r))return Tc;const s=Ac(n,t);return"".concat(md[s],"-resize")};function gd(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const a=t.target,i=s.by,o=hd(e,a);let l,c,u,d,h,f;if(fd(a,i,o))return!1;if(t.gestureScale)c=t.scaleX*t.gestureScale,u=t.scaleY*t.gestureScale;else{if(l=Mc(t,t.originX,t.originY,n,r),h="y"!==i?Math.sign(l.x||t.signX||1):1,f="x"!==i?Math.sign(l.y||t.signY||1):1,t.signX||(t.signX=h),t.signY||(t.signY=f),Oc(a,"lockScalingFlip")&&(t.signX!==h||t.signY!==f))return!1;if(d=a._getTransformedDimensions(),o&&!i){const e=Math.abs(l.x)+Math.abs(l.y),{original:n}=t,r=e/(Math.abs(d.x*n.scaleX/a.scaleX)+Math.abs(d.y*n.scaleY/a.scaleY));c=n.scaleX*r,u=n.scaleY*r}else c=Math.abs(l.x*a.scaleX/d.x),u=Math.abs(l.y*a.scaleY/d.y);Ec(t)&&(c*=2,u*=2),t.signX!==h&&"y"!==i&&(t.originX=Pc(t.originX),c*=-1,t.signX=h),t.signY!==f&&"x"!==i&&(t.originY=Pc(t.originY),u*=-1,t.signY=f)}const m=a.scaleX,p=a.scaleY;return i?("x"===i&&a.set($o,c),"y"===i&&a.set(Jo,u)):(!Oc(a,"lockScalingX")&&a.set($o,c),!Oc(a,"lockScalingY")&&a.set(Jo,u)),m!==a.scaleX||p!==a.scaleY}const yd=sd(Wo,ad((e,t,n,r)=>gd(e,t,n,r))),xd=sd(Wo,ad((e,t,n,r)=>gd(e,t,n,r,{by:"x"}))),bd=sd(Wo,ad((e,t,n,r)=>gd(e,t,n,r,{by:"y"}))),vd=["target","ex","ey","skewingSide"],wd={x:{counterAxis:"y",scale:$o,skew:Zo,lockSkewing:"lockSkewingX",origin:"originX",flip:"flipX"},y:{counterAxis:"x",scale:Jo,skew:el,lockSkewing:"lockSkewingY",origin:"originY",flip:"flipY"}},Cd=["ns","nesw","ew","nwse"],Sd=(e,t,n)=>{if(0!==t.x&&Oc(n,"lockSkewingY"))return Tc;if(0!==t.y&&Oc(n,"lockSkewingX"))return Tc;const r=Ac(n,t)%4;return"".concat(Cd[r],"-resize")};function jd(e,t,n,r,s){const{target:a}=n,{counterAxis:i,origin:o,lockSkewing:l,skew:c,flip:u}=wd[e];if(Oc(a,l))return!1;const{origin:d,flip:h}=wd[i],f=_c(n[d])*(a[h]?-1:1),m=-Math.sign(f)*(a[u]?-1:1),p=-(0===a[c]&&Mc(n,Mo,Mo,r,s)[e]>0||a[c]>0?1:-1)*m*.5+.5,g=sd(Vo,ad((t,n,r,s)=>function(e,t,n){let{target:r,ex:s,ey:a,skewingSide:i}=t,o=co(t,vd);const{skew:l}=wd[e],c=n.subtract(new hl(s,a)).divide(new hl(r.scaleX,r.scaleY))[e],u=r[l],d=o[l],h=Math.tan(Nl(d)),f="y"===e?r._getTransformedDimensions({scaleX:1,scaleY:1,skewX:0}).x:r._getTransformedDimensions({scaleX:1,scaleY:1}).y,m=2*c*i/Math.max(f,1)+h,p=_l(Math.atan(m));r.set(l,p);const g=u!==r[l];if(g&&"y"===e){const{skewX:e,scaleX:t}=r,n=r._getTransformedDimensions({skewY:u}),s=r._getTransformedDimensions(),a=0!==e?n.x/s.x:1;1!==a&&r.set($o,a*t)}return g}(e,n,new hl(r,s))));return g(t,lo(lo({},n),{},{[o]:p,skewingSide:m}),r,s)}const kd=(e,t,n,r)=>jd("x",e,t,n,r),Nd=(e,t,n,r)=>jd("y",e,t,n,r);function _d(e,t){return e[t.canvas.altActionKey]}const Td=(e,t,n)=>{const r=_d(e,n);return 0===t.x?r?Zo:Jo:0===t.y?r?el:$o:""},Ed=(e,t,n)=>_d(e,n)?Sd(0,t,n):pd(e,t,n),Pd=(e,t,n,r)=>_d(e,t.target)?Nd(e,t,n,r):xd(e,t,n,r),Od=(e,t,n,r)=>_d(e,t.target)?kd(e,t,n,r):bd(e,t,n,r),Dd=()=>({ml:new cd({x:-.5,y:0,cursorStyleHandler:Ed,actionHandler:Pd,getActionName:Td}),mr:new cd({x:.5,y:0,cursorStyleHandler:Ed,actionHandler:Pd,getActionName:Td}),mb:new cd({x:0,y:.5,cursorStyleHandler:Ed,actionHandler:Od,getActionName:Td}),mt:new cd({x:0,y:-.5,cursorStyleHandler:Ed,actionHandler:Od,getActionName:Td}),tl:new cd({x:-.5,y:-.5,cursorStyleHandler:pd,actionHandler:yd}),tr:new cd({x:.5,y:-.5,cursorStyleHandler:pd,actionHandler:yd}),bl:new cd({x:-.5,y:.5,cursorStyleHandler:pd,actionHandler:yd}),br:new cd({x:.5,y:.5,cursorStyleHandler:pd,actionHandler:yd}),mtr:new cd({x:0,y:-.5,actionHandler:dd,cursorStyleHandler:ud,offsetY:-40,withConnection:!0,actionName:Yo})}),Ad=()=>({mr:new cd({x:.5,y:0,actionHandler:id,cursorStyleHandler:Ed,actionName:qo}),ml:new cd({x:-.5,y:0,actionHandler:id,cursorStyleHandler:Ed,actionName:qo})}),Md=()=>lo(lo({},Dd()),Ad());class Ld extends rd{static getDefaults(){return lo(lo({},super.getDefaults()),Ld.ownDefaults)}constructor(e){super(),Object.assign(this,this.constructor.createControls(),Ld.ownDefaults),this.setOptions(e)}static createControls(){return{controls:Dd()}}_updateCacheCanvas(){const e=this.canvas;if(this.noScaleCache&&e&&e._currentTransform){const t=e._currentTransform,n=t.target,r=t.action;if(this===n&&r&&r.startsWith(Qo))return!1}return super._updateCacheCanvas()}getActiveControl(){const e=this.__corner;return e?{key:e,control:this.controls[e],coord:this.oCoords[e]}:void 0}findControl(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.hasControls||!this.canvas)return;this.__corner=void 0;const n=Object.entries(this.oCoords);for(let r=n.length-1;r>=0;r--){const[s,a]=n[r],i=this.controls[s];if(i.shouldActivate(s,this,e,t?a.touchCorner:a.corner))return this.__corner=s,{key:s,control:i,coord:this.oCoords[s]}}}calcOCoords(){const e=this.getViewportTransform(),t=this.getCenterPoint(),n=Ll(t.x,t.y),r=zl({angle:this.getTotalAngle()-(this.group&&this.flipX?180:0)}),s=Ol(n,r),a=Ol(e,s),i=Ol(a,[1/e[0],0,0,1/e[3],0,0]),o=this.group?Ml(this.calcTransformMatrix()):void 0;o&&(o.scaleX=Math.abs(o.scaleX),o.scaleY=Math.abs(o.scaleY));const l=this._calculateCurrentDimensions(o),c={};return this.forEachControl((e,t)=>{const n=e.positionHandler(l,i,this,e);c[t]=Object.assign(n,this._calcCornerCoords(e,n))}),c}_calcCornerCoords(e,t){const n=this.getTotalAngle();return{corner:e.calcCornerCoords(n,this.cornerSize,t.x,t.y,!1,this),touchCorner:e.calcCornerCoords(n,this.touchCornerSize,t.x,t.y,!0,this)}}setCoords(){super.setCoords(),this.canvas&&(this.oCoords=this.calcOCoords())}forEachControl(e){for(const t in this.controls)e(this.controls[t],t,this)}drawSelectionBackground(e){if(!this.selectionBackgroundColor||this.canvas&&this.canvas._activeObject!==this)return;e.save();const t=this.getRelativeCenterPoint(),n=this._calculateCurrentDimensions(),r=this.getViewportTransform();e.translate(t.x,t.y),e.scale(1/r[0],1/r[3]),e.rotate(Nl(this.angle)),e.fillStyle=this.selectionBackgroundColor,e.fillRect(-n.x/2,-n.y/2,n.x,n.y),e.restore()}strokeBorders(e,t){e.strokeRect(-t.x/2,-t.y/2,t.x,t.y)}_drawBorders(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=lo({hasControls:this.hasControls,borderColor:this.borderColor,borderDashArray:this.borderDashArray},n);e.save(),e.strokeStyle=r.borderColor,this._setLineDash(e,r.borderDashArray),this.strokeBorders(e,t),r.hasControls&&this.drawControlsConnectingLines(e,t),e.restore()}_renderControls(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{hasBorders:n,hasControls:r}=this,s=lo({hasBorders:n,hasControls:r},t),a=this.getViewportTransform(),i=s.hasBorders,o=s.hasControls,l=Ol(a,this.calcTransformMatrix()),c=Ml(l);e.save(),e.translate(c.translateX,c.translateY),e.lineWidth=this.borderScaleFactor,this.group===this.parent&&(e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(c.angle-=180),e.rotate(Nl(this.group?c.angle:this.angle)),i&&this.drawBorders(e,c,t),o&&this.drawControls(e,t),e.restore()}drawBorders(e,t,n){let r;if(n&&n.forActiveSelection||this.group){const e=vc(this.width,this.height,Hl(t)),n=this.isStrokeAccountedForInDimensions()?fl:(this.strokeUniform?(new hl).scalarAdd(this.canvas?this.canvas.getZoom():1):new hl(t.scaleX,t.scaleY)).scalarMultiply(this.strokeWidth);r=e.add(n).scalarAdd(this.borderScaleFactor).scalarAdd(2*this.padding)}else r=this._calculateCurrentDimensions().scalarAdd(this.borderScaleFactor);this._drawBorders(e,r,n)}drawControlsConnectingLines(e,t){let n=!1;e.beginPath(),this.forEachControl((r,s)=>{r.withConnection&&r.getVisibility(this,s)&&(n=!0,e.moveTo(r.x*t.x,r.y*t.y),e.lineTo(r.x*t.x+r.offsetX,r.y*t.y+r.offsetY))}),n&&e.stroke()}drawControls(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.save();const n=this.getCanvasRetinaScaling(),{cornerStrokeColor:r,cornerDashArray:s,cornerColor:a}=this,i=lo({cornerStrokeColor:r,cornerDashArray:s,cornerColor:a},t);e.setTransform(n,0,0,n,0,0),e.strokeStyle=e.fillStyle=i.cornerColor,this.transparentCorners||(e.strokeStyle=i.cornerStrokeColor),this._setLineDash(e,i.cornerDashArray),this.forEachControl((t,n)=>{if(t.getVisibility(this,n)){const r=this.oCoords[n];t.render(e,r.x,r.y,i,this)}}),e.restore()}isControlVisible(e){return this.controls[e]&&this.controls[e].getVisibility(this,e)}setControlVisible(e,t){this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[e]=t}setControlsVisibility(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.entries(e).forEach(e=>{let[t,n]=e;return this.setControlVisible(t,n)})}clearContextTop(e){if(!this.canvas)return;const t=this.canvas.contextTop;if(!t)return;const n=this.canvas.viewportTransform;t.save(),t.transform(n[0],n[1],n[2],n[3],n[4],n[5]),this.transform(t);const r=this.width+4,s=this.height+4;return t.clearRect(-r/2,-s/2,r,s),e||t.restore(),t}onDeselect(e){return!1}onSelect(e){return!1}shouldStartDragging(e){return!1}onDragStart(e){return!1}canDrop(e){return!1}renderDragSourceEffect(e){}renderDropTargetEffect(e){}}function zd(e,t){return t.forEach(t=>{Object.getOwnPropertyNames(t.prototype).forEach(n=>{"constructor"!==n&&Object.defineProperty(e.prototype,n,Object.getOwnPropertyDescriptor(t.prototype,n)||Object.create(null))})}),e}io(Ld,"ownDefaults",{noScaleCache:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,cornerSize:13,touchCornerSize:24,transparentCorners:!0,cornerColor:"rgb(178,204,255)",cornerStrokeColor:"",cornerStyle:"rect",cornerDashArray:null,hasControls:!0,borderColor:"rgb(178,204,255)",borderDashArray:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,hasBorders:!0,selectionBackgroundColor:"",selectable:!0,evented:!0,perPixelTargetFind:!1,activeOn:"down",hoverCursor:null,moveCursor:null});class Fd extends Ld{}zd(Fd,[Xc]),il.setClass(Fd),il.setClass(Fd,"object");const Rd=(e,t,n,r)=>{const s=2*(r=Math.round(r))+1,{data:a}=e.getImageData(t-r,n-r,s,s);for(let i=3;i<a.length;i+=4)if(a[i]>0)return!1;return!0};class Id{constructor(e){this.options=e,this.strokeProjectionMagnitude=this.options.strokeWidth/2,this.scale=new hl(this.options.scaleX,this.options.scaleY),this.strokeUniformScalar=this.options.strokeUniform?new hl(1/this.options.scaleX,1/this.options.scaleY):new hl(1,1)}createSideVector(e,t){const n=bu(e,t);return this.options.strokeUniform?n.multiply(this.scale):n}projectOrthogonally(e,t,n){return this.applySkew(e.add(this.calcOrthogonalProjection(e,t,n)))}isSkewed(){return 0!==this.options.skewX||0!==this.options.skewY}applySkew(e){const t=new hl(e);return t.y+=t.x*Math.tan(Nl(this.options.skewY)),t.x+=t.y*Math.tan(Nl(this.options.skewX)),t}scaleUnitVector(e,t){return e.multiply(this.strokeUniformScalar).scalarMultiply(t)}}const Bd=new hl;class Hd extends Id{static getOrthogonalRotationFactor(e,t){const n=t?wu(e,t):Cu(e);return Math.abs(n)<To?-1:1}constructor(e,t,n,r){super(r),io(this,"AB",void 0),io(this,"AC",void 0),io(this,"alpha",void 0),io(this,"bisector",void 0),this.A=new hl(e),this.B=new hl(t),this.C=new hl(n),this.AB=this.createSideVector(this.A,this.B),this.AC=this.createSideVector(this.A,this.C),this.alpha=wu(this.AB,this.AC),this.bisector=Su(xu(this.AB.eq(Bd)?this.AC:this.AB,this.alpha/2))}calcOrthogonalProjection(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.strokeProjectionMagnitude;const r=this.createSideVector(e,t),s=ju(r),a=Hd.getOrthogonalRotationFactor(s,this.bisector);return this.scaleUnitVector(s,n*a)}projectBevel(){const e=[];return(this.alpha%Eo==0?[this.B]:[this.B,this.C]).forEach(t=>{e.push(this.projectOrthogonally(this.A,t)),e.push(this.projectOrthogonally(this.A,t,-this.strokeProjectionMagnitude))}),e}projectMiter(){const e=[],t=Math.abs(this.alpha),n=1/Math.sin(t/2),r=this.scaleUnitVector(this.bisector,-this.strokeProjectionMagnitude*n),s=this.options.strokeUniform?vu(this.scaleUnitVector(this.bisector,this.options.strokeMiterLimit)):this.options.strokeMiterLimit;return vu(r)/this.strokeProjectionMagnitude<=s&&e.push(this.applySkew(this.A.add(r))),e.push(...this.projectBevel()),e}projectRoundNoSkew(e,t){const n=[],r=new hl(Hd.getOrthogonalRotationFactor(this.bisector),Hd.getOrthogonalRotationFactor(new hl(this.bisector.y,this.bisector.x)));return[new hl(1,0).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(r),new hl(0,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(r)].forEach(r=>{_u(r,e,t)&&n.push(this.A.add(r))}),n}projectRoundWithSkew(e,t){const n=[],{skewX:r,skewY:s,scaleX:a,scaleY:i,strokeUniform:o}=this.options,l=new hl(Math.tan(Nl(r)),Math.tan(Nl(s))),c=this.strokeProjectionMagnitude,u=o?c/i/Math.sqrt(1/i**2+1/a**2*l.y**2):c/Math.sqrt(1+l.y**2),d=new hl(Math.sqrt(Math.max(c**2-u**2,0)),u),h=o?c/Math.sqrt(1+l.x**2*(1/i)**2/(1/a+1/a*l.x*l.y)**2):c/Math.sqrt(1+l.x**2/(1+l.x*l.y)**2),f=new hl(h,Math.sqrt(Math.max(c**2-h**2,0)));return[f,f.scalarMultiply(-1),d,d.scalarMultiply(-1)].map(e=>this.applySkew(o?e.multiply(this.strokeUniformScalar):e)).forEach(r=>{_u(r,e,t)&&n.push(this.applySkew(this.A).add(r))}),n}projectRound(){const e=[];e.push(...this.projectBevel());const t=this.alpha%Eo==0,n=this.applySkew(this.A),r=e[t?0:2].subtract(n),s=e[t?1:0].subtract(n),a=t?this.applySkew(this.AB.scalarMultiply(-1)):this.applySkew(this.bisector.multiply(this.strokeUniformScalar).scalarMultiply(-1)),i=ku(r,a)>0,o=i?r:s,l=i?s:r;return this.isSkewed()?e.push(...this.projectRoundWithSkew(o,l)):e.push(...this.projectRoundNoSkew(o,l)),e}projectPoints(){switch(this.options.strokeLineJoin){case"miter":return this.projectMiter();case"round":return this.projectRound();default:return this.projectBevel()}}project(){return this.projectPoints().map(e=>({originPoint:this.A,projectedPoint:e,angle:this.alpha,bisector:this.bisector}))}}class Wd extends Id{constructor(e,t,n){super(n),this.A=new hl(e),this.T=new hl(t)}calcOrthogonalProjection(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.strokeProjectionMagnitude;const r=this.createSideVector(e,t);return this.scaleUnitVector(ju(r),n)}projectButt(){return[this.projectOrthogonally(this.A,this.T,this.strokeProjectionMagnitude),this.projectOrthogonally(this.A,this.T,-this.strokeProjectionMagnitude)]}projectRound(){const e=[];if(!this.isSkewed()&&this.A.eq(this.T)){const t=new hl(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.applySkew(this.A.add(t)),this.applySkew(this.A.subtract(t)))}else e.push(...new Hd(this.A,this.T,this.T,this.options).projectRound());return e}projectSquare(){const e=[];if(this.A.eq(this.T)){const t=new hl(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.A.add(t),this.A.subtract(t))}else{const t=this.calcOrthogonalProjection(this.A,this.T,this.strokeProjectionMagnitude),n=this.scaleUnitVector(Su(this.createSideVector(this.A,this.T)),-this.strokeProjectionMagnitude),r=this.A.add(n);e.push(r.add(t),r.subtract(t))}return e.map(e=>this.applySkew(e))}projectPoints(){switch(this.options.strokeLineCap){case"round":return this.projectRound();case"square":return this.projectSquare();default:return this.projectButt()}}project(){return this.projectPoints().map(e=>({originPoint:this.A,projectedPoint:e}))}}const Ud=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=[];if(0===e.length)return r;const s=e.reduce((e,t)=>(e[e.length-1].eq(t)||e.push(new hl(t)),e),[new hl(e[0])]);if(1===s.length)n=!0;else if(!n){const e=s[0],t=((e,t)=>{for(let n=e.length-1;n>=0;n--)if(t(e[n]))return n;return-1})(s,t=>!t.eq(e));s.splice(t+1)}return s.forEach((e,s,a)=>{let i,o;0===s?(o=a[1],i=n?e:a[a.length-1]):s===a.length-1?(i=a[s-1],o=n?e:a[0]):(i=a[s-1],o=a[s+1]),n&&1===a.length?r.push(...new Wd(e,e,t).project()):!n||0!==s&&s!==a.length-1?r.push(...new Hd(e,i,o,t).project()):r.push(...new Wd(e,0===s?o:i,t).project())}),r},Yd=e=>{const t={};return Object.keys(e).forEach(n=>{t[n]={},Object.keys(e[n]).forEach(r=>{t[n][r]=lo({},e[n][r])})}),t},Vd=e=>e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;");let qd;const Xd=e=>{if(qd||qd||(qd="Intl"in So()&&"Segmenter"in Intl&&new Intl.Segmenter(void 0,{granularity:"grapheme"})),qd){const t=qd.segment(e);return Array.from(t).map(e=>{let{segment:t}=e;return t})}return Gd(e)},Gd=e=>{const t=[];for(let n,r=0;r<e.length;r++)!1!==(n=Kd(e,r))&&t.push(n);return t},Kd=(e,t)=>{const n=e.charCodeAt(t);if(isNaN(n))return"";if(n<55296||n>57343)return e.charAt(t);if(55296<=n&&n<=56319){if(e.length<=t+1)throw"High surrogate without following low surrogate";const n=e.charCodeAt(t+1);if(56320>n||n>57343)throw"High surrogate without following low surrogate";return e.charAt(t)+e.charAt(t+1)}if(0===t)throw"Low surrogate without preceding high surrogate";const r=e.charCodeAt(t-1);if(55296>r||r>56319)throw"Low surrogate without preceding high surrogate";return!1};var Qd=Object.freeze({__proto__:null,capitalize:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"".concat(e.charAt(0).toUpperCase()).concat(t?e.slice(1):e.slice(1).toLowerCase())},escapeXml:Vd,graphemeSplit:Xd});const $d=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e.fill!==t.fill||e.stroke!==t.stroke||e.strokeWidth!==t.strokeWidth||e.fontSize!==t.fontSize||e.fontFamily!==t.fontFamily||e.fontWeight!==t.fontWeight||e.fontStyle!==t.fontStyle||e.textDecorationThickness!==t.textDecorationThickness||e.textBackgroundColor!==t.textBackgroundColor||e.deltaY!==t.deltaY||n&&(e.overline!==t.overline||e.underline!==t.underline||e.linethrough!==t.linethrough)},Jd=(e,t)=>{const n=t.split("\n"),r=[];let s=-1,a={};e=Yd(e);for(let i=0;i<n.length;i++){const t=Xd(n[i]);if(e[i])for(let n=0;n<t.length;n++){s++;const t=e[i][n];t&&Object.keys(t).length>0&&($d(a,t,!0)?r.push({start:s,end:s+1,style:t}):r[r.length-1].end++),a=t||{}}else s+=t.length,a={}}return r},Zd=(e,t)=>{if(!Array.isArray(e))return Yd(e);const n=t.split(Bo),r={};let s=-1,a=0;for(let i=0;i<n.length;i++){const t=Xd(n[i]);for(let n=0;n<t.length;n++)s++,e[a]&&e[a].start<=s&&s<e[a].end&&(r[i]=r[i]||{},r[i][n]=lo({},e[a].style),s===e[a].end-1&&a++)}return r},eh=["display","transform",tl,"fill-opacity","fill-rule","opacity",nl,"stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"];function th(e,t){const n=e.nodeName,r=e.getAttribute("class"),s=e.getAttribute("id"),a="(?![a-zA-Z\\-]+)";let i;if(i=new RegExp("^"+n,"i"),t=t.replace(i,""),s&&t.length&&(i=new RegExp("#"+s+a,"i"),t=t.replace(i,"")),r&&t.length){const e=r.split(" ");for(let n=e.length;n--;)i=new RegExp("\\."+e[n]+a,"i"),t=t.replace(i,"")}return 0===t.length}function nh(e,t){let n=!0;const r=th(e,t.pop());return r&&t.length&&(n=function(e,t){let n,r=!0;for(;e.parentElement&&1===e.parentElement.nodeType&&t.length;)r&&(n=t.pop()),r=th(e=e.parentElement,n);return 0===t.length}(e,t)),r&&n&&0===t.length}const rh=e=>{var t;return null!==(t=hu[e])&&void 0!==t?t:e},sh=new RegExp("(".concat(cu,")"),"gi");var ah,ih,oh,lh,ch,uh,dh;const hh="(".concat(cu,")"),fh=String.raw(ah||(ah=uo(["(skewX)(",")"],["(skewX)\\(","\\)"])),hh),mh=String.raw(ih||(ih=uo(["(skewY)(",")"],["(skewY)\\(","\\)"])),hh),ph=String.raw(oh||(oh=uo(["(rotate)(","(?: "," ",")?)"],["(rotate)\\(","(?: "," ",")?\\)"])),hh,hh,hh),gh=String.raw(lh||(lh=uo(["(scale)(","(?: ",")?)"],["(scale)\\(","(?: ",")?\\)"])),hh,hh),yh=String.raw(ch||(ch=uo(["(translate)(","(?: ",")?)"],["(translate)\\(","(?: ",")?\\)"])),hh,hh),xh=String.raw(uh||(uh=uo(["(matrix)("," "," "," "," "," ",")"],["(matrix)\\("," "," "," "," "," ","\\)"])),hh,hh,hh,hh,hh,hh),bh="(?:".concat(xh,"|").concat(yh,"|").concat(ph,"|").concat(gh,"|").concat(fh,"|").concat(mh,")"),vh="(?:".concat(bh,"*)"),wh=String.raw(dh||(dh=uo(["^s*(?:","?)s*$"],["^\\s*(?:","?)\\s*$"])),vh),Ch=new RegExp(wh),Sh=new RegExp(bh),jh=new RegExp(bh,"g");function kh(e){const t=[];if(!(e=(e=>zc(e.replace(sh," $1 ").replace(/,/gi," ")))(e).replace(/\s*([()])\s*/gi,"$1"))||e&&!Ch.test(e))return[...Oo];for(const n of e.matchAll(jh)){const e=Sh.exec(n[0]);if(!e)continue;let r=Oo;const s=e.filter(e=>!!e),[,a,...i]=s,[o,l,c,u,d,h]=i.map(e=>parseFloat(e));switch(a){case"translate":r=Ll(o,l);break;case Yo:r=zl({angle:o},{x:l,y:c});break;case Qo:r=Fl(o,l);break;case Zo:r=Il(o);break;case el:r=Bl(o);break;case"matrix":r=[o,l,c,u,d,h]}t.push(r)}return Dl(t)}function Nh(e,t,n,r){const s=Array.isArray(t);let a,i=t;if(e!==tl&&e!==nl||t!==Io){if("strokeUniform"===e)return"non-scaling-stroke"===t;if("strokeDashArray"===e)i=t===Io?null:t.replace(/,/g," ").split(/\s+/).map(parseFloat);else if("transformMatrix"===e)i=n&&n.transformMatrix?Ol(n.transformMatrix,kh(t)):kh(t);else if("visible"===e)i=t!==Io&&"hidden"!==t,n&&!1===n.visible&&(i=!1);else if("opacity"===e)i=parseFloat(t),n&&void 0!==n.opacity&&(i*=n.opacity);else if("textAnchor"===e)i="start"===t?Lo:"end"===t?Ro:Mo;else if("charSpacing"===e||e===Kc)a=Yc(t,r)/r*1e3;else if("paintFirst"===e){const e=t.indexOf(tl),n=t.indexOf(nl);i=tl,(e>-1&&n>-1&&n<e||-1===e&&n>-1)&&(i=nl)}else{if("href"===e||"xlink:href"===e||"font"===e||"id"===e)return t;if("imageSmoothing"===e)return"optimizeQuality"===t;a=s?t.map(Yc):Yc(t,r)}}else i="";return!s&&isNaN(a)?i:a}function _h(e,t){e.replace(/;\s*$/,"").split(";").forEach(e=>{if(!e)return;const[n,r]=e.split(":");t[n.trim().toLowerCase()]=r.trim()})}const Th={stroke:"strokeOpacity",fill:"fillOpacity"};function Eh(e,t,n){if(!e)return{};let r,s={},a=Do;e.parentNode&&pu.test(e.parentNode.nodeName)&&(s=Eh(e.parentElement,t,n),s.fontSize&&(r=a=Yc(s.fontSize)));const i=lo(lo(lo({},t.reduce((t,n)=>{const r=e.getAttribute(n);return r&&(t[n]=r),t},{})),function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={};for(const r in t)nh(e,r.split(" "))&&(n=lo(lo({},n),t[r]));return n}(e,n)),function(e){const t={},n=e.getAttribute("style");return n?("string"==typeof n?_h(n,t):function(e,t){Object.entries(e).forEach(e=>{let[n,r]=e;void 0!==r&&(t[n.toLowerCase()]=r)})}(n,t),t):t}(e));i[mu]&&e.setAttribute(mu,i[mu]),i[fu]&&(r=Yc(i[fu],a),i[fu]="".concat(r));const o={};for(const c in i){const e=rh(c),t=Nh(e,i[c],s,r);o[e]=t}o&&o.font&&function(e,t){const n=e.match(du);if(!n)return;const r=n[1],s=n[3],a=n[4],i=n[5],o=n[6];r&&(t.fontStyle=r),s&&(t.fontWeight=isNaN(parseFloat(s))?s:parseFloat(s)),a&&(t.fontSize=Yc(a)),o&&(t.fontFamily=o),i&&(t.lineHeight="normal"===i?1:i)}(o.font,o);const l=lo(lo({},s),o);return pu.test(e.nodeName)?l:function(e){const t=Fd.getDefaults();return Object.entries(Th).forEach(n=>{let[r,s]=n;if(void 0===e[s]||""===e[r])return;if(void 0===e[r]){if(!t[r])return;e[r]=t[r]}if(0===e[r].indexOf("url("))return;const a=new Uc(e[r]);e[r]=a.setAlpha(Gl(a.getAlpha()*e[s],2)).toRgba()}),e}(l)}const Ph=["left","top","width","height","visible"],Oh=["rx","ry"];class Dh extends Fd{static getDefaults(){return lo(lo({},super.getDefaults()),Dh.ownDefaults)}constructor(e){super(),Object.assign(this,Dh.ownDefaults),this.setOptions(e),this._initRxRy()}_initRxRy(){const{rx:e,ry:t}=this;e&&!t?this.ry=e:t&&!e&&(this.rx=t)}_render(e){const{width:t,height:n}=this,r=-t/2,s=-n/2,a=this.rx?Math.min(this.rx,t/2):0,i=this.ry?Math.min(this.ry,n/2):0,o=0!==a||0!==i;e.beginPath(),e.moveTo(r+a,s),e.lineTo(r+t-a,s),o&&e.bezierCurveTo(r+t-Ao*a,s,r+t,s+Ao*i,r+t,s+i),e.lineTo(r+t,s+n-i),o&&e.bezierCurveTo(r+t,s+n-Ao*i,r+t-Ao*a,s+n,r+t-a,s+n),e.lineTo(r+a,s+n),o&&e.bezierCurveTo(r+Ao*a,s+n,r,s+n-Ao*i,r,s+n-i),e.lineTo(r,s+i),o&&e.bezierCurveTo(r,s+Ao*i,r+Ao*a,s,r+a,s),e.closePath(),this._renderPaintInOrder(e)}toObject(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return super.toObject([...Oh,...e])}_toSVG(){const{width:e,height:t,rx:n,ry:r}=this;return["<rect ","COMMON_PARTS",'x="'.concat(-e/2,'" y="').concat(-t/2,'" rx="').concat(n,'" ry="').concat(r,'" width="').concat(e,'" height="').concat(t,'" />\n')]}static async fromElement(e,t,n){const r=Eh(e,this.ATTRIBUTE_NAMES,n),{left:s=0,top:a=0,width:i=0,height:o=0,visible:l=!0}=r,c=co(r,Ph);return new this(lo(lo(lo({},t),c),{},{left:s,top:a,width:i,height:o,visible:Boolean(l&&i&&o)}))}}io(Dh,"type","Rect"),io(Dh,"cacheProperties",[...Au,...Oh]),io(Dh,"ownDefaults",{rx:0,ry:0}),io(Dh,"ATTRIBUTE_NAMES",[...eh,"x","y","rx","ry","width","height"]),il.setClass(Dh),il.setSVGClass(Dh);const Ah="initialization",Mh="added",Lh="removed",zh="imperative",Fh=(e,t)=>{const{strokeUniform:n,strokeWidth:r,width:s,height:a,group:i}=t,o=i&&i!==e?wc(i.calcTransformMatrix(),e.calcTransformMatrix()):null,l=o?t.getRelativeCenterPoint().transform(o):t.getRelativeCenterPoint(),c=!t.isStrokeAccountedForInDimensions(),u=n&&c?Sc(new hl(r,r),void 0,e.calcTransformMatrix()):fl,d=!n&&c?r:0,h=vc(s+d,a+d,Dl([o,t.calcOwnMatrix()],!0)).add(u).scalarDivide(2);return[l.subtract(h),l.add(h)]};class Rh{calcLayoutResult(e,t){if(this.shouldPerformLayout(e))return this.calcBoundingBox(t,e)}shouldPerformLayout(e){let{type:t,prevStrategy:n,strategy:r}=e;return t===Ah||t===zh||!!n&&r!==n}shouldLayoutClipPath(e){let{type:t,target:{clipPath:n}}=e;return t!==Ah&&n&&!n.absolutePositioned}getInitialSize(e,t){return t.size}calcBoundingBox(e,t){const{type:n,target:r}=t;if(n===zh&&t.overrides)return t.overrides;if(0===e.length)return;const{left:s,top:a,width:i,height:o}=mc(e.map(e=>Fh(r,e)).reduce((e,t)=>e.concat(t),[])),l=new hl(i,o),c=new hl(s,a).add(l.scalarDivide(2));if(n===Ah){const e=this.getInitialSize(t,{size:l,center:c});return{center:c,relativeCorrection:new hl(0,0),size:e}}return{center:c.transform(r.calcOwnMatrix()),size:l}}}io(Rh,"type","strategy");class Ih extends Rh{shouldPerformLayout(e){return!0}}io(Ih,"type","fit-content"),il.setClass(Ih);const Bh=["strategy"],Hh=["target","strategy","bubbles","prevStrategy"],Wh="layoutManager";class Uh{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ih;io(this,"strategy",void 0),this.strategy=e,this._subscriptions=new Map}performLayout(e){const t=lo(lo({bubbles:!0,strategy:this.strategy},e),{},{prevStrategy:this._prevLayoutStrategy,stopPropagation(){this.bubbles=!1}});this.onBeforeLayout(t);const n=this.getLayoutResult(t);n&&this.commitLayout(t,n),this.onAfterLayout(t,n),this._prevLayoutStrategy=t.strategy}attachHandlers(e,t){const{target:n}=t;return[rl,Ho,qo,Uo,Wo,Vo,Ko,Xo,Go].map(t=>e.on(t,e=>this.performLayout(t===rl?{type:"object_modified",trigger:t,e:e,target:n}:{type:"object_modifying",trigger:t,e:e,target:n})))}subscribe(e,t){this.unsubscribe(e,t);const n=this.attachHandlers(e,t);this._subscriptions.set(e,n)}unsubscribe(e,t){(this._subscriptions.get(e)||[]).forEach(e=>e()),this._subscriptions.delete(e)}unsubscribeTargets(e){e.targets.forEach(t=>this.unsubscribe(t,e))}subscribeTargets(e){e.targets.forEach(t=>this.subscribe(t,e))}onBeforeLayout(e){const{target:t,type:n}=e,{canvas:r}=t;if(n===Ah||n===Mh?this.subscribeTargets(e):n===Lh&&this.unsubscribeTargets(e),t.fire("layout:before",{context:e}),r&&r.fire("object:layout:before",{target:t,context:e}),n===zh&&e.deep){const n=co(e,Bh);t.forEachObject(e=>e.layoutManager&&e.layoutManager.performLayout(lo(lo({},n),{},{bubbles:!1,target:e})))}}getLayoutResult(e){const{target:t,strategy:n,type:r}=e,s=n.calcLayoutResult(e,t.getObjects());if(!s)return;const a=r===Ah?new hl:t.getRelativeCenterPoint(),{center:i,correction:o=new hl,relativeCorrection:l=new hl}=s,c=a.subtract(i).add(o).transform(r===Ah?Oo:Pl(t.calcOwnMatrix()),!0).add(l);return{result:s,prevCenter:a,nextCenter:i,offset:c}}commitLayout(e,t){const{target:n}=e,{result:{size:r},nextCenter:s}=t;var a,i;n.set({width:r.x,height:r.y}),this.layoutObjects(e,t),e.type===Ah?n.set({left:null!==(a=e.x)&&void 0!==a?a:s.x+r.x*_c(n.originX),top:null!==(i=e.y)&&void 0!==i?i:s.y+r.y*_c(n.originY)}):(n.setPositionByOrigin(s,Mo,Mo),n.setCoords(),n.set("dirty",!0))}layoutObjects(e,t){const{target:n}=e;n.forEachObject(r=>{r.group===n&&this.layoutObject(e,t,r)}),e.strategy.shouldLayoutClipPath(e)&&this.layoutObject(e,t,n.clipPath)}layoutObject(e,t,n){let{offset:r}=t;n.set({left:n.left+r.x,top:n.top+r.y})}onAfterLayout(e,t){const{target:n,strategy:r,bubbles:s,prevStrategy:a}=e,i=co(e,Hh),{canvas:o}=n;n.fire("layout:after",{context:e,result:t}),o&&o.fire("object:layout:after",{context:e,result:t,target:n});const l=n.parent;s&&null!=l&&l.layoutManager&&((i.path||(i.path=[])).push(n),l.layoutManager.performLayout(lo(lo({},i),{},{target:l}))),n.set("dirty",!0)}dispose(){const{_subscriptions:e}=this;e.forEach(e=>e.forEach(e=>e())),e.clear()}toObject(){return{type:Wh,strategy:this.strategy.constructor.type}}toJSON(){return this.toObject()}}il.setClass(Uh,Wh);const Yh=["type","objects","layoutManager"];class Vh extends Uh{performLayout(){}}class qh extends(pl(Fd)){static getDefaults(){return lo(lo({},super.getDefaults()),qh.ownDefaults)}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),io(this,"_activeObjects",[]),io(this,"__objectSelectionTracker",void 0),io(this,"__objectSelectionDisposer",void 0),Object.assign(this,qh.ownDefaults),this.setOptions(t),this.groupInit(e,t)}groupInit(e,t){var n;this._objects=[...e],this.__objectSelectionTracker=this.__objectSelectionMonitor.bind(this,!0),this.__objectSelectionDisposer=this.__objectSelectionMonitor.bind(this,!1),this.forEachObject(e=>{this.enterGroup(e,!1)}),this.layoutManager=null!==(n=t.layoutManager)&&void 0!==n?n:new Uh,this.layoutManager.performLayout({type:Ah,target:this,targets:[...e],x:t.left,y:t.top})}canEnterGroup(e){return e===this||this.isDescendantOf(e)?(mo("error","Group: circular object trees are not supported, this call has no effect"),!1):-1===this._objects.indexOf(e)||(mo("error","Group: duplicate objects are not supported inside group, this call has no effect"),!1)}_filterObjectsBeforeEnteringGroup(e){return e.filter((e,t,n)=>this.canEnterGroup(e)&&n.indexOf(e)===t)}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=this._filterObjectsBeforeEnteringGroup(t),s=super.add(...r);return this._onAfterObjectsChange(Mh,r),s}insertAt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=this._filterObjectsBeforeEnteringGroup(n),a=super.insertAt(e,...s);return this._onAfterObjectsChange(Mh,s),a}remove(){const e=super.remove(...arguments);return this._onAfterObjectsChange(Lh,e),e}_onObjectAdded(e){this.enterGroup(e,!0),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e,t){this.exitGroup(e,t),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onAfterObjectsChange(e,t){this.layoutManager.performLayout({type:e,targets:t,target:this})}_onStackOrderChanged(){this._set("dirty",!0)}_set(e,t){const n=this[e];return super._set(e,t),"canvas"===e&&n!==t&&(this._objects||[]).forEach(n=>{n._set(e,t)}),this}_shouldSetNestedCoords(){return this.subTargetCheck}removeAll(){return this._activeObjects=[],this.remove(...this._objects)}__objectSelectionMonitor(e,t){let{target:n}=t;const r=this._activeObjects;if(e)r.push(n),this._set("dirty",!0);else if(r.length>0){const e=r.indexOf(n);e>-1&&(r.splice(e,1),this._set("dirty",!0))}}_watchObject(e,t){e&&this._watchObject(!1,t),e?(t.on("selected",this.__objectSelectionTracker),t.on("deselected",this.__objectSelectionDisposer)):(t.off("selected",this.__objectSelectionTracker),t.off("deselected",this.__objectSelectionDisposer))}enterGroup(e,t){e.group&&e.group.remove(e),e._set("parent",this),this._enterGroup(e,t)}_enterGroup(e,t){t&&yc(e,Ol(Pl(this.calcTransformMatrix()),e.calcTransformMatrix())),this._shouldSetNestedCoords()&&e.setCoords(),e._set("group",this),e._set("canvas",this.canvas),this._watchObject(!0,e);const n=this.canvas&&this.canvas.getActiveObject&&this.canvas.getActiveObject();n&&(n===e||e.isDescendantOf(n))&&this._activeObjects.push(e)}exitGroup(e,t){this._exitGroup(e,t),e._set("parent",void 0),e._set("canvas",void 0)}_exitGroup(e,t){e._set("group",void 0),t||(yc(e,Ol(this.calcTransformMatrix(),e.calcTransformMatrix())),e.setCoords()),this._watchObject(!1,e);const n=this._activeObjects.length>0?this._activeObjects.indexOf(e):-1;n>-1&&this._activeObjects.splice(n,1)}shouldCache(){const e=Fd.prototype.shouldCache.call(this);if(e)for(let t=0;t<this._objects.length;t++)if(this._objects[t].willDrawShadow())return this.ownCaching=!1,!1;return e}willDrawShadow(){if(super.willDrawShadow())return!0;for(let e=0;e<this._objects.length;e++)if(this._objects[e].willDrawShadow())return!0;return!1}isOnACache(){return this.ownCaching||!!this.parent&&this.parent.isOnACache()}drawObject(e,t,n){this._renderBackground(e);for(let s=0;s<this._objects.length;s++){var r;const t=this._objects[s];null!==(r=this.canvas)&&void 0!==r&&r.preserveObjectStacking&&t.group!==this?(e.save(),e.transform(...Pl(this.calcTransformMatrix())),t.render(e),e.restore()):t.group===this&&t.render(e)}this._drawClipPath(e,this.clipPath,n)}setCoords(){super.setCoords(),this._shouldSetNestedCoords()&&this.forEachObject(e=>e.setCoords())}triggerLayout(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.layoutManager.performLayout(lo({target:this,type:zh},e))}render(e){this._transformDone=!0,super.render(e),this._transformDone=!1}__serializeObjects(e,t){const n=this.includeDefaultValues;return this._objects.filter(function(e){return!e.excludeFromExport}).map(function(r){const s=r.includeDefaultValues;r.includeDefaultValues=n;const a=r[e||"toObject"](t);return r.includeDefaultValues=s,a})}toObject(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=this.layoutManager.toObject();return lo(lo(lo({},super.toObject(["subTargetCheck","interactive",...e])),"fit-content"!==t.strategy||this.includeDefaultValues?{layoutManager:t}:{}),{},{objects:this.__serializeObjects("toObject",e)})}toString(){return"#<Group: (".concat(this.complexity(),")>")}dispose(){this.layoutManager.unsubscribeTargets({targets:this.getObjects(),target:this}),this._activeObjects=[],this.forEachObject(e=>{this._watchObject(!1,e),e.dispose()}),super.dispose()}_createSVGBgRect(e){if(!this.backgroundColor)return"";const t=Dh.prototype._toSVG.call(this),n=t.indexOf("COMMON_PARTS");t[n]='for="group" ';const r=t.join("");return e?e(r):r}_toSVG(e){const t=["<g ","COMMON_PARTS"," >\n"],n=this._createSVGBgRect(e);n&&t.push("\t\t",n);for(let r=0;r<this._objects.length;r++)t.push("\t\t",this._objects[r].toSVG(e));return t.push("</g>\n"),t}getSvgStyles(){const e=void 0!==this.opacity&&1!==this.opacity?"opacity: ".concat(this.opacity,";"):"",t=this.visible?"":" visibility: hidden;";return[e,this.getSvgFilter(),t].join("")}toClipPathSVG(e){const t=[],n=this._createSVGBgRect(e);n&&t.push("\t",n);for(let r=0;r<this._objects.length;r++)t.push("\t",this._objects[r].toClipPathSVG(e));return this._createBaseClipPathSVGMarkup(t,{reviver:e})}static fromObject(e,t){let{type:n,objects:r=[],layoutManager:s}=e,a=co(e,Yh);return Promise.all([Yl(r,t),Vl(a,t)]).then(e=>{let[t,n]=e;const r=new this(t,lo(lo(lo({},a),n),{},{layoutManager:new Vh}));if(s){const e=il.getClass(s.type),t=il.getClass(s.strategy);r.layoutManager=new e(new t)}else r.layoutManager=new Uh;return r.layoutManager.subscribeTargets({type:Ah,target:r,targets:r.getObjects()}),r.setCoords(),r})}}io(qh,"type","Group"),io(qh,"ownDefaults",{strokeWidth:0,subTargetCheck:!1,interactive:!1}),il.setClass(qh);const Xh=(e,t)=>Math.min(t.width/e.width,t.height/e.height),Gh=(e,t)=>Math.max(t.width/e.width,t.height/e.height),Kh="\\s*,?\\s*",Qh="".concat(Kh,"(").concat(cu,")"),$h="".concat(Qh).concat(Qh).concat(Qh).concat(Kh,"([01])").concat(Kh,"([01])").concat(Qh).concat(Qh),Jh={m:"l",M:"L"},Zh=(e,t,n,r,s,a,i,o,l,c,u)=>{const d=ul(e),h=dl(e),f=ul(t),m=dl(t),p=n*s*f-r*a*m+i,g=r*s*f+n*a*m+o;return["C",c+l*(-n*s*h-r*a*d),u+l*(-r*s*h+n*a*d),p+l*(n*s*m+r*a*f),g+l*(r*s*m-n*a*f),p,g]},ef=(e,t,n,r)=>{const s=Math.atan2(t,e),a=Math.atan2(r,n);return a>=s?a-s:2*Math.PI-(s-a)};function tf(e,t,n,r,s,a,i,o){let l;if(fo.cachesBoundsOfCurve&&(l=[...arguments].join(),ko.boundsOfCurveCache[l]))return ko.boundsOfCurveCache[l];const c=Math.sqrt,u=Math.abs,d=[],h=[[0,0],[0,0]];let f=6*e-12*n+6*s,m=-3*e+9*n-9*s+3*i,p=3*n-3*e;for(let v=0;v<2;++v){if(v>0&&(f=6*t-12*r+6*a,m=-3*t+9*r-9*a+3*o,p=3*r-3*t),u(m)<1e-12){if(u(f)<1e-12)continue;const e=-p/f;0<e&&e<1&&d.push(e);continue}const e=f*f-4*p*m;if(e<0)continue;const n=c(e),s=(-f+n)/(2*m);0<s&&s<1&&d.push(s);const i=(-f-n)/(2*m);0<i&&i<1&&d.push(i)}let g=d.length;const y=g,x=af(e,t,n,r,s,a,i,o);for(;g--;){const{x:e,y:t}=x(d[g]);h[0][g]=e,h[1][g]=t}h[0][y]=e,h[1][y]=t,h[0][y+1]=i,h[1][y+1]=o;const b=[new hl(Math.min(...h[0]),Math.min(...h[1])),new hl(Math.max(...h[0]),Math.max(...h[1]))];return fo.cachesBoundsOfCurve&&(ko.boundsOfCurveCache[l]=b),b}const nf=(e,t,n)=>{let[r,s,a,i,o,l,c,u]=n;const d=((e,t,n,r,s,a,i)=>{if(0===n||0===r)return[];let o=0,l=0,c=0;const u=Math.PI,d=i*Po,h=dl(d),f=ul(d),m=.5*(-f*e-h*t),p=.5*(-f*t+h*e),g=n**2,y=r**2,x=p**2,b=m**2,v=g*y-g*x-y*b;let w=Math.abs(n),C=Math.abs(r);if(v<0){const e=Math.sqrt(1-v/(g*y));w*=e,C*=e}else c=(s===a?-1:1)*Math.sqrt(v/(g*x+y*b));const S=c*w*p/C,j=-c*C*m/w,k=f*S-h*j+.5*e,N=h*S+f*j+.5*t;let _=ef(1,0,(m-S)/w,(p-j)/C),T=ef((m-S)/w,(p-j)/C,(-m-S)/w,(-p-j)/C);0===a&&T>0?T-=2*u:1===a&&T<0&&(T+=2*u);const E=Math.ceil(Math.abs(T/u*2)),P=[],O=T/E,D=8/3*Math.sin(O/4)*Math.sin(O/4)/Math.sin(O/2);let A=_+O;for(let M=0;M<E;M++)P[M]=Zh(_,A,f,h,w,C,k,N,D,o,l),o=P[M][5],l=P[M][6],_=A,A+=O;return P})(c-e,u-t,s,a,o,l,i);for(let h=0,f=d.length;h<f;h++)d[h][1]+=e,d[h][2]+=t,d[h][3]+=e,d[h][4]+=t,d[h][5]+=e,d[h][6]+=t;return d},rf=e=>{let t=0,n=0,r=0,s=0;const a=[];let i,o=0,l=0;for(const c of e){const e=[...c];let u;switch(e[0]){case"l":e[1]+=t,e[2]+=n;case"L":t=e[1],n=e[2],u=["L",t,n];break;case"h":e[1]+=t;case"H":t=e[1],u=["L",t,n];break;case"v":e[1]+=n;case"V":n=e[1],u=["L",t,n];break;case"m":e[1]+=t,e[2]+=n;case"M":t=e[1],n=e[2],r=e[1],s=e[2],u=["M",t,n];break;case"c":e[1]+=t,e[2]+=n,e[3]+=t,e[4]+=n,e[5]+=t,e[6]+=n;case"C":o=e[3],l=e[4],t=e[5],n=e[6],u=["C",e[1],e[2],o,l,t,n];break;case"s":e[1]+=t,e[2]+=n,e[3]+=t,e[4]+=n;case"S":"C"===i?(o=2*t-o,l=2*n-l):(o=t,l=n),t=e[3],n=e[4],u=["C",o,l,e[1],e[2],t,n],o=u[3],l=u[4];break;case"q":e[1]+=t,e[2]+=n,e[3]+=t,e[4]+=n;case"Q":o=e[1],l=e[2],t=e[3],n=e[4],u=["Q",o,l,t,n];break;case"t":e[1]+=t,e[2]+=n;case"T":"Q"===i?(o=2*t-o,l=2*n-l):(o=t,l=n),t=e[1],n=e[2],u=["Q",o,l,t,n];break;case"a":e[6]+=t,e[7]+=n;case"A":nf(t,n,e).forEach(e=>a.push(e)),t=e[6],n=e[7];break;case"z":case"Z":t=r,n=s,u=["Z"]}u?(a.push(u),i=u[0]):i=""}return a},sf=(e,t,n,r)=>Math.sqrt((n-e)**2+(r-t)**2),af=(e,t,n,r,s,a,i,o)=>l=>{const c=l**3,u=(e=>3*e**2*(1-e))(l),d=(e=>3*e*(1-e)**2)(l),h=(e=>(1-e)**3)(l);return new hl(i*c+s*u+n*d+e*h,o*c+a*u+r*d+t*h)},of=e=>e**2,lf=e=>2*e*(1-e),cf=e=>(1-e)**2,uf=(e,t,n,r,s,a,i,o)=>l=>{const c=of(l),u=lf(l),d=cf(l),h=3*(d*(n-e)+u*(s-n)+c*(i-s)),f=3*(d*(r-t)+u*(a-r)+c*(o-a));return Math.atan2(f,h)},df=(e,t,n,r,s,a)=>i=>{const o=of(i),l=lf(i),c=cf(i);return new hl(s*o+n*l+e*c,a*o+r*l+t*c)},hf=(e,t,n,r,s,a)=>i=>{const o=1-i,l=2*(o*(n-e)+i*(s-n)),c=2*(o*(r-t)+i*(a-r));return Math.atan2(c,l)},ff=(e,t,n)=>{let r=new hl(t,n),s=0;for(let a=1;a<=100;a+=1){const t=e(a/100);s+=sf(r.x,r.y,t.x,t.y),r=t}return s},mf=e=>{let t,n,r=0,s=0,a=0,i=0,o=0;const l=[];for(const c of e){const e={x:s,y:a,command:c[0],length:0};switch(c[0]){case"M":n=e,n.x=i=s=c[1],n.y=o=a=c[2];break;case"L":n=e,n.length=sf(s,a,c[1],c[2]),s=c[1],a=c[2];break;case"C":t=af(s,a,c[1],c[2],c[3],c[4],c[5],c[6]),n=e,n.iterator=t,n.angleFinder=uf(s,a,c[1],c[2],c[3],c[4],c[5],c[6]),n.length=ff(t,s,a),s=c[5],a=c[6];break;case"Q":t=df(s,a,c[1],c[2],c[3],c[4]),n=e,n.iterator=t,n.angleFinder=hf(s,a,c[1],c[2],c[3],c[4]),n.length=ff(t,s,a),s=c[3],a=c[4];break;case"Z":n=e,n.destX=i,n.destY=o,n.length=sf(s,a,i,o),s=i,a=o}r+=n.length,l.push(n)}return l.push({length:r,x:s,y:a}),l},pf=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:mf(e),r=0;for(;t-n[r].length>0&&r<n.length-2;)t-=n[r].length,r++;const s=n[r],a=t/s.length,i=e[r];switch(s.command){case"M":return{x:s.x,y:s.y,angle:0};case"Z":return lo(lo({},new hl(s.x,s.y).lerp(new hl(s.destX,s.destY),a)),{},{angle:Math.atan2(s.destY-s.y,s.destX-s.x)});case"L":return lo(lo({},new hl(s.x,s.y).lerp(new hl(i[1],i[2]),a)),{},{angle:Math.atan2(i[2]-s.y,i[1]-s.x)});case"C":case"Q":return((e,t)=>{let n,r=0,s=0,a={x:e.x,y:e.y},i=lo({},a),o=.01,l=0;const c=e.iterator,u=e.angleFinder;for(;s<t&&o>1e-4;)i=c(r),l=r,n=sf(a.x,a.y,i.x,i.y),n+s>t?(r-=o,o/=2):(a=i,r+=o,s+=n);return lo(lo({},i),{},{angle:u(l)})})(s,t)}},gf=new RegExp("[mzlhvcsqta][^mzlhvcsqta]*","gi"),yf=new RegExp($h,"g"),xf=new RegExp(cu,"gi"),bf={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},vf=e=>{var t;const n=[],r=null!==(t=e.match(gf))&&void 0!==t?t:[];for(const s of r){const e=s[0];if("z"===e||"Z"===e){n.push([e]);continue}const t=bf[e.toLowerCase()];let r=[];if("a"===e||"A"===e){yf.lastIndex=0;for(let e=null;e=yf.exec(s);)r.push(...e.slice(1))}else r=s.match(xf)||[];for(let s=0;s<r.length;s+=t){const a=new Array(t),i=Jh[e];a[0]=s>0&&i?i:e;for(let e=0;e<t;e++)a[e+1]=parseFloat(r[s+e]);n.push(a)}}return n},wf=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=new hl(e[0]),r=new hl(e[1]),s=1,a=0;const i=[],o=e.length,l=o>2;let c;for(l&&(s=e[2].x<r.x?-1:e[2].x===r.x?0:1,a=e[2].y<r.y?-1:e[2].y===r.y?0:1),i.push(["M",n.x-s*t,n.y-a*t]),c=1;c<o;c++){if(!n.eq(r)){const e=n.midPointFrom(r);i.push(["Q",n.x,n.y,e.x,e.y])}n=e[c],c+1<e.length&&(r=e[c+1])}return l&&(s=n.x>e[c-2].x?1:n.x===e[c-2].x?0:-1,a=n.y>e[c-2].y?1:n.y===e[c-2].y?0:-1),i.push(["L",n.x+s*t,n.y+a*t]),i},Cf=(e,t)=>e.map(e=>e.map((e,n)=>0===n||void 0===t?e:Gl(e,t)).join(" ")).join(" ");function Sf(e,t){const n=e.style;n&&t&&("string"==typeof t?n.cssText+=";"+t:Object.entries(t).forEach(e=>{let[t,r]=e;return n.setProperty(t,r)}))}const jf=(e,t)=>Math.floor(Math.random()*(t-e+1))+e;function kf(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=t.onComplete||_o,r=new(So().XMLHttpRequest),s=t.signal,a=function(){r.abort()},i=function(){s&&s.removeEventListener("abort",a),r.onerror=r.ontimeout=_o};if(s&&s.aborted)throw new go("request");return s&&s.addEventListener("abort",a,{once:!0}),r.onreadystatechange=function(){4===r.readyState&&(i(),n(r),r.onreadystatechange=_o)},r.onerror=r.ontimeout=i,r.open("get",e,!0),r.send(),r}const Nf=(e,t)=>{let n=e._findCenterFromElement();e.transformMatrix&&((e=>{if(e.transformMatrix){const{scaleX:t,scaleY:n,angle:r,skewX:s}=Ml(e.transformMatrix);e.flipX=!1,e.flipY=!1,e.set($o,t),e.set(Jo,n),e.angle=r,e.skewX=s,e.skewY=0}})(e),n=n.transform(e.transformMatrix)),delete e.transformMatrix,t&&(e.scaleX*=t.scaleX,e.scaleY*=t.scaleY,e.cropX=t.cropX,e.cropY=t.cropY,n.x+=t.offsetLeft,n.y+=t.offsetTop,e.width=t.width,e.height=t.height),e.setPositionByOrigin(n,Mo,Mo)};Object.freeze({__proto__:null,addTransformToObject:gc,animate:$u,animateColor:Ju,applyTransformToObject:yc,calcAngleBetweenVectors:wu,calcDimensionsMatrix:Hl,calcPlaneChangeMatrix:wc,calcVectorRotation:Cu,cancelAnimFrame:xl,capValue:Ou,composeMatrix:Wl,copyCanvasElement:e=>{var t;const n=Sl(e);return null===(t=n.getContext("2d"))||void 0===t||t.drawImage(e,0,0),n},cos:ul,createCanvasElement:wl,createImage:Cl,createRotateMatrix:zl,createScaleMatrix:Fl,createSkewXMatrix:Il,createSkewYMatrix:Bl,createTranslateMatrix:Ll,createVector:bu,crossProduct:ku,degreesToRadians:Nl,dotProduct:Nu,ease:Bu,enlivenObjectEnlivables:Vl,enlivenObjects:Yl,findScaleToCover:Gh,findScaleToFit:Xh,getBoundsOfCurve:tf,getOrthonormalVector:ju,getPathSegmentsInfo:mf,getPointOnPath:pf,getPointer:dc,getRandomInt:jf,getRegularPolygonPath:(e,t)=>{const n=2*Math.PI/e;let r=-To;e%2==0&&(r+=n/2);const s=new Array(e+1);for(let a=0;a<e;a++){const e=a*n+r,{x:i,y:o}=new hl(ul(e),dl(e)).scalarMultiply(t);s[a]=[0===a?"M":"L",i,o]}return s[e]=["Z"],s},getSmoothPathFromPoints:wf,getSvgAttributes:e=>{const t=["instantiated_by_use","style","id","class"];switch(e){case"linearGradient":return t.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);case"radialGradient":return t.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);case"stop":return t.concat(["offset","stop-color","stop-opacity"])}return t},getUnitVector:Su,groupSVGElements:(e,t)=>e&&1===e.length?e[0]:new qh(e,t),hasStyleChanged:$d,invertTransform:Pl,isBetweenVectors:_u,isIdentityMatrix:Tl,isTouchEvent:hc,isTransparent:Rd,joinPath:Cf,loadImage:Ul,magnitude:vu,makeBoundingBoxFromPoints:mc,makePathSimpler:rf,matrixToSVG:Kl,mergeClipPaths:(e,t)=>{var n;let r=e,s=t;r.inverted&&!s.inverted&&(r=t,s=e),jc(s,null===(n=s.group)||void 0===n?void 0:n.calcTransformMatrix(),r.calcTransformMatrix());const a=r.inverted&&s.inverted;return a&&(r.inverted=s.inverted=!1),new qh([r],{clipPath:s,inverted:a})},multiplyTransformMatrices:Ol,multiplyTransformMatrixArray:Dl,parsePath:vf,parsePreserveAspectRatioAttribute:Vc,parseUnit:Yc,pick:ql,projectStrokeOnPoints:Ud,qrDecompose:Ml,radiansToDegrees:_l,removeFromArray:cl,removeTransformFromObject:(e,t)=>{const n=Pl(t),r=Ol(n,e.calcOwnMatrix());yc(e,r)},removeTransformMatrixForSvgParsing:Nf,request:kf,requestAnimFrame:yl,resetObjectTransform:xc,rotatePoint:(e,t,n)=>e.rotate(n,t),rotateVector:xu,saveObjectTransform:bc,sendObjectToPlane:jc,sendPointToPlane:Cc,sendVectorToPlane:Sc,setStyle:Sf,sin:dl,sizeAfterTransform:vc,string:Qd,stylesFromArray:Zd,stylesToArray:Jd,toBlob:kl,toDataURL:jl,toFixed:Gl,transformPath:(e,t,n)=>(n&&(t=Ol(t,[1,0,0,1,-n.x,-n.y])),e.map(e=>{const n=[...e];for(let r=1;r<e.length-1;r+=2){const{x:s,y:a}=El({x:e[r],y:e[r+1]},t);n[r]=s,n[r+1]=a}return n})),transformPoint:El});class _f extends ic{constructor(e){let{allowTouchScrolling:t=!1,containerClass:n=""}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e),io(this,"upper",void 0),io(this,"container",void 0);const{el:r}=this.lower,s=this.createUpperCanvas();this.upper={el:s,ctx:s.getContext("2d")},this.applyCanvasStyle(r,{allowTouchScrolling:t}),this.applyCanvasStyle(s,{allowTouchScrolling:t,styles:{position:"absolute",left:"0",top:"0"}});const a=this.createContainerElement();a.classList.add(n),r.parentNode&&r.parentNode.replaceChild(a,r),a.append(r,s),this.container=a}createUpperCanvas(){const{el:e}=this.lower,t=wl();return t.className=e.className,t.classList.remove("lower-canvas"),t.classList.add("upper-canvas"),t.setAttribute("data-fabric","top"),t.style.cssText=e.style.cssText,t.setAttribute("draggable","true"),t}createContainerElement(){const e=Co().createElement("div");return e.setAttribute("data-fabric","wrapper"),Sf(e,{position:"relative"}),ac(e),e}applyCanvasStyle(e,t){const{styles:n,allowTouchScrolling:r}=t;Sf(e,lo(lo({},n),{},{"touch-action":r?"manipulation":Io})),ac(e)}setDimensions(e,t){super.setDimensions(e,t);const{el:n,ctx:r}=this.upper;rc(n,r,e,t)}setCSSDimensions(e){super.setCSSDimensions(e),sc(this.upper.el,e),sc(this.container,e)}cleanupDOM(e){const t=this.container,{el:n}=this.lower,{el:r}=this.upper;super.cleanupDOM(e),t.removeChild(r),t.removeChild(n),t.parentNode&&t.parentNode.replaceChild(n,t)}dispose(){super.dispose(),wo().dispose(this.upper.el),delete this.upper,delete this.container}}class Tf extends cc{constructor(){super(...arguments),io(this,"targets",[]),io(this,"_hoveredTargets",[]),io(this,"_currentTransform",null),io(this,"_groupSelector",null),io(this,"contextTopDirty",!1)}static getDefaults(){return lo(lo({},super.getDefaults()),Tf.ownDefaults)}get upperCanvasEl(){var e;return null===(e=this.elements.upper)||void 0===e?void 0:e.el}get contextTop(){var e;return null===(e=this.elements.upper)||void 0===e?void 0:e.ctx}get wrapperEl(){return this.elements.container}initElements(e){this.elements=new _f(e,{allowTouchScrolling:this.allowTouchScrolling,containerClass:this.containerClass}),this._createCacheCanvas()}_onObjectAdded(e){this._objectsToRender=void 0,super._onObjectAdded(e)}_onObjectRemoved(e){this._objectsToRender=void 0,e===this._activeObject&&(this.fire("before:selection:cleared",{deselected:[e]}),this._discardActiveObject(),this.fire("selection:cleared",{deselected:[e]}),e.fire("deselected",{target:e})),e===this._hoveredTarget&&(this._hoveredTarget=void 0,this._hoveredTargets=[]),super._onObjectRemoved(e)}_onStackOrderChanged(){this._objectsToRender=void 0,super._onStackOrderChanged()}_chooseObjectsToRender(){const e=this._activeObject;return!this.preserveObjectStacking&&e?this._objects.filter(t=>!t.group&&t!==e).concat(e):this._objects}renderAll(){this.cancelRequestedRender(),this.destroyed||(!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1),!this._objectsToRender&&(this._objectsToRender=this._chooseObjectsToRender()),this.renderCanvas(this.getContext(),this._objectsToRender))}renderTopLayer(e){e.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(e),this.contextTopDirty=!0),e.restore()}renderTop(){const e=this.contextTop;this.clearContext(e),this.renderTopLayer(e),this.fire("after:render",{ctx:e})}setTargetFindTolerance(e){e=Math.round(e),this.targetFindTolerance=e;const t=this.getRetinaScaling(),n=Math.ceil((2*e+1)*t);this.pixelFindCanvasEl.width=this.pixelFindCanvasEl.height=n,this.pixelFindContext.scale(t,t)}isTargetTransparent(e,t,n){const r=this.targetFindTolerance,s=this.pixelFindContext;this.clearContext(s),s.save(),s.translate(-t+r,-n+r),s.transform(...this.viewportTransform);const a=e.selectionBackgroundColor;e.selectionBackgroundColor="",e.render(s),e.selectionBackgroundColor=a,s.restore();const i=Math.round(r*this.getRetinaScaling());return Rd(s,i,i,i)}_isSelectionKeyPressed(e){const t=this.selectionKey;return!!t&&(Array.isArray(t)?!!t.find(t=>!!t&&!0===e[t]):e[t])}_shouldClearSelection(e,t){const n=this.getActiveObjects(),r=this._activeObject;return!!(!t||t&&r&&n.length>1&&-1===n.indexOf(t)&&r!==t&&!this._isSelectionKeyPressed(e)||t&&!t.evented||t&&!t.selectable&&r&&r!==t)}_shouldCenterTransform(e,t,n){if(!e)return;let r;return t===Qo||t===$o||t===Jo||t===qo?r=this.centeredScaling||e.centeredScaling:t===Yo&&(r=this.centeredRotation||e.centeredRotation),r?!n:n}_getOriginFromCorner(e,t){const n={x:e.originX,y:e.originY};return t?(["ml","tl","bl"].includes(t)?n.x=Ro:["mr","tr","br"].includes(t)&&(n.x=Lo),["tl","mt","tr"].includes(t)?n.y=Fo:["bl","mb","br"].includes(t)&&(n.y=zo),n):n}_setupCurrentTransform(e,t,n){var r;const s=t.group?Cc(this.getScenePoint(e),void 0,t.group.calcTransformMatrix()):this.getScenePoint(e),{key:a="",control:i}=t.getActiveControl()||{},o=n&&i?null===(r=i.getActionHandler(e,t,i))||void 0===r?void 0:r.bind(i):Lc,l=((e,t,n,r)=>{if(!t||!e)return"drag";const s=r.controls[t];return s.getActionName(n,s,r)})(n,a,e,t),c=e[this.centeredKey],u=this._shouldCenterTransform(t,l,c)?{x:Mo,y:Mo}:this._getOriginFromCorner(t,a),d={target:t,action:l,actionHandler:o,actionPerformed:!1,corner:a,scaleX:t.scaleX,scaleY:t.scaleY,skewX:t.skewX,skewY:t.skewY,offsetX:s.x-t.left,offsetY:s.y-t.top,originX:u.x,originY:u.y,ex:s.x,ey:s.y,lastX:s.x,lastY:s.y,theta:Nl(t.angle),width:t.width,height:t.height,shiftKey:e.shiftKey,altKey:c,original:lo(lo({},bc(t)),{},{originX:u.x,originY:u.y})};this._currentTransform=d,this.fire("before:transform",{e:e,transform:d})}setCursor(e){this.upperCanvasEl.style.cursor=e}_drawSelection(e){const{x:t,y:n,deltaX:r,deltaY:s}=this._groupSelector,a=new hl(t,n).transform(this.viewportTransform),i=new hl(t+r,n+s).transform(this.viewportTransform),o=this.selectionLineWidth/2;let l=Math.min(a.x,i.x),c=Math.min(a.y,i.y),u=Math.max(a.x,i.x),d=Math.max(a.y,i.y);this.selectionColor&&(e.fillStyle=this.selectionColor,e.fillRect(l,c,u-l,d-c)),this.selectionLineWidth&&this.selectionBorderColor&&(e.lineWidth=this.selectionLineWidth,e.strokeStyle=this.selectionBorderColor,l+=o,c+=o,u-=o,d-=o,Fd.prototype._setLineDash.call(this,e,this.selectionDashArray),e.strokeRect(l,c,u-l,d-c))}findTarget(e){if(this.skipTargetFind)return;const t=this.getViewportPoint(e),n=this._activeObject,r=this.getActiveObjects();if(this.targets=[],n&&r.length>=1){if(n.findControl(t,hc(e)))return n;if(r.length>1&&this.searchPossibleTargets([n],t))return n;if(n===this.searchPossibleTargets([n],t)){if(this.preserveObjectStacking){const r=this.targets;this.targets=[];const s=this.searchPossibleTargets(this._objects,t);return e[this.altSelectionKey]&&s&&s!==n?(this.targets=r,n):s}return n}}return this.searchPossibleTargets(this._objects,t)}_pointIsInObjectSelectionArea(e,t){let n=e.getCoords();const r=this.getZoom(),s=e.padding/r;if(s){const[e,t,r,a]=n,i=Math.atan2(t.y-e.y,t.x-e.x),o=ul(i)*s,l=dl(i)*s,c=o+l,u=o-l;n=[new hl(e.x-u,e.y-c),new hl(t.x+c,t.y-u),new hl(r.x+u,r.y+c),new hl(a.x-c,a.y+u)]}return Zu.isPointInPolygon(t,n)}_checkTarget(e,t){if(e&&e.visible&&e.evented&&this._pointIsInObjectSelectionArea(e,Cc(t,void 0,this.viewportTransform))){if(!this.perPixelTargetFind&&!e.perPixelTargetFind||e.isEditing)return!0;if(!this.isTargetTransparent(e,t.x,t.y))return!0}return!1}_searchPossibleTargets(e,t){let n=e.length;for(;n--;){const r=e[n];if(this._checkTarget(r,t)){if(ml(r)&&r.subTargetCheck){const e=this._searchPossibleTargets(r._objects,t);e&&this.targets.push(e)}return r}}}searchPossibleTargets(e,t){const n=this._searchPossibleTargets(e,t);if(n&&ml(n)&&n.interactive&&this.targets[0]){const e=this.targets;for(let t=e.length-1;t>0;t--){const n=e[t];if(!ml(n)||!n.interactive)return n}return e[0]}return n}getViewportPoint(e){return this._pointer?this._pointer:this.getPointer(e,!0)}getScenePoint(e){return this._absolutePointer?this._absolutePointer:this.getPointer(e)}getPointer(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this.upperCanvasEl,r=n.getBoundingClientRect();let s=dc(e),a=r.width||0,i=r.height||0;a&&i||(zo in r&&Fo in r&&(i=Math.abs(r.top-r.bottom)),Ro in r&&Lo in r&&(a=Math.abs(r.right-r.left))),this.calcOffset(),s.x=s.x-this._offset.left,s.y=s.y-this._offset.top,t||(s=Cc(s,void 0,this.viewportTransform));const o=this.getRetinaScaling();1!==o&&(s.x/=o,s.y/=o);const l=0===a||0===i?new hl(1,1):new hl(n.width/a,n.height/i);return s.multiply(l)}_setDimensionsImpl(e,t){this._resetTransformEventData(),super._setDimensionsImpl(e,t),this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop)}_createCacheCanvas(){this.pixelFindCanvasEl=wl(),this.pixelFindContext=this.pixelFindCanvasEl.getContext("2d",{willReadFrequently:!0}),this.setTargetFindTolerance(this.targetFindTolerance)}getTopContext(){return this.elements.upper.ctx}getSelectionContext(){return this.elements.upper.ctx}getSelectionElement(){return this.elements.upper.el}getActiveObject(){return this._activeObject}getActiveObjects(){const e=this._activeObject;return Zl(e)?e.getObjects():e?[e]:[]}_fireSelectionEvents(e,t){let n=!1,r=!1;const s=this.getActiveObjects(),a=[],i=[];e.forEach(e=>{s.includes(e)||(n=!0,e.fire("deselected",{e:t,target:e}),i.push(e))}),s.forEach(r=>{e.includes(r)||(n=!0,r.fire("selected",{e:t,target:r}),a.push(r))}),e.length>0&&s.length>0?(r=!0,n&&this.fire("selection:updated",{e:t,selected:a,deselected:i})):s.length>0?(r=!0,this.fire("selection:created",{e:t,selected:a})):e.length>0&&(r=!0,this.fire("selection:cleared",{e:t,deselected:i})),r&&(this._objectsToRender=void 0)}setActiveObject(e,t){const n=this.getActiveObjects(),r=this._setActiveObject(e,t);return this._fireSelectionEvents(n,t),r}_setActiveObject(e,t){const n=this._activeObject;return n!==e&&!(!this._discardActiveObject(t,e)&&this._activeObject)&&!e.onSelect({e:t})&&(this._activeObject=e,Zl(e)&&n!==e&&e.set("canvas",this),e.setCoords(),!0)}_discardActiveObject(e,t){const n=this._activeObject;return!!n&&!n.onDeselect({e:e,object:t})&&(this._currentTransform&&this._currentTransform.target===n&&this.endCurrentTransform(e),Zl(n)&&n===this._hoveredTarget&&(this._hoveredTarget=void 0),this._activeObject=void 0,!0)}discardActiveObject(e){const t=this.getActiveObjects(),n=this.getActiveObject();t.length&&this.fire("before:selection:cleared",{e:e,deselected:[n]});const r=this._discardActiveObject(e);return this._fireSelectionEvents(t,e),r}endCurrentTransform(e){const t=this._currentTransform;this._finalizeCurrentTransform(e),t&&t.target&&(t.target.isMoving=!1),this._currentTransform=null}_finalizeCurrentTransform(e){const t=this._currentTransform,n=t.target,r={e:e,target:n,transform:t,action:t.action};n._scaling&&(n._scaling=!1),n.setCoords(),t.actionPerformed&&(this.fire("object:modified",r),n.fire(rl,r))}setViewportTransform(e){super.setViewportTransform(e);const t=this._activeObject;t&&t.setCoords()}destroy(){const e=this._activeObject;Zl(e)&&(e.removeAll(),e.dispose()),delete this._activeObject,super.destroy(),this.pixelFindContext=null,this.pixelFindCanvasEl=void 0}clear(){this.discardActiveObject(),this._activeObject=void 0,this.clearContext(this.contextTop),super.clear()}drawControls(e){const t=this._activeObject;t&&t._renderControls(e)}_toObject(e,t,n){const r=this._realizeGroupTransformOnObject(e),s=super._toObject(e,t,n);return e.set(r),s}_realizeGroupTransformOnObject(e){const{group:t}=e;if(t&&Zl(t)&&this._activeObject===t){const n=ql(e,["angle","flipX","flipY",Lo,$o,Jo,Zo,el,zo]);return gc(e,t.calcOwnMatrix()),n}return{}}_setSVGObject(e,t,n){const r=this._realizeGroupTransformOnObject(t);super._setSVGObject(e,t,n),t.set(r)}}io(Tf,"ownDefaults",{uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",selection:!0,selectionKey:"shiftKey",selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,enablePointerEvents:!1,containerClass:"canvas-container",preserveObjectStacking:!1});class Ef{constructor(e){io(this,"targets",[]),io(this,"__disposer",void 0);const t=()=>{const{hiddenTextarea:t}=e.getActiveObject()||{};t&&t.focus()},n=e.upperCanvasEl;n.addEventListener("click",t),this.__disposer=()=>n.removeEventListener("click",t)}exitTextEditing(){this.target=void 0,this.targets.forEach(e=>{e.isEditing&&e.exitEditing()})}add(e){this.targets.push(e)}remove(e){this.unregister(e),cl(this.targets,e)}register(e){this.target=e}unregister(e){e===this.target&&(this.target=void 0)}onMouseMove(e){var t;(null===(t=this.target)||void 0===t?void 0:t.isEditing)&&this.target.updateSelectionOnMouseMove(e)}clear(){this.targets=[],this.target=void 0}dispose(){this.clear(),this.__disposer(),delete this.__disposer}}const Pf=["target","oldTarget","fireCanvas","e"],Of={passive:!1},Df=(e,t)=>{const n=e.getViewportPoint(t),r=e.getScenePoint(t);return{viewportPoint:n,scenePoint:r,pointer:n,absolutePointer:r}},Af=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.addEventListener(...n)},Mf=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.removeEventListener(...n)},Lf={mouse:{in:"over",out:"out",targetIn:"mouseover",targetOut:"mouseout",canvasIn:"mouse:over",canvasOut:"mouse:out"},drag:{in:"enter",out:"leave",targetIn:"dragenter",targetOut:"dragleave",canvasIn:"drag:enter",canvasOut:"drag:leave"}};class zf extends Tf{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),io(this,"_isClick",void 0),io(this,"textEditingManager",new Ef(this)),["_onMouseDown","_onTouchStart","_onMouseMove","_onMouseUp","_onTouchEnd","_onResize","_onMouseWheel","_onMouseOut","_onMouseEnter","_onContextMenu","_onClick","_onDragStart","_onDragEnd","_onDragProgress","_onDragOver","_onDragEnter","_onDragLeave","_onDrop"].forEach(e=>{this[e]=this[e].bind(this)}),this.addOrRemove(Af,"add")}_getEventPrefix(){return this.enablePointerEvents?"pointer":"mouse"}addOrRemove(e,t){const n=this.upperCanvasEl,r=this._getEventPrefix();e(nc(n),"resize",this._onResize),e(n,r+"down",this._onMouseDown),e(n,"".concat(r,"move"),this._onMouseMove,Of),e(n,"".concat(r,"out"),this._onMouseOut),e(n,"".concat(r,"enter"),this._onMouseEnter),e(n,"wheel",this._onMouseWheel,{passive:!1}),e(n,"contextmenu",this._onContextMenu),e(n,"click",this._onClick),e(n,"dblclick",this._onClick),e(n,"dragstart",this._onDragStart),e(n,"dragend",this._onDragEnd),e(n,"dragover",this._onDragOver),e(n,"dragenter",this._onDragEnter),e(n,"dragleave",this._onDragLeave),e(n,"drop",this._onDrop),this.enablePointerEvents||e(n,"touchstart",this._onTouchStart,Of)}removeListeners(){this.addOrRemove(Mf,"remove");const e=this._getEventPrefix(),t=tc(this.upperCanvasEl);Mf(t,"".concat(e,"up"),this._onMouseUp),Mf(t,"touchend",this._onTouchEnd,Of),Mf(t,"".concat(e,"move"),this._onMouseMove,Of),Mf(t,"touchmove",this._onMouseMove,Of),clearTimeout(this._willAddMouseDown)}_onMouseWheel(e){this.__onMouseWheel(e)}_onMouseOut(e){const t=this._hoveredTarget,n=lo({e:e},Df(this,e));this.fire("mouse:out",lo(lo({},n),{},{target:t})),this._hoveredTarget=void 0,t&&t.fire("mouseout",lo({},n)),this._hoveredTargets.forEach(e=>{this.fire("mouse:out",lo(lo({},n),{},{target:e})),e&&e.fire("mouseout",lo({},n))}),this._hoveredTargets=[]}_onMouseEnter(e){this._currentTransform||this.findTarget(e)||(this.fire("mouse:over",lo({e:e},Df(this,e))),this._hoveredTarget=void 0,this._hoveredTargets=[])}_onDragStart(e){this._isClick=!1;const t=this.getActiveObject();if(t&&t.onDragStart(e)){this._dragSource=t;const n={e:e,target:t};return this.fire("dragstart",n),t.fire("dragstart",n),void Af(this.upperCanvasEl,"drag",this._onDragProgress)}fc(e)}_renderDragEffects(e,t,n){let r=!1;const s=this._dropTarget;s&&s!==t&&s!==n&&(s.clearContextTop(),r=!0),null==t||t.clearContextTop(),n!==t&&(null==n||n.clearContextTop());const a=this.contextTop;a.save(),a.transform(...this.viewportTransform),t&&(a.save(),t.transform(a),t.renderDragSourceEffect(e),a.restore(),r=!0),n&&(a.save(),n.transform(a),n.renderDropTargetEffect(e),a.restore(),r=!0),a.restore(),r&&(this.contextTopDirty=!0)}_onDragEnd(e){const t=!!e.dataTransfer&&e.dataTransfer.dropEffect!==Io,n=t?this._activeObject:void 0,r={e:e,target:this._dragSource,subTargets:this.targets,dragSource:this._dragSource,didDrop:t,dropTarget:n};Mf(this.upperCanvasEl,"drag",this._onDragProgress),this.fire("dragend",r),this._dragSource&&this._dragSource.fire("dragend",r),delete this._dragSource,this._onMouseUp(e)}_onDragProgress(e){const t={e:e,target:this._dragSource,dragSource:this._dragSource,dropTarget:this._draggedoverTarget};this.fire("drag",t),this._dragSource&&this._dragSource.fire("drag",t)}findDragTargets(e){return this.targets=[],{target:this._searchPossibleTargets(this._objects,this.getViewportPoint(e)),targets:[...this.targets]}}_onDragOver(e){const t="dragover",{target:n,targets:r}=this.findDragTargets(e),s=this._dragSource,a={e:e,target:n,subTargets:r,dragSource:s,canDrop:!1,dropTarget:void 0};let i;this.fire(t,a),this._fireEnterLeaveEvents(n,a),n&&(n.canDrop(e)&&(i=n),n.fire(t,a));for(let o=0;o<r.length;o++){const n=r[o];n.canDrop(e)&&(i=n),n.fire(t,a)}this._renderDragEffects(e,s,i),this._dropTarget=i}_onDragEnter(e){const{target:t,targets:n}=this.findDragTargets(e),r={e:e,target:t,subTargets:n,dragSource:this._dragSource};this.fire("dragenter",r),this._fireEnterLeaveEvents(t,r)}_onDragLeave(e){const t={e:e,target:this._draggedoverTarget,subTargets:this.targets,dragSource:this._dragSource};this.fire("dragleave",t),this._fireEnterLeaveEvents(void 0,t),this._renderDragEffects(e,this._dragSource),this._dropTarget=void 0,this.targets=[],this._hoveredTargets=[]}_onDrop(e){const{target:t,targets:n}=this.findDragTargets(e),r=this._basicEventHandler("drop:before",lo({e:e,target:t,subTargets:n,dragSource:this._dragSource},Df(this,e)));r.didDrop=!1,r.dropTarget=void 0,this._basicEventHandler("drop",r),this.fire("drop:after",r)}_onContextMenu(e){const t=this.findTarget(e),n=this.targets||[],r=this._basicEventHandler("contextmenu:before",{e:e,target:t,subTargets:n});return this.stopContextMenu&&fc(e),this._basicEventHandler("contextmenu",r),!1}_onClick(e){const t=e.detail;t>3||t<2||(this._cacheTransformEventData(e),2==t&&"dblclick"===e.type&&this._handleEvent(e,"dblclick"),3==t&&this._handleEvent(e,"tripleclick"),this._resetTransformEventData())}getPointerId(e){const t=e.changedTouches;return t?t[0]&&t[0].identifier:this.enablePointerEvents?e.pointerId:-1}_isMainEvent(e){return!0===e.isPrimary||!1!==e.isPrimary&&("touchend"===e.type&&0===e.touches.length||!e.changedTouches||e.changedTouches[0].identifier===this.mainTouchId)}_onTouchStart(e){let t=!this.allowTouchScrolling;const n=this._activeObject;void 0===this.mainTouchId&&(this.mainTouchId=this.getPointerId(e)),this.__onMouseDown(e),(this.isDrawingMode||n&&this._target===n)&&(t=!0),t&&e.preventDefault(),this._resetTransformEventData();const r=this.upperCanvasEl,s=this._getEventPrefix(),a=tc(r);Af(a,"touchend",this._onTouchEnd,Of),t&&Af(a,"touchmove",this._onMouseMove,Of),Mf(r,"".concat(s,"down"),this._onMouseDown)}_onMouseDown(e){this.__onMouseDown(e),this._resetTransformEventData();const t=this.upperCanvasEl,n=this._getEventPrefix();Mf(t,"".concat(n,"move"),this._onMouseMove,Of);const r=tc(t);Af(r,"".concat(n,"up"),this._onMouseUp),Af(r,"".concat(n,"move"),this._onMouseMove,Of)}_onTouchEnd(e){if(e.touches.length>0)return;this.__onMouseUp(e),this._resetTransformEventData(),delete this.mainTouchId;const t=this._getEventPrefix(),n=tc(this.upperCanvasEl);Mf(n,"touchend",this._onTouchEnd,Of),Mf(n,"touchmove",this._onMouseMove,Of),this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(()=>{Af(this.upperCanvasEl,"".concat(t,"down"),this._onMouseDown),this._willAddMouseDown=0},400)}_onMouseUp(e){this.__onMouseUp(e),this._resetTransformEventData();const t=this.upperCanvasEl,n=this._getEventPrefix();if(this._isMainEvent(e)){const e=tc(this.upperCanvasEl);Mf(e,"".concat(n,"up"),this._onMouseUp),Mf(e,"".concat(n,"move"),this._onMouseMove,Of),Af(t,"".concat(n,"move"),this._onMouseMove,Of)}}_onMouseMove(e){const t=this.getActiveObject();!this.allowTouchScrolling&&(!t||!t.shouldStartDragging(e))&&e.preventDefault&&e.preventDefault(),this.__onMouseMove(e)}_onResize(){this.calcOffset(),this._resetTransformEventData()}_shouldRender(e){const t=this.getActiveObject();return!!t!=!!e||t&&e&&t!==e}__onMouseUp(e){var t;this._cacheTransformEventData(e),this._handleEvent(e,"up:before");const n=this._currentTransform,r=this._isClick,s=this._target,{button:a}=e;if(a)return(this.fireMiddleClick&&1===a||this.fireRightClick&&2===a)&&this._handleEvent(e,"up"),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)return void this._onMouseUpInDrawingMode(e);if(!this._isMainEvent(e))return;let i,o,l=!1;if(n&&(this._finalizeCurrentTransform(e),l=n.actionPerformed),!r){const t=s===this._activeObject;this.handleSelection(e),l||(l=this._shouldRender(s)||!t&&s===this._activeObject)}if(s){const t=s.findControl(this.getViewportPoint(e),hc(e)),{key:r,control:a}=t||{};if(o=r,s.selectable&&s!==this._activeObject&&"up"===s.activeOn)this.setActiveObject(s,e),l=!0;else if(a){const t=a.getMouseUpHandler(e,s,a);t&&(i=this.getScenePoint(e),t.call(a,e,n,i.x,i.y))}s.isMoving=!1}if(n&&(n.target!==s||n.corner!==o)){const t=n.target&&n.target.controls[n.corner],r=t&&t.getMouseUpHandler(e,n.target,t);i=i||this.getScenePoint(e),r&&r.call(t,e,n,i.x,i.y)}this._setCursorFromEvent(e,s),this._handleEvent(e,"up"),this._groupSelector=null,this._currentTransform=null,s&&(s.__corner=void 0),l?this.requestRenderAll():r||null!==(t=this._activeObject)&&void 0!==t&&t.isEditing||this.renderTop()}_basicEventHandler(e,t){const{target:n,subTargets:r=[]}=t;this.fire(e,t),n&&n.fire(e,t);for(let s=0;s<r.length;s++)r[s]!==n&&r[s].fire(e,t);return t}_handleEvent(e,t,n){const r=this._target,s=this.targets||[],a=lo(lo(lo({e:e,target:r,subTargets:s},Df(this,e)),{},{transform:this._currentTransform},"up:before"===t||"up"===t?{isClick:this._isClick,currentTarget:this.findTarget(e),currentSubTargets:this.targets}:{}),"down:before"===t||"down"===t?n:{});this.fire("mouse:".concat(t),a),r&&r.fire("mouse".concat(t),a);for(let i=0;i<s.length;i++)s[i]!==r&&s[i].fire("mouse".concat(t),a)}_onMouseDownInDrawingMode(e){this._isCurrentlyDrawing=!0,this.getActiveObject()&&(this.discardActiveObject(e),this.requestRenderAll());const t=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseDown(t,{e:e,pointer:t}),this._handleEvent(e,"down",{alreadySelected:!1})}_onMouseMoveInDrawingMode(e){if(this._isCurrentlyDrawing){const t=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseMove(t,{e:e,pointer:t})}this.setCursor(this.freeDrawingCursor),this._handleEvent(e,"move")}_onMouseUpInDrawingMode(e){const t=this.getScenePoint(e);this.freeDrawingBrush?this._isCurrentlyDrawing=!!this.freeDrawingBrush.onMouseUp({e:e,pointer:t}):this._isCurrentlyDrawing=!1,this._handleEvent(e,"up")}__onMouseDown(e){this._isClick=!0,this._cacheTransformEventData(e),this._handleEvent(e,"down:before");let t=this._target,n=!!t&&t===this._activeObject;const{button:r}=e;if(r)return(this.fireMiddleClick&&1===r||this.fireRightClick&&2===r)&&this._handleEvent(e,"down",{alreadySelected:n}),void this._resetTransformEventData();if(this.isDrawingMode)return void this._onMouseDownInDrawingMode(e);if(!this._isMainEvent(e))return;if(this._currentTransform)return;let s=this._shouldRender(t),a=!1;if(this.handleMultiSelection(e,t)?(t=this._activeObject,a=!0,s=!0):this._shouldClearSelection(e,t)&&this.discardActiveObject(e),this.selection&&(!t||!t.selectable&&!t.isEditing&&t!==this._activeObject)){const t=this.getScenePoint(e);this._groupSelector={x:t.x,y:t.y,deltaY:0,deltaX:0}}if(n=!!t&&t===this._activeObject,t){t.selectable&&"down"===t.activeOn&&this.setActiveObject(t,e);const r=t.findControl(this.getViewportPoint(e),hc(e));if(t===this._activeObject&&(r||!a)){this._setupCurrentTransform(e,t,n);const s=r?r.control:void 0,a=this.getScenePoint(e),i=s&&s.getMouseDownHandler(e,t,s);i&&i.call(s,e,this._currentTransform,a.x,a.y)}}s&&(this._objectsToRender=void 0),this._handleEvent(e,"down",{alreadySelected:n}),s&&this.requestRenderAll()}_resetTransformEventData(){this._target=this._pointer=this._absolutePointer=void 0}_cacheTransformEventData(e){this._resetTransformEventData(),this._pointer=this.getViewportPoint(e),this._absolutePointer=Cc(this._pointer,void 0,this.viewportTransform),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(e)}__onMouseMove(e){if(this._isClick=!1,this._cacheTransformEventData(e),this._handleEvent(e,"move:before"),this.isDrawingMode)return void this._onMouseMoveInDrawingMode(e);if(!this._isMainEvent(e))return;const t=this._groupSelector;if(t){const n=this.getScenePoint(e);t.deltaX=n.x-t.x,t.deltaY=n.y-t.y,this.renderTop()}else if(this._currentTransform)this._transformObject(e);else{const t=this.findTarget(e);this._setCursorFromEvent(e,t),this._fireOverOutEvents(e,t)}this.textEditingManager.onMouseMove(e),this._handleEvent(e,"move"),this._resetTransformEventData()}_fireOverOutEvents(e,t){const n=this._hoveredTarget,r=this._hoveredTargets,s=this.targets,a=Math.max(r.length,s.length);this.fireSyntheticInOutEvents("mouse",{e:e,target:t,oldTarget:n,fireCanvas:!0});for(let i=0;i<a;i++)s[i]===t||r[i]&&r[i]===n||this.fireSyntheticInOutEvents("mouse",{e:e,target:s[i],oldTarget:r[i]});this._hoveredTarget=t,this._hoveredTargets=this.targets.concat()}_fireEnterLeaveEvents(e,t){const n=this._draggedoverTarget,r=this._hoveredTargets,s=this.targets,a=Math.max(r.length,s.length);this.fireSyntheticInOutEvents("drag",lo(lo({},t),{},{target:e,oldTarget:n,fireCanvas:!0}));for(let i=0;i<a;i++)this.fireSyntheticInOutEvents("drag",lo(lo({},t),{},{target:s[i],oldTarget:r[i]}));this._draggedoverTarget=e}fireSyntheticInOutEvents(e,t){let{target:n,oldTarget:r,fireCanvas:s,e:a}=t,i=co(t,Pf);const{targetIn:o,targetOut:l,canvasIn:c,canvasOut:u}=Lf[e],d=r!==n;if(r&&d){const e=lo(lo({},i),{},{e:a,target:r,nextTarget:n},Df(this,a));s&&this.fire(u,e),r.fire(l,e)}if(n&&d){const e=lo(lo({},i),{},{e:a,target:n,previousTarget:r},Df(this,a));s&&this.fire(c,e),n.fire(o,e)}}__onMouseWheel(e){this._cacheTransformEventData(e),this._handleEvent(e,"wheel"),this._resetTransformEventData()}_transformObject(e){const t=this.getScenePoint(e),n=this._currentTransform,r=n.target,s=r.group?Cc(t,void 0,r.group.calcTransformMatrix()):t;n.shiftKey=e.shiftKey,n.altKey=!!this.centeredKey&&e[this.centeredKey],this._performTransformAction(e,n,s),n.actionPerformed&&this.requestRenderAll()}_performTransformAction(e,t,n){const{action:r,actionHandler:s,target:a}=t,i=!!s&&s(e,t,n.x,n.y);i&&a.setCoords(),"drag"===r&&i&&(t.target.isMoving=!0,this.setCursor(t.target.moveCursor||this.moveCursor)),t.actionPerformed=t.actionPerformed||i}_setCursorFromEvent(e,t){if(!t)return void this.setCursor(this.defaultCursor);let n=t.hoverCursor||this.hoverCursor;const r=Zl(this._activeObject)?this._activeObject:null,s=(!r||t.group!==r)&&t.findControl(this.getViewportPoint(e));if(s){const n=s.control;this.setCursor(n.cursorStyleHandler(e,n,t))}else t.subTargetCheck&&this.targets.concat().reverse().map(e=>{n=e.hoverCursor||n}),this.setCursor(n)}handleMultiSelection(e,t){const n=this._activeObject,r=Zl(n);if(n&&this._isSelectionKeyPressed(e)&&this.selection&&t&&t.selectable&&(n!==t||r)&&(r||!t.isDescendantOf(n)&&!n.isDescendantOf(t))&&!t.onSelect({e:e})&&!n.getActiveControl()){if(r){const r=n.getObjects();if(t===n){const n=this.getViewportPoint(e);if(!(t=this.searchPossibleTargets(r,n)||this.searchPossibleTargets(this._objects,n))||!t.selectable)return!1}t.group===n?(n.remove(t),this._hoveredTarget=t,this._hoveredTargets=[...this.targets],1===n.size()&&this._setActiveObject(n.item(0),e)):(n.multiSelectAdd(t),this._hoveredTarget=n,this._hoveredTargets=[...this.targets]),this._fireSelectionEvents(r,e)}else{n.isEditing&&n.exitEditing();const r=new(il.getClass("ActiveSelection"))([],{canvas:this});r.multiSelectAdd(n,t),this._hoveredTarget=r,this._setActiveObject(r,e),this._fireSelectionEvents([n],e)}return!0}return!1}handleSelection(e){if(!this.selection||!this._groupSelector)return!1;const{x:t,y:n,deltaX:r,deltaY:s}=this._groupSelector,a=new hl(t,n),i=a.add(new hl(r,s)),o=a.min(i),l=a.max(i).subtract(o),c=this.collectObjects({left:o.x,top:o.y,width:l.x,height:l.y},{includeIntersecting:!this.selectionFullyContained}),u=a.eq(i)?c[0]?[c[0]]:[]:c.length>1?c.filter(t=>!t.onSelect({e:e})).reverse():c;if(1===u.length)this.setActiveObject(u[0],e);else if(u.length>1){const t=il.getClass("ActiveSelection");this.setActiveObject(new t(u,{canvas:this}),e)}return this._groupSelector=null,!0}toCanvasElement(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0;const{upper:n}=this.elements;n.ctx=void 0;const r=super.toCanvasElement(e,t);return n.ctx=n.el.getContext("2d"),r}clear(){this.textEditingManager.clear(),super.clear()}destroy(){this.removeListeners(),this.textEditingManager.dispose(),super.destroy()}}const Ff={x1:0,y1:0,x2:0,y2:0},Rf=lo(lo({},Ff),{},{r1:0,r2:0}),If=(e,t)=>isNaN(e)&&"number"==typeof t?t:e;function Bf(e){return e&&/%$/.test(e)&&Number.isFinite(parseFloat(e))}function Hf(e,t){const n="number"==typeof e?e:"string"==typeof e?parseFloat(e)/(Bf(e)?100:1):NaN;return Ou(0,If(n,t),1)}const Wf=/\s*;\s*/,Uf=/\s*:\s*/;function Yf(e,t){let n,r;const s=e.getAttribute("style");if(s){const e=s.split(Wf);""===e[e.length-1]&&e.pop();for(let t=e.length;t--;){const[s,a]=e[t].split(Uf).map(e=>e.trim());"stop-color"===s?n=a:"stop-opacity"===s&&(r=a)}}const a=new Uc(n||e.getAttribute("stop-color")||"rgb(0,0,0)");return{offset:Hf(e.getAttribute("offset"),0),color:a.toRgb(),opacity:If(parseFloat(r||e.getAttribute("stop-opacity")||""),1)*a.getAlpha()*t}}function Vf(e,t){const n=[],r=e.getElementsByTagName("stop"),s=Hf(t,1);for(let a=r.length;a--;)n.push(Yf(r[a],s));return n}function qf(e){return"linearGradient"===e.nodeName||"LINEARGRADIENT"===e.nodeName?"linear":"radial"}function Xf(e){return"userSpaceOnUse"===e.getAttribute("gradientUnits")?"pixels":"percentage"}function Gf(e,t){return e.getAttribute(t)}function Kf(e,t){return function(e,t){let n,{width:r,height:s,gradientUnits:a}=t;return Object.entries(e).reduce((e,t)=>{let[i,o]=t;if("Infinity"===o)n=1;else if("-Infinity"===o)n=0;else{const e="string"==typeof o;n=e?parseFloat(o):o,e&&Bf(o)&&(n*=.01,"pixels"===a&&("x1"!==i&&"x2"!==i&&"r2"!==i||(n*=r),"y1"!==i&&"y2"!==i||(n*=s)))}return e[i]=n,e},{})}("linear"===qf(e)?function(e){return{x1:Gf(e,"x1")||0,y1:Gf(e,"y1")||0,x2:Gf(e,"x2")||"100%",y2:Gf(e,"y2")||0}}(e):function(e){return{x1:Gf(e,"fx")||Gf(e,"cx")||"50%",y1:Gf(e,"fy")||Gf(e,"cy")||"50%",r1:0,x2:Gf(e,"cx")||"50%",y2:Gf(e,"cy")||"50%",r2:Gf(e,"r")||"50%"}}(e),lo(lo({},t),{},{gradientUnits:Xf(e)}))}class Qf{constructor(e){const{type:t="linear",gradientUnits:n="pixels",coords:r={},colorStops:s=[],offsetX:a=0,offsetY:i=0,gradientTransform:o,id:l}=e||{};Object.assign(this,{type:t,gradientUnits:n,coords:lo(lo({},"radial"===t?Rf:Ff),r),colorStops:s,offsetX:a,offsetY:i,gradientTransform:o,id:l?"".concat(l,"_").concat(vl()):vl()})}addColorStop(e){for(const t in e){const n=new Uc(e[t]);this.colorStops.push({offset:parseFloat(t),color:n.toRgb(),opacity:n.getAlpha()})}return this}toObject(e){return lo(lo({},ql(this,e)),{},{type:this.type,coords:lo({},this.coords),colorStops:this.colorStops.map(e=>lo({},e)),offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?[...this.gradientTransform]:void 0})}toSVG(e){let{additionalTransform:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=[],r=this.gradientTransform?this.gradientTransform.concat():Oo.concat(),s="pixels"===this.gradientUnits?"userSpaceOnUse":"objectBoundingBox",a=this.colorStops.map(e=>lo({},e)).sort((e,t)=>e.offset-t.offset);let i=-this.offsetX,o=-this.offsetY;var l;"objectBoundingBox"===s?(i/=e.width,o/=e.height):(i+=e.width/2,o+=e.height/2),(l=e)&&"function"==typeof l._renderPathCommands&&"percentage"!==this.gradientUnits&&(i-=e.pathOffset.x,o-=e.pathOffset.y),r[4]-=i,r[5]-=o;const c=['id="SVGID_'.concat(this.id,'"'),'gradientUnits="'.concat(s,'"'),'gradientTransform="'.concat(t?t+" ":"").concat(Kl(r),'"'),""].join(" ");if("linear"===this.type){const{x1:e,y1:t,x2:r,y2:s}=this.coords;n.push("<linearGradient ",c,' x1="',e,'" y1="',t,'" x2="',r,'" y2="',s,'">\n')}else if("radial"===this.type){const{x1:e,y1:t,x2:r,y2:s,r1:i,r2:o}=this.coords,l=i>o;n.push("<radialGradient ",c,' cx="',l?e:r,'" cy="',l?t:s,'" r="',l?i:o,'" fx="',l?r:e,'" fy="',l?s:t,'">\n'),l&&(a.reverse(),a.forEach(e=>{e.offset=1-e.offset}));const u=Math.min(i,o);if(u>0){const e=u/Math.max(i,o);a.forEach(t=>{t.offset+=e*(1-t.offset)})}}return a.forEach(e=>{let{color:t,offset:r,opacity:s}=e;n.push("<stop ",'offset="',100*r+"%",'" style="stop-color:',t,void 0!==s?";stop-opacity: "+s:";",'"/>\n')}),n.push("linear"===this.type?"</linearGradient>":"</radialGradient>","\n"),n.join("")}toLive(e){const{x1:t,y1:n,x2:r,y2:s,r1:a,r2:i}=this.coords,o="linear"===this.type?e.createLinearGradient(t,n,r,s):e.createRadialGradient(t,n,a,r,s,i);return this.colorStops.forEach(e=>{let{color:t,opacity:n,offset:r}=e;o.addColorStop(r,void 0!==n?new Uc(t).setAlpha(n).toRgba():t)}),o}static async fromObject(e){const{colorStops:t,gradientTransform:n}=e;return new this(lo(lo({},e),{},{colorStops:t?t.map(e=>lo({},e)):void 0,gradientTransform:n?[...n]:void 0}))}static fromElement(e,t,n){const r=Xf(e),s=t._findCenterFromElement();return new this(lo({id:e.getAttribute("id")||void 0,type:qf(e),coords:Kf(e,{width:n.viewBoxWidth||n.width,height:n.viewBoxHeight||n.height}),colorStops:Vf(e,n.opacity),gradientUnits:r,gradientTransform:kh(e.getAttribute("gradientTransform")||"")},"pixels"===r?{offsetX:t.width/2-s.x,offsetY:t.height/2-s.y}:{offsetX:0,offsetY:0}))}}io(Qf,"type","Gradient"),il.setClass(Qf,"gradient"),il.setClass(Qf,"linear"),il.setClass(Qf,"radial");const $f=["type","source","patternTransform"];class Jf{get type(){return"pattern"}set type(e){mo("warn","Setting type has no effect",e)}constructor(e){io(this,"repeat","repeat"),io(this,"offsetX",0),io(this,"offsetY",0),io(this,"crossOrigin",""),this.id=vl(),Object.assign(this,e)}isImageSource(){return!!this.source&&"string"==typeof this.source.src}isCanvasSource(){return!!this.source&&!!this.source.toDataURL}sourceToString(){return this.isImageSource()?this.source.src:this.isCanvasSource()?this.source.toDataURL():""}toLive(e){return this.source&&(!this.isImageSource()||this.source.complete&&0!==this.source.naturalWidth&&0!==this.source.naturalHeight)?e.createPattern(this.source,this.repeat):null}toObject(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const{repeat:t,crossOrigin:n}=this;return lo(lo({},ql(this,e)),{},{type:"pattern",source:this.sourceToString(),repeat:t,crossOrigin:n,offsetX:Gl(this.offsetX,fo.NUM_FRACTION_DIGITS),offsetY:Gl(this.offsetY,fo.NUM_FRACTION_DIGITS),patternTransform:this.patternTransform?[...this.patternTransform]:null})}toSVG(e){let{width:t,height:n}=e;const{source:r,repeat:s,id:a}=this,i=If(this.offsetX/t,0),o=If(this.offsetY/n,0),l="repeat-y"===s||"no-repeat"===s?1+Math.abs(i||0):If(r.width/t,0),c="repeat-x"===s||"no-repeat"===s?1+Math.abs(o||0):If(r.height/n,0);return['<pattern id="SVGID_'.concat(a,'" x="').concat(i,'" y="').concat(o,'" width="').concat(l,'" height="').concat(c,'">'),'<image x="0" y="0" width="'.concat(r.width,'" height="').concat(r.height,'" xlink:href="').concat(this.sourceToString(),'"></image>'),"</pattern>",""].join("\n")}static async fromObject(e,t){let{type:n,source:r,patternTransform:s}=e,a=co(e,$f);const i=await Ul(r,lo(lo({},t),{},{crossOrigin:a.crossOrigin}));return new this(lo(lo({},a),{},{patternTransform:s&&s.slice(0),source:i}))}}io(Jf,"type","Pattern"),il.setClass(Jf),il.setClass(Jf,"pattern");const Zf=["path","left","top"],em=["d"];class tm extends Fd{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{path:n,left:r,top:s}=t,a=co(t,Zf);super(),Object.assign(this,tm.ownDefaults),this.setOptions(a),this._setPath(e||[],!0),"number"==typeof r&&this.set(Lo,r),"number"==typeof s&&this.set(zo,s)}_setPath(e,t){this.path=rf(Array.isArray(e)?e:vf(e)),this.setBoundingBox(t)}_findCenterFromElement(){const e=this._calcBoundsFromPath();return new hl(e.left+e.width/2,e.top+e.height/2)}_renderPathCommands(e){const t=-this.pathOffset.x,n=-this.pathOffset.y;e.beginPath();for(const r of this.path)switch(r[0]){case"L":e.lineTo(r[1]+t,r[2]+n);break;case"M":e.moveTo(r[1]+t,r[2]+n);break;case"C":e.bezierCurveTo(r[1]+t,r[2]+n,r[3]+t,r[4]+n,r[5]+t,r[6]+n);break;case"Q":e.quadraticCurveTo(r[1]+t,r[2]+n,r[3]+t,r[4]+n);break;case"Z":e.closePath()}}_render(e){this._renderPathCommands(e),this._renderPaintInOrder(e)}toString(){return"#<Path (".concat(this.complexity(),'): { "top": ').concat(this.top,', "left": ').concat(this.left," }>")}toObject(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return lo(lo({},super.toObject(e)),{},{path:this.path.map(e=>e.slice())})}toDatalessObject(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=this.toObject(e);return this.sourcePath&&(delete t.path,t.sourcePath=this.sourcePath),t}_toSVG(){const e=Cf(this.path,fo.NUM_FRACTION_DIGITS);return["<path ","COMMON_PARTS",'d="'.concat(e,'" stroke-linecap="round" />\n')]}_getOffsetTransform(){const e=fo.NUM_FRACTION_DIGITS;return" translate(".concat(Gl(-this.pathOffset.x,e),", ").concat(Gl(-this.pathOffset.y,e),")")}toClipPathSVG(e){const t=this._getOffsetTransform();return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})}toSVG(e){const t=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})}complexity(){return this.path.length}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{width:t,height:n,pathOffset:r}=this._calcDimensions();this.set({width:t,height:n,pathOffset:r}),e&&this.setPositionByOrigin(r,Mo,Mo)}_calcBoundsFromPath(){const e=[];let t=0,n=0,r=0,s=0;for(const a of this.path)switch(a[0]){case"L":r=a[1],s=a[2],e.push({x:t,y:n},{x:r,y:s});break;case"M":r=a[1],s=a[2],t=r,n=s;break;case"C":e.push(...tf(r,s,a[1],a[2],a[3],a[4],a[5],a[6])),r=a[5],s=a[6];break;case"Q":e.push(...tf(r,s,a[1],a[2],a[1],a[2],a[3],a[4])),r=a[3],s=a[4];break;case"Z":r=t,s=n}return mc(e)}_calcDimensions(){const e=this._calcBoundsFromPath();return lo(lo({},e),{},{pathOffset:new hl(e.left+e.width/2,e.top+e.height/2)})}static fromObject(e){return this._fromObject(e,{extraParam:"path"})}static async fromElement(e,t,n){const r=Eh(e,this.ATTRIBUTE_NAMES,n),{d:s}=r;return new this(s,lo(lo(lo({},co(r,em)),t),{},{left:void 0,top:void 0}))}}io(tm,"type","Path"),io(tm,"cacheProperties",[...Au,"path","fillRule"]),io(tm,"ATTRIBUTE_NAMES",[...eh,"d"]),il.setClass(tm),il.setSVGClass(tm);const nm=["left","top","radius"],rm=["radius","startAngle","endAngle","counterClockwise"];class sm extends Fd{static getDefaults(){return lo(lo({},super.getDefaults()),sm.ownDefaults)}constructor(e){super(),Object.assign(this,sm.ownDefaults),this.setOptions(e)}_set(e,t){return super._set(e,t),"radius"===e&&this.setRadius(t),this}_render(e){e.beginPath(),e.arc(0,0,this.radius,Nl(this.startAngle),Nl(this.endAngle),this.counterClockwise),this._renderPaintInOrder(e)}getRadiusX(){return this.get("radius")*this.get($o)}getRadiusY(){return this.get("radius")*this.get(Jo)}setRadius(e){this.radius=e,this.set({width:2*e,height:2*e})}toObject(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return super.toObject([...rm,...e])}_toSVG(){const e=(this.endAngle-this.startAngle)%360;if(0===e)return["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',"".concat(this.radius),'" />\n'];{const{radius:t}=this,n=Nl(this.startAngle),r=Nl(this.endAngle),s=ul(n)*t,a=dl(n)*t,i=ul(r)*t,o=dl(r)*t,l=e>180?1:0,c=this.counterClockwise?0:1;return['<path d="M '.concat(s," ").concat(a," A ").concat(t," ").concat(t," 0 ").concat(l," ").concat(c," ").concat(i," ").concat(o,'" '),"COMMON_PARTS"," />\n"]}}static async fromElement(e,t,n){const r=Eh(e,this.ATTRIBUTE_NAMES,n),{left:s=0,top:a=0,radius:i=0}=r;return new this(lo(lo({},co(r,nm)),{},{radius:i,left:s-i,top:a-i}))}static fromObject(e){return super._fromObject(e)}}io(sm,"type","Circle"),io(sm,"cacheProperties",[...Au,...rm]),io(sm,"ownDefaults",{radius:0,startAngle:0,endAngle:360,counterClockwise:!1}),io(sm,"ATTRIBUTE_NAMES",["cx","cy","r",...eh]),il.setClass(sm),il.setSVGClass(sm);const am=["x1","y1","x2","y2"],im=["x1","y1","x2","y2"],om=["x1","x2","y1","y2"];class lm extends Fd{constructor(){let[e,t,n,r]=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0,0],s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),Object.assign(this,lm.ownDefaults),this.setOptions(s),this.x1=e,this.x2=n,this.y1=t,this.y2=r,this._setWidthHeight();const{left:a,top:i}=s;"number"==typeof a&&this.set(Lo,a),"number"==typeof i&&this.set(zo,i)}_setWidthHeight(){const{x1:e,y1:t,x2:n,y2:r}=this;this.width=Math.abs(n-e),this.height=Math.abs(r-t);const{left:s,top:a,width:i,height:o}=mc([{x:e,y:t},{x:n,y:r}]),l=new hl(s+i/2,a+o/2);this.setPositionByOrigin(l,Mo,Mo)}_set(e,t){return super._set(e,t),om.includes(e)&&this._setWidthHeight(),this}_render(e){e.beginPath();const t=this.calcLinePoints();e.moveTo(t.x1,t.y1),e.lineTo(t.x2,t.y2),e.lineWidth=this.strokeWidth;const n=e.strokeStyle;var r;Ql(this.stroke)?e.strokeStyle=this.stroke.toLive(e):e.strokeStyle=null!==(r=this.stroke)&&void 0!==r?r:e.fillStyle,this.stroke&&this._renderStroke(e),e.strokeStyle=n}_findCenterFromElement(){return new hl((this.x1+this.x2)/2,(this.y1+this.y2)/2)}toObject(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return lo(lo({},super.toObject(e)),this.calcLinePoints())}_getNonTransformedDimensions(){const e=super._getNonTransformedDimensions();return"butt"===this.strokeLineCap&&(0===this.width&&(e.y-=this.strokeWidth),0===this.height&&(e.x-=this.strokeWidth)),e}calcLinePoints(){const{x1:e,x2:t,y1:n,y2:r,width:s,height:a}=this,i=e<=t?-1:1,o=n<=r?-1:1;return{x1:i*s/2,x2:i*-s/2,y1:o*a/2,y2:o*-a/2}}_toSVG(){const{x1:e,x2:t,y1:n,y2:r}=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="'.concat(e,'" y1="').concat(n,'" x2="').concat(t,'" y2="').concat(r,'" />\n')]}static async fromElement(e,t,n){const r=Eh(e,this.ATTRIBUTE_NAMES,n),{x1:s=0,y1:a=0,x2:i=0,y2:o=0}=r;return new this([s,a,i,o],co(r,am))}static fromObject(e){let{x1:t,y1:n,x2:r,y2:s}=e,a=co(e,im);return this._fromObject(lo(lo({},a),{},{points:[t,n,r,s]}),{extraParam:"points"})}}io(lm,"type","Line"),io(lm,"cacheProperties",[...Au,...om]),io(lm,"ATTRIBUTE_NAMES",eh.concat(om)),il.setClass(lm),il.setSVGClass(lm);class cm extends Fd{static getDefaults(){return lo(lo({},super.getDefaults()),cm.ownDefaults)}constructor(e){super(),Object.assign(this,cm.ownDefaults),this.setOptions(e)}_render(e){const t=this.width/2,n=this.height/2;e.beginPath(),e.moveTo(-t,n),e.lineTo(0,-n),e.lineTo(t,n),e.closePath(),this._renderPaintInOrder(e)}_toSVG(){const e=this.width/2,t=this.height/2;return["<polygon ","COMMON_PARTS",'points="',"".concat(-e," ").concat(t,",0 ").concat(-t,",").concat(e," ").concat(t),'" />']}}io(cm,"type","Triangle"),io(cm,"ownDefaults",{width:100,height:100}),il.setClass(cm),il.setSVGClass(cm);const um=["rx","ry"];class dm extends Fd{static getDefaults(){return lo(lo({},super.getDefaults()),dm.ownDefaults)}constructor(e){super(),Object.assign(this,dm.ownDefaults),this.setOptions(e)}_set(e,t){switch(super._set(e,t),e){case"rx":this.rx=t,this.set("width",2*t);break;case"ry":this.ry=t,this.set("height",2*t)}return this}getRx(){return this.get("rx")*this.get($o)}getRy(){return this.get("ry")*this.get(Jo)}toObject(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return super.toObject([...um,...e])}_toSVG(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" rx="'.concat(this.rx,'" ry="').concat(this.ry,'" />\n')]}_render(e){e.beginPath(),e.save(),e.transform(1,0,0,this.ry/this.rx,0,0),e.arc(0,0,this.rx,0,Eo,!1),e.restore(),this._renderPaintInOrder(e)}static async fromElement(e,t,n){const r=Eh(e,this.ATTRIBUTE_NAMES,n);return r.left=(r.left||0)-r.rx,r.top=(r.top||0)-r.ry,new this(r)}}io(dm,"type","Ellipse"),io(dm,"cacheProperties",[...Au,...um]),io(dm,"ownDefaults",{rx:0,ry:0}),io(dm,"ATTRIBUTE_NAMES",[...eh,"cx","cy","rx","ry"]),il.setClass(dm),il.setSVGClass(dm);const hm=["left","top"],fm={exactBoundingBox:!1};class mm extends Fd{static getDefaults(){return lo(lo({},super.getDefaults()),mm.ownDefaults)}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),io(this,"strokeDiff",void 0),Object.assign(this,mm.ownDefaults),this.setOptions(t),this.points=e;const{left:n,top:r}=t;this.initialized=!0,this.setBoundingBox(!0),"number"==typeof n&&this.set(Lo,n),"number"==typeof r&&this.set(zo,r)}isOpen(){return!0}_projectStrokeOnPoints(e){return Ud(this.points,e,this.isOpen())}_calcDimensions(e){e=lo({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:this.strokeMiterLimit,strokeUniform:this.strokeUniform,strokeWidth:this.strokeWidth},e||{});const t=this.exactBoundingBox?this._projectStrokeOnPoints(e).map(e=>e.projectedPoint):this.points;if(0===t.length)return{left:0,top:0,width:0,height:0,pathOffset:new hl,strokeOffset:new hl,strokeDiff:new hl};const n=mc(t),r=Hl(lo(lo({},e),{},{scaleX:1,scaleY:1})),s=mc(this.points.map(e=>El(e,r,!0))),a=new hl(this.scaleX,this.scaleY);let i=n.left+n.width/2,o=n.top+n.height/2;return this.exactBoundingBox&&(i-=o*Math.tan(Nl(this.skewX)),o-=i*Math.tan(Nl(this.skewY))),lo(lo({},n),{},{pathOffset:new hl(i,o),strokeOffset:new hl(s.left,s.top).subtract(new hl(n.left,n.top)).multiply(a),strokeDiff:new hl(n.width,n.height).subtract(new hl(s.width,s.height)).multiply(a)})}_findCenterFromElement(){const e=mc(this.points);return new hl(e.left+e.width/2,e.top+e.height/2)}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{left:t,top:n,width:r,height:s,pathOffset:a,strokeOffset:i,strokeDiff:o}=this._calcDimensions();this.set({width:r,height:s,pathOffset:a,strokeOffset:i,strokeDiff:o}),e&&this.setPositionByOrigin(new hl(t+r/2,n+s/2),Mo,Mo)}isStrokeAccountedForInDimensions(){return this.exactBoundingBox}_getNonTransformedDimensions(){return this.exactBoundingBox?new hl(this.width,this.height):super._getNonTransformedDimensions()}_getTransformedDimensions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.exactBoundingBox){let a;if(Object.keys(e).some(e=>this.strokeUniform||this.constructor.layoutProperties.includes(e))){var t,n;const{width:r,height:s}=this._calcDimensions(e);a=new hl(null!==(t=e.width)&&void 0!==t?t:r,null!==(n=e.height)&&void 0!==n?n:s)}else{var r,s;a=new hl(null!==(r=e.width)&&void 0!==r?r:this.width,null!==(s=e.height)&&void 0!==s?s:this.height)}return a.multiply(new hl(e.scaleX||this.scaleX,e.scaleY||this.scaleY))}return super._getTransformedDimensions(e)}_set(e,t){const n=this.initialized&&this[e]!==t,r=super._set(e,t);return this.exactBoundingBox&&n&&((e===$o||e===Jo)&&this.strokeUniform&&this.constructor.layoutProperties.includes("strokeUniform")||this.constructor.layoutProperties.includes(e))&&this.setDimensions(),r}toObject(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return lo(lo({},super.toObject(e)),{},{points:this.points.map(e=>{let{x:t,y:n}=e;return{x:t,y:n}})})}_toSVG(){const e=[],t=this.pathOffset.x,n=this.pathOffset.y,r=fo.NUM_FRACTION_DIGITS;for(let s=0,a=this.points.length;s<a;s++)e.push(Gl(this.points[s].x-t,r),",",Gl(this.points[s].y-n,r)," ");return["<".concat(this.constructor.type.toLowerCase()," "),"COMMON_PARTS",'points="'.concat(e.join(""),'" />\n')]}_render(e){const t=this.points.length,n=this.pathOffset.x,r=this.pathOffset.y;if(t&&!isNaN(this.points[t-1].y)){e.beginPath(),e.moveTo(this.points[0].x-n,this.points[0].y-r);for(let s=0;s<t;s++){const t=this.points[s];e.lineTo(t.x-n,t.y-r)}!this.isOpen()&&e.closePath(),this._renderPaintInOrder(e)}}complexity(){return this.points.length}static async fromElement(e,t,n){return new this(function(e){if(!e)return[];const t=e.replace(/,/g," ").trim().split(/\s+/),n=[];for(let r=0;r<t.length;r+=2)n.push({x:parseFloat(t[r]),y:parseFloat(t[r+1])});return n}(e.getAttribute("points")),lo(lo({},co(Eh(e,this.ATTRIBUTE_NAMES,n),hm)),t))}static fromObject(e){return this._fromObject(e,{extraParam:"points"})}}io(mm,"ownDefaults",fm),io(mm,"type","Polyline"),io(mm,"layoutProperties",[Zo,el,"strokeLineCap","strokeLineJoin","strokeMiterLimit","strokeWidth","strokeUniform","points"]),io(mm,"cacheProperties",[...Au,"points"]),io(mm,"ATTRIBUTE_NAMES",[...eh]),il.setClass(mm),il.setSVGClass(mm);class pm extends mm{isOpen(){return!1}}io(pm,"ownDefaults",fm),io(pm,"type","Polygon"),il.setClass(pm),il.setSVGClass(pm);class gm extends Fd{isEmptyStyles(e){if(!this.styles)return!0;if(void 0!==e&&!this.styles[e])return!0;const t=void 0===e?this.styles:{line:this.styles[e]};for(const n in t)for(const e in t[n])for(const r in t[n][e])return!1;return!0}styleHas(e,t){if(!this.styles)return!1;if(void 0!==t&&!this.styles[t])return!1;const n=void 0===t?this.styles:{0:this.styles[t]};for(const r in n)for(const t in n[r])if(void 0!==n[r][t][e])return!0;return!1}cleanStyle(e){if(!this.styles)return!1;const t=this.styles;let n,r,s=0,a=!0,i=0;for(const o in t){n=0;for(const i in t[o]){const l=t[o][i]||{};s++,void 0!==l[e]?(r?l[e]!==r&&(a=!1):r=l[e],l[e]===this[e]&&delete l[e]):a=!1,0!==Object.keys(l).length?n++:delete t[o][i]}0===n&&delete t[o]}for(let o=0;o<this._textLines.length;o++)i+=this._textLines[o].length;a&&s===i&&(this[e]=r,this.removeStyle(e))}removeStyle(e){if(!this.styles)return;const t=this.styles;let n,r,s;for(r in t){for(s in n=t[r],n)delete n[s][e],0===Object.keys(n[s]).length&&delete n[s];0===Object.keys(n).length&&delete t[r]}}_extendStyles(e,t){const{lineIndex:n,charIndex:r}=this.get2DCursorLocation(e);this._getLineStyle(n)||this._setLineStyle(n);const s=Xl(lo(lo({},this._getStyleDeclaration(n,r)),t),e=>void 0!==e);this._setStyleDeclaration(n,r,s)}getSelectionStyles(e,t,n){const r=[];for(let s=e;s<(t||e);s++)r.push(this.getStyleAtPosition(s,n));return r}getStyleAtPosition(e,t){const{lineIndex:n,charIndex:r}=this.get2DCursorLocation(e);return t?this.getCompleteStyleDeclaration(n,r):this._getStyleDeclaration(n,r)}setSelectionStyles(e,t,n){for(let r=t;r<(n||t);r++)this._extendStyles(r,e);this._forceClearCache=!0}_getStyleDeclaration(e,t){var n;const r=this.styles&&this.styles[e];return r&&null!==(n=r[t])&&void 0!==n?n:{}}getCompleteStyleDeclaration(e,t){return lo(lo({},ql(this,this.constructor._styleProperties)),this._getStyleDeclaration(e,t))}_setStyleDeclaration(e,t,n){this.styles[e][t]=n}_deleteStyleDeclaration(e,t){delete this.styles[e][t]}_getLineStyle(e){return!!this.styles[e]}_setLineStyle(e){this.styles[e]={}}_deleteLineStyle(e){delete this.styles[e]}}io(gm,"_styleProperties",eu);const ym=/  +/g,xm=/"/g;function bm(e,t,n,r,s){return"\t\t".concat(function(e,t){let{left:n,top:r,width:s,height:a}=t,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:fo.NUM_FRACTION_DIGITS;const o=qc(tl,e,!1),[l,c,u,d]=[n,r,s,a].map(e=>Gl(e,i));return"<rect ".concat(o,' x="').concat(l,'" y="').concat(c,'" width="').concat(u,'" height="').concat(d,'"></rect>')}(e,{left:t,top:n,width:r,height:s}),"\n")}const vm=["textAnchor","textDecoration","dx","dy","top","left","fontSize","strokeWidth"];let wm;class Cm extends gm{static getDefaults(){return lo(lo({},super.getDefaults()),Cm.ownDefaults)}constructor(e,t){super(),io(this,"__charBounds",[]),Object.assign(this,Cm.ownDefaults),this.setOptions(t),this.styles||(this.styles={}),this.text=e,this.initialized=!0,this.path&&this.setPathInfo(),this.initDimensions(),this.setCoords()}setPathInfo(){const e=this.path;e&&(e.segmentsInfo=mf(e.path))}_splitText(){const e=this._splitTextIntoLines(this.text);return this.textLines=e.lines,this._textLines=e.graphemeLines,this._unwrappedTextLines=e._unwrappedLines,this._text=e.graphemeText,e}initDimensions(){this._splitText(),this._clearCache(),this.dirty=!0,this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.includes(nu)&&this.enlargeSpaces()}enlargeSpaces(){let e,t,n,r,s,a,i;for(let o=0,l=this._textLines.length;o<l;o++)if((this.textAlign===nu||o!==l-1&&!this.isEndOfWrapping(o))&&(r=0,s=this._textLines[o],t=this.getLineWidth(o),t<this.width&&(i=this.textLines[o].match(this._reSpacesAndTabs)))){n=i.length,e=(this.width-t)/n;for(let t=0;t<=s.length;t++)a=this.__charBounds[o][t],this._reSpaceAndTab.test(s[t])?(a.width+=e,a.kernedWidth+=e,a.left+=r,r+=e):a.left+=r}}isEndOfWrapping(e){return e===this._textLines.length-1}missingNewlineOffset(e){return 1}get2DCursorLocation(e,t){const n=t?this._unwrappedTextLines:this._textLines;let r;for(r=0;r<n.length;r++){if(e<=n[r].length)return{lineIndex:r,charIndex:e};e-=n[r].length+this.missingNewlineOffset(r,t)}return{lineIndex:r-1,charIndex:n[r-1].length<e?n[r-1].length:e}}toString(){return"#<Text (".concat(this.complexity(),'): { "text": "').concat(this.text,'", "fontFamily": "').concat(this.fontFamily,'" }>')}_getCacheCanvasDimensions(){const e=super._getCacheCanvasDimensions(),t=this.fontSize;return e.width+=t*e.zoomX,e.height+=t*e.zoomY,e}_render(e){const t=this.path;t&&!t.isNotVisible()&&t._render(e),this._setTextStyles(e),this._renderTextLinesBackground(e),this._renderTextDecoration(e,"underline"),this._renderText(e),this._renderTextDecoration(e,"overline"),this._renderTextDecoration(e,"linethrough")}_renderText(e){this.paintFirst===nl?(this._renderTextStroke(e),this._renderTextFill(e)):(this._renderTextFill(e),this._renderTextStroke(e))}_setTextStyles(e,t,n){if(e.textBaseline="alphabetic",this.path)switch(this.pathAlign){case Mo:e.textBaseline="middle";break;case"ascender":e.textBaseline=zo;break;case"descender":e.textBaseline=Fo}e.font=this._getFontDeclaration(t,n)}calcTextWidth(){let e=this.getLineWidth(0);for(let t=1,n=this._textLines.length;t<n;t++){const n=this.getLineWidth(t);n>e&&(e=n)}return e}_renderTextLine(e,t,n,r,s,a){this._renderChars(e,t,n,r,s,a)}_renderTextLinesBackground(e){if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))return;const t=e.fillStyle,n=this._getLeftOffset();let r=this._getTopOffset();for(let s=0,a=this._textLines.length;s<a;s++){const t=this.getHeightOfLine(s);if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",s)){r+=t;continue}const a=this._textLines[s].length,i=this._getLineLeftOffset(s);let o,l,c=0,u=0,d=this.getValueOfPropertyAt(s,0,"textBackgroundColor");const h=this.getHeightOfLineImpl(s);for(let f=0;f<a;f++){const t=this.__charBounds[s][f];l=this.getValueOfPropertyAt(s,f,"textBackgroundColor"),this.path?(e.save(),e.translate(t.renderLeft,t.renderTop),e.rotate(t.angle),e.fillStyle=l,l&&e.fillRect(-t.width/2,-h*(1-this._fontSizeFraction),t.width,h),e.restore()):l!==d?(o=n+i+u,"rtl"===this.direction&&(o=this.width-o-c),e.fillStyle=d,d&&e.fillRect(o,r,c,h),u=t.left,c=t.width,d=l):c+=t.kernedWidth}l&&!this.path&&(o=n+i+u,"rtl"===this.direction&&(o=this.width-o-c),e.fillStyle=l,e.fillRect(o,r,c,h)),r+=t}e.fillStyle=t,this._removeShadow(e)}_measureChar(e,t,n,r){const s=ko.getFontCache(t),a=this._getFontDeclaration(t),i=n?n+e:e,o=n&&a===this._getFontDeclaration(r),l=t.fontSize/this.CACHE_FONT_SIZE;let c,u,d,h;if(n&&s.has(n)&&(d=s.get(n)),s.has(e)&&(h=c=s.get(e)),o&&s.has(i)&&(u=s.get(i),h=u-d),void 0===c||void 0===d||void 0===u){const r=function(){if(!wm){const e=Sl({width:0,height:0});wm=e.getContext("2d")}return wm}();this._setTextStyles(r,t,!0),void 0===c&&(h=c=r.measureText(e).width,s.set(e,c)),void 0===d&&o&&n&&(d=r.measureText(n).width,s.set(n,d)),o&&void 0===u&&(u=r.measureText(i).width,s.set(i,u),h=u-d)}return{width:c*l,kernedWidth:h*l}}getHeightOfChar(e,t){return this.getValueOfPropertyAt(e,t,"fontSize")}measureLine(e){const t=this._measureLine(e);return 0!==this.charSpacing&&(t.width-=this._getWidthOfCharSpacing()),t.width<0&&(t.width=0),t}_measureLine(e){let t,n,r=0;const s=this.pathSide===Ro,a=this.path,i=this._textLines[e],o=i.length,l=new Array(o);this.__charBounds[e]=l;for(let c=0;c<o;c++){const s=i[c];n=this._getGraphemeBox(s,e,c,t),l[c]=n,r+=n.kernedWidth,t=s}if(l[o]={left:n?n.left+n.width:0,width:0,kernedWidth:0,height:this.fontSize,deltaY:0},a&&a.segmentsInfo){let e=0;const t=a.segmentsInfo[a.segmentsInfo.length-1].length;switch(this.textAlign){case Lo:e=s?t-r:0;break;case Mo:e=(t-r)/2;break;case Ro:e=s?0:t-r}e+=this.pathStartOffset*(s?-1:1);for(let r=s?o-1:0;s?r>=0:r<o;s?r--:r++)n=l[r],e>t?e%=t:e<0&&(e+=t),this._setGraphemeOnPath(e,n),e+=n.kernedWidth}return{width:r,numOfSpaces:0}}_setGraphemeOnPath(e,t){const n=e+t.kernedWidth/2,r=this.path,s=pf(r.path,n,r.segmentsInfo);t.renderLeft=s.x-r.pathOffset.x,t.renderTop=s.y-r.pathOffset.y,t.angle=s.angle+(this.pathSide===Ro?Math.PI:0)}_getGraphemeBox(e,t,n,r,s){const a=this.getCompleteStyleDeclaration(t,n),i=r?this.getCompleteStyleDeclaration(t,n-1):{},o=this._measureChar(e,a,r,i);let l,c=o.kernedWidth,u=o.width;0!==this.charSpacing&&(l=this._getWidthOfCharSpacing(),u+=l,c+=l);const d={width:u,left:0,height:a.fontSize,kernedWidth:c,deltaY:a.deltaY};if(n>0&&!s){const e=this.__charBounds[t][n-1];d.left=e.left+e.width+o.kernedWidth-o.width}return d}getHeightOfLineImpl(e){const t=this.__lineHeights;if(t[e])return t[e];let n=this.getHeightOfChar(e,0);for(let r=1,s=this._textLines[e].length;r<s;r++)n=Math.max(this.getHeightOfChar(e,r),n);return t[e]=n*this._fontSizeMult}getHeightOfLine(e){return this.getHeightOfLineImpl(e)*this.lineHeight}calcTextHeight(){let e=0;for(let t=0,n=this._textLines.length;t<n;t++)e+=t===n-1?this.getHeightOfLineImpl(t):this.getHeightOfLine(t);return e}_getLeftOffset(){return"ltr"===this.direction?-this.width/2:this.width/2}_getTopOffset(){return-this.height/2}_renderTextCommon(e,t){e.save();let n=0;const r=this._getLeftOffset(),s=this._getTopOffset();for(let a=0,i=this._textLines.length;a<i;a++)this._renderTextLine(t,e,this._textLines[a],r+this._getLineLeftOffset(a),s+n+this.getHeightOfLineImpl(a),a),n+=this.getHeightOfLine(a);e.restore()}_renderTextFill(e){(this.fill||this.styleHas(tl))&&this._renderTextCommon(e,"fillText")}_renderTextStroke(e){(this.stroke&&0!==this.strokeWidth||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this._setLineDash(e,this.strokeDashArray),e.beginPath(),this._renderTextCommon(e,"strokeText"),e.closePath(),e.restore())}_renderChars(e,t,n,r,s,a){const i=this.textAlign.includes(nu),o=this.path,l=!i&&0===this.charSpacing&&this.isEmptyStyles(a)&&!o,c="ltr"===this.direction,u="ltr"===this.direction?1:-1,d=t.direction;let h,f,m,p,g,y="",x=0;if(t.save(),d!==this.direction&&(t.canvas.setAttribute("dir",c?"ltr":"rtl"),t.direction=c?"ltr":"rtl",t.textAlign=c?Lo:Ro),s-=this.getHeightOfLineImpl(a)*this._fontSizeFraction,l)return this._renderChar(e,t,a,0,n.join(""),r,s),void t.restore();for(let b=0,v=n.length-1;b<=v;b++)p=b===v||this.charSpacing||o,y+=n[b],m=this.__charBounds[a][b],0===x?(r+=u*(m.kernedWidth-m.width),x+=m.width):x+=m.kernedWidth,i&&!p&&this._reSpaceAndTab.test(n[b])&&(p=!0),p||(h=h||this.getCompleteStyleDeclaration(a,b),f=this.getCompleteStyleDeclaration(a,b+1),p=$d(h,f,!1)),p&&(o?(t.save(),t.translate(m.renderLeft,m.renderTop),t.rotate(m.angle),this._renderChar(e,t,a,b,y,-x/2,0),t.restore()):(g=r,this._renderChar(e,t,a,b,y,g,s)),y="",h=f,r+=u*x,x=0);t.restore()}_applyPatternGradientTransformText(e){const t=this.width+this.strokeWidth,n=this.height+this.strokeWidth,r=Sl({width:t,height:n}),s=r.getContext("2d");return r.width=t,r.height=n,s.beginPath(),s.moveTo(0,0),s.lineTo(t,0),s.lineTo(t,n),s.lineTo(0,n),s.closePath(),s.translate(t/2,n/2),s.fillStyle=e.toLive(s),this._applyPatternGradientTransform(s,e),s.fill(),s.createPattern(r,"no-repeat")}handleFiller(e,t,n){let r,s;return Ql(n)?"percentage"===n.gradientUnits||n.gradientTransform||n.patternTransform?(r=-this.width/2,s=-this.height/2,e.translate(r,s),e[t]=this._applyPatternGradientTransformText(n),{offsetX:r,offsetY:s}):(e[t]=n.toLive(e),this._applyPatternGradientTransform(e,n)):(e[t]=n,{offsetX:0,offsetY:0})}_setStrokeStyles(e,t){let{stroke:n,strokeWidth:r}=t;return e.lineWidth=r,e.lineCap=this.strokeLineCap,e.lineDashOffset=this.strokeDashOffset,e.lineJoin=this.strokeLineJoin,e.miterLimit=this.strokeMiterLimit,this.handleFiller(e,"strokeStyle",n)}_setFillStyles(e,t){let{fill:n}=t;return this.handleFiller(e,"fillStyle",n)}_renderChar(e,t,n,r,s,a,i){const o=this._getStyleDeclaration(n,r),l=this.getCompleteStyleDeclaration(n,r),c="fillText"===e&&l.fill,u="strokeText"===e&&l.stroke&&l.strokeWidth;if(u||c){if(t.save(),t.font=this._getFontDeclaration(l),o.textBackgroundColor&&this._removeShadow(t),o.deltaY&&(i+=o.deltaY),c){const e=this._setFillStyles(t,l);t.fillText(s,a-e.offsetX,i-e.offsetY)}if(u){const e=this._setStrokeStyles(t,l);t.strokeText(s,a-e.offsetX,i-e.offsetY)}t.restore()}}setSuperscript(e,t){this._setScript(e,t,this.superscript)}setSubscript(e,t){this._setScript(e,t,this.subscript)}_setScript(e,t,n){const r=this.get2DCursorLocation(e,!0),s=this.getValueOfPropertyAt(r.lineIndex,r.charIndex,"fontSize"),a=this.getValueOfPropertyAt(r.lineIndex,r.charIndex,"deltaY"),i={fontSize:s*n.size,deltaY:a+s*n.baseline};this.setSelectionStyles(i,e,t)}_getLineLeftOffset(e){const t=this.getLineWidth(e),n=this.width-t,r=this.textAlign,s=this.direction,a=this.isEndOfWrapping(e);let i=0;return r===nu||r===au&&!a||r===su&&!a||r===ru&&!a?0:(r===Mo&&(i=n/2),r===Ro&&(i=n),r===au&&(i=n/2),r===su&&(i=n),"rtl"===s&&(r===Ro||r===nu||r===su?i=0:r===Lo||r===ru?i=-n:r!==Mo&&r!==au||(i=-n/2)),i)}_clearCache(){this._forceClearCache=!1,this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]}getLineWidth(e){if(void 0!==this.__lineWidths[e])return this.__lineWidths[e];const{width:t}=this.measureLine(e);return this.__lineWidths[e]=t,t}_getWidthOfCharSpacing(){return 0!==this.charSpacing?this.fontSize*this.charSpacing/1e3:0}getValueOfPropertyAt(e,t,n){var r;return null!==(r=this._getStyleDeclaration(e,t)[n])&&void 0!==r?r:this[n]}_renderTextDecoration(e,t){if(!this[t]&&!this.styleHas(t))return;let n=this._getTopOffset();const r=this._getLeftOffset(),s=this.path,a=this._getWidthOfCharSpacing(),i="linethrough"===t?.5:"overline"===t?1:0,o=this.offsets[t];for(let l=0,c=this._textLines.length;l<c;l++){const c=this.getHeightOfLine(l);if(!this[t]&&!this.styleHas(t,l)){n+=c;continue}const u=this._textLines[l],d=c/this.lineHeight,h=this._getLineLeftOffset(l);let f=0,m=0,p=this.getValueOfPropertyAt(l,0,t),g=this.getValueOfPropertyAt(l,0,tl),y=this.getValueOfPropertyAt(l,0,Kc),x=p,b=g,v=y;const w=n+d*(1-this._fontSizeFraction);let C=this.getHeightOfChar(l,0),S=this.getValueOfPropertyAt(l,0,"deltaY");for(let n=0,a=u.length;n<a;n++){const a=this.__charBounds[l][n];x=this.getValueOfPropertyAt(l,n,t),b=this.getValueOfPropertyAt(l,n,tl),v=this.getValueOfPropertyAt(l,n,Kc);const c=this.getHeightOfChar(l,n),u=this.getValueOfPropertyAt(l,n,"deltaY");if(s&&x&&b){const t=this.fontSize*v/1e3;e.save(),e.fillStyle=g,e.translate(a.renderLeft,a.renderTop),e.rotate(a.angle),e.fillRect(-a.kernedWidth/2,o*c+u-i*t,a.kernedWidth,t),e.restore()}else if((x!==p||b!==g||c!==C||v!==y||u!==S)&&m>0){const t=this.fontSize*y/1e3;let n=r+h+f;"rtl"===this.direction&&(n=this.width-n-m),p&&g&&y&&(e.fillStyle=g,e.fillRect(n,w+o*C+S-i*t,m,t)),f=a.left,m=a.width,p=x,y=v,g=b,C=c,S=u}else m+=a.kernedWidth}let j=r+h+f;"rtl"===this.direction&&(j=this.width-j-m),e.fillStyle=b;const k=this.fontSize*v/1e3;x&&b&&v&&e.fillRect(j,w+o*C+S-i*k,m-a,k),n+=c}this._removeShadow(e)}_getFontDeclaration(){let{fontFamily:e=this.fontFamily,fontStyle:t=this.fontStyle,fontWeight:n=this.fontWeight,fontSize:r=this.fontSize}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;const a=e.includes("'")||e.includes('"')||e.includes(",")||Cm.genericFonts.includes(e.toLowerCase())?e:'"'.concat(e,'"');return[t,n,"".concat(s?this.CACHE_FONT_SIZE:r,"px"),a].join(" ")}render(e){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._forceClearCache&&this.initDimensions(),super.render(e)))}graphemeSplit(e){return Xd(e)}_splitTextIntoLines(e){const t=e.split(this._reNewline),n=new Array(t.length),r=["\n"];let s=[];for(let a=0;a<t.length;a++)n[a]=this.graphemeSplit(t[a]),s=s.concat(n[a],r);return s.pop(),{_unwrappedLines:n,lines:t,graphemeText:s,graphemeLines:n}}toObject(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return lo(lo({},super.toObject([...Zc,...e])),{},{styles:Jd(this.styles,this.text)},this.path?{path:this.path.toObject()}:{})}set(e,t){const{textLayoutProperties:n}=this.constructor;super.set(e,t);let r=!1,s=!1;if("object"==typeof e)for(const a in e)"path"===a&&this.setPathInfo(),r=r||n.includes(a),s=s||"path"===a;else r=n.includes(e),s="path"===e;return s&&this.setPathInfo(),r&&this.initialized&&(this.initDimensions(),this.setCoords()),this}complexity(){return 1}static async fromElement(e,t,n){const r=Eh(e,Cm.ATTRIBUTE_NAMES,n),s=lo(lo({},t),r),{textAnchor:a=Lo,textDecoration:i="",dx:o=0,dy:l=0,top:c=0,left:u=0,fontSize:d=Do,strokeWidth:h=1}=s,f=co(s,vm),m=new this(zc(e.textContent||"").trim(),lo({left:u+o,top:c+l,underline:i.includes("underline"),overline:i.includes("overline"),linethrough:i.includes("line-through"),strokeWidth:0,fontSize:d},f)),p=m.getScaledHeight()/m.height,g=((m.height+m.strokeWidth)*m.lineHeight-m.height)*p,y=m.getScaledHeight()+g;let x=0;return a===Mo&&(x=m.getScaledWidth()/2),a===Ro&&(x=m.getScaledWidth()),m.set({left:m.left-x,top:m.top-(y-m.fontSize*(.07+m._fontSizeFraction))/m.lineHeight,strokeWidth:h}),m}static fromObject(e){return this._fromObject(lo(lo({},e),{},{styles:Zd(e.styles||{},e.text)}),{extraParam:"text"})}}io(Cm,"textLayoutProperties",Jc),io(Cm,"cacheProperties",[...Au,...Zc]),io(Cm,"ownDefaults",tu),io(Cm,"type","Text"),io(Cm,"genericFonts",["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),io(Cm,"ATTRIBUTE_NAMES",eh.concat("x","y","dx","dy","font-family","font-style","font-weight","font-size","letter-spacing","text-decoration","text-anchor")),zd(Cm,[class extends Xc{_toSVG(){const e=this._getSVGLeftTopOffsets(),t=this._getSVGTextAndBg(e.textTop,e.textLeft);return this._wrapSVGTextAndBg(t)}toSVG(e){const t=this._createBaseSVGMarkup(this._toSVG(),{reviver:e,noStyle:!0,withShadow:!0}),n=this.path;return n?t+n._createBaseSVGMarkup(n._toSVG(),{reviver:e,withShadow:!0,additionalTransform:Kl(this.calcOwnMatrix())}):t}_getSVGLeftTopOffsets(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}}_wrapSVGTextAndBg(e){let{textBgRects:t,textSpans:n}=e;const r=this.getSvgTextDecoration(this);return[t.join(""),'\t\t<text xml:space="preserve" ','font-family="'.concat(this.fontFamily.replace(xm,"'"),'" '),'font-size="'.concat(this.fontSize,'" '),this.fontStyle?'font-style="'.concat(this.fontStyle,'" '):"",this.fontWeight?'font-weight="'.concat(this.fontWeight,'" '):"",r?'text-decoration="'.concat(r,'" '):"","rtl"===this.direction?'direction="'.concat(this.direction,'" '):"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",n.join(""),"</text>\n"]}_getSVGTextAndBg(e,t){const n=[],r=[];let s,a=e;this.backgroundColor&&r.push(...bm(this.backgroundColor,-this.width/2,-this.height/2,this.width,this.height));for(let i=0,o=this._textLines.length;i<o;i++)s=this._getLineLeftOffset(i),"rtl"===this.direction&&(s+=this.width),(this.textBackgroundColor||this.styleHas("textBackgroundColor",i))&&this._setSVGTextLineBg(r,i,t+s,a),this._setSVGTextLineText(n,i,t+s,a),a+=this.getHeightOfLine(i);return{textSpans:n,textBgRects:r}}_createTextCharSpan(e,t,n,r,s){const a=fo.NUM_FRACTION_DIGITS,i=this.getSvgSpanStyles(t,e!==e.trim()||!!e.match(ym)),o=i?'style="'.concat(i,'"'):"",l=t.deltaY,c=l?' dy="'.concat(Gl(l,a),'" '):"",{angle:u,renderLeft:d,renderTop:h,width:f}=s;let m="";if(void 0!==d){const e=f/2;u&&(m=' rotate="'.concat(Gl(_l(u),a),'"'));const t=zl({angle:_l(u)});t[4]=d,t[5]=h;const s=new hl(-e,0).transform(t);n=s.x,r=s.y}return'<tspan x="'.concat(Gl(n,a),'" y="').concat(Gl(r,a),'" ').concat(c).concat(m).concat(o,">").concat(Vd(e),"</tspan>")}_setSVGTextLineText(e,t,n,r){const s=this.getHeightOfLine(t),a=this.textAlign.includes(nu),i=this._textLines[t];let o,l,c,u,d,h="",f=0;r+=s*(1-this._fontSizeFraction)/this.lineHeight;for(let m=0,p=i.length-1;m<=p;m++)d=m===p||this.charSpacing||this.path,h+=i[m],c=this.__charBounds[t][m],0===f?(n+=c.kernedWidth-c.width,f+=c.width):f+=c.kernedWidth,a&&!d&&this._reSpaceAndTab.test(i[m])&&(d=!0),d||(o=o||this.getCompleteStyleDeclaration(t,m),l=this.getCompleteStyleDeclaration(t,m+1),d=$d(o,l,!0)),d&&(u=this._getStyleDeclaration(t,m),e.push(this._createTextCharSpan(h,u,n,r,c)),h="",o=l,"rtl"===this.direction?n-=f:n+=f,f=0)}_setSVGTextLineBg(e,t,n,r){const s=this._textLines[t],a=this.getHeightOfLine(t)/this.lineHeight;let i,o=0,l=0,c=this.getValueOfPropertyAt(t,0,"textBackgroundColor");for(let u=0;u<s.length;u++){const{left:s,width:d,kernedWidth:h}=this.__charBounds[t][u];i=this.getValueOfPropertyAt(t,u,"textBackgroundColor"),i!==c?(c&&e.push(...bm(c,n+l,r,o,a)),l=s,o=d,c=i):o+=h}i&&e.push(...bm(c,n+l,r,o,a))}_getSVGLineTopOffset(e){let t,n=0;for(t=0;t<e;t++)n+=this.getHeightOfLine(t);const r=this.getHeightOfLine(t);return{lineTop:n,offset:(this._fontSizeMult-this._fontSizeFraction)*r/(this.lineHeight*this._fontSizeMult)}}getSvgStyles(e){return"".concat(super.getSvgStyles(e)," text-decoration-thickness: ").concat(Gl(this.textDecorationThickness*this.getObjectScaling().y/10,fo.NUM_FRACTION_DIGITS),"%; white-space: pre;")}getSvgSpanStyles(e,t){const{fontFamily:n,strokeWidth:r,stroke:s,fill:a,fontSize:i,fontStyle:o,fontWeight:l,deltaY:c,textDecorationThickness:u,linethrough:d,overline:h,underline:f}=e,m=this.getSvgTextDecoration({underline:null!=f?f:this.underline,overline:null!=h?h:this.overline,linethrough:null!=d?d:this.linethrough}),p=u||this.textDecorationThickness;return[s?qc(nl,s):"",r?"stroke-width: ".concat(r,"; "):"",n?"font-family: ".concat(n.includes("'")||n.includes('"')?n:"'".concat(n,"'"),"; "):"",i?"font-size: ".concat(i,"px; "):"",o?"font-style: ".concat(o,"; "):"",l?"font-weight: ".concat(l,"; "):"",m?"text-decoration: ".concat(m,"; text-decoration-thickness: ").concat(Gl(p*this.getObjectScaling().y/10,fo.NUM_FRACTION_DIGITS),"%; "):"",a?qc(tl,a):"",c?"baseline-shift: ".concat(-c,"; "):"",t?"white-space: pre; ":""].join("")}getSvgTextDecoration(e){return["overline","underline","line-through"].filter(t=>e[t.replace("-","")]).join(" ")}}]),il.setClass(Cm),il.setSVGClass(Cm);class Sm{constructor(e){io(this,"target",void 0),io(this,"__mouseDownInPlace",!1),io(this,"__dragStartFired",!1),io(this,"__isDraggingOver",!1),io(this,"__dragStartSelection",void 0),io(this,"__dragImageDisposer",void 0),io(this,"_dispose",void 0),this.target=e;const t=[this.target.on("dragenter",this.dragEnterHandler.bind(this)),this.target.on("dragover",this.dragOverHandler.bind(this)),this.target.on("dragleave",this.dragLeaveHandler.bind(this)),this.target.on("dragend",this.dragEndHandler.bind(this)),this.target.on("drop",this.dropHandler.bind(this))];this._dispose=()=>{t.forEach(e=>e()),this._dispose=void 0}}isPointerOverSelection(e){const t=this.target,n=t.getSelectionStartFromPointer(e);return t.isEditing&&n>=t.selectionStart&&n<=t.selectionEnd&&t.selectionStart<t.selectionEnd}start(e){return this.__mouseDownInPlace=this.isPointerOverSelection(e)}isActive(){return this.__mouseDownInPlace}end(e){const t=this.isActive();return t&&!this.__dragStartFired&&(this.target.setCursorByClick(e),this.target.initDelayedCursor(!0)),this.__mouseDownInPlace=!1,this.__dragStartFired=!1,this.__isDraggingOver=!1,t}getDragStartSelection(){return this.__dragStartSelection}setDragImage(e,t){var n;let{selectionStart:r,selectionEnd:s}=t;const a=this.target,i=a.canvas,o=new hl(a.flipX?-1:1,a.flipY?-1:1),l=a._getCursorBoundaries(r),c=new hl(l.left+l.leftOffset,l.top+l.topOffset).multiply(o).transform(a.calcTransformMatrix()),u=i.getScenePoint(e).subtract(c),d=a.getCanvasRetinaScaling(),h=a.getBoundingRect(),f=c.subtract(new hl(h.left,h.top)),m=i.viewportTransform,p=f.add(u).transform(m,!0),g=a.backgroundColor,y=Yd(a.styles);a.backgroundColor="";const x={stroke:"transparent",fill:"transparent",textBackgroundColor:"transparent"};a.setSelectionStyles(x,0,r),a.setSelectionStyles(x,s,a.text.length),a.dirty=!0;const b=a.toCanvasElement({enableRetinaScaling:i.enableRetinaScaling,viewportTransform:!0});a.backgroundColor=g,a.styles=y,a.dirty=!0,Sf(b,{position:"fixed",left:"".concat(-b.width,"px"),border:Io,width:"".concat(b.width/d,"px"),height:"".concat(b.height/d,"px")}),this.__dragImageDisposer&&this.__dragImageDisposer(),this.__dragImageDisposer=()=>{b.remove()},tc(e.target||this.target.hiddenTextarea).body.appendChild(b),null===(n=e.dataTransfer)||void 0===n||n.setDragImage(b,p.x,p.y)}onDragStart(e){this.__dragStartFired=!0;const t=this.target,n=this.isActive();if(n&&e.dataTransfer){const n=this.__dragStartSelection={selectionStart:t.selectionStart,selectionEnd:t.selectionEnd},r=t._text.slice(n.selectionStart,n.selectionEnd).join(""),s=lo({text:t.text,value:r},n);e.dataTransfer.setData("text/plain",r),e.dataTransfer.setData("application/fabric",JSON.stringify({value:r,styles:t.getSelectionStyles(n.selectionStart,n.selectionEnd,!0)})),e.dataTransfer.effectAllowed="copyMove",this.setDragImage(e,s)}return t.abortCursorAnimation(),n}canDrop(e){if(this.target.editable&&!this.target.getActiveControl()&&!e.defaultPrevented){if(this.isActive()&&this.__dragStartSelection){const t=this.target.getSelectionStartFromPointer(e),n=this.__dragStartSelection;return t<n.selectionStart||t>n.selectionEnd}return!0}return!1}targetCanDrop(e){return this.target.canDrop(e)}dragEnterHandler(e){let{e:t}=e;const n=this.targetCanDrop(t);!this.__isDraggingOver&&n&&(this.__isDraggingOver=!0)}dragOverHandler(e){const{e:t}=e,n=this.targetCanDrop(t);!this.__isDraggingOver&&n?this.__isDraggingOver=!0:this.__isDraggingOver&&!n&&(this.__isDraggingOver=!1),this.__isDraggingOver&&(t.preventDefault(),e.canDrop=!0,e.dropTarget=this.target)}dragLeaveHandler(){(this.__isDraggingOver||this.isActive())&&(this.__isDraggingOver=!1)}dropHandler(e){var t;const{e:n}=e,r=n.defaultPrevented;this.__isDraggingOver=!1,n.preventDefault();let s=null===(t=n.dataTransfer)||void 0===t?void 0:t.getData("text/plain");if(s&&!r){const t=this.target,r=t.canvas;let a=t.getSelectionStartFromPointer(n);const{styles:i}=n.dataTransfer.types.includes("application/fabric")?JSON.parse(n.dataTransfer.getData("application/fabric")):{},o=s[Math.max(0,s.length-1)],l=0;if(this.__dragStartSelection){const e=this.__dragStartSelection.selectionStart,n=this.__dragStartSelection.selectionEnd;a>e&&a<=n?a=e:a>n&&(a-=n-e),t.removeChars(e,n),delete this.__dragStartSelection}t._reNewline.test(o)&&(t._reNewline.test(t._text[a])||a===t._text.length)&&(s=s.trimEnd()),e.didDrop=!0,e.dropTarget=t,t.insertChars(s,i,a),r.setActiveObject(t),t.enterEditing(n),t.selectionStart=Math.min(a+l,t._text.length),t.selectionEnd=Math.min(t.selectionStart+s.length,t._text.length),t.hiddenTextarea.value=t.text,t._updateTextarea(),t.hiddenTextarea.focus(),t.fire(Ko,{index:a+l,action:"drop"}),r.fire("text:changed",{target:t}),r.contextTopDirty=!0,r.requestRenderAll()}}dragEndHandler(e){let{e:t}=e;if(this.isActive()&&this.__dragStartFired&&this.__dragStartSelection){var n;const e=this.target,r=this.target.canvas,{selectionStart:s,selectionEnd:a}=this.__dragStartSelection,i=(null===(n=t.dataTransfer)||void 0===n?void 0:n.dropEffect)||Io;i===Io?(e.selectionStart=s,e.selectionEnd=a,e._updateTextarea(),e.hiddenTextarea.focus()):(e.clearContextTop(),"move"===i&&(e.removeChars(s,a),e.selectionStart=e.selectionEnd=s,e.hiddenTextarea&&(e.hiddenTextarea.value=e.text),e._updateTextarea(),e.fire(Ko,{index:s,action:"dragend"}),r.fire("text:changed",{target:e}),r.requestRenderAll()),e.exitEditing())}this.__dragImageDisposer&&this.__dragImageDisposer(),delete this.__dragImageDisposer,delete this.__dragStartSelection,this.__isDraggingOver=!1}dispose(){this._dispose&&this._dispose()}}const jm=/[ \n\.,;!\?\-]/;class km extends Cm{constructor(){super(...arguments),io(this,"_currentCursorOpacity",1)}initBehavior(){this._tick=this._tick.bind(this),this._onTickComplete=this._onTickComplete.bind(this),this.updateSelectionOnMouseMove=this.updateSelectionOnMouseMove.bind(this)}onDeselect(e){return this.isEditing&&this.exitEditing(),this.selected=!1,super.onDeselect(e)}_animateCursor(e){let{toValue:t,duration:n,delay:r,onComplete:s}=e;return $u({startValue:this._currentCursorOpacity,endValue:t,duration:n,delay:r,onComplete:s,abort:()=>!this.canvas||this.selectionStart!==this.selectionEnd,onChange:e=>{this._currentCursorOpacity=e,this.renderCursorOrSelection()}})}_tick(e){this._currentTickState=this._animateCursor({toValue:0,duration:this.cursorDuration/2,delay:Math.max(e||0,100),onComplete:this._onTickComplete})}_onTickComplete(){var e;null===(e=this._currentTickCompleteState)||void 0===e||e.abort(),this._currentTickCompleteState=this._animateCursor({toValue:1,duration:this.cursorDuration,onComplete:this._tick})}initDelayedCursor(e){this.abortCursorAnimation(),this._tick(e?0:this.cursorDelay)}abortCursorAnimation(){let e=!1;[this._currentTickState,this._currentTickCompleteState].forEach(t=>{t&&!t.isDone()&&(e=!0,t.abort())}),this._currentCursorOpacity=1,e&&this.clearContextTop()}restartCursorIfNeeded(){[this._currentTickState,this._currentTickCompleteState].some(e=>!e||e.isDone())&&this.initDelayedCursor()}selectAll(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this}cmdAll(){this.selectAll(),this.renderCursorOrSelection()}getSelectedText(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")}findWordBoundaryLeft(e){let t=0,n=e-1;if(this._reSpace.test(this._text[n]))for(;this._reSpace.test(this._text[n]);)t++,n--;for(;/\S/.test(this._text[n])&&n>-1;)t++,n--;return e-t}findWordBoundaryRight(e){let t=0,n=e;if(this._reSpace.test(this._text[n]))for(;this._reSpace.test(this._text[n]);)t++,n++;for(;/\S/.test(this._text[n])&&n<this._text.length;)t++,n++;return e+t}findLineBoundaryLeft(e){let t=0,n=e-1;for(;!/\n/.test(this._text[n])&&n>-1;)t++,n--;return e-t}findLineBoundaryRight(e){let t=0,n=e;for(;!/\n/.test(this._text[n])&&n<this._text.length;)t++,n++;return e+t}searchWordBoundary(e,t){const n=this._text;let r=e>0&&this._reSpace.test(n[e])&&(-1===t||!Bo.test(n[e-1]))?e-1:e,s=n[r];for(;r>0&&r<n.length&&!jm.test(s);)r+=t,s=n[r];return-1===t&&jm.test(s)&&r++,r}selectWord(e){var t;e=null!==(t=e)&&void 0!==t?t:this.selectionStart;const n=this.searchWordBoundary(e,-1),r=Math.max(n,this.searchWordBoundary(e,1));this.selectionStart=n,this.selectionEnd=r,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()}selectLine(e){var t;e=null!==(t=e)&&void 0!==t?t:this.selectionStart;const n=this.findLineBoundaryLeft(e),r=this.findLineBoundaryRight(e);this.selectionStart=n,this.selectionEnd=r,this._fireSelectionChanged(),this._updateTextarea()}enterEditing(e){!this.isEditing&&this.editable&&(this.enterEditingImpl(),this.fire("editing:entered",e?{e:e}:void 0),this._fireSelectionChanged(),this.canvas&&(this.canvas.fire("text:editing:entered",{target:this,e:e}),this.canvas.requestRenderAll()))}enterEditingImpl(){this.canvas&&(this.canvas.calcOffset(),this.canvas.textEditingManager.exitTextEditing()),this.isEditing=!0,this.initHiddenTextarea(),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick()}updateSelectionOnMouseMove(e){if(this.getActiveControl())return;const t=this.hiddenTextarea;tc(t).activeElement!==t&&t.focus();const n=this.getSelectionStartFromPointer(e),r=this.selectionStart,s=this.selectionEnd;(n===this.__selectionStartOnMouseDown&&r!==s||r!==n&&s!==n)&&(n>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=n):(this.selectionStart=n,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===r&&this.selectionEnd===s||(this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}_setEditingProps(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0}fromStringToGraphemeSelection(e,t,n){const r=n.slice(0,e),s=this.graphemeSplit(r).length;if(e===t)return{selectionStart:s,selectionEnd:s};const a=n.slice(e,t);return{selectionStart:s,selectionEnd:s+this.graphemeSplit(a).length}}fromGraphemeToStringSelection(e,t,n){const r=n.slice(0,e).join("").length;return e===t?{selectionStart:r,selectionEnd:r}:{selectionStart:r,selectionEnd:r+n.slice(e,t).join("").length}}_updateTextarea(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){const e=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=e.selectionStart,this.hiddenTextarea.selectionEnd=e.selectionEnd}this.updateTextareaPosition()}}updateFromTextArea(){if(!this.hiddenTextarea)return;this.cursorOffsetCache={};const e=this.hiddenTextarea;this.text=e.value,this.set("dirty",!0),this.initDimensions(),this.setCoords();const t=this.fromStringToGraphemeSelection(e.selectionStart,e.selectionEnd,e.value);this.selectionEnd=this.selectionStart=t.selectionEnd,this.inCompositionMode||(this.selectionStart=t.selectionStart),this.updateTextareaPosition()}updateTextareaPosition(){if(this.selectionStart===this.selectionEnd){const e=this._calcTextareaPosition();this.hiddenTextarea.style.left=e.left,this.hiddenTextarea.style.top=e.top}}_calcTextareaPosition(){if(!this.canvas)return{left:"1px",top:"1px"};const e=this.inCompositionMode?this.compositionStart:this.selectionStart,t=this._getCursorBoundaries(e),n=this.get2DCursorLocation(e),r=n.lineIndex,s=n.charIndex,a=this.getValueOfPropertyAt(r,s,"fontSize")*this.lineHeight,i=t.leftOffset,o=this.getCanvasRetinaScaling(),l=this.canvas.upperCanvasEl,c=l.width/o,u=l.height/o,d=c-a,h=u-a,f=new hl(t.left+i,t.top+t.topOffset+a).transform(this.calcTransformMatrix()).transform(this.canvas.viewportTransform).multiply(new hl(l.clientWidth/c,l.clientHeight/u));return f.x<0&&(f.x=0),f.x>d&&(f.x=d),f.y<0&&(f.y=0),f.y>h&&(f.y=h),f.x+=this.canvas._offset.left,f.y+=this.canvas._offset.top,{left:"".concat(f.x,"px"),top:"".concat(f.y,"px"),fontSize:"".concat(a,"px"),charHeight:a}}_saveEditingProps(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}}_restoreEditingProps(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor||this.canvas.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor||this.canvas.moveCursor),delete this._savedProps)}_exitEditing(){const e=this.hiddenTextarea;this.selected=!1,this.isEditing=!1,e&&(e.blur&&e.blur(),e.parentNode&&e.parentNode.removeChild(e)),this.hiddenTextarea=null,this.abortCursorAnimation(),this.selectionStart!==this.selectionEnd&&this.clearContextTop()}exitEditingImpl(){this._exitEditing(),this.selectionEnd=this.selectionStart,this._restoreEditingProps(),this._forceClearCache&&(this.initDimensions(),this.setCoords())}exitEditing(){const e=this._textBeforeEdit!==this.text;return this.exitEditingImpl(),this.fire("editing:exited"),e&&this.fire(rl),this.canvas&&(this.canvas.fire("text:editing:exited",{target:this}),e&&this.canvas.fire("object:modified",{target:this})),this}_removeExtraneousStyles(){for(const e in this.styles)this._textLines[e]||delete this.styles[e]}removeStyleFromTo(e,t){const{lineIndex:n,charIndex:r}=this.get2DCursorLocation(e,!0),{lineIndex:s,charIndex:a}=this.get2DCursorLocation(t,!0);if(n!==s){if(this.styles[n])for(let e=r;e<this._unwrappedTextLines[n].length;e++)delete this.styles[n][e];if(this.styles[s])for(let e=a;e<this._unwrappedTextLines[s].length;e++){const t=this.styles[s][e];t&&(this.styles[n]||(this.styles[n]={}),this.styles[n][r+e-a]=t)}for(let e=n+1;e<=s;e++)delete this.styles[e];this.shiftLineStyles(s,n-s)}else if(this.styles[n]){const e=this.styles[n],t=a-r;for(let n=r;n<a;n++)delete e[n];for(const r in this.styles[n]){const n=parseInt(r,10);n>=a&&(e[n-t]=e[r],delete e[r])}}}shiftLineStyles(e,t){const n=Object.assign({},this.styles);for(const r in this.styles){const s=parseInt(r,10);s>e&&(this.styles[s+t]=n[s],n[s-t]||delete this.styles[s])}}insertNewlineStyleObject(e,t,n,r){const s={},a=this._unwrappedTextLines[e].length,i=a===t;let o=!1;n||(n=1),this.shiftLineStyles(e,n);const l=this.styles[e]?this.styles[e][0===t?t:t-1]:void 0;for(const u in this.styles[e]){const n=parseInt(u,10);n>=t&&(o=!0,s[n-t]=this.styles[e][u],i&&0===t||delete this.styles[e][u])}let c=!1;for(o&&!i&&(this.styles[e+n]=s,c=!0),(c||a>t)&&n--;n>0;)r&&r[n-1]?this.styles[e+n]={0:lo({},r[n-1])}:l?this.styles[e+n]={0:lo({},l)}:delete this.styles[e+n],n--;this._forceClearCache=!0}insertCharStyleObject(e,t,n,r){this.styles||(this.styles={});const s=this.styles[e],a=s?lo({},s):{};n||(n=1);for(const o in a){const e=parseInt(o,10);e>=t&&(s[e+n]=a[e],a[e-n]||delete s[e])}if(this._forceClearCache=!0,r){for(;n--;)Object.keys(r[n]).length&&(this.styles[e]||(this.styles[e]={}),this.styles[e][t+n]=lo({},r[n]));return}if(!s)return;const i=s[t?t-1:1];for(;i&&n--;)this.styles[e][t+n]=lo({},i)}insertNewStyleBlock(e,t,n){const r=this.get2DCursorLocation(t,!0),s=[0];let a,i=0;for(let o=0;o<e.length;o++)"\n"===e[o]?(i++,s[i]=0):s[i]++;for(s[0]>0&&(this.insertCharStyleObject(r.lineIndex,r.charIndex,s[0],n),n=n&&n.slice(s[0]+1)),i&&this.insertNewlineStyleObject(r.lineIndex,r.charIndex+s[0],i),a=1;a<i;a++)s[a]>0?this.insertCharStyleObject(r.lineIndex+a,0,s[a],n):n&&this.styles[r.lineIndex+a]&&n[0]&&(this.styles[r.lineIndex+a][0]=n[0]),n=n&&n.slice(s[a]+1);s[a]>0&&this.insertCharStyleObject(r.lineIndex+a,0,s[a],n)}removeChars(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e+1;this.removeStyleFromTo(e,t),this._text.splice(e,t-e),this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}insertChars(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;r>n&&this.removeStyleFromTo(n,r);const s=this.graphemeSplit(e);this.insertNewStyleBlock(s,n,t),this._text=[...this._text.slice(0,n),...s,...this._text.slice(r)],this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}setSelectionStartEndWithShift(e,t,n){n<=e?(t===e?this._selectionDirection=Lo:this._selectionDirection===Ro&&(this._selectionDirection=Lo,this.selectionEnd=e),this.selectionStart=n):n>e&&n<t?this._selectionDirection===Ro?this.selectionEnd=n:this.selectionStart=n:(t===e?this._selectionDirection=Ro:this._selectionDirection===Lo&&(this._selectionDirection=Ro,this.selectionStart=t),this.selectionEnd=n)}}class Nm extends km{initHiddenTextarea(){const e=this.canvas&&tc(this.canvas.getElement())||Co(),t=e.createElement("textarea");Object.entries({autocapitalize:"off",autocorrect:"off",autocomplete:"off",spellcheck:"false","data-fabric":"textarea",wrap:"off",name:"fabricTextarea"}).map(e=>{let[n,r]=e;return t.setAttribute(n,r)});const{top:n,left:r,fontSize:s}=this._calcTextareaPosition();t.style.cssText="position: absolute; top: ".concat(n,"; left: ").concat(r,"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: ").concat(s,";"),(this.hiddenTextareaContainer||e.body).appendChild(t),Object.entries({blur:"blur",keydown:"onKeyDown",keyup:"onKeyUp",input:"onInput",copy:"copy",cut:"copy",paste:"paste",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate",compositionend:"onCompositionEnd"}).map(e=>{let[n,r]=e;return t.addEventListener(n,this[r].bind(this))}),this.hiddenTextarea=t}blur(){this.abortCursorAnimation()}onKeyDown(e){if(!this.isEditing)return;const t="rtl"===this.direction?this.keysMapRtl:this.keysMap;if(e.keyCode in t)this[t[e.keyCode]](e);else{if(!(e.keyCode in this.ctrlKeysMapDown)||!e.ctrlKey&&!e.metaKey)return;this[this.ctrlKeysMapDown[e.keyCode]](e)}e.stopImmediatePropagation(),e.preventDefault(),e.keyCode>=33&&e.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}onKeyUp(e){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:e.keyCode in this.ctrlKeysMapUp&&(e.ctrlKey||e.metaKey)&&(this[this.ctrlKeysMapUp[e.keyCode]](e),e.stopImmediatePropagation(),e.preventDefault(),this.canvas&&this.canvas.requestRenderAll())}onInput(e){const t=this.fromPaste,{value:n,selectionStart:r,selectionEnd:s}=this.hiddenTextarea;if(this.fromPaste=!1,e&&e.stopPropagation(),!this.isEditing)return;const a=()=>{this.updateFromTextArea(),this.fire(Ko),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())};if(""===this.hiddenTextarea.value)return this.styles={},void a();const i=this._splitTextIntoLines(n).graphemeText,o=this._text.length,l=i.length,c=this.selectionStart,u=this.selectionEnd,d=c!==u;let h,f,m,p,g=l-o;const y=this.fromStringToGraphemeSelection(r,s,n),x=c>y.selectionStart;d?(f=this._text.slice(c,u),g+=u-c):l<o&&(f=x?this._text.slice(u+g,u):this._text.slice(c,c-g));const b=i.slice(y.selectionEnd-g,y.selectionEnd);if(f&&f.length&&(b.length&&(h=this.getSelectionStyles(c,c+1,!1),h=b.map(()=>h[0])),d?(m=c,p=u):x?(m=u-f.length,p=u):(m=u,p=u+f.length),this.removeStyleFromTo(m,p)),b.length){const{copyPasteData:e}=wo();t&&b.join("")===e.copiedText&&!fo.disableStyleCopyPaste&&(h=e.copiedTextStyle),this.insertNewStyleBlock(b,c,h)}a()}onCompositionStart(){this.inCompositionMode=!0}onCompositionEnd(){this.inCompositionMode=!1}onCompositionUpdate(e){let{target:t}=e;const{selectionStart:n,selectionEnd:r}=t;this.compositionStart=n,this.compositionEnd=r,this.updateTextareaPosition()}copy(){if(this.selectionStart===this.selectionEnd)return;const{copyPasteData:e}=wo();e.copiedText=this.getSelectedText(),fo.disableStyleCopyPaste?e.copiedTextStyle=void 0:e.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0}paste(){this.fromPaste=!0}_getWidthBeforeCursor(e,t){let n,r=this._getLineLeftOffset(e);return t>0&&(n=this.__charBounds[e][t-1],r+=n.left+n.width),r}getDownCursorOffset(e,t){const n=this._getSelectionForOffset(e,t),r=this.get2DCursorLocation(n),s=r.lineIndex;if(s===this._textLines.length-1||e.metaKey||34===e.keyCode)return this._text.length-n;const a=r.charIndex,i=this._getWidthBeforeCursor(s,a),o=this._getIndexOnLine(s+1,i);return this._textLines[s].slice(a).length+o+1+this.missingNewlineOffset(s)}_getSelectionForOffset(e,t){return e.shiftKey&&this.selectionStart!==this.selectionEnd&&t?this.selectionEnd:this.selectionStart}getUpCursorOffset(e,t){const n=this._getSelectionForOffset(e,t),r=this.get2DCursorLocation(n),s=r.lineIndex;if(0===s||e.metaKey||33===e.keyCode)return-n;const a=r.charIndex,i=this._getWidthBeforeCursor(s,a),o=this._getIndexOnLine(s-1,i),l=this._textLines[s].slice(0,a),c=this.missingNewlineOffset(s-1);return-this._textLines[s-1].length+o-l.length+(1-c)}_getIndexOnLine(e,t){const n=this._textLines[e];let r,s,a=this._getLineLeftOffset(e),i=0;for(let o=0,l=n.length;o<l;o++)if(r=this.__charBounds[e][o].width,a+=r,a>t){s=!0;const e=a-r,n=a,l=Math.abs(e-t);i=Math.abs(n-t)<l?o:o-1;break}return s||(i=n.length-1),i}moveCursorDown(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",e)}moveCursorUp(e){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorUpOrDown("Up",e)}_moveCursorUpOrDown(e,t){const n=this["get".concat(e,"CursorOffset")](t,this._selectionDirection===Ro);if(t.shiftKey?this.moveCursorWithShift(n):this.moveCursorWithoutShift(n),0!==n){const e=this.text.length;this.selectionStart=Ou(0,this.selectionStart,e),this.selectionEnd=Ou(0,this.selectionEnd,e),this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea()}}moveCursorWithShift(e){const t=this._selectionDirection===Lo?this.selectionStart+e:this.selectionEnd+e;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,t),0!==e}moveCursorWithoutShift(e){return e<0?(this.selectionStart+=e,this.selectionEnd=this.selectionStart):(this.selectionEnd+=e,this.selectionStart=this.selectionEnd),0!==e}moveCursorLeft(e){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorLeftOrRight("Left",e)}_move(e,t,n){let r;if(e.altKey)r=this["findWordBoundary".concat(n)](this[t]);else{if(!e.metaKey&&35!==e.keyCode&&36!==e.keyCode)return this[t]+="Left"===n?-1:1,!0;r=this["findLineBoundary".concat(n)](this[t])}return void 0!==r&&this[t]!==r&&(this[t]=r,!0)}_moveLeft(e,t){return this._move(e,t,"Left")}_moveRight(e,t){return this._move(e,t,"Right")}moveCursorLeftWithoutShift(e){let t=!0;return this._selectionDirection=Lo,this.selectionEnd===this.selectionStart&&0!==this.selectionStart&&(t=this._moveLeft(e,"selectionStart")),this.selectionEnd=this.selectionStart,t}moveCursorLeftWithShift(e){return this._selectionDirection===Ro&&this.selectionStart!==this.selectionEnd?this._moveLeft(e,"selectionEnd"):0!==this.selectionStart?(this._selectionDirection=Lo,this._moveLeft(e,"selectionStart")):void 0}moveCursorRight(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",e)}_moveCursorLeftOrRight(e,t){const n="moveCursor".concat(e).concat(t.shiftKey?"WithShift":"WithoutShift");this._currentCursorOpacity=1,this[n](t)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())}moveCursorRightWithShift(e){return this._selectionDirection===Lo&&this.selectionStart!==this.selectionEnd?this._moveRight(e,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection=Ro,this._moveRight(e,"selectionEnd")):void 0}moveCursorRightWithoutShift(e){let t=!0;return this._selectionDirection=Ro,this.selectionStart===this.selectionEnd?(t=this._moveRight(e,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,t}}const _m=e=>!!e.button;class Tm extends Nm{constructor(){super(...arguments),io(this,"draggableTextDelegate",void 0)}initBehavior(){this.on("mousedown",this._mouseDownHandler),this.on("mouseup",this.mouseUpHandler),this.on("mousedblclick",this.doubleClickHandler),this.on("mousetripleclick",this.tripleClickHandler),this.draggableTextDelegate=new Sm(this),super.initBehavior()}shouldStartDragging(){return this.draggableTextDelegate.isActive()}onDragStart(e){return this.draggableTextDelegate.onDragStart(e)}canDrop(e){return this.draggableTextDelegate.canDrop(e)}doubleClickHandler(e){this.isEditing&&(this.selectWord(this.getSelectionStartFromPointer(e.e)),this.renderCursorOrSelection())}tripleClickHandler(e){this.isEditing&&(this.selectLine(this.getSelectionStartFromPointer(e.e)),this.renderCursorOrSelection())}_mouseDownHandler(e){let{e:t,alreadySelected:n}=e;this.canvas&&this.editable&&!_m(t)&&!this.getActiveControl()&&(this.draggableTextDelegate.start(t)||(this.canvas.textEditingManager.register(this),n&&(this.inCompositionMode=!1,this.setCursorByClick(t)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()),this.selected||(this.selected=n||this.isEditing)))}mouseUpHandler(e){let{e:t,transform:n}=e;const r=this.draggableTextDelegate.end(t);if(this.canvas){this.canvas.textEditingManager.unregister(this);const e=this.canvas._activeObject;if(e&&e!==this)return}!this.editable||this.group&&!this.group.interactive||n&&n.actionPerformed||_m(t)||r||this.selected&&!this.getActiveControl()&&(this.enterEditing(t),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection())}setCursorByClick(e){const t=this.getSelectionStartFromPointer(e),n=this.selectionStart,r=this.selectionEnd;e.shiftKey?this.setSelectionStartEndWithShift(n,r,t):(this.selectionStart=t,this.selectionEnd=t),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())}getSelectionStartFromPointer(e){const t=this.canvas.getScenePoint(e).transform(Pl(this.calcTransformMatrix())).add(new hl(-this._getLeftOffset(),-this._getTopOffset()));let n=0,r=0,s=0;for(let l=0;l<this._textLines.length&&n<=t.y;l++)n+=this.getHeightOfLine(l),s=l,l>0&&(r+=this._textLines[l-1].length+this.missingNewlineOffset(l-1));let a=Math.abs(this._getLineLeftOffset(s));const i=this._textLines[s].length,o=this.__charBounds[s];for(let l=0;l<i;l++){const e=a+o[l].kernedWidth;if(t.x<=e){Math.abs(t.x-e)<=Math.abs(t.x-a)&&r++;break}a=e,r++}return Math.min(this.flipX?i-r:r,this._text.length)}}const Em="moveCursorUp",Pm="moveCursorDown",Om="moveCursorLeft",Dm="moveCursorRight",Am="exitEditing",Mm=(e,t)=>{const n=t.getRetinaScaling();e.setTransform(n,0,0,n,0,0);const r=t.viewportTransform;e.transform(r[0],r[1],r[2],r[3],r[4],r[5])},Lm=lo({selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,keysMap:{9:Am,27:Am,33:Em,34:Pm,35:Dm,36:Om,37:Om,38:Em,39:Dm,40:Pm},keysMapRtl:{9:Am,27:Am,33:Em,34:Pm,35:Om,36:Dm,37:Dm,38:Em,39:Om,40:Pm},ctrlKeysMapDown:{65:"cmdAll"},ctrlKeysMapUp:{67:"copy",88:"cut"}},{_selectionDirection:null,_reSpace:/\s|\r?\n/,inCompositionMode:!1});class zm extends Tm{static getDefaults(){return lo(lo({},super.getDefaults()),zm.ownDefaults)}get type(){const e=super.type;return"itext"===e?"i-text":e}constructor(e,t){super(e,lo(lo({},zm.ownDefaults),t)),this.initBehavior()}_set(e,t){return this.isEditing&&this._savedProps&&e in this._savedProps?(this._savedProps[e]=t,this):("canvas"===e&&(this.canvas instanceof zf&&this.canvas.textEditingManager.remove(this),t instanceof zf&&t.textEditingManager.add(this)),super._set(e,t))}setSelectionStart(e){e=Math.max(e,0),this._updateAndFire("selectionStart",e)}setSelectionEnd(e){e=Math.min(e,this.text.length),this._updateAndFire("selectionEnd",e)}_updateAndFire(e,t){this[e]!==t&&(this._fireSelectionChanged(),this[e]=t),this._updateTextarea()}_fireSelectionChanged(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})}initDimensions(){this.isEditing&&this.initDelayedCursor(),super.initDimensions()}getSelectionStyles(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selectionStart||0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.selectionEnd,n=arguments.length>2?arguments[2]:void 0;return super.getSelectionStyles(e,t,n)}setSelectionStyles(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.selectionStart||0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.selectionEnd;return super.setSelectionStyles(e,t,n)}get2DCursorLocation(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selectionStart,t=arguments.length>1?arguments[1]:void 0;return super.get2DCursorLocation(e,t)}render(e){super.render(e),this.cursorOffsetCache={},this.renderCursorOrSelection()}toCanvasElement(e){const t=this.isEditing;this.isEditing=!1;const n=super.toCanvasElement(e);return this.isEditing=t,n}renderCursorOrSelection(){if(!this.isEditing||!this.canvas)return;const e=this.clearContextTop(!0);if(!e)return;const t=this._getCursorBoundaries(),n=this.findAncestorsWithClipPath(),r=n.length>0;let s,a=e;if(r){s=Sl(e.canvas),a=s.getContext("2d"),Mm(a,this.canvas);const t=this.calcTransformMatrix();a.transform(t[0],t[1],t[2],t[3],t[4],t[5])}if(this.selectionStart!==this.selectionEnd||this.inCompositionMode?this.renderSelection(a,t):this.renderCursor(a,t),r)for(const i of n){const t=i.clipPath,n=Sl(e.canvas),r=n.getContext("2d");if(Mm(r,this.canvas),!t.absolutePositioned){const e=i.calcTransformMatrix();r.transform(e[0],e[1],e[2],e[3],e[4],e[5])}t.transform(r),t.drawObject(r,!0,{}),this.drawClipPathOnCache(a,t,n)}r&&(e.setTransform(1,0,0,1,0,0),e.drawImage(s,0,0)),this.canvas.contextTopDirty=!0,e.restore()}findAncestorsWithClipPath(){const e=[];let t=this;for(;t;)t.clipPath&&e.push(t),t=t.parent;return e}_getCursorBoundaries(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selectionStart,t=arguments.length>1?arguments[1]:void 0;const n=this._getLeftOffset(),r=this._getTopOffset(),s=this._getCursorBoundariesOffsets(e,t);return{left:n,top:r,leftOffset:s.left,topOffset:s.top}}_getCursorBoundariesOffsets(e,t){return t?this.__getCursorBoundariesOffsets(e):this.cursorOffsetCache&&"top"in this.cursorOffsetCache?this.cursorOffsetCache:this.cursorOffsetCache=this.__getCursorBoundariesOffsets(e)}__getCursorBoundariesOffsets(e){let t=0,n=0;const{charIndex:r,lineIndex:s}=this.get2DCursorLocation(e);for(let l=0;l<s;l++)t+=this.getHeightOfLine(l);const a=this._getLineLeftOffset(s),i=this.__charBounds[s][r];i&&(n=i.left),0!==this.charSpacing&&r===this._textLines[s].length&&(n-=this._getWidthOfCharSpacing());const o={top:t,left:a+(n>0?n:0)};return"rtl"===this.direction&&(this.textAlign===Ro||this.textAlign===nu||this.textAlign===su?o.left*=-1:this.textAlign===Lo||this.textAlign===ru?o.left=a-(n>0?n:0):this.textAlign!==Mo&&this.textAlign!==au||(o.left=a-(n>0?n:0))),o}renderCursorAt(e){this._renderCursor(this.canvas.contextTop,this._getCursorBoundaries(e,!0),e)}renderCursor(e,t){this._renderCursor(e,t,this.selectionStart)}getCursorRenderingData(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selectionStart,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._getCursorBoundaries(e);const n=this.get2DCursorLocation(e),r=n.lineIndex,s=n.charIndex>0?n.charIndex-1:0,a=this.getValueOfPropertyAt(r,s,"fontSize"),i=this.getObjectScaling().x*this.canvas.getZoom(),o=this.cursorWidth/i,l=this.getValueOfPropertyAt(r,s,"deltaY"),c=t.topOffset+(1-this._fontSizeFraction)*this.getHeightOfLine(r)/this.lineHeight-a*(1-this._fontSizeFraction);return{color:this.cursorColor||this.getValueOfPropertyAt(r,s,"fill"),opacity:this._currentCursorOpacity,left:t.left+t.leftOffset-o/2,top:c+t.top+l,width:o,height:a}}_renderCursor(e,t,n){const{color:r,opacity:s,left:a,top:i,width:o,height:l}=this.getCursorRenderingData(n,t);e.fillStyle=r,e.globalAlpha=s,e.fillRect(a,i,o,l)}renderSelection(e,t){const n={selectionStart:this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,selectionEnd:this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd};this._renderSelection(e,n,t)}renderDragSourceEffect(){const e=this.draggableTextDelegate.getDragStartSelection();this._renderSelection(this.canvas.contextTop,e,this._getCursorBoundaries(e.selectionStart,!0))}renderDropTargetEffect(e){const t=this.getSelectionStartFromPointer(e);this.renderCursorAt(t)}_renderSelection(e,t,n){const r=t.selectionStart,s=t.selectionEnd,a=this.textAlign.includes(nu),i=this.get2DCursorLocation(r),o=this.get2DCursorLocation(s),l=i.lineIndex,c=o.lineIndex,u=i.charIndex<0?0:i.charIndex,d=o.charIndex<0?0:o.charIndex;for(let h=l;h<=c;h++){const t=this._getLineLeftOffset(h)||0;let r=this.getHeightOfLine(h),s=0,i=0,o=0;if(h===l&&(i=this.__charBounds[l][u].left),h>=l&&h<c)o=a&&!this.isEndOfWrapping(h)?this.width:this.getLineWidth(h)||5;else if(h===c)if(0===d)o=this.__charBounds[c][d].left;else{const e=this._getWidthOfCharSpacing();o=this.__charBounds[c][d-1].left+this.__charBounds[c][d-1].width-e}s=r,(this.lineHeight<1||h===c&&this.lineHeight>1)&&(r/=this.lineHeight);let f=n.left+t+i,m=r,p=0;const g=o-i;this.inCompositionMode?(e.fillStyle=this.compositionColor||"black",m=1,p=r):e.fillStyle=this.selectionColor,"rtl"===this.direction&&(this.textAlign===Ro||this.textAlign===nu||this.textAlign===su?f=this.width-f-g:this.textAlign===Lo||this.textAlign===ru?f=n.left+t-o:this.textAlign!==Mo&&this.textAlign!==au||(f=n.left+t-o)),e.fillRect(f,n.top+n.topOffset+p,g,m),n.topOffset+=s}}getCurrentCharFontSize(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,"fontSize")}getCurrentCharColor(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,tl)}_getCurrentCharIndex(){const e=this.get2DCursorLocation(this.selectionStart,!0),t=e.charIndex>0?e.charIndex-1:0;return{l:e.lineIndex,c:t}}dispose(){this.exitEditingImpl(),this.draggableTextDelegate.dispose(),super.dispose()}}io(zm,"ownDefaults",Lm),io(zm,"type","IText"),il.setClass(zm),il.setClass(zm,"i-text");class Fm extends zm{static getDefaults(){return lo(lo({},super.getDefaults()),Fm.ownDefaults)}constructor(e,t){super(e,lo(lo({},Fm.ownDefaults),t))}static createControls(){return{controls:Md()}}initDimensions(){this.initialized&&(this.isEditing&&this.initDelayedCursor(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.includes(nu)&&this.enlargeSpaces(),this.height=this.calcTextHeight())}_generateStyleMap(e){let t=0,n=0,r=0;const s={};for(let a=0;a<e.graphemeLines.length;a++)"\n"===e.graphemeText[r]&&a>0?(n=0,r++,t++):!this.splitByGrapheme&&this._reSpaceAndTab.test(e.graphemeText[r])&&a>0&&(n++,r++),s[a]={line:t,offset:n},r+=e.graphemeLines[a].length,n+=e.graphemeLines[a].length;return s}styleHas(e,t){if(this._styleMap&&!this.isWrapping){const e=this._styleMap[t];e&&(t=e.line)}return super.styleHas(e,t)}isEmptyStyles(e){if(!this.styles)return!0;let t,n=0,r=e+1,s=!1;const a=this._styleMap[e],i=this._styleMap[e+1];a&&(e=a.line,n=a.offset),i&&(r=i.line,s=r===e,t=i.offset);const o=void 0===e?this.styles:{line:this.styles[e]};for(const l in o)for(const e in o[l]){const r=parseInt(e,10);if(r>=n&&(!s||r<t))for(const t in o[l][e])return!1}return!0}_getStyleDeclaration(e,t){if(this._styleMap&&!this.isWrapping){const n=this._styleMap[e];if(!n)return{};e=n.line,t=n.offset+t}return super._getStyleDeclaration(e,t)}_setStyleDeclaration(e,t,n){const r=this._styleMap[e];super._setStyleDeclaration(r.line,r.offset+t,n)}_deleteStyleDeclaration(e,t){const n=this._styleMap[e];super._deleteStyleDeclaration(n.line,n.offset+t)}_getLineStyle(e){const t=this._styleMap[e];return!!this.styles[t.line]}_setLineStyle(e){const t=this._styleMap[e];super._setLineStyle(t.line)}_wrapText(e,t){this.isWrapping=!0;const n=this.getGraphemeDataForRender(e),r=[];for(let s=0;s<n.wordsData.length;s++)r.push(...this._wrapLine(s,t,n));return this.isWrapping=!1,r}getGraphemeDataForRender(e){const t=this.splitByGrapheme,n=t?"":" ";let r=0;return{wordsData:e.map((e,s)=>{let a=0;const i=t?this.graphemeSplit(e):this.wordSplit(e);return 0===i.length?[{word:[],width:0}]:i.map(e=>{const i=t?[e]:this.graphemeSplit(e),o=this._measureWord(i,s,a);return r=Math.max(o,r),a+=i.length+n.length,{word:i,width:o}})}),largestWordWidth:r}}_measureWord(e,t){let n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=0;for(let a=0,i=e.length;a<i;a++)s+=this._getGraphemeBox(e[a],t,a+r,n,!0).kernedWidth,n=e[a];return s}wordSplit(e){return e.split(this._wordJoiners)}_wrapLine(e,t,n){let{largestWordWidth:r,wordsData:s}=n,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const i=this._getWidthOfCharSpacing(),o=this.splitByGrapheme,l=[],c=o?"":" ";let u=0,d=[],h=0,f=0,m=!0;t-=a;const p=Math.max(t,r,this.dynamicMinWidth),g=s[e];let y;for(h=0,y=0;y<g.length;y++){const{word:t,width:n}=g[y];h+=t.length,u+=f+n-i,u>p&&!m?(l.push(d),d=[],u=n,m=!0):u+=i,m||o||d.push(c),d=d.concat(t),f=o?0:this._measureWord([c],e,h),h++,m=!1}return y&&l.push(d),r+a>this.dynamicMinWidth&&(this.dynamicMinWidth=r-i+a),l}isEndOfWrapping(e){return!this._styleMap[e+1]||this._styleMap[e+1].line!==this._styleMap[e].line}missingNewlineOffset(e,t){return this.splitByGrapheme&&!t?this.isEndOfWrapping(e)?1:0:1}_splitTextIntoLines(e){const t=super._splitTextIntoLines(e),n=this._wrapText(t.lines,this.width),r=new Array(n.length);for(let s=0;s<n.length;s++)r[s]=n[s].join("");return t.lines=r,t.graphemeLines=n,t}getMinWidth(){return Math.max(this.minWidth,this.dynamicMinWidth)}_removeExtraneousStyles(){const e=new Map;for(const t in this._styleMap){const n=parseInt(t,10);if(this._textLines[n]){const n=this._styleMap[t].line;e.set("".concat(n),!0)}}for(const t in this.styles)e.has(t)||delete this.styles[t]}toObject(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return super.toObject(["minWidth","splitByGrapheme",...e])}}io(Fm,"type","Textbox"),io(Fm,"textLayoutProperties",[...zm.textLayoutProperties,"width"]),io(Fm,"ownDefaults",{minWidth:20,dynamicMinWidth:2,lockScalingFlip:!0,noScaleCache:!1,_wordJoiners:/[ \t\r]/,splitByGrapheme:!1}),il.setClass(Fm);class Rm extends Rh{shouldPerformLayout(e){return!!e.target.clipPath&&super.shouldPerformLayout(e)}shouldLayoutClipPath(){return!1}calcLayoutResult(e,t){const{target:n}=e,{clipPath:r,group:s}=n;if(!r||!this.shouldPerformLayout(e))return;const{width:a,height:i}=mc(Fh(n,r)),o=new hl(a,i);if(r.absolutePositioned)return{center:Cc(r.getRelativeCenterPoint(),void 0,s?s.calcTransformMatrix():void 0),size:o};{const s=r.getRelativeCenterPoint().transform(n.calcOwnMatrix(),!0);if(this.shouldPerformLayout(e)){const{center:n=new hl,correction:r=new hl}=this.calcBoundingBox(t,e)||{};return{center:n.add(s),correction:r.subtract(s),size:o}}return{center:n.getRelativeCenterPoint().add(s),size:o}}}}io(Rm,"type","clip-path"),il.setClass(Rm);class Im extends Rh{getInitialSize(e,t){let{target:n}=e,{size:r}=t;return new hl(n.width||r.x,n.height||r.y)}}io(Im,"type","fixed"),il.setClass(Im);class Bm extends Uh{subscribeTargets(e){const t=e.target;e.targets.reduce((e,t)=>(t.parent&&e.add(t.parent),e),new Set).forEach(e=>{e.layoutManager.subscribeTargets({target:e,targets:[t]})})}unsubscribeTargets(e){const t=e.target,n=t.getObjects();e.targets.reduce((e,t)=>(t.parent&&e.add(t.parent),e),new Set).forEach(e=>{!n.some(t=>t.parent===e)&&e.layoutManager.unsubscribeTargets({target:e,targets:[t]})})}}class Hm extends qh{static getDefaults(){return lo(lo({},super.getDefaults()),Hm.ownDefaults)}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),Object.assign(this,Hm.ownDefaults),this.setOptions(t);const{left:n,top:r,layoutManager:s}=t;this.groupInit(e,{left:n,top:r,layoutManager:null!=s?s:new Bm})}_shouldSetNestedCoords(){return!0}__objectSelectionMonitor(){}multiSelectAdd(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];"selection-order"===this.multiSelectionStacking?this.add(...t):t.forEach(e=>{const t=this._objects.findIndex(t=>t.isInFrontOf(e)),n=-1===t?this.size():t;this.insertAt(n,e)})}canEnterGroup(e){return this.getObjects().some(t=>t.isDescendantOf(e)||e.isDescendantOf(t))?(mo("error","ActiveSelection: circular object trees are not supported, this call has no effect"),!1):super.canEnterGroup(e)}enterGroup(e,t){e.parent&&e.parent===e.group?e.parent._exitGroup(e):e.group&&e.parent!==e.group&&e.group.remove(e),this._enterGroup(e,t)}exitGroup(e,t){this._exitGroup(e,t),e.parent&&e.parent._enterGroup(e,!0)}_onAfterObjectsChange(e,t){super._onAfterObjectsChange(e,t);const n=new Set;t.forEach(e=>{const{parent:t}=e;t&&n.add(t)}),e===Lh?n.forEach(e=>{e._onAfterObjectsChange(Mh,t)}):n.forEach(e=>{e._set("dirty",!0)})}onDeselect(){return this.removeAll(),!1}toString(){return"#<ActiveSelection: (".concat(this.complexity(),")>")}shouldCache(){return!1}isOnACache(){return!1}_renderControls(e,t,n){e.save(),e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1;const r=lo(lo({hasControls:!1},n),{},{forActiveSelection:!0});for(let s=0;s<this._objects.length;s++)this._objects[s]._renderControls(e,r);super._renderControls(e,t),e.restore()}}io(Hm,"type","ActiveSelection"),io(Hm,"ownDefaults",{multiSelectionStacking:"canvas-stacking"}),il.setClass(Hm),il.setClass(Hm,"activeSelection");class Wm{constructor(){io(this,"resources",{})}applyFilters(e,t,n,r,s){const a=s.getContext("2d");if(!a)return;a.drawImage(t,0,0,n,r);const i={sourceWidth:n,sourceHeight:r,imageData:a.getImageData(0,0,n,r),originalEl:t,originalImageData:a.getImageData(0,0,n,r),canvasEl:s,ctx:a,filterBackend:this};e.forEach(e=>{e.applyTo(i)});const{imageData:o}=i;return o.width===n&&o.height===r||(s.width=o.width,s.height=o.height),a.putImageData(o,0,0),i}}class Um{constructor(){let{tileSize:e=fo.textureSize}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};io(this,"aPosition",new Float32Array([0,0,0,1,1,0,1,1])),io(this,"resources",{}),this.tileSize=e,this.setupGLContext(e,e),this.captureGPUInfo()}setupGLContext(e,t){this.dispose(),this.createWebGLCanvas(e,t)}createWebGLCanvas(e,t){const n=Sl({width:e,height:t}),r=n.getContext("webgl",{alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1});r&&(r.clearColor(0,0,0,0),this.canvas=n,this.gl=r)}applyFilters(e,t,n,r,s,a){const i=this.gl,o=s.getContext("2d");if(!i||!o)return;let l;a&&(l=this.getCachedTexture(a,t));const c={originalWidth:t.width||t.naturalWidth||0,originalHeight:t.height||t.naturalHeight||0,sourceWidth:n,sourceHeight:r,destinationWidth:n,destinationHeight:r,context:i,sourceTexture:this.createTexture(i,n,r,l?void 0:t),targetTexture:this.createTexture(i,n,r),originalTexture:l||this.createTexture(i,n,r,l?void 0:t),passes:e.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:s},u=i.createFramebuffer();return i.bindFramebuffer(i.FRAMEBUFFER,u),e.forEach(e=>{e&&e.applyTo(c)}),function(e){const t=e.targetCanvas,n=t.width,r=t.height,s=e.destinationWidth,a=e.destinationHeight;n===s&&r===a||(t.width=s,t.height=a)}(c),this.copyGLTo2D(i,c),i.bindTexture(i.TEXTURE_2D,null),i.deleteTexture(c.sourceTexture),i.deleteTexture(c.targetTexture),i.deleteFramebuffer(u),o.setTransform(1,0,0,1,0,0),c}dispose(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()}clearWebGLCaches(){this.programCache={},this.textureCache={}}createTexture(e,t,n,r,s){const{NEAREST:a,TEXTURE_2D:i,RGBA:o,UNSIGNED_BYTE:l,CLAMP_TO_EDGE:c,TEXTURE_MAG_FILTER:u,TEXTURE_MIN_FILTER:d,TEXTURE_WRAP_S:h,TEXTURE_WRAP_T:f}=e,m=e.createTexture();return e.bindTexture(i,m),e.texParameteri(i,u,s||a),e.texParameteri(i,d,s||a),e.texParameteri(i,h,c),e.texParameteri(i,f,c),r?e.texImage2D(i,0,o,o,l,r):e.texImage2D(i,0,o,t,n,0,o,l,null),m}getCachedTexture(e,t,n){const{textureCache:r}=this;if(r[e])return r[e];{const s=this.createTexture(this.gl,t.width,t.height,t,n);return s&&(r[e]=s),s}}evictCachesForKey(e){this.textureCache[e]&&(this.gl.deleteTexture(this.textureCache[e]),delete this.textureCache[e])}copyGLTo2D(e,t){const n=e.canvas,r=t.targetCanvas,s=r.getContext("2d");if(!s)return;s.translate(0,r.height),s.scale(1,-1);const a=n.height-r.height;s.drawImage(n,0,a,r.width,r.height,0,0,r.width,r.height)}copyGLTo2DPutImageData(e,t){const n=t.targetCanvas.getContext("2d"),r=t.destinationWidth,s=t.destinationHeight,a=r*s*4;if(!n)return;const i=new Uint8Array(this.imageBuffer,0,a),o=new Uint8ClampedArray(this.imageBuffer,0,a);e.readPixels(0,0,r,s,e.RGBA,e.UNSIGNED_BYTE,i);const l=new ImageData(o,r,s);n.putImageData(l,0,0)}captureGPUInfo(){if(this.gpuInfo)return this.gpuInfo;const e=this.gl,t={renderer:"",vendor:""};if(!e)return t;const n=e.getExtension("WEBGL_debug_renderer_info");if(n){const r=e.getParameter(n.UNMASKED_RENDERER_WEBGL),s=e.getParameter(n.UNMASKED_VENDOR_WEBGL);r&&(t.renderer=r.toLowerCase()),s&&(t.vendor=s.toLowerCase())}return this.gpuInfo=t,t}}let Ym;function Vm(){return!Ym&&(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&(Ym=function(){const{WebGLProbe:e}=wo();return e.queryWebGL(wl()),fo.enableGLFiltering&&e.isSupported(fo.textureSize)?new Um({tileSize:fo.textureSize}):new Wm}()),Ym}const qm=["filters","resizeFilter","src","crossOrigin","type"],Xm=["cropX","cropY"];class Gm extends Fd{static getDefaults(){return lo(lo({},super.getDefaults()),Gm.ownDefaults)}constructor(e,t){super(),io(this,"_lastScaleX",1),io(this,"_lastScaleY",1),io(this,"_filterScalingX",1),io(this,"_filterScalingY",1),this.filters=[],Object.assign(this,Gm.ownDefaults),this.setOptions(t),this.cacheKey="texture".concat(vl()),this.setElement("string"==typeof e?(this.canvas&&tc(this.canvas.getElement())||Co()).getElementById(e):e,t)}getElement(){return this._element}setElement(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._element=e,this._originalElement=e,this._setWidthHeight(n),null===(t=e.classList)||void 0===t||t.add(Gm.CSS_CANVAS),0!==this.filters.length&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters()}removeTexture(e){const t=Vm(!1);t instanceof Um&&t.evictCachesForKey(e)}dispose(){super.dispose(),this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._cacheContext=null,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(e=>{const t=this[e];t&&wo().dispose(t),this[e]=void 0})}getCrossOrigin(){return this._originalElement&&(this._originalElement.crossOrigin||null)}getOriginalSize(){const e=this.getElement();return e?{width:e.naturalWidth||e.width,height:e.naturalHeight||e.height}:{width:0,height:0}}_stroke(e){if(!this.stroke||0===this.strokeWidth)return;const t=this.width/2,n=this.height/2;e.beginPath(),e.moveTo(-t,-n),e.lineTo(t,-n),e.lineTo(t,n),e.lineTo(-t,n),e.lineTo(-t,-n),e.closePath()}toObject(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=[];return this.filters.forEach(e=>{e&&t.push(e.toObject())}),lo(lo({},super.toObject([...Xm,...e])),{},{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:t},this.resizeFilter?{resizeFilter:this.resizeFilter.toObject()}:{})}hasCrop(){return!!this.cropX||!!this.cropY||this.width<this._element.width||this.height<this._element.height}_toSVG(){const e=[],t=this._element,n=-this.width/2,r=-this.height/2;let s=[],a=[],i="",o="";if(!t)return[];if(this.hasCrop()){const e=vl();s.push('<clipPath id="imageCrop_'+e+'">\n','\t<rect x="'+n+'" y="'+r+'" width="'+this.width+'" height="'+this.height+'" />\n',"</clipPath>\n"),i=' clip-path="url(#imageCrop_'+e+')" '}if(this.imageSmoothing||(o=' image-rendering="optimizeSpeed"'),e.push("\t<image ","COMMON_PARTS",'xlink:href="'.concat(this.getSvgSrc(!0),'" x="').concat(n-this.cropX,'" y="').concat(r-this.cropY,'" width="').concat(t.width||t.naturalWidth,'" height="').concat(t.height||t.naturalHeight,'"').concat(o).concat(i,"></image>\n")),this.stroke||this.strokeDashArray){const e=this.fill;this.fill=null,a=['\t<rect x="'.concat(n,'" y="').concat(r,'" width="').concat(this.width,'" height="').concat(this.height,'" style="').concat(this.getSvgStyles(),'" />\n')],this.fill=e}return s=this.paintFirst!==tl?s.concat(a,e):s.concat(e,a),s}getSrc(e){const t=e?this._element:this._originalElement;return t?t.toDataURL?t.toDataURL():this.srcFromAttribute?t.getAttribute("src")||"":t.src:this.src||""}getSvgSrc(e){return this.getSrc(e)}setSrc(e){let{crossOrigin:t,signal:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ul(e,{crossOrigin:t,signal:n}).then(e=>{void 0!==t&&this.set({crossOrigin:t}),this.setElement(e)})}toString(){return'#<Image: { src: "'.concat(this.getSrc(),'" }>')}applyResizeFilters(){const e=this.resizeFilter,t=this.minimumScaleTrigger,n=this.getTotalObjectScaling(),r=n.x,s=n.y,a=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!e||r>t&&s>t)return this._element=a,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=r,void(this._lastScaleY=s);const i=Sl(a),{width:o,height:l}=a;this._element=i,this._lastScaleX=e.scaleX=r,this._lastScaleY=e.scaleY=s,Vm().applyFilters([e],a,o,l,this._element),this._filterScalingX=i.width/this._originalElement.width,this._filterScalingY=i.height/this._originalElement.height}applyFilters(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.filters||[];if(e=e.filter(e=>e&&!e.isNeutralState()),this.set("dirty",!0),this.removeTexture("".concat(this.cacheKey,"_filtered")),0===e.length)return this._element=this._originalElement,this._filteredEl=void 0,this._filterScalingX=1,void(this._filterScalingY=1);const t=this._originalElement,n=t.naturalWidth||t.width,r=t.naturalHeight||t.height;if(this._element===this._originalElement){const e=Sl({width:n,height:r});this._element=e,this._filteredEl=e}else this._filteredEl&&(this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,n,r),this._lastScaleX=1,this._lastScaleY=1);Vm().applyFilters(e,this._originalElement,n,r,this._element,this.cacheKey),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height)}_render(e){e.imageSmoothingEnabled=this.imageSmoothing,!0!==this.isMoving&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(e),this._renderPaintInOrder(e)}drawCacheOnCanvas(e){e.imageSmoothingEnabled=this.imageSmoothing,super.drawCacheOnCanvas(e)}shouldCache(){return this.needsItsOwnCache()}_renderFill(e){const t=this._element;if(!t)return;const n=this._filterScalingX,r=this._filterScalingY,s=this.width,a=this.height,i=Math.max(this.cropX,0),o=Math.max(this.cropY,0),l=t.naturalWidth||t.width,c=t.naturalHeight||t.height,u=i*n,d=o*r,h=Math.min(s*n,l-u),f=Math.min(a*r,c-d),m=-s/2,p=-a/2,g=Math.min(s,l/n-i),y=Math.min(a,c/r-o);t&&e.drawImage(t,u,d,h,f,m,p,g,y)}_needsResize(){const e=this.getTotalObjectScaling();return e.x!==this._lastScaleX||e.y!==this._lastScaleY}_resetWidthHeight(){this.set(this.getOriginalSize())}_setWidthHeight(){let{width:e,height:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=this.getOriginalSize();this.width=e||n.width,this.height=t||n.height}parsePreserveAspectRatioAttribute(){const e=Vc(this.preserveAspectRatio||""),t=this.width,n=this.height,r={width:t,height:n};let s,a=this._element.width,i=this._element.height,o=1,l=1,c=0,u=0,d=0,h=0;return!e||e.alignX===Io&&e.alignY===Io?(o=t/a,l=n/i):("meet"===e.meetOrSlice&&(o=l=Xh(this._element,r),s=(t-a*o)/2,"Min"===e.alignX&&(c=-s),"Max"===e.alignX&&(c=s),s=(n-i*l)/2,"Min"===e.alignY&&(u=-s),"Max"===e.alignY&&(u=s)),"slice"===e.meetOrSlice&&(o=l=Gh(this._element,r),s=a-t/o,"Mid"===e.alignX&&(d=s/2),"Max"===e.alignX&&(d=s),s=i-n/l,"Mid"===e.alignY&&(h=s/2),"Max"===e.alignY&&(h=s),a=t/o,i=n/l)),{width:a,height:i,scaleX:o,scaleY:l,offsetLeft:c,offsetTop:u,cropX:d,cropY:h}}static fromObject(e,t){let{filters:n,resizeFilter:r,src:s,crossOrigin:a,type:i}=e,o=co(e,qm);return Promise.all([Ul(s,lo(lo({},t),{},{crossOrigin:a})),n&&Yl(n,t),r&&Yl([r],t),Vl(o,t)]).then(e=>{let[t,n=[],[r]=[],a={}]=e;return new this(t,lo(lo({},o),{},{src:s,filters:n,resizeFilter:r},a))})}static fromURL(e){let{crossOrigin:t=null,signal:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return Ul(e,{crossOrigin:t,signal:n}).then(e=>new this(e,r))}static async fromElement(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const r=Eh(e,this.ATTRIBUTE_NAMES,n);return this.fromURL(r["xlink:href"]||r.href,t,r).catch(e=>(mo("log","Unable to parse Image",e),null))}}io(Gm,"type","Image"),io(Gm,"cacheProperties",[...Au,...Xm]),io(Gm,"ownDefaults",{strokeWidth:0,srcFromAttribute:!1,minimumScaleTrigger:.5,cropX:0,cropY:0,imageSmoothing:!0}),io(Gm,"CSS_CANVAS","canvas-img"),io(Gm,"ATTRIBUTE_NAMES",[...eh,"x","y","width","height","preserveAspectRatio","xlink:href","href","crossOrigin","image-rendering"]),il.setClass(Gm),il.setSVGClass(Gm);Gc(["pattern","defs","symbol","metadata","clipPath","mask","desc"]);const Km=Xo,Qm=e=>function(t,n,r){const{points:s,pathOffset:a}=r;return new hl(s[e]).subtract(a).transform(Ol(r.getViewportTransform(),r.calcTransformMatrix()))},$m=(e,t,n,r)=>{const{target:s,pointIndex:a}=t,i=s,o=Cc(new hl(n,r),void 0,i.calcOwnMatrix());return i.points[a]=o.add(i.pathOffset),i.setDimensions(),i.set("dirty",!0),!0},Jm=(e,t)=>function(n,r,s,a){const i=r.target,o=new hl(i.points[(e>0?e:i.points.length)-1]),l=o.subtract(i.pathOffset).transform(i.calcOwnMatrix()),c=t(n,lo(lo({},r),{},{pointIndex:e}),s,a),u=o.subtract(i.pathOffset).transform(i.calcOwnMatrix()).subtract(l);return i.left-=u.x,i.top-=u.y,c},Zm=e=>sd(Km,Jm(e,$m)),ep=(e,t,n)=>{const{path:r,pathOffset:s}=e,a=r[t];return new hl(a[n]-s.x,a[n+1]-s.y).transform(Ol(e.getViewportTransform(),e.calcTransformMatrix()))};function tp(e,t,n){const{commandIndex:r,pointIndex:s}=this;return ep(n,r,s)}function np(e,t,n,r){const{target:s}=t,{commandIndex:a,pointIndex:i}=this,o=((e,t,n,r,s)=>{const{path:a,pathOffset:i}=e,o=a[(r>0?r:a.length)-1],l=new hl(o[s],o[s+1]),c=l.subtract(i).transform(e.calcOwnMatrix()),u=Cc(new hl(t,n),void 0,e.calcOwnMatrix());a[r][s]=u.x+i.x,a[r][s+1]=u.y+i.y,e.setDimensions();const d=l.subtract(e.pathOffset).transform(e.calcOwnMatrix()).subtract(c);return e.left-=d.x,e.top-=d.y,e.set("dirty",!0),!0})(s,n,r,a,i);return kc(this.actionName,lo(lo({},Dc(e,t,n,r)),{},{commandIndex:a,pointIndex:i})),o}class rp extends cd{constructor(e){super(e)}render(e,t,n,r,s){const a=lo(lo({},r),{},{cornerColor:this.controlFill,cornerStrokeColor:this.controlStroke,transparentCorners:!this.controlFill});super.render(e,t,n,a,s)}}class sp extends rp{constructor(e){super(e)}render(e,t,n,r,s){const{path:a}=s,{commandIndex:i,pointIndex:o,connectToCommandIndex:l,connectToPointIndex:c}=this;e.save(),e.strokeStyle=this.controlStroke,this.connectionDashArray&&e.setLineDash(this.connectionDashArray);const[u]=a[i],d=ep(s,l,c);if("Q"===u){const r=ep(s,i,o+2);e.moveTo(r.x,r.y),e.lineTo(t,n)}else e.moveTo(t,n);e.lineTo(d.x,d.y),e.stroke(),e.restore(),super.render(e,t,n,r,s)}}const ap=(e,t,n,r,s,a)=>new(n?sp:rp)(lo(lo({commandIndex:e,pointIndex:t,actionName:"modifyPath",positionHandler:tp,actionHandler:np,connectToCommandIndex:s,connectToPointIndex:a},r),n?r.controlPointStyle:r.pointStyle));Object.freeze({__proto__:null,changeWidth:id,createObjectDefaultControls:Dd,createPathControls:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n={};let r="M";return e.path.forEach((e,s)=>{const a=e[0];switch("Z"!==a&&(n["c_".concat(s,"_").concat(a)]=ap(s,e.length-2,!1,t)),a){case"C":n["c_".concat(s,"_C_CP_1")]=ap(s,1,!0,t,s-1,(e=>"C"===e?5:"Q"===e?3:1)(r)),n["c_".concat(s,"_C_CP_2")]=ap(s,3,!0,t,s,5);break;case"Q":n["c_".concat(s,"_Q_CP_1")]=ap(s,1,!0,t,s,3)}r=a}),n},createPolyActionHandler:Zm,createPolyControls:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n={};for(let r=0;r<("number"==typeof e?e:e.points.length);r++)n["p".concat(r)]=new cd(lo({actionName:Km,positionHandler:Qm(r),actionHandler:Zm(r)},t));return n},createPolyPositionHandler:Qm,createResizeControls:Ad,createTextboxDefaultControls:Md,dragHandler:Lc,factoryPolyActionHandler:Jm,getLocalPoint:Mc,polyActionHandler:$m,renderCircleControl:od,renderSquareControl:ld,rotationStyleHandler:ud,rotationWithSnapping:dd,scaleCursorStyleHandler:pd,scaleOrSkewActionName:Td,scaleSkewCursorStyleHandler:Ed,scalingEqually:yd,scalingX:xd,scalingXOrSkewingY:Pd,scalingY:bd,scalingYOrSkewingX:Od,skewCursorStyleHandler:Sd,skewHandlerX:kd,skewHandlerY:Nd,wrapWithFireEvent:sd,wrapWithFixedAnchor:ad});const ip=e=>void 0!==e.webgl,op="precision highp float",lp="\n    ".concat(op,";\n    varying vec2 vTexCoord;\n    uniform sampler2D uTexture;\n    void main() {\n      gl_FragColor = texture2D(uTexture, vTexCoord);\n    }"),cp=["type"],up=["type"],dp=new RegExp(op,"g");class hp{get type(){return this.constructor.type}constructor(){let e=co(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},cp);Object.assign(this,this.constructor.defaults,e)}getFragmentSource(){return lp}getVertexSource(){return"\n    attribute vec2 aPosition;\n    varying vec2 vTexCoord;\n    void main() {\n      vTexCoord = aPosition;\n      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n    }"}createProgram(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getFragmentSource(),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.getVertexSource();const{WebGLProbe:{GLPrecision:r="highp"}}=wo();"highp"!==r&&(t=t.replace(dp,op.replace("highp",r)));const s=e.createShader(e.VERTEX_SHADER),a=e.createShader(e.FRAGMENT_SHADER),i=e.createProgram();if(!s||!a||!i)throw new po("Vertex, fragment shader or program creation error");if(e.shaderSource(s,n),e.compileShader(s),!e.getShaderParameter(s,e.COMPILE_STATUS))throw new po("Vertex shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(s)));if(e.shaderSource(a,t),e.compileShader(a),!e.getShaderParameter(a,e.COMPILE_STATUS))throw new po("Fragment shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(a)));if(e.attachShader(i,s),e.attachShader(i,a),e.linkProgram(i),!e.getProgramParameter(i,e.LINK_STATUS))throw new po('Shader link error for "'.concat(this.type,'" ').concat(e.getProgramInfoLog(i)));const o=this.getUniformLocations(e,i)||{};return o.uStepW=e.getUniformLocation(i,"uStepW"),o.uStepH=e.getUniformLocation(i,"uStepH"),{program:i,attributeLocations:this.getAttributeLocations(e,i),uniformLocations:o}}getAttributeLocations(e,t){return{aPosition:e.getAttribLocation(t,"aPosition")}}getUniformLocations(e,t){const n=this.constructor.uniformLocations,r={};for(let s=0;s<n.length;s++)r[n[s]]=e.getUniformLocation(t,n[s]);return r}sendAttributeData(e,t,n){const r=t.aPosition,s=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,s),e.enableVertexAttribArray(r),e.vertexAttribPointer(r,2,e.FLOAT,!1,0,0),e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW)}_setupFrameBuffer(e){const t=e.context;if(e.passes>1){const n=e.destinationWidth,r=e.destinationHeight;e.sourceWidth===n&&e.sourceHeight===r||(t.deleteTexture(e.targetTexture),e.targetTexture=e.filterBackend.createTexture(t,n,r)),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e.targetTexture,0)}else t.bindFramebuffer(t.FRAMEBUFFER,null),t.finish()}_swapTextures(e){e.passes--,e.pass++;const t=e.targetTexture;e.targetTexture=e.sourceTexture,e.sourceTexture=t}isNeutralState(e){return!1}applyTo(e){ip(e)?(this._setupFrameBuffer(e),this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){}getCacheKey(){return this.type}retrieveShader(e){const t=this.getCacheKey();return e.programCache[t]||(e.programCache[t]=this.createProgram(e.context)),e.programCache[t]}applyToWebGL(e){const t=e.context,n=this.retrieveShader(e);0===e.pass&&e.originalTexture?t.bindTexture(t.TEXTURE_2D,e.originalTexture):t.bindTexture(t.TEXTURE_2D,e.sourceTexture),t.useProgram(n.program),this.sendAttributeData(t,n.attributeLocations,e.aPosition),t.uniform1f(n.uniformLocations.uStepW,1/e.sourceWidth),t.uniform1f(n.uniformLocations.uStepH,1/e.sourceHeight),this.sendUniformData(t,n.uniformLocations),t.viewport(0,0,e.destinationWidth,e.destinationHeight),t.drawArrays(t.TRIANGLE_STRIP,0,4)}bindAdditionalTexture(e,t,n){e.activeTexture(n),e.bindTexture(e.TEXTURE_2D,t),e.activeTexture(e.TEXTURE0)}unbindAdditionalTexture(e,t){e.activeTexture(t),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0)}sendUniformData(e,t){}createHelpLayer(e){if(!e.helpLayer){const{sourceWidth:t,sourceHeight:n}=e,r=Sl({width:t,height:n});e.helpLayer=r}}toObject(){const e=Object.keys(this.constructor.defaults||{});return lo({type:this.type},e.reduce((e,t)=>(e[t]=this[t],e),{}))}toJSON(){return this.toObject()}static async fromObject(e,t){return new this(co(e,up))}}io(hp,"type","BaseFilter"),io(hp,"uniformLocations",[]);const fp={multiply:"gl_FragColor.rgb *= uColor.rgb;\n",screen:"gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);\n",add:"gl_FragColor.rgb += uColor.rgb;\n",difference:"gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);\n",subtract:"gl_FragColor.rgb -= uColor.rgb;\n",lighten:"gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);\n",darken:"gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);\n",exclusion:"gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);\n",overlay:"\n    if (uColor.r < 0.5) {\n      gl_FragColor.r *= 2.0 * uColor.r;\n    } else {\n      gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);\n    }\n    if (uColor.g < 0.5) {\n      gl_FragColor.g *= 2.0 * uColor.g;\n    } else {\n      gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);\n    }\n    if (uColor.b < 0.5) {\n      gl_FragColor.b *= 2.0 * uColor.b;\n    } else {\n      gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);\n    }\n    ",tint:"\n    gl_FragColor.rgb *= (1.0 - uColor.a);\n    gl_FragColor.rgb += uColor.rgb;\n    "};class mp extends hp{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return"\n      precision highp float;\n      uniform sampler2D uTexture;\n      uniform vec4 uColor;\n      varying vec2 vTexCoord;\n      void main() {\n        vec4 color = texture2D(uTexture, vTexCoord);\n        gl_FragColor = color;\n        if (color.a > 0.0) {\n          ".concat(fp[this.mode],"\n        }\n      }\n      ")}applyTo2d(e){let{imageData:{data:t}}=e;const n=new Uc(this.color).getSource(),r=this.alpha,s=n[0]*r,a=n[1]*r,i=n[2]*r,o=1-r;for(let l=0;l<t.length;l+=4){const e=t[l],n=t[l+1],r=t[l+2];let c,u,d;switch(this.mode){case"multiply":c=e*s/255,u=n*a/255,d=r*i/255;break;case"screen":c=255-(255-e)*(255-s)/255,u=255-(255-n)*(255-a)/255,d=255-(255-r)*(255-i)/255;break;case"add":c=e+s,u=n+a,d=r+i;break;case"difference":c=Math.abs(e-s),u=Math.abs(n-a),d=Math.abs(r-i);break;case"subtract":c=e-s,u=n-a,d=r-i;break;case"darken":c=Math.min(e,s),u=Math.min(n,a),d=Math.min(r,i);break;case"lighten":c=Math.max(e,s),u=Math.max(n,a),d=Math.max(r,i);break;case"overlay":c=s<128?2*e*s/255:255-2*(255-e)*(255-s)/255,u=a<128?2*n*a/255:255-2*(255-n)*(255-a)/255,d=i<128?2*r*i/255:255-2*(255-r)*(255-i)/255;break;case"exclusion":c=s+e-2*s*e/255,u=a+n-2*a*n/255,d=i+r-2*i*r/255;break;case"tint":c=s+e*o,u=a+n*o,d=i+r*o}t[l]=c,t[l+1]=u,t[l+2]=d}}sendUniformData(e,t){const n=new Uc(this.color).getSource();n[0]=this.alpha*n[0]/255,n[1]=this.alpha*n[1]/255,n[2]=this.alpha*n[2]/255,n[3]=this.alpha,e.uniform4fv(t.uColor,n)}}io(mp,"defaults",{color:"#F95C63",mode:"multiply",alpha:1}),io(mp,"type","BlendColor"),io(mp,"uniformLocations",["uColor"]),il.setClass(mp);const pp={multiply:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform sampler2D uImage;\n    uniform vec4 uColor;\n    varying vec2 vTexCoord;\n    varying vec2 vTexCoord2;\n    void main() {\n      vec4 color = texture2D(uTexture, vTexCoord);\n      vec4 color2 = texture2D(uImage, vTexCoord2);\n      color.rgba *= color2.rgba;\n      gl_FragColor = color;\n    }\n    ",mask:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform sampler2D uImage;\n    uniform vec4 uColor;\n    varying vec2 vTexCoord;\n    varying vec2 vTexCoord2;\n    void main() {\n      vec4 color = texture2D(uTexture, vTexCoord);\n      vec4 color2 = texture2D(uImage, vTexCoord2);\n      color.a = color2.a;\n      gl_FragColor = color;\n    }\n    "},gp=["type","image"];class yp extends hp{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return pp[this.mode]}getVertexSource(){return"\n    attribute vec2 aPosition;\n    varying vec2 vTexCoord;\n    varying vec2 vTexCoord2;\n    uniform mat3 uTransformMatrix;\n    void main() {\n      vTexCoord = aPosition;\n      vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;\n      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n    }\n    "}applyToWebGL(e){const t=e.context,n=this.createTexture(e.filterBackend,this.image);this.bindAdditionalTexture(t,n,t.TEXTURE1),super.applyToWebGL(e),this.unbindAdditionalTexture(t,t.TEXTURE1)}createTexture(e,t){return e.getCachedTexture(t.cacheKey,t.getElement())}calculateMatrix(){const e=this.image,{width:t,height:n}=e.getElement();return[1/e.scaleX,0,0,0,1/e.scaleY,0,-e.left/t,-e.top/n,1]}applyTo2d(e){let{imageData:{data:t,width:n,height:r},filterBackend:{resources:s}}=e;const a=this.image;s.blendImage||(s.blendImage=wl());const i=s.blendImage,o=i.getContext("2d");i.width!==n||i.height!==r?(i.width=n,i.height=r):o.clearRect(0,0,n,r),o.setTransform(a.scaleX,0,0,a.scaleY,a.left,a.top),o.drawImage(a.getElement(),0,0,n,r);const l=o.getImageData(0,0,n,r).data;for(let c=0;c<t.length;c+=4){const e=t[c],n=t[c+1],r=t[c+2],s=t[c+3],a=l[c],i=l[c+1],o=l[c+2],u=l[c+3];switch(this.mode){case"multiply":t[c]=e*a/255,t[c+1]=n*i/255,t[c+2]=r*o/255,t[c+3]=s*u/255;break;case"mask":t[c+3]=u}}}sendUniformData(e,t){const n=this.calculateMatrix();e.uniform1i(t.uImage,1),e.uniformMatrix3fv(t.uTransformMatrix,!1,n)}toObject(){return lo(lo({},super.toObject()),{},{image:this.image&&this.image.toObject()})}static async fromObject(e,t){let{type:n,image:r}=e,s=co(e,gp);return Gm.fromObject(r,t).then(e=>new this(lo(lo({},s),{},{image:e})))}}io(yp,"type","BlendImage"),io(yp,"defaults",{mode:"multiply",alpha:1}),io(yp,"uniformLocations",["uTransformMatrix","uImage"]),il.setClass(yp);class xp extends hp{getFragmentSource(){return"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform vec2 uDelta;\n    varying vec2 vTexCoord;\n    const float nSamples = 15.0;\n    vec3 v3offset = vec3(12.9898, 78.233, 151.7182);\n    float random(vec3 scale) {\n      /* use the fragment position for a different seed per-pixel */\n      return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);\n    }\n    void main() {\n      vec4 color = vec4(0.0);\n      float totalC = 0.0;\n      float totalA = 0.0;\n      float offset = random(v3offset);\n      for (float t = -nSamples; t <= nSamples; t++) {\n        float percent = (t + offset - 0.5) / nSamples;\n        vec4 sample = texture2D(uTexture, vTexCoord + uDelta * percent);\n        float weight = 1.0 - abs(percent);\n        float alpha = weight * sample.a;\n        color.rgb += sample.rgb * alpha;\n        color.a += alpha;\n        totalA += weight;\n        totalC += alpha;\n      }\n      gl_FragColor.rgb = color.rgb / totalC;\n      gl_FragColor.a = color.a / totalA;\n    }\n  "}applyTo(e){ip(e)?(this.aspectRatio=e.sourceWidth/e.sourceHeight,e.passes++,this._setupFrameBuffer(e),this.horizontal=!0,this.applyToWebGL(e),this._swapTextures(e),this._setupFrameBuffer(e),this.horizontal=!1,this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){let{imageData:{data:t,width:n,height:r}}=e;this.aspectRatio=n/r,this.horizontal=!0;let s=this.getBlurValue()*n;const a=new Uint8ClampedArray(t),i=4*n;for(let o=0;o<t.length;o+=4){let e=0,n=0,r=0,l=0,c=0;const u=o-o%i,d=u+i;for(let a=-14;a<15;a++){const i=a/15,h=4*Math.floor(s*i),f=1-Math.abs(i);let m=o+h;m<u?m=u:m>d&&(m=d);const p=t[m+3]*f;e+=t[m]*p,n+=t[m+1]*p,r+=t[m+2]*p,l+=p,c+=f}a[o]=e/l,a[o+1]=n/l,a[o+2]=r/l,a[o+3]=l/c}this.horizontal=!1,s=this.getBlurValue()*r;for(let o=0;o<a.length;o+=4){let e=0,n=0,r=0,l=0,c=0;const u=o%i,d=a.length-i+u;for(let t=-14;t<15;t++){const h=t/15,f=Math.floor(s*h)*i,m=1-Math.abs(h);let p=o+f;p<u?p=u:p>d&&(p=d);const g=a[p+3]*m;e+=a[p]*g,n+=a[p+1]*g,r+=a[p+2]*g,l+=g,c+=m}t[o]=e/l,t[o+1]=n/l,t[o+2]=r/l,t[o+3]=l/c}}sendUniformData(e,t){const n=this.chooseRightDelta();e.uniform2fv(t.uDelta,n)}isNeutralState(){return 0===this.blur}getBlurValue(){let e=1;const{horizontal:t,aspectRatio:n}=this;return t?n>1&&(e=1/n):n<1&&(e=n),e*this.blur*.12}chooseRightDelta(){const e=this.getBlurValue();return this.horizontal?[e,0]:[0,e]}}io(xp,"type","Blur"),io(xp,"defaults",{blur:0}),io(xp,"uniformLocations",["uDelta"]),il.setClass(xp);class bp extends hp{getFragmentSource(){return"\n  precision highp float;\n  uniform sampler2D uTexture;\n  uniform float uBrightness;\n  varying vec2 vTexCoord;\n  void main() {\n    vec4 color = texture2D(uTexture, vTexCoord);\n    color.rgb += uBrightness;\n    gl_FragColor = color;\n  }\n"}applyTo2d(e){let{imageData:{data:t}}=e;const n=Math.round(255*this.brightness);for(let r=0;r<t.length;r+=4)t[r]+=n,t[r+1]+=n,t[r+2]+=n}isNeutralState(){return 0===this.brightness}sendUniformData(e,t){e.uniform1f(t.uBrightness,this.brightness)}}io(bp,"type","Brightness"),io(bp,"defaults",{brightness:0}),io(bp,"uniformLocations",["uBrightness"]),il.setClass(bp);const vp={matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],colorsOnly:!0};class wp extends hp{getFragmentSource(){return"\n  precision highp float;\n  uniform sampler2D uTexture;\n  varying vec2 vTexCoord;\n  uniform mat4 uColorMatrix;\n  uniform vec4 uConstants;\n  void main() {\n    vec4 color = texture2D(uTexture, vTexCoord);\n    color *= uColorMatrix;\n    color += uConstants;\n    gl_FragColor = color;\n  }"}applyTo2d(e){const t=e.imageData.data,n=this.matrix,r=this.colorsOnly;for(let s=0;s<t.length;s+=4){const e=t[s],a=t[s+1],i=t[s+2];if(t[s]=e*n[0]+a*n[1]+i*n[2]+255*n[4],t[s+1]=e*n[5]+a*n[6]+i*n[7]+255*n[9],t[s+2]=e*n[10]+a*n[11]+i*n[12]+255*n[14],!r){const r=t[s+3];t[s]+=r*n[3],t[s+1]+=r*n[8],t[s+2]+=r*n[13],t[s+3]=e*n[15]+a*n[16]+i*n[17]+r*n[18]+255*n[19]}}}sendUniformData(e,t){const n=this.matrix,r=[n[0],n[1],n[2],n[3],n[5],n[6],n[7],n[8],n[10],n[11],n[12],n[13],n[15],n[16],n[17],n[18]],s=[n[4],n[9],n[14],n[19]];e.uniformMatrix4fv(t.uColorMatrix,!1,r),e.uniform4fv(t.uConstants,s)}toObject(){return lo(lo({},super.toObject()),{},{matrix:[...this.matrix]})}}function Cp(e,t){var n;const r=(io(n=class extends wp{toObject(){return{type:this.type,colorsOnly:this.colorsOnly}}},"type",e),io(n,"defaults",{colorsOnly:!1,matrix:t}),n);return il.setClass(r,e),r}io(wp,"type","ColorMatrix"),io(wp,"defaults",vp),io(wp,"uniformLocations",["uColorMatrix","uConstants"]),il.setClass(wp);const Sp=Cp("Brownie",[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0]),jp=Cp("Vintage",[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0]),kp=Cp("Kodachrome",[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0]),Np=Cp("Technicolor",[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0]),_p=Cp("Polaroid",[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0]),Tp=Cp("Sepia",[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0]),Ep=Cp("BlackWhite",[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]);class Pp extends hp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(e),this.subFilters=e.subFilters||[]}applyTo(e){ip(e)&&(e.passes+=this.subFilters.length-1),this.subFilters.forEach(t=>{t.applyTo(e)})}toObject(){return{type:this.type,subFilters:this.subFilters.map(e=>e.toObject())}}isNeutralState(){return!this.subFilters.some(e=>!e.isNeutralState())}static fromObject(e,t){return Promise.all((e.subFilters||[]).map(e=>il.getClass(e.type).fromObject(e,t))).then(e=>new this({subFilters:e}))}}io(Pp,"type","Composed"),il.setClass(Pp);class Op extends hp{getFragmentSource(){return"\n  precision highp float;\n  uniform sampler2D uTexture;\n  uniform float uContrast;\n  varying vec2 vTexCoord;\n  void main() {\n    vec4 color = texture2D(uTexture, vTexCoord);\n    float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));\n    color.rgb = contrastF * (color.rgb - 0.5) + 0.5;\n    gl_FragColor = color;\n  }"}isNeutralState(){return 0===this.contrast}applyTo2d(e){let{imageData:{data:t}}=e;const n=Math.floor(255*this.contrast),r=259*(n+255)/(255*(259-n));for(let s=0;s<t.length;s+=4)t[s]=r*(t[s]-128)+128,t[s+1]=r*(t[s+1]-128)+128,t[s+2]=r*(t[s+2]-128)+128}sendUniformData(e,t){e.uniform1f(t.uContrast,this.contrast)}}io(Op,"type","Contrast"),io(Op,"defaults",{contrast:0}),io(Op,"uniformLocations",["uContrast"]),il.setClass(Op);const Dp={Convolute_3_1:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform float uMatrix[9];\n    uniform float uStepW;\n    uniform float uStepH;\n    varying vec2 vTexCoord;\n    void main() {\n      vec4 color = vec4(0, 0, 0, 0);\n      for (float h = 0.0; h < 3.0; h+=1.0) {\n        for (float w = 0.0; w < 3.0; w+=1.0) {\n          vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));\n          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];\n        }\n      }\n      gl_FragColor = color;\n    }\n    ",Convolute_3_0:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform float uMatrix[9];\n    uniform float uStepW;\n    uniform float uStepH;\n    varying vec2 vTexCoord;\n    void main() {\n      vec4 color = vec4(0, 0, 0, 1);\n      for (float h = 0.0; h < 3.0; h+=1.0) {\n        for (float w = 0.0; w < 3.0; w+=1.0) {\n          vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));\n          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];\n        }\n      }\n      float alpha = texture2D(uTexture, vTexCoord).a;\n      gl_FragColor = color;\n      gl_FragColor.a = alpha;\n    }\n    ",Convolute_5_1:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform float uMatrix[25];\n    uniform float uStepW;\n    uniform float uStepH;\n    varying vec2 vTexCoord;\n    void main() {\n      vec4 color = vec4(0, 0, 0, 0);\n      for (float h = 0.0; h < 5.0; h+=1.0) {\n        for (float w = 0.0; w < 5.0; w+=1.0) {\n          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\n          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];\n        }\n      }\n      gl_FragColor = color;\n    }\n    ",Convolute_5_0:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform float uMatrix[25];\n    uniform float uStepW;\n    uniform float uStepH;\n    varying vec2 vTexCoord;\n    void main() {\n      vec4 color = vec4(0, 0, 0, 1);\n      for (float h = 0.0; h < 5.0; h+=1.0) {\n        for (float w = 0.0; w < 5.0; w+=1.0) {\n          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\n          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];\n        }\n      }\n      float alpha = texture2D(uTexture, vTexCoord).a;\n      gl_FragColor = color;\n      gl_FragColor.a = alpha;\n    }\n    ",Convolute_7_1:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform float uMatrix[49];\n    uniform float uStepW;\n    uniform float uStepH;\n    varying vec2 vTexCoord;\n    void main() {\n      vec4 color = vec4(0, 0, 0, 0);\n      for (float h = 0.0; h < 7.0; h+=1.0) {\n        for (float w = 0.0; w < 7.0; w+=1.0) {\n          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\n          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];\n        }\n      }\n      gl_FragColor = color;\n    }\n    ",Convolute_7_0:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform float uMatrix[49];\n    uniform float uStepW;\n    uniform float uStepH;\n    varying vec2 vTexCoord;\n    void main() {\n      vec4 color = vec4(0, 0, 0, 1);\n      for (float h = 0.0; h < 7.0; h+=1.0) {\n        for (float w = 0.0; w < 7.0; w+=1.0) {\n          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\n          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];\n        }\n      }\n      float alpha = texture2D(uTexture, vTexCoord).a;\n      gl_FragColor = color;\n      gl_FragColor.a = alpha;\n    }\n    ",Convolute_9_1:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform float uMatrix[81];\n    uniform float uStepW;\n    uniform float uStepH;\n    varying vec2 vTexCoord;\n    void main() {\n      vec4 color = vec4(0, 0, 0, 0);\n      for (float h = 0.0; h < 9.0; h+=1.0) {\n        for (float w = 0.0; w < 9.0; w+=1.0) {\n          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\n          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];\n        }\n      }\n      gl_FragColor = color;\n    }\n    ",Convolute_9_0:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform float uMatrix[81];\n    uniform float uStepW;\n    uniform float uStepH;\n    varying vec2 vTexCoord;\n    void main() {\n      vec4 color = vec4(0, 0, 0, 1);\n      for (float h = 0.0; h < 9.0; h+=1.0) {\n        for (float w = 0.0; w < 9.0; w+=1.0) {\n          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\n          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];\n        }\n      }\n      float alpha = texture2D(uTexture, vTexCoord).a;\n      gl_FragColor = color;\n      gl_FragColor.a = alpha;\n    }\n    "};class Ap extends hp{getCacheKey(){return"".concat(this.type,"_").concat(Math.sqrt(this.matrix.length),"_").concat(this.opaque?1:0)}getFragmentSource(){return Dp[this.getCacheKey()]}applyTo2d(e){const t=e.imageData,n=t.data,r=this.matrix,s=Math.round(Math.sqrt(r.length)),a=Math.floor(s/2),i=t.width,o=t.height,l=e.ctx.createImageData(i,o),c=l.data,u=this.opaque?1:0;let d,h,f,m,p,g,y,x,b,v,w,C,S;for(w=0;w<o;w++)for(v=0;v<i;v++){for(p=4*(w*i+v),d=0,h=0,f=0,m=0,S=0;S<s;S++)for(C=0;C<s;C++)y=w+S-a,g=v+C-a,y<0||y>=o||g<0||g>=i||(x=4*(y*i+g),b=r[S*s+C],d+=n[x]*b,h+=n[x+1]*b,f+=n[x+2]*b,u||(m+=n[x+3]*b));c[p]=d,c[p+1]=h,c[p+2]=f,c[p+3]=u?n[p+3]:m}e.imageData=l}sendUniformData(e,t){e.uniform1fv(t.uMatrix,this.matrix)}toObject(){return lo(lo({},super.toObject()),{},{opaque:this.opaque,matrix:[...this.matrix]})}}io(Ap,"type","Convolute"),io(Ap,"defaults",{opaque:!1,matrix:[0,0,0,0,1,0,0,0,0]}),io(Ap,"uniformLocations",["uMatrix","uOpaque","uHalfSize","uSize"]),il.setClass(Ap);const Mp="Gamma";class Lp extends hp{getFragmentSource(){return"\n  precision highp float;\n  uniform sampler2D uTexture;\n  uniform vec3 uGamma;\n  varying vec2 vTexCoord;\n  void main() {\n    vec4 color = texture2D(uTexture, vTexCoord);\n    vec3 correction = (1.0 / uGamma);\n    color.r = pow(color.r, correction.r);\n    color.g = pow(color.g, correction.g);\n    color.b = pow(color.b, correction.b);\n    gl_FragColor = color;\n    gl_FragColor.rgb *= color.a;\n  }\n"}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(e),this.gamma=e.gamma||this.constructor.defaults.gamma.concat()}applyTo2d(e){let{imageData:{data:t}}=e;const n=this.gamma,r=1/n[0],s=1/n[1],a=1/n[2];this.rgbValues||(this.rgbValues={r:new Uint8Array(256),g:new Uint8Array(256),b:new Uint8Array(256)});const i=this.rgbValues;for(let o=0;o<256;o++)i.r[o]=255*Math.pow(o/255,r),i.g[o]=255*Math.pow(o/255,s),i.b[o]=255*Math.pow(o/255,a);for(let o=0;o<t.length;o+=4)t[o]=i.r[t[o]],t[o+1]=i.g[t[o+1]],t[o+2]=i.b[t[o+2]]}sendUniformData(e,t){e.uniform3fv(t.uGamma,this.gamma)}isNeutralState(){const{gamma:e}=this;return 1===e[0]&&1===e[1]&&1===e[2]}toObject(){return{type:Mp,gamma:this.gamma.concat()}}}io(Lp,"type",Mp),io(Lp,"defaults",{gamma:[1,1,1]}),io(Lp,"uniformLocations",["uGamma"]),il.setClass(Lp);const zp={average:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    varying vec2 vTexCoord;\n    void main() {\n      vec4 color = texture2D(uTexture, vTexCoord);\n      float average = (color.r + color.b + color.g) / 3.0;\n      gl_FragColor = vec4(average, average, average, color.a);\n    }\n    ",lightness:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform int uMode;\n    varying vec2 vTexCoord;\n    void main() {\n      vec4 col = texture2D(uTexture, vTexCoord);\n      float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;\n      gl_FragColor = vec4(average, average, average, col.a);\n    }\n    ",luminosity:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform int uMode;\n    varying vec2 vTexCoord;\n    void main() {\n      vec4 col = texture2D(uTexture, vTexCoord);\n      float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;\n      gl_FragColor = vec4(average, average, average, col.a);\n    }\n    "};class Fp extends hp{applyTo2d(e){let{imageData:{data:t}}=e;for(let n,r=0;r<t.length;r+=4){const e=t[r],s=t[r+1],a=t[r+2];switch(this.mode){case"average":n=(e+s+a)/3;break;case"lightness":n=(Math.min(e,s,a)+Math.max(e,s,a))/2;break;case"luminosity":n=.21*e+.72*s+.07*a}t[r+2]=t[r+1]=t[r]=n}}getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return zp[this.mode]}sendUniformData(e,t){e.uniform1i(t.uMode,1)}isNeutralState(){return!1}}io(Fp,"type","Grayscale"),io(Fp,"defaults",{mode:"average"}),io(Fp,"uniformLocations",["uMode"]),il.setClass(Fp);const Rp=lo(lo({},vp),{},{rotation:0});class Ip extends wp{calculateMatrix(){const e=this.rotation*Math.PI,t=ul(e),n=dl(e),r=1/3,s=Math.sqrt(r)*n,a=1-t;this.matrix=[t+a/3,r*a-s,r*a+s,0,0,r*a+s,t+r*a,r*a-s,0,0,r*a-s,r*a+s,t+r*a,0,0,0,0,0,1,0]}isNeutralState(){return 0===this.rotation}applyTo(e){this.calculateMatrix(),super.applyTo(e)}toObject(){return{type:this.type,rotation:this.rotation}}}io(Ip,"type","HueRotation"),io(Ip,"defaults",Rp),il.setClass(Ip);class Bp extends hp{applyTo2d(e){let{imageData:{data:t}}=e;for(let n=0;n<t.length;n+=4)t[n]=255-t[n],t[n+1]=255-t[n+1],t[n+2]=255-t[n+2],this.alpha&&(t[n+3]=255-t[n+3])}getFragmentSource(){return"\n  precision highp float;\n  uniform sampler2D uTexture;\n  uniform int uInvert;\n  uniform int uAlpha;\n  varying vec2 vTexCoord;\n  void main() {\n    vec4 color = texture2D(uTexture, vTexCoord);\n    if (uInvert == 1) {\n      if (uAlpha == 1) {\n        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,1.0 -color.a);\n      } else {\n        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);\n      }\n    } else {\n      gl_FragColor = color;\n    }\n  }\n"}isNeutralState(){return!this.invert}sendUniformData(e,t){e.uniform1i(t.uInvert,Number(this.invert)),e.uniform1i(t.uAlpha,Number(this.alpha))}}io(Bp,"type","Invert"),io(Bp,"defaults",{alpha:!1,invert:!0}),io(Bp,"uniformLocations",["uInvert","uAlpha"]),il.setClass(Bp);class Hp extends hp{getFragmentSource(){return"\n  precision highp float;\n  uniform sampler2D uTexture;\n  uniform float uStepH;\n  uniform float uNoise;\n  uniform float uSeed;\n  varying vec2 vTexCoord;\n  float rand(vec2 co, float seed, float vScale) {\n    return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);\n  }\n  void main() {\n    vec4 color = texture2D(uTexture, vTexCoord);\n    color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;\n    gl_FragColor = color;\n  }\n"}applyTo2d(e){let{imageData:{data:t}}=e;const n=this.noise;for(let r=0;r<t.length;r+=4){const e=(.5-Math.random())*n;t[r]+=e,t[r+1]+=e,t[r+2]+=e}}sendUniformData(e,t){e.uniform1f(t.uNoise,this.noise/255),e.uniform1f(t.uSeed,Math.random())}isNeutralState(){return 0===this.noise}}io(Hp,"type","Noise"),io(Hp,"defaults",{noise:0}),io(Hp,"uniformLocations",["uNoise","uSeed"]),il.setClass(Hp);class Wp extends hp{applyTo2d(e){let{imageData:{data:t,width:n,height:r}}=e;for(let s=0;s<r;s+=this.blocksize)for(let e=0;e<n;e+=this.blocksize){const a=4*s*n+4*e,i=t[a],o=t[a+1],l=t[a+2],c=t[a+3];for(let u=s;u<Math.min(s+this.blocksize,r);u++)for(let r=e;r<Math.min(e+this.blocksize,n);r++){const e=4*u*n+4*r;t[e]=i,t[e+1]=o,t[e+2]=l,t[e+3]=c}}}isNeutralState(){return 1===this.blocksize}getFragmentSource(){return"\n  precision highp float;\n  uniform sampler2D uTexture;\n  uniform float uBlocksize;\n  uniform float uStepW;\n  uniform float uStepH;\n  varying vec2 vTexCoord;\n  void main() {\n    float blockW = uBlocksize * uStepW;\n    float blockH = uBlocksize * uStepH;\n    int posX = int(vTexCoord.x / blockW);\n    int posY = int(vTexCoord.y / blockH);\n    float fposX = float(posX);\n    float fposY = float(posY);\n    vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);\n    vec4 color = texture2D(uTexture, squareCoords);\n    gl_FragColor = color;\n  }\n"}sendUniformData(e,t){e.uniform1f(t.uBlocksize,this.blocksize)}}io(Wp,"type","Pixelate"),io(Wp,"defaults",{blocksize:4}),io(Wp,"uniformLocations",["uBlocksize"]),il.setClass(Wp);class Up extends hp{getFragmentSource(){return"\nprecision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uLow;\nuniform vec4 uHigh;\nvarying vec2 vTexCoord;\nvoid main() {\n  gl_FragColor = texture2D(uTexture, vTexCoord);\n  if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {\n    gl_FragColor.a = 0.0;\n  }\n}\n"}applyTo2d(e){let{imageData:{data:t}}=e;const n=255*this.distance,r=new Uc(this.color).getSource(),s=[r[0]-n,r[1]-n,r[2]-n],a=[r[0]+n,r[1]+n,r[2]+n];for(let i=0;i<t.length;i+=4){const e=t[i],n=t[i+1],r=t[i+2];e>s[0]&&n>s[1]&&r>s[2]&&e<a[0]&&n<a[1]&&r<a[2]&&(t[i+3]=0)}}sendUniformData(e,t){const n=new Uc(this.color).getSource(),r=this.distance,s=[0+n[0]/255-r,0+n[1]/255-r,0+n[2]/255-r,1],a=[n[0]/255+r,n[1]/255+r,n[2]/255+r,1];e.uniform4fv(t.uLow,s),e.uniform4fv(t.uHigh,a)}}io(Up,"type","RemoveColor"),io(Up,"defaults",{color:"#FFFFFF",distance:.02,useAlpha:!1}),io(Up,"uniformLocations",["uLow","uHigh"]),il.setClass(Up);class Yp extends hp{sendUniformData(e,t){e.uniform2fv(t.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),e.uniform1fv(t.uTaps,this.taps)}getFilterWindow(){const e=this.tempScale;return Math.ceil(this.lanczosLobes/e)}getCacheKey(){const e=this.getFilterWindow();return"".concat(this.type,"_").concat(e)}getFragmentSource(){const e=this.getFilterWindow();return this.generateShader(e)}getTaps(){const e=this.lanczosCreate(this.lanczosLobes),t=this.tempScale,n=this.getFilterWindow(),r=new Array(n);for(let s=1;s<=n;s++)r[s-1]=e(s*t);return r}generateShader(e){const t=new Array(e);for(let n=1;n<=e;n++)t[n-1]="".concat(n,".0 * uDelta");return"\n      precision highp float;\n      uniform sampler2D uTexture;\n      uniform vec2 uDelta;\n      varying vec2 vTexCoord;\n      uniform float uTaps[".concat(e,"];\n      void main() {\n        vec4 color = texture2D(uTexture, vTexCoord);\n        float sum = 1.0;\n        ").concat(t.map((e,t)=>"\n              color += texture2D(uTexture, vTexCoord + ".concat(e,") * uTaps[").concat(t,"] + texture2D(uTexture, vTexCoord - ").concat(e,") * uTaps[").concat(t,"];\n              sum += 2.0 * uTaps[").concat(t,"];\n            ")).join("\n"),"\n        gl_FragColor = color / sum;\n      }\n    ")}applyToForWebgl(e){e.passes++,this.width=e.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=e.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),e.destinationWidth=this.dW,super.applyTo(e),e.sourceWidth=e.destinationWidth,this.height=e.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),e.destinationHeight=this.dH,super.applyTo(e),e.sourceHeight=e.destinationHeight}applyTo(e){ip(e)?this.applyToForWebgl(e):this.applyTo2d(e)}isNeutralState(){return 1===this.scaleX&&1===this.scaleY}lanczosCreate(e){return t=>{if(t>=e||t<=-e)return 0;if(t<1.1920929e-7&&t>-1.1920929e-7)return 1;const n=(t*=Math.PI)/e;return Math.sin(t)/t*Math.sin(n)/n}}applyTo2d(e){const t=e.imageData,n=this.scaleX,r=this.scaleY;this.rcpScaleX=1/n,this.rcpScaleY=1/r;const s=t.width,a=t.height,i=Math.round(s*n),o=Math.round(a*r);let l;l="sliceHack"===this.resizeType?this.sliceByTwo(e,s,a,i,o):"hermite"===this.resizeType?this.hermiteFastResize(e,s,a,i,o):"bilinear"===this.resizeType?this.bilinearFiltering(e,s,a,i,o):"lanczos"===this.resizeType?this.lanczosResize(e,s,a,i,o):new ImageData(i,o),e.imageData=l}sliceByTwo(e,t,n,r,s){const a=e.imageData,i=.5;let o=!1,l=!1,c=t*i,u=n*i;const d=e.filterBackend.resources;let h=0,f=0;const m=t;let p=0;d.sliceByTwo||(d.sliceByTwo=wl());const g=d.sliceByTwo;(g.width<1.5*t||g.height<n)&&(g.width=1.5*t,g.height=n);const y=g.getContext("2d");for(y.clearRect(0,0,1.5*t,n),y.putImageData(a,0,0),r=Math.floor(r),s=Math.floor(s);!o||!l;)t=c,n=u,r<Math.floor(c*i)?c=Math.floor(c*i):(c=r,o=!0),s<Math.floor(u*i)?u=Math.floor(u*i):(u=s,l=!0),y.drawImage(g,h,f,t,n,m,p,c,u),h=m,f=p,p+=u;return y.getImageData(h,f,r,s)}lanczosResize(e,t,n,r,s){const a=e.imageData.data,i=e.ctx.createImageData(r,s),o=i.data,l=this.lanczosCreate(this.lanczosLobes),c=this.rcpScaleX,u=this.rcpScaleY,d=2/this.rcpScaleX,h=2/this.rcpScaleY,f=Math.ceil(c*this.lanczosLobes/2),m=Math.ceil(u*this.lanczosLobes/2),p={},g={x:0,y:0},y={x:0,y:0};return function e(x){let b,v,w,C,S,j,k,N,_,T,E;for(g.x=(x+.5)*c,y.x=Math.floor(g.x),b=0;b<s;b++){for(g.y=(b+.5)*u,y.y=Math.floor(g.y),S=0,j=0,k=0,N=0,_=0,v=y.x-f;v<=y.x+f;v++)if(!(v<0||v>=t)){T=Math.floor(1e3*Math.abs(v-g.x)),p[T]||(p[T]={});for(let e=y.y-m;e<=y.y+m;e++)e<0||e>=n||(E=Math.floor(1e3*Math.abs(e-g.y)),p[T][E]||(p[T][E]=l(Math.sqrt(Math.pow(T*d,2)+Math.pow(E*h,2))/1e3)),w=p[T][E],w>0&&(C=4*(e*t+v),S+=w,j+=w*a[C],k+=w*a[C+1],N+=w*a[C+2],_+=w*a[C+3]))}C=4*(b*r+x),o[C]=j/S,o[C+1]=k/S,o[C+2]=N/S,o[C+3]=_/S}return++x<r?e(x):i}(0)}bilinearFiltering(e,t,n,r,s){let a,i,o,l,c,u,d,h,f,m,p,g,y,x=0;const b=this.rcpScaleX,v=this.rcpScaleY,w=4*(t-1),C=e.imageData.data,S=e.ctx.createImageData(r,s),j=S.data;for(d=0;d<s;d++)for(h=0;h<r;h++)for(c=Math.floor(b*h),u=Math.floor(v*d),f=b*h-c,m=v*d-u,y=4*(u*t+c),p=0;p<4;p++)a=C[y+p],i=C[y+4+p],o=C[y+w+p],l=C[y+w+4+p],g=a*(1-f)*(1-m)+i*f*(1-m)+o*m*(1-f)+l*f*m,j[x++]=g;return S}hermiteFastResize(e,t,n,r,s){const a=this.rcpScaleX,i=this.rcpScaleY,o=Math.ceil(a/2),l=Math.ceil(i/2),c=e.imageData.data,u=e.ctx.createImageData(r,s),d=u.data;for(let h=0;h<s;h++)for(let e=0;e<r;e++){const n=4*(e+h*r);let s=0,u=0,f=0,m=0,p=0,g=0,y=0;const x=(h+.5)*i;for(let r=Math.floor(h*i);r<(h+1)*i;r++){const n=Math.abs(x-(r+.5))/l,i=(e+.5)*a,d=n*n;for(let l=Math.floor(e*a);l<(e+1)*a;l++){let e=Math.abs(i-(l+.5))/o;const n=Math.sqrt(d+e*e);n>1&&n<-1||(s=2*n*n*n-3*n*n+1,s>0&&(e=4*(l+r*t),y+=s*c[e+3],f+=s,c[e+3]<255&&(s=s*c[e+3]/250),m+=s*c[e],p+=s*c[e+1],g+=s*c[e+2],u+=s))}}d[n]=m/u,d[n+1]=p/u,d[n+2]=g/u,d[n+3]=y/f}return u}}io(Yp,"type","Resize"),io(Yp,"defaults",{resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3}),io(Yp,"uniformLocations",["uDelta","uTaps"]),il.setClass(Yp);class Vp extends hp{getFragmentSource(){return"\n  precision highp float;\n  uniform sampler2D uTexture;\n  uniform float uSaturation;\n  varying vec2 vTexCoord;\n  void main() {\n    vec4 color = texture2D(uTexture, vTexCoord);\n    float rgMax = max(color.r, color.g);\n    float rgbMax = max(rgMax, color.b);\n    color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;\n    color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;\n    color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;\n    gl_FragColor = color;\n  }\n"}applyTo2d(e){let{imageData:{data:t}}=e;const n=-this.saturation;for(let r=0;r<t.length;r+=4){const e=t[r],s=t[r+1],a=t[r+2],i=Math.max(e,s,a);t[r]+=i!==e?(i-e)*n:0,t[r+1]+=i!==s?(i-s)*n:0,t[r+2]+=i!==a?(i-a)*n:0}}sendUniformData(e,t){e.uniform1f(t.uSaturation,-this.saturation)}isNeutralState(){return 0===this.saturation}}io(Vp,"type","Saturation"),io(Vp,"defaults",{saturation:0}),io(Vp,"uniformLocations",["uSaturation"]),il.setClass(Vp);class qp extends hp{getFragmentSource(){return"\n  precision highp float;\n  uniform sampler2D uTexture;\n  uniform float uVibrance;\n  varying vec2 vTexCoord;\n  void main() {\n    vec4 color = texture2D(uTexture, vTexCoord);\n    float max = max(color.r, max(color.g, color.b));\n    float avg = (color.r + color.g + color.b) / 3.0;\n    float amt = (abs(max - avg) * 2.0) * uVibrance;\n    color.r += max != color.r ? (max - color.r) * amt : 0.00;\n    color.g += max != color.g ? (max - color.g) * amt : 0.00;\n    color.b += max != color.b ? (max - color.b) * amt : 0.00;\n    gl_FragColor = color;\n  }\n"}applyTo2d(e){let{imageData:{data:t}}=e;const n=-this.vibrance;for(let r=0;r<t.length;r+=4){const e=t[r],s=t[r+1],a=t[r+2],i=Math.max(e,s,a),o=(e+s+a)/3,l=2*Math.abs(i-o)/255*n;t[r]+=i!==e?(i-e)*l:0,t[r+1]+=i!==s?(i-s)*l:0,t[r+2]+=i!==a?(i-a)*l:0}}sendUniformData(e,t){e.uniform1f(t.uVibrance,-this.vibrance)}isNeutralState(){return 0===this.vibrance}}io(qp,"type","Vibrance"),io(qp,"defaults",{vibrance:0}),io(qp,"uniformLocations",["uVibrance"]),il.setClass(qp);Object.freeze({__proto__:null,BaseFilter:hp,BlackWhite:Ep,BlendColor:mp,BlendImage:yp,Blur:xp,Brightness:bp,Brownie:Sp,ColorMatrix:wp,Composed:Pp,Contrast:Op,Convolute:Ap,Gamma:Lp,Grayscale:Fp,HueRotation:Ip,Invert:Bp,Kodachrome:kp,Noise:Hp,Pixelate:Wp,Polaroid:_p,RemoveColor:Up,Resize:Yp,Saturation:Vp,Sepia:Tp,Technicolor:Np,Vibrance:qp,Vintage:jp});const Xp=e=>{let{showControls:t,controlsPosition:n,onRotateLeft:r,onRotateRight:s,onDelete:a}=e;return t?(0,Lt.jsxs)("div",{className:"absolute flex items-center gap-0.5 bg-white bg-opacity-50 text-gray-800 rounded-sm px-1.5 py-0.5 z-[60] ",style:{left:"".concat(n.x,"px"),top:"".concat(n.y,"px"),position:"absolute",pointerEvents:"auto"},children:[(0,Lt.jsx)("button",{onClick:r,className:"w-5 h-5 flex items-center justify-center text-gray-800 hover:text-gray-900 rounded ","aria-label":"Rotate Left",title:"Rotate Left",style:{color:"#1f2937"},children:(0,Lt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"16",height:"16",fill:"currentColor",style:{color:"#1f2937"},children:(0,Lt.jsx)("path",{d:"M24 192l144 0c9.7 0 18.5-5.8 22.2-14.8s1.7-19.3-5.2-26.2l-46.7-46.7c75.3-58.6 184.3-53.3 253.5 15.9 75 75 75 196.5 0 271.5s-196.5 75-271.5 0c-10.2-10.2-19-21.3-26.4-33-9.5-14.9-29.3-19.3-44.2-9.8s-19.3 29.3-9.8 44.2C49.7 408.7 61.4 423.5 75 437 175 537 337 537 437 437S537 175 437 75C342.8-19.3 193.3-24.7 92.7 58.8L41 7C34.1 .2 23.8-1.9 14.8 1.8S0 14.3 0 24L0 168c0 13.3 10.7 24 24 24z"})})}),(0,Lt.jsx)("button",{onClick:s,className:"w-5 h-5 flex items-center justify-center text-gray-800 hover:text-gray-900 rounded transition-colors bg-transparent","aria-label":"Rotate Right",title:"Rotate Right",style:{color:"#1f2937"},children:(0,Lt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"16",height:"16",fill:"currentColor",style:{color:"#1f2937"},children:(0,Lt.jsx)("path",{d:"M488 192l-144 0c-9.7 0-18.5-5.8-22.2-14.8s-1.7-19.3 5.2-26.2l46.7-46.7c-75.3-58.6-184.3-53.3-253.5 15.9-75 75-75 196.5 0 271.5s196.5 75 271.5 0c8.2-8.2 15.5-16.9 21.9-26.1 10.1-14.5 30.1-18 44.6-7.9s18 30.1 7.9 44.6c-8.5 12.2-18.2 23.8-29.1 34.7-100 100-262.1 100-362 0S-25 175 75 75c94.3-94.3 243.7-99.6 344.3-16.2L471 7c6.9-6.9 17.2-8.9 26.2-5.2S512 14.3 512 24l0 144c0 13.3-10.7 24-24 24z"})})}),(0,Lt.jsx)("button",{onClick:a,className:"w-6 h-6 flex items-center justify-center text-red-600 hover:text-red-700 hover:bg-red-50 rounded transition-colors","aria-label":"Remove",title:"Delete",children:(0,Lt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",width:"24",height:"24",fill:"currentColor",style:{color:"#dc2626"},children:(0,Lt.jsx)("path",{d:"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"})})})]}):null},Gp=(e,t,n)=>{if(!e.current)return null;const r=!t.current||t.current.visible,s=!n.current||n.current.visible;t.current&&(t.current.visible=!1),n.current&&(n.current.visible=!1);const a=e.current.toDataURL({format:"png",quality:1,multiplier:2,backgroundColor:"white"});return t.current&&(t.current.visible=r),n.current&&(n.current.visible=s),(t.current||n.current)&&e.current.renderAll(),a},Kp=t=>{let{selectedCaseType:n,selectedColor:r,selectedPins:s,onPinSelect:a,onPinRemove:i,products:o,onSaveImage:l}=t;const c=(0,e.useRef)(null),u=(0,e.useRef)(null),d=(0,e.useRef)(null),h=(0,e.useRef)(null),f=(0,e.useRef)(null),m=(0,e.useRef)(new Map),p=(0,e.useRef)(null),[g,y]=(0,e.useState)(null),{controlsPosition:x,showControls:b,setShowControls:v,updateControls:w}=(()=>{const[t,n]=(0,e.useState)({x:0,y:0}),[r,s]=(0,e.useState)(!1);return{controlsPosition:t,showControls:r,setShowControls:s,updateControls:(0,e.useCallback)((e,t)=>{if(!e||!t.current)return;const r=e.getBoundingRect(!0),s=t.current.getElement(),a=s.parentElement;if(!a)return;const i=s.getBoundingClientRect(),o=a.getBoundingClientRect(),l=i.left-o.left,c=i.top-o.top,u=l+r.left+r.width/2,d=c+r.top+r.height+14,h=Math.max(6,Math.min(u-35,o.width-70-6)),f=Math.max(6,Math.min(d,o.height-32-6));n({x:h,y:f})},[])}})(),{updateBorderRect:C,removeBorderRect:S}=((t,n,r,s,a)=>({updateBorderRect:(0,e.useCallback)(e=>{if(!e||!t.current||e.isCase)return;const i=a.current.get(e);i&&(t.current.remove(i),a.current.delete(e));const o=e.getBoundingRect(!0),l=new Dh({left:o.left,top:o.top,width:o.width,height:o.height,originX:"left",originY:"top",fill:"transparent",stroke:"#111827",strokeWidth:1,strokeDashArray:[3,3],selectable:!1,evented:!1,excludeFromExport:!1});a.current.set(e,l),t.current.add(l);const c=n.current;c&&t.current.sendObjectToBack(c),r.current&&t.current.sendObjectToBack(r.current),s.current&&t.current.sendObjectToBack(s.current),t.current.bringObjectToFront(e),t.current.renderAll()},[t,n,r,s,a]),removeBorderRect:(0,e.useCallback)(e=>{if(!e||!t.current)return;const n=a.current.get(e);n&&(t.current.remove(n),a.current.delete(e),t.current.renderAll())},[t,a])}))(u,d,h,f,m),j=(0,e.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:85,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:85;return new Promise((a,i)=>{const o=new Image;o.crossOrigin="anonymous",o.src=e,o.onload=()=>{const e=u.current.getWidth(),i=u.current.getHeight();let l,c,m=e/2,g=i/2;if(t){const t=Math.min(1*e/o.width,1*i/o.height);l=t,c=t}else{const e=Math.max(r,s),t=o.width/o.height;let n,a;o.width>=o.height?(n=e,a=e/t):(a=e,n=e*t),l=n/o.width,c=a/o.height}const y=new Gm(o,{left:m,top:g,originX:"center",originY:"center",scaleX:l,scaleY:c,selectable:!t,hasControls:t,lockScalingX:t,lockScalingY:t,borderColor:"transparent",cornerColor:t?"transparent":"blue",cornerSize:t?0:8,transparentCorners:!1,hasBorders:!1,isCase:t});if(t){p.current&&(clearTimeout(p.current),p.current=null);u.current.getObjects().forEach(e=>{if(e&&"rect"===e.type){(!0===e.isBoundaryRect||Array.isArray(e.strokeDashArray)&&(4===e.strokeDashArray[0]&&4===e.strokeDashArray[1]||3===e.strokeDashArray[0]&&3===e.strokeDashArray[1])&&(!e.fill||"transparent"===e.fill)&&!1===e.selectable&&!1===e.evented)&&u.current.remove(e)}}),h.current=null,f.current&&(u.current.remove(f.current),f.current=null),y.set("evented",!1),d.current=y,u.current.add(y),u.current.sendObjectToBack(y),p.current=setTimeout(()=>{if(d.current!==y)return;h.current&&u.current.remove(h.current);const e=y.getBoundingRect(),t="business"===n?140:120,r="business"===n?50:40,s=new Dh({left:e.left+t,top:e.top+r,width:e.width-2*t,height:e.height-2*r,fill:"transparent",stroke:"rgba(239, 68, 68, 0.3)",strokeWidth:1,strokeDashArray:[4,4],selectable:!1,evented:!1,visible:!1,isBoundaryRect:!0});h.current=s,u.current.add(s),u.current.sendObjectToBack(s),f.current=null,u.current.sendObjectToBack(y),u.current.renderAll(),p.current=null},100)}else u.current.add(y);u.current.renderAll(),a(y)},o.onerror=i})},[n]),k=(0,e.useCallback)(e=>{w(e,u)},[w]),N=(0,e.useCallback)(()=>{const e=u.current;if(!e||!c.current)return;const t=c.current.parentElement;if(!t)return;const n=t.clientWidth,r=t.clientHeight;e.setWidth(n),e.setHeight(r),e.renderAll()},[]);(0,e.useEffect)(()=>{if(!c.current)return;const e=c.current.parentElement;if(!e)return;const t=e.clientWidth,n=e.clientHeight;u.current=new zf(c.current,{width:t,height:n,backgroundColor:"transparent"}),u.current.on("object:moving",e=>{const t=e.target;if(!t||!t.getBoundingRect||t.isCase||t===h.current||t===f.current)return;const n=u.current.getWidth(),r=u.current.getHeight(),s=t.getBoundingRect(!0),a=s.width,i=s.height,o=a/2,l=i/2;let c=t.left,d=t.top;s.left<5&&(c=5+o),s.left+a>n-5&&(c=n-5-o),s.top<5&&(d=5+l),s.top+i>r-5&&(d=r-5-l),c===t.left&&d===t.top||(t.set({left:c,top:d}),t.setCoords());const p=m.current.get(t);if(p){const e=t.getBoundingRect(!0),n=Math.min(e.width,e.height),r=Math.max(2,.025*n);p.set({left:e.left+r,top:e.top+r,width:e.width-2*r,height:e.height-2*r}),p.setCoords(),u.current.bringObjectToFront(t)}u.current.getActiveObject()===t&&k(t)}),u.current.on("object:modified",e=>{const t=e.target;if(h.current&&t&&!t.isCase&&t!==h.current&&h.current.set("visible",!1),f.current&&t&&!t.isCase&&t!==f.current&&f.current.set("visible",!1),t&&!t.isCase&&t!==h.current&&t!==f.current&&u.current.renderAll(),t&&!t.isCase){const e=u.current.getActiveObject()===t;"textbox"===t.type||"text"===t.type||"i-text"===t.type?t.set({lockScalingX:!0,lockScalingY:!0,lockUniScaling:!0,hasControls:!1,hasBorders:!1,borderColor:"transparent",cornerColor:"transparent",cornerSize:0,transparentCorners:!0}):"image"===t.type&&t.set({hasBorders:!1,borderColor:"transparent"}),e?C(t):S(t);u.current.getActiveObject()===t&&k(t)}}),u.current.on("selection:created",e=>{const t=e.selected[0];t&&!t.isCase&&(m.current.forEach((e,n)=>{n!==t&&(u.current.remove(e),m.current.delete(n))}),"textbox"===t.type||"text"===t.type||"i-text"===t.type?t.set({lockScalingX:!0,lockScalingY:!0,lockUniScaling:!0,hasControls:!1,hasBorders:!1,borderColor:"transparent",cornerColor:"transparent",cornerSize:0,transparentCorners:!0}):"image"===t.type&&t.set({hasBorders:!1,borderColor:"transparent"}),C(t),y(t),v(!0),k(t),u.current.renderAll())}),u.current.on("selection:updated",e=>{const t=e.selected[0];t&&!t.isCase&&(m.current.forEach((e,n)=>{n!==t&&(u.current.remove(e),m.current.delete(n))}),"textbox"===t.type||"text"===t.type||"i-text"===t.type?t.set({lockScalingX:!0,lockScalingY:!0,lockUniScaling:!0,hasControls:!1,hasBorders:!1,borderColor:"transparent",cornerColor:"transparent",cornerSize:0,transparentCorners:!0}):"image"===t.type&&t.set({hasBorders:!1,borderColor:"transparent"}),C(t),y(t),v(!0),k(t),u.current.renderAll())}),u.current.on("object:scaling",e=>{const t=e.target;!t||"textbox"!==t.type&&"text"!==t.type&&"i-text"!==t.type||(t.set({scaleX:1,scaleY:1,lockScalingX:!0,lockScalingY:!0,lockUniScaling:!0,hasControls:!1,hasBorders:!1,borderColor:"transparent",cornerColor:"transparent",cornerSize:0,transparentCorners:!0}),u.current.renderAll())}),u.current.on("selection:cleared",()=>{h.current&&h.current.set("visible",!1),f.current&&f.current.set("visible",!1),m.current.forEach((e,t)=>{u.current.remove(e),m.current.delete(t)}),u.current.renderAll(),y(null),v(!1),a&&a(null)}),u.current.on("text:changed",e=>{const t=e.target;if(t&&("textbox"===t.type||"text"===t.type||"i-text"===t.type)){const e=t.text||"",n=e.toUpperCase();e!==n&&(t.set("text",n),u.current.renderAll())}});const r=()=>{N()};window.addEventListener("resize",r);const s=m.current,i=u.current,o=p;return()=>{window.removeEventListener("resize",r),o.current&&(clearTimeout(o.current),o.current=null),i&&s&&(s.forEach(e=>{i.remove(e)}),s.clear()),null===i||void 0===i||i.dispose()}},[a,k,C,S,N,v]),(0,e.useEffect)(()=>{g&&b&&requestAnimationFrame(()=>{k(g)})},[g,b,k,w]);const _=(0,e.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!u.current)return;const n=(e||"").trim().toUpperCase();if(!n)return;const r=u.current.getWidth(),s=u.current.getHeight(),a=new Fm(n,{left:r/2,top:s/2,originX:"center",originY:"center",fontSize:Number(t.fontSize)||28,fill:t.fill||"#1f2937",fontFamily:t.fontFamily||"'Poppins', sans-serif",textAlign:"center",lineHeight:1.2,borderColor:"transparent",cornerColor:"transparent",cornerSize:0,transparentCorners:!0,padding:6,editable:!0,lockScalingX:!0,lockScalingY:!0,lockUniScaling:!0,hasControls:!1,hasBorders:!1});u.current.add(a),u.current.setActiveObject(a),C(a),u.current.renderAll(),y(a),v(!0),k(a)},[k,C,v]);(0,e.useEffect)(()=>{if(!u.current)return;p.current&&(clearTimeout(p.current),p.current=null);const e=u.current.getObjects(),t=e=>{if(!e||"rect"!==e.type)return!1;if(!0===e.isBoundaryRect)return!0;const t=e.strokeDashArray,n=Array.isArray(t)&&(4===t[0]&&4===t[1]||3===t[0]&&3===t[1]),r=!e.fill||"transparent"===e.fill,s=!1===e.selectable,a=!1===e.evented;return n&&r&&s&&a};e.forEach(e=>{(e.isCase||t(e)||e===h.current||e===f.current)&&u.current.remove(e)}),m.current.forEach(e=>{u.current.remove(e)}),m.current.clear(),d.current=null,h.current=null,f.current=null;u.current.getObjects().forEach(e=>{e.isCase||t(e)||u.current.bringObjectToFront(e)}),u.current.renderAll()},[n,r]);const T=(0,e.useCallback)(async e=>{if(u.current)try{const t=100,n=void 0!==e.size?e.size:.5,r=t*n;console.log("Adding pin to canvas:",e.name,"Size factor:",n,"Calculated size:",r);const s=await j(Li(e.src),!1,r,r),i=u.current.getWidth(),o=u.current.getHeight(),l=(s.width||r)*(s.scaleX||1),c=(s.height||r)*(s.scaleY||1),d=20,h=d+l/2,f=i-d-l/2,m=d+c/2,p=o-d-c/2,g=Math.random()*(f-h)+h,y=Math.random()*(p-m)+m;s.set({left:g,top:y}),s.pinData=e,s.set({hasBorders:!1,borderColor:"transparent"}),u.current.setActiveObject(s),C(s),u.current.renderAll(),a&&a(s)}catch(t){console.error("Error loading pin:",t)}},[a,C,j]),E=(0,e.useCallback)(()=>{((e,t,n)=>{const r=Gp(e,t,n);if(!r)return;const s=document.createElement("a");s.download="passport-case-design-".concat(Date.now(),".png"),s.href=r,document.body.appendChild(s),s.click(),document.body.removeChild(s)})(u,h,f)},[]),P=(0,e.useCallback)(()=>Gp(u,h,f),[]);return(0,e.useEffect)(()=>(window.addPinToCanvas=T,window.addTextToCanvas=_,window.getDesignImageDataURL=P,l&&l(E),()=>{delete window.addPinToCanvas,delete window.addTextToCanvas,delete window.getDesignImageDataURL}),[_,T,l,P,E]),(0,Lt.jsx)("div",{className:"w-full h-full flex flex-col  sm:items-center ",children:(0,Lt.jsxs)("div",{className:"w-full h-full relative flex item-top justify-center  ",children:[(0,Lt.jsx)("canvas",{ref:c,className:"w-full h-screen ",style:{background:"transparent",width:"100%",height:"100%"}}),(0,Lt.jsx)(Xp,{showControls:b,controlsPosition:x,onRotateLeft:()=>{if(g){const e=g.angle||0;g.set("angle",e-15),u.current.renderAll(),k(g)}},onRotateRight:()=>{if(g){const e=g.angle||0;g.set("angle",e+15),u.current.renderAll(),k(g)}},onDelete:()=>{g&&(S(g),u.current.remove(g),u.current.discardActiveObject(),u.current.renderAll(),y(null),v(!1),i&&i(g))}})]})})},Qp=e=>{let{colors:t,selectedColor:n,onSelect:r}=e;return(0,Lt.jsx)("div",{className:"overflow-visible",children:(0,Lt.jsx)("div",{className:"flex flex-wrap gap-3 overflow-visible justify-center justify-center ",children:t.map(e=>{let{color:t,image:s,quantity:a}=e;const i=(e=>{if(!e)return"";let t=e.split("/").pop().replace(".png","").replace(".jpg","").toLowerCase().replace(/^economycase/i,"").replace(/^businessclasscase/i,"").replace(/^firstclasscase/i,"").replace(/^smartcase/i,"").replace(/^premiumcase/i,"").replace(/^firstclass/i,"");const n={lightpink:"Light Pink",lightblue:"Light Blue",lightbrown:"Light Brown",darkbrown:"Dark Brown",darkblue:"Dark Blue",jeansblue:"Jeans Blue",brickred:"Brick Red",ligthpink:"Light Pink",navyblue:"Navy Blue",gray:"Gray",grey:"Gray",black:"Black",brown:"Brown",red:"Red",pink:"Pink",blue:"Blue",green:"Green",purple:"Purple",yellow:"Yellow",orange:"Orange"};return n[t]?n[t]:(t=t.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/(dark|light|navy|jeans|brick)([a-z]+)/g,"$1 $2").split(/(?=[A-Z])|(?=dark|light|navy|jeans|brick)/).filter(e=>e.length>0).join(" ").toLowerCase().split(" ").map(e=>n[e]?n[e]:e.charAt(0).toUpperCase()+e.slice(1)).join(" "),t||"Color")})(s),o=n===t,l=void 0!==a&&0===a;return(0,Lt.jsxs)("div",{className:"transition-all duration-200 flex flex-col items-center overflow-visible ".concat(l?"opacity-50 cursor-not-allowed":"cursor-pointer"),onClick:()=>!l&&r(t,s),children:[(0,Lt.jsxs)("div",{className:"relative overflow-visible",children:[(0,Lt.jsx)("div",{className:"w-10 h-10 rounded-full border-2 transition-all duration-200 ".concat(o?"border-gray-900 ring-2 ring-gray-300 scale-110":"border-gray-200 hover:border-gray-400"," ").concat(l?"opacity-50":""),style:{backgroundColor:t}}),o&&!l&&(0,Lt.jsx)("div",{className:"absolute top-0 right-0 w-4 h-4 bg-gray-900 rounded-full flex items-center justify-center z-10",children:(0,Lt.jsx)("svg",{className:"w-2 h-2 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Lt.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]}),o&&i&&(0,Lt.jsx)("span",{className:"text-xs text-gray-700 font-medium mt-2 text-center font-inter",children:i}),l&&(0,Lt.jsx)("span",{className:"text-[10px] text-red-600 font-medium mt-1",children:"Sold Out"})]},t)})})})},$p="#675a3a",Jp=15,Zp=[{value:"economy",label:"Economy - \xa38.00",image:"/TheHappyCase/images/SmartCase/economycaselightpink.png"},{value:"business",label:"Business - \xa312.00",image:"/TheHappyCase/images/BusinessClassCase/businessclasscasegray.png"},{value:"firstclass",label:"First Class - \xa312.00",image:"/TheHappyCase/images/FirstClassCase/firstclasscasebrown.png"}],eg=[{value:"bronze",label:"Bronze - \xa31.00",image:"/TheHappyCase/images/BronzePins/airplane.png"},{value:"colorful",label:"Colorful - \xa32.00",image:"/TheHappyCase/images/ColorfulPins/beagoodhuman.png"},{value:"flags",label:"Flags - \xa32.00",image:"/TheHappyCase/images/Flags/albania.png"}],tg=[{key:"all",label:"ALL"},{key:"europe",label:"EUROPE"},{key:"americas",label:"AMERICAS"},{key:"africa",label:"AFRICA"},{key:"asia",label:"ASIA"},{key:"special",label:"SPECIAL"}],ng=[{key:"all",label:"ALL"},{key:"travel",label:"TRAVEL"},{key:"disney",label:"DISNEY"},{key:"drinks",label:"DRINKS"},{key:"inspiration",label:"INSPIRATION"},{key:"hearts",label:"HEARTS"},{key:"nature",label:"NATURE"},{key:"camera",label:"CAMERA"}],rg=[{key:"all",label:"ALL"},{key:"travel",label:"TRAVEL"},{key:"animals",label:"ANIMALS"},{key:"love",label:"LOVE"},{key:"nature",label:"NATURE"},{key:"symbols",label:"SYMBOLS"}],sg=(e,t,n)=>n&&"all"!==n?e.filter(e=>"colorful"===t||"bronze"===t?e.subCategory===n:"flags"!==t||e.continent===n):e,ag=[{value:"bronze",label:"Bronze Charms",price:"\xa31.50 each"},{value:"colorful",label:"Colorful Charms",price:"\xa32.00 each"},{value:"flags",label:"Flags Collection",price:"\xa32.00 each"}],ig={colorful:[{key:"all",label:"ALL"},{key:"travel",label:"TRAVEL"},{key:"disney",label:"DISNEY"},{key:"drinks",label:"DRINKS"},{key:"inspiration",label:"INSPIRATION"},{key:"hearts",label:"HEARTS"},{key:"nature",label:"NATURE"},{key:"camera",label:"CAMERA"}],bronze:[{key:"all",label:"ALL"},{key:"travel",label:"TRAVEL"},{key:"animals",label:"ANIMALS"},{key:"love",label:"LOVE"},{key:"nature",label:"NATURE"},{key:"symbols",label:"SYMBOLS"}],flags:[{key:"all",label:"ALL"},{key:"europe",label:"EUROPE"},{key:"americas",label:"AMERICAS"},{key:"africa",label:"AFRICA"},{key:"asia",label:"ASIA"},{key:"special",label:"SPECIAL"}]},og=e=>{let{selectedCategory:t,setSelectedCategory:n,onDropdownToggle:r,getPreviewImage:s}=e;return(0,Lt.jsx)("div",{className:"grid grid-cols-3 gap-2 mb-4",children:ag.map(e=>{const a=s(e.value),i=t===e.value;return(0,Lt.jsxs)("button",{type:"button",role:"option","aria-selected":i,className:"font-inter flex flex-col items-center p-2.5 rounded-lg transition-colors ".concat(i?"bg-gray-50":"hover:bg-gray-50"),onClick:()=>{n(e.value),r&&r()},children:[a&&(0,Lt.jsxs)("div",{className:"relative mb-2 flex items-center justify-center rounded overflow-visible",style:{width:"4rem",height:"4rem"},children:[(0,Lt.jsx)("div",{className:"w-full h-full flex items-center justify-center rounded overflow-hidden",children:(0,Lt.jsx)("img",{src:Li(a),alt:e.label,className:"max-w-full max-h-full object-contain p-1",loading:"lazy",decoding:"async"})}),i&&(0,Lt.jsx)("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-gray-900 rounded-full flex items-center justify-center z-20 shadow-sm ",children:(0,Lt.jsx)("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Lt.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]}),(0,Lt.jsx)("span",{className:"text-xs text-center font-light ".concat(i?"text-gray-900":"text-gray-600"),children:e.label}),(0,Lt.jsx)("span",{className:"text-[10px] text-gray-500 mt-0.5",children:e.price})]},e.value)})})},lg=e=>{let{selectedCategory:t,subCategory:n,setSubCategory:r,getSubCategoryCount:s}=e;if(!t)return null;const a=ig[t];if(!a)return null;return(0,Lt.jsx)("div",{className:"mb-4 flex flex-wrap gap-1 border-b border-gray-200 justify-center",children:a.map(e=>{let{key:a,label:i}=e;const o=s(a),l=n===a,c="flags"===t?"text-gray-900 font-medium":"border-b-2 border-gray-900 text-gray-900 font-medium",u="flags"===t?"border-transparent text-gray-500 hover:text-gray-900 hover:border-gray-300":"border-b-2 border-transparent text-gray-500 hover:text-gray-900 hover:border-gray-300";return(0,Lt.jsxs)("button",{onClick:()=>r(a),className:"".concat("px-3 py-2 text-caption uppercase tracking-wider transition-all duration-200 font-inter"," ").concat(l?c:u),children:[i," ",(0,Lt.jsxs)("span",{className:"text-gray-400 font-normal",children:["(",o,")"]})]},a)})})},cg=e=>{let{pin:t,isSelected:n,isSoldOut:r,onClick:s}=e;const a=(i=t.size)?i<=.3?"XS":i<=.45?"S":i<=.6?"M":i<=.75?"L":"XL":"";var i;return(0,Lt.jsxs)("div",{className:"flex flex-col items-center justify-center text-center space-y-1 sm:space-y-2 p-2 sm:p-3 h-full transition-colors group touch-manipulation ".concat(r?"opacity-50 cursor-not-allowed":"cursor-pointer"),onClick:s,children:[(0,Lt.jsxs)("div",{className:"relative",style:{overflow:"visible"},children:[(0,Lt.jsx)("div",{className:"w-16 h-16 sm:w-20 sm:h-20 aspect-square flex items-center justify-center bg-transparent",children:(0,Lt.jsx)("img",{src:Li(t.src),alt:t.name,className:"w-full h-full object-contain transition-all duration-200 rounded ".concat(r?"opacity-50":""),loading:"lazy"})}),n&&!r&&(0,Lt.jsx)("div",{className:"absolute -top-1 -right-1 bg-black text-white w-6 h-6 flex items-center justify-center text-xs rounded-full z-10 shadow-md",children:"\u2713"}),a&&(0,Lt.jsx)("div",{className:"absolute -top-1 -left-1 bg-gray-100 text-gray-700 text-[8px] font-medium px-1.5 py-0.5 rounded-full z-10 border border-gray-300",children:a})]}),(0,Lt.jsx)("span",{className:"text-xs text-center text-gray-700 transition-colors line-clamp-2 font-inter",children:t.name}),r&&(0,Lt.jsx)("span",{className:"text-[9px] text-red-600 font-medium",children:"Sold Out"})]})},ug=e=>{let{filteredPins:t,selectedPins:n,onSelect:r,onRemove:s,cart:a,selectedCategory:i}=e;return(0,Lt.jsx)("div",{className:"max-h-80 sm:max-h-96 overflow-y-auto p-2",children:(0,Lt.jsx)("div",{className:"grid grid-cols-3 lg:grid-cols-3 xl:grid-cols-4 gap-2 sm:gap-2 justify-items-center md:max-w-3xl mx-auto",children:t.map((e,t)=>{const o=n.find(t=>t.pin===e),l=!!o,c=(e=>{const t=e.category||i||"colorful",r=e.name||e.src||"",s=xi({type:"charm",category:t,pin:e,name:r},a||[]);if(null===s)return!1;let o=0;(a||[]).forEach(n=>{if("charm"===n.type){const s=n.pin||n,a=s.name||s.src,i=s.category||n.category||t;a!==r&&a!==e.src||i!==t||(o+=n.quantity||1)}});let l=0;(a||[]).forEach(n=>{n.pins&&Array.isArray(n.pins)&&n.pins.forEach(s=>{const a=s.name||s.src,i=s.category||t;a!==r&&a!==e.src||i!==t||(l+=n.quantity||1)})});const c=n.filter(n=>{const s=n.pin||n,a=s.name||s.src,i=s.category||t;return(a===r||a===e.src)&&i===t}).length;return 0===s||o+l+c>=s+o})(e),u=e.src?"".concat(e.src,"-").concat(t):"".concat(e.name,"-").concat(t);return(0,Lt.jsx)(cg,{pin:e,isSelected:l,isSoldOut:c,onClick:()=>{c||(l&&s&&o?s(o.imgInstance):r(e))}},u)})})})},dg=t=>{let{pins:n,selectedCategory:r,setSelectedCategory:s,selectedPins:a,onSelect:i,onRemove:o,onDropdownToggle:l,Products:c,cart:u}=t;const[d,h]=(0,e.useState)("all");(0,e.useEffect)(()=>{h("all")},[r]);const f=(0,e.useMemo)(()=>sg(n,r,d),[n,r,d]);return(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)(og,{selectedCategory:r,setSelectedCategory:s,onDropdownToggle:l,getPreviewImage:e=>{if(c&&c.pins){if("bronze"===e&&c.pins.bronze&&c.pins.bronze.length>0)return c.pins.bronze[0].src;if("colorful"===e&&c.pins.colorful&&c.pins.colorful.length>0)return c.pins.colorful[0].src;if("flags"===e&&c.pins.flags&&c.pins.flags.length>0)return c.pins.flags[0].src}const t=eg.find(t=>t.value===e);return t&&t.image?t.image:null}}),r&&(0,Lt.jsxs)("div",{className:"mt-4 pb-4",children:[(0,Lt.jsx)(lg,{selectedCategory:r,subCategory:d,setSubCategory:h,getSubCategoryCount:e=>sg(n,r,e).length}),(0,Lt.jsx)(ug,{filteredPins:f,selectedPins:a,onSelect:i,onRemove:o,cart:u,selectedCategory:r})]})]})},hg=()=>{const e=localStorage.getItem("productQuantities");if(!e)return ui;try{const t=JSON.parse(e),n=c({},ui);return t.cases&&(n.cases=n.cases.map((e,n)=>{const r=c(c({},e),{},{quantity:void 0!==t.cases[n]?t.cases[n]:e.quantity});return t.caseColors&&t.caseColors[n]&&(r.colors=r.colors.map((e,r)=>c(c({},e),{},{quantity:void 0!==t.caseColors[n][r]?t.caseColors[n][r]:e.quantity}))),r})),n}catch(t){return console.error("Error loading saved quantities:",t),ui}},fg=e=>{let{caseImages:t,onOpenModal:n}=e;return t&&0!==t.length?(0,Lt.jsx)("div",{className:"flex-1 min-w-0 mt-12",children:(0,Lt.jsxs)("button",{onClick:n,className:"w-full px-3 md:px-4 py-2.5 text-sm font-medium text-gray-700 bg-white border border-gray-200 hover:bg-gray-50 hover:border-gray-400 active:bg-gray-100 transition-all duration-200 flex items-center justify-center gap-2 shadow-sm hover:shadow-md",style:{fontFamily:"'Poppins', sans-serif"},children:[(0,Lt.jsx)("svg",{className:"w-4 h-4 text-gray-600 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Lt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,Lt.jsx)("span",{className:"whitespace-nowrap truncate",children:"IMAGES"}),t.length>0&&(0,Lt.jsx)("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-0.5 rounded-full flex-shrink-0",children:t.length})]})}):null},mg=e=>{let{selectedCase:t,onOpenModal:n}=e;return t?(0,Lt.jsx)("div",{className:"flex-1 min-w-0 mt-12",children:(0,Lt.jsxs)("button",{onClick:n,className:"w-full px-3 md:px-4 py-2.5 text-sm font-medium text-gray-700 bg-white border border-gray-200 transition-all duration-200 flex items-center justify-center gap-2 shadow-sm hover:shadow-md hover:bg-gray-50 hover:border-gray-400 active:bg-gray-100",style:{fontFamily:"'Poppins', sans-serif"},children:[(0,Lt.jsx)("svg",{className:"w-4 h-4 text-gray-600 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Lt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,Lt.jsx)("span",{className:"whitespace-nowrap truncate",children:"DETAILS"})]})}):null},pg=t=>{let{show:n,onClose:r,selectedCase:s}=t;const[a,i]=(0,e.useState)(!0);if(!n||!s)return null;const o=s.specifications||{};return(0,Lt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center  p-4",onClick:r,children:(0,Lt.jsxs)("div",{className:"bg-white rounded-sm max-w-2xl w-full max-h-[90vh] overflow-hidden flex flex-col",onClick:e=>e.stopPropagation(),children:[(0,Lt.jsxs)("div",{className:"flex items-center justify-between p-4 sm:p-6 border-b border-gray-200 flex-shrink-0",children:[(0,Lt.jsx)("h3",{className:"text-lg sm:text-xl font-medium text-gray-900 font-inter",children:s.name}),(0,Lt.jsx)("button",{onClick:r,className:"p-2 hover:bg-gray-50 rounded-full transition-colors","aria-label":"Close modal",children:(0,Lt.jsx)("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Lt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Lt.jsx)("div",{className:"flex-1 overflow-y-auto p-4 sm:p-6",children:Object.keys(o).length>0&&(0,Lt.jsxs)("div",{className:"",children:[(0,Lt.jsx)("button",{onClick:()=>i(!a),className:"w-full flex items-center justify-between py-2 text-sm uppercase tracking-wider text-gray-900 font-medium hover:text-gray-700 transition-colors font-inter",children:(0,Lt.jsx)("span",{children:"Specifications"})}),a&&(0,Lt.jsxs)("div",{className:"flex flex-col gap-3 mt-4",children:[o.dimensions&&(0,Lt.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-50",children:[(0,Lt.jsx)("span",{className:"text-sm text-gray-500 font-inter",children:"Dimensions"}),(0,Lt.jsx)("span",{className:"text-sm text-gray-900 font-inter",children:o.dimensions})]}),o.size&&(0,Lt.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-50",children:[(0,Lt.jsx)("span",{className:"text-sm text-gray-500 font-inter",children:"Size"}),(0,Lt.jsx)("span",{className:"text-sm text-gray-900 font-inter",children:o.size})]}),o.weight&&(0,Lt.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-50",children:[(0,Lt.jsx)("span",{className:"text-sm text-gray-500 font-inter",children:"Weight"}),(0,Lt.jsx)("span",{className:"text-sm text-gray-900 font-inter",children:o.weight})]}),o.material&&(0,Lt.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-50",children:[(0,Lt.jsx)("span",{className:"text-sm text-gray-500 font-inter",children:"Material"}),(0,Lt.jsx)("span",{className:"text-sm text-gray-900 font-inter",children:o.material})]}),o.closure&&(0,Lt.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-50",children:[(0,Lt.jsx)("span",{className:"text-sm text-gray-500 font-inter",children:"Closure"}),(0,Lt.jsx)("span",{className:"text-sm text-gray-900 font-inter",children:o.closure})]}),o.cardSlots&&(0,Lt.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-50",children:[(0,Lt.jsx)("span",{className:"text-sm text-gray-500 font-inter",children:"Card Slots"}),(0,Lt.jsx)("span",{className:"text-sm text-gray-900 font-inter",children:o.cardSlots})]}),o.interior&&(0,Lt.jsxs)("div",{className:"flex justify-between items-start py-2 border-b border-gray-50",children:[(0,Lt.jsx)("span",{className:"text-sm text-gray-500 font-inter",children:"Interior"}),(0,Lt.jsx)("span",{className:"text-sm text-gray-900 text-right font-inter",children:o.interior})]}),o.rfid&&(0,Lt.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-50",children:[(0,Lt.jsx)("span",{className:"text-sm text-gray-500 font-inter",children:"RFID Protection"}),(0,Lt.jsx)("span",{className:"text-sm text-gray-900 font-inter",children:o.rfid})]}),o.features&&(0,Lt.jsxs)("div",{className:"flex justify-between items-start py-2 border-b border-gray-50",children:[(0,Lt.jsx)("span",{className:"text-sm text-gray-500 font-inter",children:"Features"}),(0,Lt.jsx)("span",{className:"text-sm text-gray-900 text-right font-inter",children:o.features})]}),o.passportCapacity&&(0,Lt.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-50",children:[(0,Lt.jsx)("span",{className:"text-sm text-gray-500 font-inter",children:"Capacity"}),(0,Lt.jsx)("span",{className:"text-sm text-gray-900 font-inter",children:o.passportCapacity})]}),o.care&&(0,Lt.jsxs)("div",{className:"flex justify-between items-start py-2 border-b border-gray-50",children:[(0,Lt.jsx)("span",{className:"text-sm text-gray-500 font-inter",children:"Care Instructions"}),(0,Lt.jsx)("span",{className:"text-sm text-gray-900 text-right font-inter",children:o.care})]}),o.warranty&&(0,Lt.jsxs)("div",{className:"flex justify-between items-center py-2",children:[(0,Lt.jsx)("span",{className:"text-sm text-gray-500 font-inter",children:"Warranty"}),(0,Lt.jsx)("span",{className:"text-sm text-gray-900 font-inter",children:o.warranty})]})]})]})})]})})},gg=e=>{let{show:t,selectedCase:n,selectedColorData:r,caseImages:s,selectedModalImage:a,setSelectedModalImage:i,onClose:o}=e;return t&&n&&s&&0!==s.length?(0,Lt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:o,children:(0,Lt.jsxs)("div",{className:"bg-white rounded-sm max-w-4xl w-full h-[90vh] overflow-hidden flex flex-col",onClick:e=>e.stopPropagation(),children:[(0,Lt.jsxs)("div",{className:"flex items-center justify-between p-3 sm:p-4 border-b border-gray-200 flex-shrink-0",children:[(0,Lt.jsx)("h3",{className:"text-xs sm:text-sm uppercase tracking-wider text-gray-900 font-medium font-inter",children:n.name}),(0,Lt.jsx)("button",{onClick:o,className:"p-2 hover:bg-gray-50 transition-colors","aria-label":"Close modal",children:(0,Lt.jsx)("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Lt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Lt.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden p-4 sm:p-6 min-h-0",children:[(0,Lt.jsx)("div",{className:"flex-1 flex items-center justify-center min-h-0 mb-4",children:(0,Lt.jsxs)("div",{className:"relative  p-4 sm:p-6 md:p-8 flex items-center justify-center w-full h-full",children:[(0,Lt.jsx)("img",{src:Li(s[a]),alt:"".concat(n.name," - View ").concat(a+1),className:"max-w-full max-h-full object-contain",loading:"lazy",fetchPriority:"low",decoding:"async",onError:e=>{e.target.style.display="none",e.target.nextSibling&&(e.target.nextSibling.style.display="flex")}}),(0,Lt.jsx)("div",{className:"hidden w-full h-full items-center justify-center text-gray-400",children:(0,Lt.jsx)("p",{className:"text-gray-500 font-inter",children:"Image not available"})})]})}),s.length>1&&(0,Lt.jsx)("div",{className:"flex-shrink-0",children:(0,Lt.jsx)("div",{className:"grid grid-cols-6 sm:grid-cols-8 gap-1.5 sm:gap-2 mx-auto",children:s.map((e,t)=>(0,Lt.jsxs)("button",{onClick:()=>i(t),className:"aspect-square overflow-hidden border transition-all duration-200 ".concat(a===t?"border-gray-900 ring-2 ring-gray-300":"border-gray-200 hover:border-gray-400"),children:[(0,Lt.jsx)("img",{src:Li(e),alt:"".concat(n.name," - Detail ").concat(t+1),className:"w-full h-full object-contain p-1",loading:"lazy",fetchPriority:"low",decoding:"async",width:"80",height:"80",onError:e=>{e.target.style.display="none",e.target.nextSibling&&(e.target.nextSibling.style.display="flex")}}),(0,Lt.jsx)("div",{className:"hidden w-full h-full items-center justify-center text-gray-300",children:(0,Lt.jsx)("span",{className:"text-sm",children:"\ud83d\udcf7"})})]},t))})})]})]})}):null},yg=(e,t,n)=>"all"===n?e:"flags"===t?e.filter(e=>e.continent===n):e.filter(e=>{const r=e.name.toLowerCase();if("colorful"===t){if("travel"===n)return r.includes("airplane")||r.includes("passport")||r.includes("suitcase")||r.includes("map")||r.includes("boarding")||r.includes("adventure")||r.includes("vacation")||r.includes("combi");if("disney"===n)return r.includes("disney")||r.includes("pluto")||r.includes("minnie")||r.includes("round")||r.includes("mickey")||r.includes("daisy")||r.includes("duck")||r.includes("guufy");if("drinks"===n)return r.includes("beer")||r.includes("wine")||r.includes("coffee");if("inspiration"===n)return r.includes("be a good human")||r.includes("dream big")||r.includes("be kind")||r.includes("ticket to happiness")||r.includes("be happy");if("hearts"===n)return r.includes("heart");if("nature"===n)return r.includes("leaf")||r.includes("coconut")||r.includes("wave");if("camera"===n)return r.includes("camera")}if("bronze"===t){if("travel"===n)return r.includes("airplane")||r.includes("globe")||r.includes("passport")||r.includes("luggage")||r.includes("taxi")||r.includes("liberty")||r.includes("london")||r.includes("eiffel")||r.includes("bigben")||r.includes("pisa")||r.includes("pyramid")||r.includes("arc")||r.includes("triomphe")||r.includes("binoculars");if("animals"===n)return r.includes("kangaroo")||r.includes("koala")||r.includes("llama")||r.includes("squirrel")||r.includes("paw")||r.includes("dog");if("love"===n)return r.includes("heart")||r.includes("love");if("nature"===n)return r.includes("leaf")||r.includes("butterfly")||r.includes("maple")||r.includes("flipflop");if("symbols"===n)return r.includes("cardinal")||r.includes("hamsa")||r.includes("mummy")||r.includes("journey")||r.includes("jesus")||r.includes("camera")||r.includes("thailand")||r.includes("india")||r.includes("canada")}return!1}),xg=t=>{var n,r;let{mobileCurrentStep:s,setMobileCurrentStep:a,selectedCaseType:i,selectedColor:o,selectedCategory:l,setSelectedCategory:c,mobileSubCategory:u,setMobileSubCategory:d,pins:h,selectedPins:f,handleCaseTypeSelection:m,handleColorSelection:p,handlePinSelection:g,Products:y,cart:x}=t;const[b,v]=(0,e.useState)(!1);if(!s)return null;const w=yg(h,l,u),C="flags"===l?tg:"colorful"===l?ng:"bronze"===l?rg:[],S=(null===(n=C.find(e=>e.key===u))||void 0===n?void 0:n.label)||"ALL";return(0,Lt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-2 xs:p-3 sm:p-4 md:p-6",children:(0,Lt.jsxs)("div",{className:"bg-white rounded-sm p-3 xs:p-4 sm:p-5 md:p-6 lg:p-8 xl:p-10 w-full overflow-y-auto border border-gray-200 ".concat("charms"===s?"max-w-[calc(100vw-1rem)] xs:max-w-sm md:max-w-md lg:max-w-lg h-fit":"case"===s?"max-w-[calc(100vw-1rem)] xs:max-w-sm sm:max-w-md md:max-w-2xl lg:max-w-3xl xl:max-w-4xl max-h-[85vh] xs:max-h-[80vh] md:max-h-[75vh]":"max-w-[calc(100vw-1rem)] xs:max-w-sm md:max-w-md lg:max-w-lg max-h-[85vh] xs:max-h-[80vh] md:max-h-[75vh]"),children:[(0,Lt.jsxs)("div",{className:"flex justify-between items-center mb-4 xs:mb-5 sm:mb-6 md:mb-8 border-b border-gray-100 pb-3 xs:pb-4 md:pb-5",children:[(0,Lt.jsxs)("h2",{className:"text-xs xs:text-sm md:text-base lg:text-lg uppercase tracking-wider text-gray-900 font-medium",style:{fontFamily:"'Poppins', sans-serif"},children:["case"===s&&"Choose Case","color"===s&&"Choose Color","charms"===s&&"Choose Charms"]}),(0,Lt.jsx)("button",{onClick:()=>a(null),className:"p-0.5 xs:p-1 hover:bg-gray-50 transition-colors",children:(0,Lt.jsx)("svg",{className:"w-4 h-4 xs:w-5 xs:h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Lt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Lt.jsxs)("div",{className:"space-y-3 xs:space-y-4 md:space-y-5",children:["case"===s&&(0,Lt.jsx)("div",{className:"w-full",children:(0,Lt.jsx)("div",{className:"grid grid-cols-3 gap-1.5 xs:gap-2 sm:gap-3 md:gap-5 lg:gap-6 xl:gap-8",children:Zp.map(e=>{const t=(()=>{if(y&&y.cases){const t=y.cases.find(t=>t.type===e.value);if(t&&t.colors&&t.colors.length>0)return t.colors[0].image}return e.image||null})(),n=(()=>{const t=y&&y.cases?y.cases.find(t=>t.type===e.value):null;if(!t)return!1;if(t.colors&&t.colors.length>0){return!t.colors.some(t=>{const n={caseType:e.value,color:t.color},r=xi(n,x||[]);return null===r||r>0})}return!1})(),r=i===e.value;return(0,Lt.jsxs)("button",{onClick:()=>{n||m(e.value)},disabled:n,className:"p-0.5 xs:p-1 sm:p-2.5 md:p-4 lg:p-5 xl:p-6 text-center transition-all duration-200 flex flex-col items-center gap-0.5 xs:gap-1 sm:gap-2 md:gap-3 lg:gap-4 ".concat(i===e.value?" text-gray-900":" hover:border-gray-300"," ").concat(n?"opacity-50 cursor-not-allowed":""),style:{fontFamily:"'Poppins', sans-serif"},children:[t&&(0,Lt.jsxs)("div",{className:"relative w-full aspect-square overflow-hidden ",children:[(0,Lt.jsx)("img",{src:Li(t),alt:e.label,className:"w-full h-full object-contain p-0 xs:p-0.5 sm:p-1.5 md:p-3 lg:p-4 xl:p-5 ".concat(n?"opacity-50":""),loading:"lazy",onError:e=>{e.target.style.display="none"}}),r&&!n&&(0,Lt.jsx)("div",{className:"absolute top-0.5 right-0.5 xs:top-1 xs:right-1 sm:top-1.5 sm:right-1.5 md:top-2 md:right-2 lg:top-3 lg:right-3 xl:top-4 xl:right-4 w-3 h-3 xs:w-4 xs:h-4 sm:w-5 sm:h-5 md:w-7 md:h-7 lg:w-8 lg:h-8 xl:w-10 xl:h-10 bg-gray-900 rounded-full flex items-center justify-center shadow-md",children:(0,Lt.jsx)("svg",{className:"w-2 h-2 xs:w-2.5 xs:h-2.5 sm:w-3 sm:h-3 md:w-4 md:h-4 lg:w-5 lg:h-5 xl:w-6 xl:h-6 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Lt.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]}),(0,Lt.jsx)("span",{className:"text-xs xs:text-sm sm:text-base md:text-base lg:text-lg xl:text-xl font-medium mt-0.5 xs:mt-1 md:mt-2 ".concat(n?"text-gray-500":""),children:e.label}),n&&(0,Lt.jsx)("span",{className:"text-[8px] xs:text-[9px] sm:text-[10px] md:text-xs text-red-600 font-medium mt-0.5 xs:mt-1",children:"Sold Out"})]},e.value)})})}),"color"===s&&i&&(0,Lt.jsx)("div",{children:(0,Lt.jsx)(Qp,{colors:(null===(r=y.cases.find(e=>e.type===i))||void 0===r?void 0:r.colors)||[],selectedColor:o,onSelect:p,caseType:i,cart:x})}),"charms"===s&&i&&o&&(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("div",{className:"mb-3 xs:mb-4",children:(0,Lt.jsx)("div",{className:"grid grid-cols-3 gap-1.5 xs:gap-2",children:eg.map(e=>(0,Lt.jsxs)("button",{onClick:()=>c(e.value),className:"p-1.5 xs:p-2 text-[10px] xs:text-xs text-center transition-all duration-200 flex flex-col items-center gap-1.5 xs:gap-2 relative",style:{fontFamily:"'Poppins', sans-serif"},children:[e.image&&(0,Lt.jsxs)("div",{className:"w-16 h-16 xs:w-20 xs:h-20 flex-shrink-0 rounded flex items-center justify-center overflow-hidden relative ".concat(l===e.value?"bg-gray-100":"bg-white"),children:[(0,Lt.jsx)("img",{src:Li(e.image),alt:e.label,className:"w-full h-full object-contain"}),l===e.value&&(0,Lt.jsx)("div",{className:"absolute top-0 right-0 bg-gray-900 text-white w-4 h-4 xs:w-5 xs:h-5 flex items-center justify-center rounded-full shadow-md",children:(0,Lt.jsx)("svg",{className:"w-2.5 h-2.5 xs:w-3 xs:h-3",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Lt.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]}),(0,Lt.jsx)("span",{className:"font-medium text-xs xs:text-sm",children:e.label})]},e.value||"all"))})}),l&&C.length>0&&(0,Lt.jsxs)("div",{className:"mb-3 xs:mb-4 relative",children:[(0,Lt.jsxs)("button",{onClick:()=>v(!b),className:"w-full flex items-center justify-between px-3 xs:px-4 py-2 xs:py-2.5 bg-gray-100 border border-gray-300 text-left transition-all duration-200 hover:bg-gray-200 hover:border-gray-400",style:{fontFamily:"'Poppins', sans-serif"},children:[(0,Lt.jsx)("span",{className:"text-xs xs:text-sm font-medium text-gray-900 uppercase tracking-wider",children:S}),(0,Lt.jsx)("svg",{className:"w-4 h-4 xs:w-5 xs:h-5 text-gray-500 transition-transform duration-200 ".concat(b?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Lt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M19 9l-7 7-7-7"})})]}),b&&(0,Lt.jsxs)(Lt.Fragment,{children:[(0,Lt.jsx)("div",{className:"fixed inset-0 z-40",onClick:()=>v(!1)}),(0,Lt.jsx)("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 shadow-lg max-h-60 overflow-y-auto",children:C.map(e=>{let{key:t,label:n}=e;return(0,Lt.jsx)("button",{onClick:()=>{d(t),v(!1)},className:"w-full text-left px-3 xs:px-4 py-2 xs:py-2.5 text-xs xs:text-sm uppercase tracking-wider transition-all duration-200 ".concat(u===t?"bg-gray-100 text-gray-900 font-medium":"text-gray-700 hover:bg-gray-50"),style:{fontFamily:"'Poppins', sans-serif"},children:n},t)})})]})]}),l&&(0,Lt.jsx)("div",{children:(0,Lt.jsx)("div",{className:"max-h-[60vh] xs:max-h-96 overflow-y-auto",children:(0,Lt.jsx)("div",{className:"grid grid-cols-3 gap-2 xs:gap-2.5 sm:gap-3",children:w.map(e=>{const t=f.some(t=>t.pin===e),n=(r=e.size)?r<=.3?"XS":r<=.45?"S":r<=.6?"M":r<=.75?"L":"XL":"";var r;const s=(()=>{const t=e.category||l||"colorful",n=e.name||e.src||"",r=xi({type:"charm",category:t,pin:e,name:n},x||[]);if(null===r)return!1;let s=0;(x||[]).forEach(r=>{if("charm"===r.type){const a=r.pin||r,i=a.name||a.src,o=a.category||r.category||t;i!==n&&i!==e.src||o!==t||(s+=r.quantity||1)}});let a=0;(x||[]).forEach(r=>{r.pins&&Array.isArray(r.pins)&&r.pins.forEach(s=>{const i=s.name||s.src,o=s.category||t;i!==n&&i!==e.src||o!==t||(a+=r.quantity||1)})});const i=f.filter(r=>{const s=r.pin||r,a=s.name||s.src,i=s.category||t;return(a===n||a===e.src)&&i===t}).length;return 0===r||s+a+i>=r+s})();return(0,Lt.jsxs)("button",{onClick:()=>!s&&g(e),disabled:s,className:"p-1.5 xs:p-2 transition-all duration-200 flex flex-col items-center ".concat(s?"opacity-50 cursor-not-allowed":""),children:[(0,Lt.jsxs)("div",{className:"relative w-16 h-16 xs:w-20 xs:h-20 flex items-center justify-center transition-all duration-200 overflow-visible ".concat(t?"rounded":""),children:[(0,Lt.jsx)("img",{src:Li(e.src),alt:e.name,className:"max-w-full max-h-full object-contain ".concat(s?"opacity-50":"")}),t&&!s&&(0,Lt.jsx)("div",{className:"absolute top-0 right-0 bg-gray-900 text-white w-5 h-5 xs:w-6 xs:h-6 flex items-center justify-center text-[10px] xs:text-xs rounded-full shadow-md z-10",children:(0,Lt.jsx)("svg",{className:"w-3 h-3 xs:w-4 xs:h-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Lt.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),n&&(0,Lt.jsx)("div",{className:"absolute top-0 left-0 bg-gray-100 text-gray-700 text-[8px] xs:text-[9px] font-medium px-1 xs:px-1.5 py-0.5 rounded-full z-10 border border-gray-300",children:n})]}),(0,Lt.jsx)("span",{className:"text-xs xs:text-sm sm:text-base text-center line-clamp-2 mt-0.5 xs:mt-1 ".concat(s?"text-gray-500":"text-gray-700"),style:{fontFamily:"'Poppins', sans-serif"},children:e.name}),s&&(0,Lt.jsx)("span",{className:"text-[8px] xs:text-[9px] text-red-600 font-medium mt-0.5",children:"Sold Out"})]},e.name)})})})})]})]})]})})},bg=e=>{let{customText:t,setCustomText:n,customTextError:r,setCustomTextError:s,customTextAdded:a,setCustomTextAdded:i,onTextAdded:o,onClose:l}=e;return(0,Lt.jsxs)("div",{className:"space-y-4 ",children:[(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("input",{type:"text",value:t||"",onChange:e=>{n(e.target.value),s(""),i(!1)},onFocus:e=>{const t=window.scrollY||window.pageYOffset,n=window.scrollX||window.pageXOffset;setTimeout(()=>{window.scrollTo({left:n,top:t,behavior:"instant"})},0),requestAnimationFrame(()=>{window.scrollTo({left:n,top:t,behavior:"instant"})})},placeholder:"e.g. Your name",className:"w-full px-3 py-2 border border-gray-200  focus:outline-none focus:border-gray-400 bg-white text-gray-900 placeholder-gray-400 font-thin text-sm font-inter",maxLength:40}),(0,Lt.jsxs)("p",{className:"mt-1 text-sm text-gray-500 font-inter",children:["Up to ",Jp," characters. Double-click the text on the case to edit or move it."]})]}),r&&(0,Lt.jsx)("div",{className:"text-sm text-gray-600 border border-gray-200 bg-gray-50 px-3 py-2",children:r}),a&&(0,Lt.jsx)("div",{className:"text-sm text-green-600 py-2",children:"Text added to your design! You can drag it to reposition it."}),(0,Lt.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,Lt.jsx)("button",{onClick:()=>{t.trim()?"undefined"!==typeof window&&window.addTextToCanvas?(window.addTextToCanvas(t,{fill:$p,fontSize:28}),i(!0),s(""),o&&o(),l&&setTimeout(()=>{l()},1e3)):s("Canvas is still loading. Please try again in a moment."):s("Please enter the text you want to add.")},disabled:!t.trim(),className:"flex-1 px-3 py-1.5 text-xs font-medium uppercase tracking-wider active:bg-blue-200 disabled:bg-gray-50 disabled:text-gray-400 disabled:cursor-not-allowed active:scale-95 disabled:scale-100 font-inter bg-btn-light-blue hover:bg-btn-light-blue-hover text-btn-light-blue-text border hover:border-btn-light-blue-hover transition-all duration-200",children:"Add Text"}),(0,Lt.jsx)("button",{onClick:()=>{n(""),i(!1),s("")},disabled:!t.trim(),className:"px-3 py-1.5 text-xs font-medium uppercase tracking-wider active:bg-gray-200 disabled:bg-gray-50 disabled:text-gray-400 disabled:border-gray-100 disabled:cursor-not-allowed active:scale-95 disabled:scale-100 focus:outline-none focus:ring-2 focus:ring-gray-300 focus:ring-offset-1 font-inter bg-btn-light-gray hover:bg-btn-light-gray-hover text-btn-light-gray-text border border-btn-light-gray-border hover:border-btn-light-gray-hover transition-all duration-200",children:"Clear"})]})]})},vg=e=>{let{product:t,onAdd:n,className:r,disabled:s=!1}=e;return(0,Lt.jsx)("button",{className:"".concat("w-full py-3 text-sm uppercase tracking-wider font-inter bg-btn-success hover:bg-btn-success-hover text-btn-success-text border border-btn-success-border hover:border-btn-success-hover transition-all duration-200"," ").concat(r||"").trim(),onClick:()=>!s&&n(t),disabled:s,children:"Add to Cart"})},wg=e=>{let{totalPrice:t,caseBasePrice:n,groupedPinsList:r,showPriceBreakdown:s,quantity:a,setQuantity:i,onIncrementQuantity:o,onDecrementQuantity:l,selectedCase:c,selectedCaseType:u,selectedColor:d,selectedPins:h,selectedCaseImage:f,pinsPrice:m,onAddToCart:p,onShowTerms:g,agreedToTerms:y,setAgreedToTerms:x,showTermsError:b,inventoryMessage:v,inventoryType:w,isMobile:C=!1}=e;const{formatPrice:S}=Ft();return(0,Lt.jsxs)("div",{className:"".concat(C?"pt-0 mt-0 bg-gray-100":"pt-14"," flex-shrink-0 relative z-0  ").concat(C?"":"mt-auto flex flex-col justify-between"),children:[C?(0,Lt.jsxs)(Lt.Fragment,{children:[(0,Lt.jsxs)("div",{className:"flex flex-row items-start justify-between mt-2 ",children:[(0,Lt.jsxs)("div",{className:"flex flex-col gap-1.5",children:[(0,Lt.jsxs)("div",{className:"flex flex-row items-center gap-1.5 mb-2",children:[(0,Lt.jsx)("h3",{className:"text-[14px] xs:text-sm text-gray-500 font-light font-inter leading-none",children:"Total:"}),(0,Lt.jsx)("h3",{className:"text-md font-bold xs:text-base sm:text-lg text-gray-900  font-inter leading-none",children:S(t)})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsxs)("label",{className:"flex items-center gap-1.5 cursor-pointer",children:[(0,Lt.jsx)("input",{type:"checkbox",checked:y||!1,onChange:e=>x(e.target.checked),className:"w-3.5 h-3.5 xs:w-4 xs:h-4 text-gray-900 border-gray-300 rounded"}),(0,Lt.jsx)("span",{className:"text-xs xs:text-sm text-gray-700 leading-tight font-light font-inter",children:(0,Lt.jsx)("button",{type:"button",onClick:g,className:"text-gray-900 underline hover:text-gray-700 transition-colors font-light",children:"Terms of Use"})})]}),b&&(0,Lt.jsx)("div",{className:"mt-1 text-xs xs:text-sm text-red-600 font-light font-inter",children:"You must accept the terms to add items to cart."})]})]}),(0,Lt.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,Lt.jsxs)("div",{className:"flex items-center border border-gray-200 rounded-sm py-2.5 xs:py-2 px-0.5 flex-shrink-0 gap-0",children:[(0,Lt.jsx)("button",{onClick:l||(()=>i(Math.max(0,a-1))),className:"w-6 h-6 xs:w-7 xs:h-7 flex items-center justify-center text-gray-600 hover:text-gray-900 transition-colors","aria-label":"Decrease quantity",children:"\u2212"}),(0,Lt.jsx)("div",{className:"px-1 xs:px-1.5 py-0.5 text-sm xs:text-base text-gray-900 font-light font-inter min-w-[1.5rem] xs:min-w-[2rem] text-center",children:Math.max(a,1)}),(0,Lt.jsx)("button",{onClick:o||(()=>i(a+1)),className:"w-6 h-6 xs:w-7 xs:h-7 flex items-center justify-center text-gray-600 hover:text-gray-900 transition-colors","aria-label":"Increase quantity",children:"+"})]}),(0,Lt.jsx)("div",{className:"flex-1 min-w-0 ",children:(0,Lt.jsx)(vg,{product:{id:"custom-".concat(Date.now()),name:"".concat((null===c||void 0===c?void 0:c.name)||"Custom Case"," with ").concat(h.length," charms"),caseType:u,caseName:(null===c||void 0===c?void 0:c.name)||"Custom Case",color:d,pins:h.map(e=>{let{pin:t}=e;return t}),pinsDetails:h.map(e=>{let{pin:t}=e;return t}),basePrice:n,casePrice:n,pinsPrice:m,totalPrice:parseFloat(t),price:parseFloat(t),image:f,caseImage:f,customDesign:!0,quantity:a},onAdd:p,className:"!w-full cursor-pointer bg-btn-success hover:bg-btn-success-hover text-btn-success-text border border-btn-success-border hover:border-btn-success-hover transition-all duration-200 py-2.5 px-8 text-sm font-light whitespace-nowrap",disabled:!1})})]})]}),v&&(0,Lt.jsx)("div",{className:"mt-1.5 text-xs xs:text-sm font-light font-inter ".concat("error"===w?"text-red-600":"text-orange-600"),children:v})]}):(0,Lt.jsxs)(Lt.Fragment,{children:[(0,Lt.jsxs)("div",{className:"flex items-end flex-row mb-4 gap-2",children:[(0,Lt.jsx)("h3",{className:"text-sm text-gray-500 font-light font-inter ",children:"Total:"}),(0,Lt.jsx)("h3",{className:"text-md font-bold text-gray-900 font-inter ",children:S(t)})]}),(0,Lt.jsxs)("div",{className:"mb-4 ",children:[(0,Lt.jsxs)("label",{className:"flex items-start gap-2 cursor-pointer",children:[(0,Lt.jsx)("input",{type:"checkbox",checked:y||!1,onChange:e=>x(e.target.checked),className:"mt-0.5 w-4 h-4 text-gray-900 border-gray-300 rounded "}),(0,Lt.jsxs)("span",{className:"text-sm text-gray-700 leading-relaxed font-light font-inter",children:["I agree to the"," ",(0,Lt.jsx)("button",{type:"button",onClick:g,className:"text-gray-900 underline hover:text-gray-700 transition-colors text-sm font-light",children:"Terms of Use"})," ","and understand that it is my responsibility to create the passport case design, and that as items are handmade, they may vary."]})]}),b&&(0,Lt.jsx)("div",{className:"mt-2 text-sm text-red-600 font-light font-inter",children:"You must accept the terms to add items to cart."})]}),(0,Lt.jsxs)("div",{className:"mt-auto flex flex-row gap-1.5 xs:gap-2 items-center",children:[(0,Lt.jsxs)("div",{className:"flex items-center border border-gray-200 rounded-sm py-2.5 px-1",children:[(0,Lt.jsx)("button",{onClick:l||(()=>i(Math.max(0,a-1))),className:"w-6 h-6 flex items-center justify-center text-gray-600 hover:text-gray-900 transition-colors","aria-label":"Decrease quantity",children:"\u2212"}),(0,Lt.jsx)("div",{className:"px-3 py-0 text-sm text-gray-900 font-light font-inter min-w-[2rem] text-center",children:Math.max(a,1)}),(0,Lt.jsx)("button",{onClick:o||(()=>i(a+1)),className:"w-6 h-6 flex items-center justify-center text-gray-600 hover:text-gray-900 transition-colors","aria-label":"Increase quantity",children:"+"})]}),(0,Lt.jsx)("div",{className:"flex-1",children:(0,Lt.jsx)(vg,{product:{id:"custom-".concat(Date.now()),name:"".concat((null===c||void 0===c?void 0:c.name)||"Custom Case"," with ").concat(h.length," charms"),caseType:u,caseName:(null===c||void 0===c?void 0:c.name)||"Custom Case",color:d,pins:h.map(e=>{let{pin:t}=e;return t}),pinsDetails:h.map(e=>{let{pin:t}=e;return t}),basePrice:n,casePrice:n,pinsPrice:m,totalPrice:parseFloat(t),price:parseFloat(t),image:f,caseImage:f,customDesign:!0,quantity:a},onAdd:p,className:"cursor-pointer bg-btn-success hover:bg-btn-success-hover text-btn-success-text border border-btn-success-border hover:border-btn-success-hover transition-all duration-200 py-2.5 text-sm font-light",disabled:!1})})]}),v&&(0,Lt.jsx)("div",{className:"mt-4 text-sm font-light font-inter ".concat("error"===w?"text-red-600":"text-orange-600"),children:v})]}),s&&(0,Lt.jsxs)("div",{className:"space-y-1 ".concat(C?"text-xs xs:text-sm mb-1 pt-1":"text-xs mb-4 pt-4"," text-gray-600 border-t border-gray-100"),children:[(0,Lt.jsxs)("div",{className:"flex justify-between font-light font-inter",children:[(0,Lt.jsx)("span",{children:"Case:"}),(0,Lt.jsx)("span",{className:"font-light font-inter",children:S(n)})]}),r.map((e,t)=>(0,Lt.jsxs)("div",{className:"flex justify-between font-light font-inter",children:[(0,Lt.jsxs)("span",{children:[e.name,e.count>1?" (x".concat(e.count,")"):"",":"]}),(0,Lt.jsx)("span",{className:"font-light font-inter",children:S(e.price*e.count)})]},t))]})]})},Cg=e=>{let{selectedCaseType:t,onSelect:n,Products:r,onDropdownToggle:s,cart:a=[]}=e;return(0,Lt.jsx)("div",{className:"w-full",children:(0,Lt.jsx)("div",{className:"flex flex-nowrap gap-2 xs:gap-2.5 sm:gap-3 md:gap-4 lg:gap-5 xl:gap-6 justify-center items-start",children:Zp.map(e=>{const i=(e=>{if(r&&r.cases){const t=r.cases.find(t=>t.type===e);if(t&&t.colors&&t.colors.length>0)return t.colors[0].image}const t=Zp.find(t=>t.value===e);return t&&t.image?t.image:null})(e.value),o=(e=>{const t=r&&r.cases?r.cases.find(t=>t.type===e):null;if(!t)return!1;if(t.colors&&t.colors.length>0)return!t.colors.some(t=>{const n={caseType:e,color:t.color},r=xi(n,a);return null===r||r>0});return!1})(e.value),l=t===e.value;return(0,Lt.jsxs)("div",{className:"transition-all duration-200 md:duration-300 lg:duration-500 flex flex-col items-center p-1.5 xs:p-2 sm:p-2.5 md:p-3 rounded-lg flex-1 max-w-[120px] xs:max-w-[140px] sm:max-w-[160px] md:max-w-[180px] lg:max-w-[200px] xl:max-w-[220px] ".concat(l?"bg-gray-50":""," ").concat(o?"opacity-50 cursor-not-allowed":"cursor-pointer"),onClick:()=>{o||(n(e.value),s&&s())},children:[(0,Lt.jsxs)("div",{className:"relative w-full",children:[i&&(0,Lt.jsx)("div",{className:"w-full aspect-square transition-all duration-200 md:duration-300 lg:duration-500 overflow-hidden flex items-center justify-center ".concat(l?"  scale-110":""," ").concat(o?"opacity-50":""),children:(0,Lt.jsx)("img",{src:Li(i),alt:e.label,className:"w-full h-full object-contain p-1 xs:p-1.5 sm:p-2 md:p-2.5 lg:p-3 xl:p-4",loading:"lazy",onError:e=>{e.target.style.display="none"}})}),l&&!o&&(0,Lt.jsx)("div",{className:"absolute top-0 right-0 md:top-1 md:right-4 lg:top-2 lg:right-4 xl:top-2.5 xl:right-4.5 w-5 h-5 md:w-6 md:h-6 lg:w-7 lg:h-7 xl:w-8 xl:h-8 bg-gray-900 rounded-full flex items-center justify-center shadow-md z-10",children:(0,Lt.jsx)("svg",{className:"w-3 h-3 md:w-3.5 md:h-3.5 lg:w-4 lg:h-4 xl:w-5 xl:h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Lt.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]}),(0,Lt.jsxs)("div",{className:"flex flex-col items-center mt-2 md:mt-3 lg:mt-4 text-center",children:[(0,Lt.jsx)("span",{className:"text-xs md:text-sm font-medium tracking-wider ".concat(l?"text-gray-700":"text-gray-500"),style:{fontFamily:"'Poppins', sans-serif"},children:e.label.split(" - ")[0]}),(0,Lt.jsx)("span",{className:"text-xs md:text-sm font-medium mt-0.5 ".concat(l?"text-gray-500":"text-gray-400"),style:{fontFamily:"'Poppins', sans-serif"},children:e.label.split(" - ")[1]})]}),o&&(0,Lt.jsx)("span",{className:"text-[10px] md:text-xs lg:text-sm text-red-600 font-medium mt-1 md:mt-2",children:"Sold Out"})]},e.value)})})})},Sg=e=>{let{show:t,onClose:n,onAgree:r}=e;return t?(0,Lt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:n,children:(0,Lt.jsxs)("div",{className:"bg-white rounded-sm max-w-2xl w-full max-h-[90vh] overflow-y-auto border border-gray-200 shadow-lg",onClick:e=>e.stopPropagation(),children:[(0,Lt.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 sticky top-0 bg-white",children:[(0,Lt.jsx)("h3",{className:"text-lg font-medium text-gray-900 font-inter",children:"Terms of Use - Create Yours"}),(0,Lt.jsx)("button",{onClick:n,className:"p-2 hover:bg-gray-50 transition-colors rounded","aria-label":"Close modal",children:(0,Lt.jsx)("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Lt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Lt.jsxs)("div",{className:"p-6 space-y-6",children:[(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("h4",{className:"text-base font-semibold text-gray-900 mb-3 font-inter",children:"User Responsibility"}),(0,Lt.jsx)("p",{className:"text-sm text-gray-700 leading-relaxed font-inter",children:"It is the user's responsibility to create and design the passport case using our interactive creator. Please ensure that your design meets your requirements and preferences before placing your order. We are not responsible for any design choices made by the user through the creator tool."})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("h4",{className:"text-base font-semibold text-gray-900 mb-3 font-inter",children:"Handmade Items - Natural Variations"}),(0,Lt.jsx)("p",{className:"text-sm text-gray-700 leading-relaxed font-inter",children:"All our passport cases are handmade with care and attention to detail. As each item is individually crafted, there may be natural variations in color, texture, and appearance. These variations are not defects but rather characteristics of handmade products that make each piece unique. Please note that the final product may vary slightly from the digital preview shown in the creator."})]}),(0,Lt.jsx)("div",{className:"bg-gray-50 border-l-4 border-gray-400 p-4 rounded",children:(0,Lt.jsx)("p",{className:"text-sm text-gray-700 leading-relaxed font-inter",children:'By using our "Create Yours" tool and placing an order, you acknowledge that you have read, understood, and agree to these terms of use.'})})]}),(0,Lt.jsxs)("div",{className:"flex justify-end gap-3 p-6 border-t border-gray-200",children:[(0,Lt.jsx)("button",{onClick:n,className:"px-6 py-2 text-sm uppercase tracking-wider font-inter bg-btn-secondary hover:bg-btn-secondary-hover text-btn-secondary-text border border-btn-secondary-border hover:border-btn-secondary-hover transition-all duration-200",children:"Close"}),(0,Lt.jsx)("button",{onClick:()=>{r?r():n()},className:"px-6 py-2 text-sm uppercase tracking-wider font-inter bg-btn-primary hover:bg-btn-primary-hover text-btn-primary-text border border-btn-primary-border hover:border-btn-primary-hover transition-all duration-200",children:"I Agree"})]})]})}):null},jg=t=>{let{show:n,onClose:r,customText:s,setCustomText:a,customTextError:i,setCustomTextError:o,customTextAdded:l,setCustomTextAdded:c}=t;if((0,e.useEffect)(()=>{if(n){const e=window.scrollY||window.pageYOffset,t=window.scrollX||window.pageXOffset,n=document.body.style.overflow,r=document.body.style.position,s=document.body.style.top,a=document.body.style.width,i=document.body.style.left,o=document.documentElement.style.overflow;return document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.top="-".concat(e,"px"),document.body.style.width="100%",document.body.style.left="-".concat(t,"px"),document.documentElement.style.overflow="hidden",()=>{document.body.style.overflow=n,document.body.style.position=r,document.body.style.top=s,document.body.style.width=a,document.body.style.left=i,document.documentElement.style.overflow=o,requestAnimationFrame(()=>{window.scrollTo(t,e)})}}},[n]),!n)return null;return(0,Lt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-2 xs:p-3 sm:p-4 md:p-6",onClick:r,children:(0,Lt.jsxs)("div",{className:"bg-white  max-w-md w-full border border-gray-200 shadow-lg",onClick:e=>e.stopPropagation(),children:[(0,Lt.jsxs)("div",{className:"flex items-center justify-between p-3 xs:p-4 border-b border-gray-200",children:[(0,Lt.jsx)("h3",{className:"text-xs xs:text-sm font-medium text-gray-900 uppercase tracking-wider",style:{fontFamily:"'Poppins', sans-serif"},children:"Add Text"}),(0,Lt.jsx)("button",{onClick:r,className:"p-1 xs:p-2 hover:bg-gray-50 transition-colors ","aria-label":"Close modal",children:(0,Lt.jsx)("svg",{className:"w-4 h-4 xs:w-5 xs:h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Lt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Lt.jsxs)("div",{className:"p-3 xs:p-4 space-y-4",children:[(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("input",{type:"text",value:s||"",onChange:e=>{a(e.target.value),o(""),c(!1)},onFocus:e=>{e.preventDefault(),setTimeout(()=>{e.target.scrollIntoView({behavior:"smooth",block:"center"})},100)},placeholder:"e.g. Your name",className:"w-full px-3 py-2 border border-gray-200 focus:outline-none focus:border-gray-400 bg-white text-gray-900 placeholder-gray-400 font-thin text-sm font-inter",style:{fontSize:"16px"},maxLength:40}),(0,Lt.jsxs)("p",{className:"mt-1 text-sm text-gray-500 font-inter",children:["Up to ",Jp," characters. Double-click the text on the case to edit or move it."]})]}),i&&(0,Lt.jsx)("div",{className:"text-sm text-gray-600 border border-gray-200 bg-gray-50 px-3 py-2 font-inter",children:i}),l&&(0,Lt.jsx)("div",{className:"text-sm text-gray-600  px-3 py-2 font-inter",children:"Text added to your design! You can drag it to reposition it."}),(0,Lt.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,Lt.jsx)("button",{onClick:()=>{s.trim()?"undefined"!==typeof window&&window.addTextToCanvas?(window.addTextToCanvas(s,{fill:$p,fontSize:28}),c(!0),o(""),setTimeout(()=>{r()},500)):o("Canvas is still loading. Please try again in a moment."):o("Please enter the text you want to add.")},disabled:!s.trim(),className:"flex-1 px-3 py-1.5 text-xs font-medium uppercase tracking-wider active:bg-blue-200 disabled:bg-gray-50 disabled:text-gray-400 disabled:cursor-not-allowed  active:scale-95 disabled:scale-100 focus:outline-none focus:ring-2 focus:ring-blue-300 focus:ring-offset-1 font-inter bg-btn-light-blue hover:bg-btn-light-blue-hover text-btn-light-blue-text border border-btn-light-blue-border hover:border-btn-light-blue-hover transition-all duration-200",children:"Add Text"}),(0,Lt.jsx)("button",{onClick:()=>{a(""),c(!1),o("")},disabled:!s.trim(),className:"px-3 py-1.5 text-xs font-medium uppercase tracking-wider active:bg-gray-200 disabled:bg-gray-50 disabled:text-gray-400 disabled:border-gray-100 disabled:cursor-not-allowed active:scale-95 disabled:scale-100 focus:outline-none focus:ring-2 focus:ring-gray-300 focus:ring-offset-1 font-inter bg-btn-light-gray hover:bg-btn-light-gray-hover text-btn-light-gray-text border border-btn-light-gray-border hover:border-btn-light-gray-hover transition-all duration-200",children:"Clear"})]})]})]})})},kg=()=>{var t;const n=ve(),[r]=Ot(),s=Se(),[a,i]=(0,e.useState)(""),[o,l]=(0,e.useState)([]),[u,d]=(0,e.useState)("all"),h=(e=>{const t=null===e||void 0===e?void 0:e.get("case"),n=null===e||void 0===e?void 0:e.get("color"),r="economy";if(t){const e=ui.cases.find(e=>e.type===t);if(e){if(n){const t=e.colors.find(e=>e.color===n);if(t)return{caseType:e.type,color:t.color,image:t.image}}if(e.colors&&e.colors.length>0){const t=e.colors[0];return{caseType:e.type,color:t.color,image:t.image}}}}const s=ui.cases.find(e=>e.type===r);if(s&&s.colors&&s.colors.length>0){const e=s.colors[0];return{caseType:r,color:e.color,image:e.image}}return{caseType:r,color:"",image:""}})(r),[f,m]=(0,e.useState)(h.caseType),[p,g]=(0,e.useState)(h.color),[y,x]=(0,e.useState)(h.image),[b,v]=(0,e.useState)([]),[w,C]=(0,e.useState)(!1),[S,j]=(0,e.useState)(!1),[k,N]=(0,e.useState)(!1),[_,T]=(0,e.useState)(!1),[E,P]=(0,e.useState)(window.innerWidth<768),[O,D]=(0,e.useState)(null),[A,M]=(0,e.useState)(0),[L,z]=(0,e.useState)(""),[F,R]=(0,e.useState)(""),[I,B]=(0,e.useState)(!1),[H,W]=(0,e.useState)(!1),[U,Y]=(0,e.useState)(0),[V,q]=(0,e.useState)(!1),[X,G]=(0,e.useState)(!1),[K,Q]=(0,e.useState)(!1),[$,J]=(0,e.useState)(!1),[Z,ee]=(0,e.useState)(!1),[te,ne]=(0,e.useState)(!1),re=(0,e.useRef)(null),{addToCart:se,cart:ae}=ji(),ie=hg(),{inventoryMessage:oe,inventoryType:le,quantityError:ce,charmInventoryError:ue,setInventoryMessage:de,setInventoryType:he,setQuantityError:fe,setCharmInventoryError:me,checkQuantityIncrement:pe}=(t=>{let{selectedCaseType:n,selectedColor:r,selectedPins:s,quantity:a,cart:i,selectedCategory:o,selectedCase:l}=t;const[c,u]=(0,e.useState)(""),[d,h]=(0,e.useState)("warning"),[f,m]=(0,e.useState)(""),[p,g]=(0,e.useState)("");return(0,e.useEffect)(()=>{if(c){const e=setTimeout(()=>{u("")},3e3);return()=>clearTimeout(e)}},[c]),(0,e.useEffect)(()=>{if(n&&r){const e=xi({caseType:n,color:r},i);null!==e&&e>0&&u("")}if(s.length>0){let e=null;for(const{pin:t}of s){if(!t)continue;const n=(null===t||void 0===t?void 0:t.category)||o||"colorful",r=(null===t||void 0===t?void 0:t.name)||"charm",l=(null===t||void 0===t?void 0:t.src)||"",c=xi({type:"charm",category:n,pin:t,name:r},i);if(null===c)continue;let u=0;i.forEach(e=>{if("charm"===e.type){const t=e.pin||e,s=t.name||t.src,a=t.category||e.category||n;s!==r&&s!==l||a!==n||(u+=e.quantity||1)}});let d=0;i.forEach(e=>{e.pins&&Array.isArray(e.pins)&&e.pins.forEach(t=>{const s=t.name||t.src,a=t.category||n;s!==r&&s!==l||a!==n||(d+=e.quantity||1)})});const h=s.filter(e=>{const t=e.pin||e,s=t.name||t.src,a=t.category||n;return(s===r||s===l)&&a===n}).length;if(0===c||u+d+h*a>c+u){e=r;break}}e?(u("Oops! We don't have any more ".concat(e," in stock right now.")),h("warning")):u(e=>e&&e.includes("can't add more to your basket")||!e||e.includes("Passport Case")||e.includes("Case")?e:"")}else u(e=>e&&e.includes("can't add more to your basket")||!e||e.includes("Passport Case")||e.includes("Case")?e:"")},[n,r,s,a,i,o]),{inventoryMessage:c,inventoryType:d,quantityError:f,charmInventoryError:p,setInventoryMessage:u,setInventoryType:h,setQuantityError:m,setCharmInventoryError:g,checkQuantityIncrement:e=>{const t=xi({caseType:n,color:r},i);if(null!==t&&(t<=0||e+1>t)){var a;const e=(null===l||void 0===l?void 0:l.name)||"Passport Case",t=null===l||void 0===l||null===(a=l.colors)||void 0===a?void 0:a.find(e=>e.color===r),n=null!==t&&void 0!==t&&t.image?(e=>{if(!e)return"";let t=e.split("/").pop().replace(".png","").replace(".jpg","").toLowerCase().replace(/^economycase/i,"").replace(/^businessclasscase/i,"").replace(/^firstclasscase/i,"").replace(/^smartcase/i,"").replace(/^premiumcase/i,"").replace(/^firstclass/i,"");const n={lightpink:"Light Pink",lightblue:"Light Blue",lightbrown:"Light Brown",darkbrown:"Dark Brown",darkblue:"Dark Blue",jeansblue:"Jeans Blue",brickred:"Brick Red",ligthpink:"Light Pink",navyblue:"Navy Blue",gray:"Gray",grey:"Gray",black:"Black",brown:"Brown",red:"Red",pink:"Pink",blue:"Blue",green:"Green",purple:"Purple",yellow:"Yellow",orange:"Orange"};return n[t]?n[t]:(t=t.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/(dark|light|navy|jeans|brick)([a-z]+)/g,"$1 $2").split(/(?=[A-Z])|(?=dark|light|navy|jeans|brick)/).filter(e=>e.length>0).join(" ").toLowerCase().split(" ").map(e=>n[e]?n[e]:e.charAt(0).toUpperCase()+e.slice(1)).join(" "),t||"Color")})(t.image):"",s=n?" in ".concat(n):"",i="Oops! We don't have any more ".concat(e).concat(s," in stock right now, so you can't add more to your basket.");return m("We don't have any more ".concat(e).concat(s," in stock to be added anymore.")),u(i),h("error"),!1}if(s.length>0)for(const{pin:n}of s){if(!n)continue;const t=(()=>n.category?n.category:o||"colorful")(),r=n.name||n.src||"",a=n.src||"",l={name:r,price:n.price||2,totalPrice:n.price||2,image:a,pin:n,category:t,type:"charm"},c=xi(l,i);if(null===c)continue;let d=0;i.forEach(e=>{if("charm"===e.type){const n=e.pin||e,s=n.name||n.src,i=n.category||e.category||t;s!==r&&s!==a||i!==t||(d+=e.quantity||1)}});let f=0;i.forEach(e=>{e.pins&&Array.isArray(e.pins)&&e.pins.forEach(n=>{const s=n.name||n.src,i=n.category||t;s!==r&&s!==a||i!==t||(f+=e.quantity||1)})});const m=s.filter(e=>{const n=e.pin||e,s=n.name||n.src,i=n.category||t;return(s===r||s===a)&&i===t}).length;if(0===c||d+f+m*e+m>c+d){const e="Oops! We don't have any more ".concat(n.name||"this charm"," in stock right now, so you can't add more to your basket.");return g(e),u(e),h("error"),!1}}return!0}}})({selectedCaseType:f,selectedColor:p,selectedPins:b,quantity:A,cart:ae,selectedCategory:a,selectedCase:ie.cases.find(e=>e.type===f)});(0,e.useEffect)(()=>{window.scrollTo({top:0,behavior:"instant"})},[n.pathname]),(0,e.useEffect)(()=>{const e=r.get("case"),t=r.get("color");if(e){const n=ui.cases.find(t=>t.type===e);if(n){if(m(n.type),t){const e=n.colors.find(e=>e.color===t);if(e)return g(e.color),void x(e.image)}if(n.colors&&n.colors.length>0){const e=n.colors[0];g(e.color),x(e.image)}}}},[r]);const ge=e=>{m(e);const t=hg().cases.find(t=>t.type===e);if(t&&t.colors.length>0){const n=t.colors.find(e=>void 0===e.quantity||e.quantity>0)||t.colors[0],r={caseType:e,color:n.color},s=xi(r,ae);null!==s&&s>0&&de(""),g(n.color),x(n.image)}E&&D(null)},ye=(e,t)=>{if(f&&e){const t=xi({caseType:f,color:e},ae);null!==t&&t>0&&de("")}g(e),x(t),E&&D(null)},xe=(0,e.useCallback)(e=>{const t=e.category?e.category:a||"colorful",n=e.name||e.src||"",r=e.src||"",s=c(c({},e),{},{category:t}),i={name:n,price:e.price||2,totalPrice:e.price||2,image:r,pin:s,category:t,type:"charm"},o=xi(i,ae);if(null===o)return window.addPinToCanvas&&window.addPinToCanvas(s),void(E?(D(null),setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},100)):setTimeout(()=>{const e=document.querySelector(".happy-card");e&&e.scrollIntoView({behavior:"smooth",block:"center"})},100));let l=0;ae.forEach(e=>{if("charm"===e.type){const s=e.pin||e,a=s.name||s.src,i=s.category||e.category||t;a!==n&&a!==r||i!==t||(l+=e.quantity||1)}});let u=0;ae.forEach(e=>{e.pins&&Array.isArray(e.pins)&&e.pins.forEach(s=>{const a=s.name||s.src,i=s.category||t;a!==n&&a!==r||i!==t||(u+=e.quantity||1)})});const d=b.filter(e=>{const s=e.pin||e,a=s.name||s.src,i=s.category||t;return(a===n||a===r)&&i===t}).length;if(0===o||l+u+d+1>o+l){const t=e.name||e.src||"this charm",n="Oops! We don't have any more ".concat(t," in stock right now, so you can't add more to your basket.");return de(n),he("error"),me("We don't have any more ".concat(t," in stock.")),void(E?(D(null),setTimeout(()=>{window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"})},300)):setTimeout(()=>{const e=document.querySelector('[class*="PriceSummary"]')||document.querySelector(".price-summary");e&&e.scrollIntoView({behavior:"smooth",block:"center"})},300))}window.addPinToCanvas&&window.addPinToCanvas(s),me(""),E?(D(null),setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},100)):setTimeout(()=>{const e=document.querySelector(".happy-card");e&&e.scrollIntoView({behavior:"smooth",block:"center"})},100)},[E,ae,b,a,me,de,he]);(0,e.useEffect)(()=>{var e;if(null!==(e=n.state)&&void 0!==e&&e.selectedPin){const e=n.state.selectedPin,t=c(c({},e),{},{category:e.category||a||"colorful"});setTimeout(()=>{window.addPinToCanvas&&window.addPinToCanvas(t)},1e3),window.history.replaceState({},document.title)}},[n.state,a]),(0,e.useEffect)(()=>{if(a)if("flags"===a){const e=ui.pins.flags||[];l(e)}else l(ui.pins[a]||[]);d("all")},[a]),(0,e.useEffect)(()=>{if(ui.cases.length>0){const e=ui.cases.find(e=>e.type===f)||ui.cases[0];if(e&&e.colors.length>0){const t=e.colors[0];g(t.color),x(t.image)}}},[f]);const be=()=>{const e=xi({caseType:f,color:p},ae);null!==e&&A>=e||pe(A)&&(M(A+1),fe(""),me(""),de(""))},we=()=>{A>0&&(M(A-1),fe(""),me(""),de(""))},Ce=()=>{L.trim()?"undefined"!==typeof window&&window.addTextToCanvas?(window.addTextToCanvas(L.trim(),{fill:$p,fontSize:28}),B(!0),R(""),setTimeout(()=>{T(!1)},500)):R("Canvas is still loading. Please try again in a moment."):R("Please enter the text you want to add.")},je=ie.cases.find(e=>e.type===f),ke=(null===je||void 0===je?void 0:je.basePrice)||0,Ne=null===je||void 0===je||null===(t=je.colors)||void 0===t?void 0:t.find(e=>e.color===p),_e=((e,t)=>{var n;const r=(null===e||void 0===e?void 0:e.image)||(null===t||void 0===t||null===(n=t.images)||void 0===n?void 0:n[0])||"",s=[];r&&s.push(Li(r));let a=[];return"economy"===(null===t||void 0===t?void 0:t.type)?a=["/TheHappyCase/images/SmartCase/economycaseinside.jpg","/TheHappyCase/images/SmartCase/economycaseclosure.jpg","/TheHappyCase/images/SmartCase/economycaseclosureinside.jpg"]:"business"===(null===t||void 0===t?void 0:t.type)?a=["/TheHappyCase/images/BusinessClassCase/businessclass.png","/TheHappyCase/images/BusinessClassCase/businessclass1.png"]:"firstclass"===(null===t||void 0===t?void 0:t.type)&&(a=["/TheHappyCase/images/FirstClassCase/firstclass.jpg","/TheHappyCase/images/FirstClassCase/firstclass1.png","/TheHappyCase/images/FirstClassCase/firstclass2.png"]),a.forEach(e=>{e&&s.push(Li(e))}),s.length>0?s:r?[Li(r)]:[]})(Ne,je),Te=(e=>e.reduce((e,t)=>{let{pin:n}=t;return e+((null===n||void 0===n?void 0:n.price)||0)},0))(b),Ee=((e,t,n)=>((e+t)*Math.max(n,1)).toFixed(2))(ke,Te,A),Pe=(e=>{const t=e.reduce((e,t)=>{let{pin:n}=t;if(!n)return e;const r="".concat(n.src,"|").concat(n.name,"|").concat(n.price);return e[r]||(e[r]=c(c({},n),{},{count:0})),e[r].count+=1,e},{});return Object.values(t)})(b),Oe=()=>{if(!K)return ee(!0),void J(!0);ee(!1),De()},De=async()=>{var e,t;const n=Math.max(A,1),r=xi({caseType:f,color:p},ae),s=(null===je||void 0===je?void 0:je.name)||"Passport Case",i=null===je||void 0===je||null===(e=je.colors)||void 0===e?void 0:e.find(e=>e.color===p),o=(null===i||void 0===i?void 0:i.color)||p||"";if(null!==r&&0===r){const e=o?" in ".concat(o):"";return de("Oops! We don't have any more ".concat(s).concat(e," in stock right now, so you can't add more to your basket.")),void he("error")}if(null!==r&&n>r){const e=o?" in ".concat(o):"";return de("Oops! We don't have any more ".concat(s).concat(e," in stock right now, so you can't add more to your basket.")),he("error"),void M(r>0?r:0)}for(const{pin:c}of b){const e=(null===c||void 0===c?void 0:c.category)||a||"colorful",t=(null===c||void 0===c?void 0:c.name)||"charm",r=xi({type:"charm",category:e,pin:c,name:t},ae);if(null!==r&&0===r)return de("Oops! We don't have any more ".concat(t," in stock right now, so you can't add more to your basket.")),void he("error");if(null!==r&&n>r)return de("Oops! We don't have any more ".concat(t," in stock right now, so you can't add more to your basket.")),void he("error")}const l=y||(null===i||void 0===i?void 0:i.image)||(null===je||void 0===je||null===(t=je.images)||void 0===t?void 0:t[0])||"";let u=null;window.getDesignImageDataURL&&(u=window.getDesignImageDataURL());let d=l;if(l&&u)try{d=await function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:350;return new Promise((s,a)=>{if(!e&&!t)return void s(null);const i=document.createElement("canvas");i.width=n,i.height=r;const o=i.getContext("2d");o.fillStyle="white",o.fillRect(0,0,n,r);const l=()=>{if(!t)return void s(i.toDataURL("image/png",1));const e=new Image;e.onload=()=>{const t=e.width/e.height;let a,l,c,u;t>n/r?(a=n,l=n/t):(l=r,a=r*t),c=(n-a)/2,u=(r-l)/2,o.drawImage(e,c,u,a,l),s(i.toDataURL("image/png",1))},e.onerror=()=>{console.error("Failed to load canvas content"),s(i.toDataURL("image/png",1))},e.src=t};(()=>{if(!e)return void l();const t=new Image;t.crossOrigin="anonymous",t.onload=()=>{const e=t.width/t.height;let s,a,i,c;e>n/r?(a=270,s=a*e):(s=270,a=s/e),i=(n-s)/2,c=.45*r-a/2,o.drawImage(t,i,c,s,a),l()},t.onerror=()=>{console.error("Failed to load case image:",e),l()},t.src=e})()})}(l,u,300,350)}catch(x){console.error("Error creating composite design image:",x),d=l}else u&&(d=u);const h=b.map(e=>{let{pin:t}=e;const n=null!==t&&void 0!==t&&t.category&&""!==t.category.trim()?t.category:a&&""!==a.trim()?a:"colorful";return c(c({},t),{},{name:(null===t||void 0===t?void 0:t.name)||"Charm",src:(null===t||void 0===t?void 0:t.src)||"",price:(null===t||void 0===t?void 0:t.price)||0,category:n})}),m=Date.now(),g={id:"case-".concat(m,"-").concat(Math.random().toString(36).substr(2,9)),name:s,caseType:f,caseName:s,color:p,basePrice:ke,casePrice:ke,totalPrice:ke,price:ke,image:d,designImage:d,caseImage:l,customDesign:!0,quantity:n};console.log("\ud83d\uded2 CreateYours - Adding case to cart separately:",{caseName:g.caseName,caseType:g.caseType,color:g.color,quantity:g.quantity,price:g.price,id:g.id}),se(g),h.forEach((e,t)=>{const r=e.category||a||"colorful",s=e.name||"Charm",i=e.price||2,o={id:"charm-".concat(m,"-").concat(t,"-").concat(Math.random().toString(36).substr(2,9)),name:s,price:i,totalPrice:i,image:e.src||"",pin:e,category:r,type:"charm",quantity:n};console.log("\ud83d\uded2 CreateYours - Adding charm ".concat(t+1," to cart separately:"),{charmName:o.name,category:o.category,quantity:o.quantity,price:o.price,id:o.id}),se(o)}),console.log("\ud83d\uded2 CreateYours - All items added separately to cart:",{case:{name:g.caseName,quantity:g.quantity,price:g.price},charms:h.map((e,t)=>({charmNumber:t+1,name:e.name,category:e.category,quantity:n,price:e.price})),totalItems:1+h.length,totalQuantity:n}),window.clearCanvas&&window.clearCanvas(),v([]),M(0)},Ae=(0,e.useCallback)(e=>{e&&e.pinData&&(console.log("handlePinSelect called for:",e.pinData.name),v(t=>(console.log("Current selectedPins count:",t.length),console.log("Adding pin instance to selectedPins"),[...t,{imgInstance:e,pin:e.pinData}])))},[]),Me=(0,e.useCallback)(e=>{v(t=>t.filter(t=>t.imgInstance!==e)),me("")},[me]);return(0,e.useEffect)(()=>{const e=()=>{P(window.innerWidth<768)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,e.useEffect)(()=>{E&&null!==O&&T(!1)},[O,E]),(0,e.useEffect)(()=>{const e=e=>{re.current&&!re.current.contains(e.target)&&j(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,Lt.jsx)("section",{className:"w-full pt-4  pb-1 md:pb-8 bg-white ".concat(E?"h-screen fixed inset-0 overflow-hidden":"min-h-screen"),children:(0,Lt.jsxs)("div",{className:"max-w-7xl mx-auto px-2 xs:px-3 sm:px-4 md:px-8 relative z-10 ".concat(E?"pb-40 xs:pb-44 sm:pb-48 h-full flex flex-col overflow-hidden":"pb-2 sm:pb-24 flex flex-col"),children:[E&&(0,Lt.jsx)("button",{onClick:()=>s("/"),className:"absolute right-2 xs:right-3 sm:right-4 z-50 w-7 h-7 xs:w-8 xs:h-8 flex items-center justify-center transition-colors","aria-label":"Close and go back to home",children:(0,Lt.jsx)("svg",{className:"w-12 h-12 xs:w-5 xs:h-5 mt-4 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Lt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,Lt.jsxs)("div",{className:"text-center flex-shrink-0 mt-4 md:mt-6",children:[(0,Lt.jsx)("h1",{className:"text-title text-gray-900 tracking-title mb-1 md:mb-2",children:"CREATE YOURS"}),(0,Lt.jsx)("div",{className:"w-16 sm:w-20 md:w-24 h-px bg-gray-200 mx-auto mb-2 md:mb-4"}),(0,Lt.jsx)("p",{className:"md:block hidden text-sm text-gray-500 max-w-2xl mx-auto font-light",style:{fontFamily:"'Poppins', sans-serif"},children:"Design your perfect passport case with our interactive creator"})]}),(0,Lt.jsxs)("div",{className:"flex flex-col ".concat(E?"":"md:flex-row md:gap-8 lg:gap-12"," flex-1 overflow-hidden mt-0 ").concat(E?"":"md:mt-12"),children:[(0,Lt.jsx)("div",{className:"flex flex-col flex-shrink-0 ".concat(E?"justify-start sm:flex-1 sm:justify-center":"md:w-1/2 md:flex-1 md:overflow-hidden md:px-0 md:py-0"," px-2 xs:px-3 sm:px-4 py-0 xs:py-1 sm:py-2 ").concat(S||k||_?"md:sticky md:top-0 md:self-start":""),children:(0,Lt.jsxs)("div",{className:"w-full h-full flex flex-col justify-start xs:justify-start sm:justify-center items-center md:justify-between",children:[(0,Lt.jsxs)("div",{className:"w-full max-w-[300px] aspect-[300/350] relative md:mt-2",style:{isolation:"isolate"},children:[y&&(0,Lt.jsx)("div",{className:"absolute inset-0 w-full h-full bg-contain bg-no-repeat",style:{backgroundImage:"url(".concat(Li(y),")"),zIndex:0,pointerEvents:"none",backgroundSize:"270px",backgroundPosition:"center 45%"}},"case-bg-".concat(f,"-").concat(p)),(0,Lt.jsx)("div",{className:"w-full h-full absolute inset-0 ",style:{zIndex:10,pointerEvents:"auto",width:"100%",height:"100%"},children:(0,Lt.jsx)(Kp,{selectedCaseType:f,selectedColor:p,onPinSelect:Ae,onPinRemove:Me,products:ui})})]}),(0,Lt.jsxs)("div",{className:"mt-8 md:mt-8 mb-0 hidden md:flex flex-row gap-2 md:gap-2.5 lg:gap-3 flex-shrink-0 w-full max-w-full md:max-w-[480px] lg:max-w-[520px] relative z-0",children:[(0,Lt.jsx)(fg,{caseImages:_e,onOpenModal:()=>{W(!0),Y(0)}}),(0,Lt.jsx)(mg,{selectedCase:je,onOpenModal:()=>q(!0)})]})]})}),(0,Lt.jsx)("div",{className:"flex flex-col ".concat(E?"":"md:w-1/2 md:flex-1"," gap-2 xs:gap-3 sm:gap-4 overflow-hidden"),children:(0,Lt.jsxs)("div",{className:"w-full flex flex-col space-y-4 sm:space-y-6 hide-scrollbar ".concat(S||k||_?"md:max-h-none md:overflow-visible":"md:max-h-[calc(100vh-200px)] md:overflow-y-auto"),style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:[E&&(0,Lt.jsx)(xg,{mobileCurrentStep:O,setMobileCurrentStep:D,selectedCaseType:f,selectedColor:p,selectedCategory:a,setSelectedCategory:i,mobileSubCategory:u,setMobileSubCategory:d,pins:o,selectedPins:b,handleCaseTypeSelection:ge,handleColorSelection:ye,handlePinSelection:xe,Products:ie,cart:ae}),(0,Lt.jsxs)("div",{className:"pb-6 border-b border-gray-100 flex-shrink-0 mt-6 overflow-visible ".concat(E?"hidden":""),children:[(0,Lt.jsxs)("button",{onClick:()=>{N(!1),T(!1),j(!S)},className:"w-full flex items-center justify-between mb-4",children:[(0,Lt.jsx)("h3",{className:"text-sm uppercase tracking-wider text-gray-900 font-medium",style:{fontFamily:"'Poppins', sans-serif"},children:"1. Choose Case"}),(0,Lt.jsx)("svg",{className:"w-4 h-4 text-gray-500 transition-transform duration-200 ".concat(S?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Lt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),S&&(0,Lt.jsxs)("div",{className:"space-y-6 overflow-visible",children:[(0,Lt.jsx)(Cg,{selectedCaseType:f,onSelect:ge,Products:ui,isCaseDropdownOpen:S,setIsCaseDropdownOpen:j,cart:ae}),p&&(0,Lt.jsx)("div",{className:"mt-10 overflow-visible",children:(0,Lt.jsx)(Qp,{colors:(null===je||void 0===je?void 0:je.colors)||[],selectedColor:p,onSelect:ye,caseType:f,cart:ae})})]})]}),(0,Lt.jsxs)("div",{className:"pb-6 border-b border-gray-100 mt-6 ".concat(E?"hidden":"block"),children:[(0,Lt.jsxs)("button",{onClick:()=>{j(!1),T(!1),N(!k)},className:"w-full flex items-center justify-between mb-4",children:[(0,Lt.jsx)("h3",{className:"text-sm uppercase tracking-wider text-gray-900 font-medium",style:{fontFamily:"'Poppins', sans-serif"},children:"3. Choose Charms"}),(0,Lt.jsx)("svg",{className:"w-4 h-4 text-gray-500 transition-transform duration-200 ".concat(k?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Lt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),k&&(0,Lt.jsx)("div",{className:"relative z-10",children:(0,Lt.jsx)(dg,{pins:o,selectedCategory:a,setSelectedCategory:i,selectedPins:b,onSelect:xe,Products:ui,cart:ae})})]}),!E&&(0,Lt.jsxs)("div",{className:"pb-6 border-b border-gray-100 mt-6",children:[(0,Lt.jsxs)("button",{onClick:()=>{j(!1),N(!1),T(!_)},className:"w-full flex items-center justify-between mb-4",children:[(0,Lt.jsx)("h3",{className:"text-sm uppercase tracking-wider text-gray-900 font-medium",style:{fontFamily:"'Poppins', sans-serif"},children:"4. Add Text"}),(0,Lt.jsx)("svg",{className:"w-4 h-4 text-gray-500 transition-transform duration-200 ".concat(_?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Lt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),_&&(0,Lt.jsx)(bg,{customText:L,setCustomText:z,customTextError:F,setCustomTextError:R,customTextAdded:I,setCustomTextAdded:B})]}),!E&&(0,Lt.jsx)(wg,{totalPrice:Ee,caseBasePrice:ke,groupedPinsList:Pe,showPriceBreakdown:w,setShowPriceBreakdown:C,quantity:A,setQuantity:M,onIncrementQuantity:be,onDecrementQuantity:we,quantityError:ce,charmInventoryError:ue,selectedCase:je,selectedCaseType:f,selectedColor:p,selectedPins:b,selectedCaseImage:y,pinsPrice:Te,onAddToCart:Oe,onShowTerms:()=>G(!0),inventoryMessage:oe,inventoryType:le,agreedToTerms:K,setAgreedToTerms:e=>{Q(e),e&&ee(!1)},showTermsError:Z})]})})]}),E&&(0,Lt.jsx)("div",{className:"fixed left-0 right-0 z-0 bg-white md:hidden w-full",style:{bottom:"calc(80px + 0.75rem)"},children:(0,Lt.jsxs)("div",{className:"px-2 xs:px-3 sm:px-4 py-2 xs:py-2.5 sm:py-3 mb-0 pb-0",children:[(0,Lt.jsx)("p",{className:"text-[14px] text-gray-700 mb-2 xs:mb-2.5 text-center font-thin",style:{fontFamily:"'Poppins', sans-serif"},children:"Choose the options below:"}),(0,Lt.jsx)("div",{className:"mb-4 flex justify-center",children:(0,Lt.jsxs)("div",{className:"grid grid-cols-4 gap-1.5 xs:gap-2 sm:gap-2.5 max-w-fit",children:[(0,Lt.jsxs)("button",{onClick:()=>D("case"),className:"py-2.5 flex flex-col items-center justify-center gap-1 transition-all duration-200 touch-manipulation bg-btn-primary-blue text-btn-primary-blue-text border border-btn-primary-blue-border hover:bg-btn-primary-blue-hover px-3 xs:px-4",children:[(0,Lt.jsx)(Ca,{icon:ei,className:"w-4 h-4 text-btn-primary-blue-text"}),(0,Lt.jsx)("span",{className:"text-sm font-medium uppercase tracking-wide leading-tight text-btn-primary-blue-text",style:{fontFamily:"'Poppins', sans-serif"},children:"Case"})]}),(0,Lt.jsxs)("button",{onClick:()=>D("color"),disabled:!f,className:"py-2.5 flex flex-col items-center justify-center gap-1 transition-all duration-200 touch-manipulation px-3 xs:px-4 ".concat(f?"bg-btn-primary-blue text-btn-primary-blue-text border border-btn-primary-blue-border hover:bg-btn-primary-blue-hover":"bg-gray-50 text-gray-400 border border-gray-200 cursor-not-allowed opacity-50"),children:[(0,Lt.jsx)(Ca,{icon:Ha,className:"w-4 h-4 ".concat(f?"text-btn-primary-blue-text":"text-gray-400")}),(0,Lt.jsx)("span",{className:"text-sm font-medium uppercase tracking-wide leading-tight ".concat(f?"text-btn-primary-blue-text":"text-gray-400"),style:{fontFamily:"'Poppins', sans-serif"},children:"Color"})]}),(0,Lt.jsxs)("button",{onClick:()=>{D("charms"),window.scrollTo({top:0,behavior:"smooth"})},disabled:!f||!p,className:"py-2.5 flex flex-col items-center justify-center gap-1 transition-all duration-200 touch-manipulation px-3 xs:px-4 ".concat(f&&p?"bg-btn-primary-blue text-btn-primary-blue-text border border-btn-primary-blue-border hover:bg-btn-primary-blue-hover":"bg-gray-50 text-gray-400 border border-gray-200 cursor-not-allowed opacity-50"),children:[(0,Lt.jsx)(Ca,{icon:ti,className:"w-4 h-4 ".concat(f&&p?"text-btn-primary-blue-text":"text-gray-400")}),(0,Lt.jsx)("span",{className:"text-sm font-medium uppercase tracking-wide leading-tight ".concat(f&&p?"text-btn-primary-blue-text":"text-gray-400"),style:{fontFamily:"'Poppins', sans-serif"},children:"Charms"})]}),(0,Lt.jsxs)("button",{onClick:()=>{j(!1),N(!1),T(!_)},className:"py-2.5 flex flex-col items-center justify-center gap-1 transition-all duration-200 touch-manipulation bg-btn-primary-blue text-btn-primary-blue-text border border-btn-primary-blue-border hover:bg-btn-primary-blue-hover px-3 xs:px-4",children:[(0,Lt.jsx)(Ca,{icon:Qa,className:"w-4 h-4 text-btn-primary-blue-text"}),(0,Lt.jsx)("span",{className:"text-sm font-medium uppercase tracking-wide leading-tight text-btn-primary-blue-text",style:{fontFamily:"'Poppins', sans-serif"},children:"Text"})]})]})}),_&&(0,Lt.jsxs)("div",{className:"px-2 xs:px-3 sm:px-4 space-y-2 pt-2",children:[(0,Lt.jsxs)("div",{className:"flex gap-2",children:[(0,Lt.jsx)("input",{type:"text",value:L||"",onChange:e=>{z(e.target.value),R(""),B(!1)},onKeyDown:e=>{"Enter"===e.key&&L.trim()&&Ce()},placeholder:"e.g. Your name",className:"flex-1 px-3 py-2 border border-gray-200 rounded-sm focus:outline-none focus:border-gray-400 bg-white text-gray-900 placeholder-gray-400 font-thin text-sm font-inter",style:{fontSize:"16px"},maxLength:Jp}),(0,Lt.jsx)("button",{onClick:Ce,disabled:!L.trim(),className:"px-4 py-2 text-xs font-medium uppercase tracking-wider disabled:bg-gray-50 disabled:text-gray-400 disabled:cursor-not-allowed disabled:border-gray-100 rounded-sm active:scale-95 disabled:scale-100 focus:outline-none font-inter bg-btn-light-blue hover:bg-btn-light-blue-hover text-btn-light-blue-text border border-btn-light-blue-border hover:border-btn-light-blue-hover transition-all duration-200",children:"Add"})]}),(0,Lt.jsxs)("p",{className:"text-xs text-gray-500 font-inter",children:["Up to ",Jp," characters. Double-click the text on the case to edit or move it."]}),F&&(0,Lt.jsx)("div",{className:"text-xs text-gray-600 border border-gray-200 bg-gray-50 px-3 py-2 rounded",children:F}),I&&(0,Lt.jsx)("div",{className:"text-xs text-green-700  bg-green-50 px-1  py-2 ",children:"Text added to your design! You can drag it to reposition it."})]})]})}),E&&(0,Lt.jsx)("div",{className:"fixed left-0 right-0 z-40 bg-gray-100 border-t border-gray-200 shadow-lg md:hidden max-h-[50vh] xs:max-h-[45vh] overflow-y-auto w-full safe-area-inset-bottom",style:{bottom:"0",paddingBottom:"calc(env(safe-area-inset-bottom) + 0.75rem)"},children:(0,Lt.jsx)("div",{className:"px-2 xs:px-2.5 sm:px-3 py-1.5 xs:py-2 sm:py-2.5 ",children:(0,Lt.jsx)(wg,{totalPrice:Ee,caseBasePrice:ke,groupedPinsList:Pe,showPriceBreakdown:w,setShowPriceBreakdown:C,quantity:A,setQuantity:M,onIncrementQuantity:be,onDecrementQuantity:we,quantityError:ce,charmInventoryError:ue,selectedCase:je,selectedCaseType:f,selectedColor:p,selectedPins:b,selectedCaseImage:y,pinsPrice:Te,onAddToCart:Oe,onShowTerms:()=>G(!0),agreedToTerms:K,setAgreedToTerms:e=>{Q(e),e&&ee(!1)},showTermsError:Z,inventoryMessage:oe,inventoryType:le,isMobile:!0})})}),(0,Lt.jsx)(gg,{show:H,selectedCase:je,selectedColorData:Ne,caseImages:_e,selectedModalImage:U,setSelectedModalImage:Y,onClose:()=>W(!1)}),(0,Lt.jsx)(pg,{show:V,onClose:()=>q(!1),selectedCase:je}),(0,Lt.jsx)(Sg,{show:X,onClose:()=>{G(!1),J(!1)},onAgree:()=>{Q(!0),ee(!1),G(!1),$&&(J(!1),De())}}),E&&(0,Lt.jsx)(jg,{show:te,onClose:()=>ne(!1),customText:L,setCustomText:z,customTextError:F,setCustomTextError:R,customTextAdded:I,setCustomTextAdded:B})]})})},Ng=()=>{const t=Se(),[n,r]=(0,e.useState)("all"),s={bronze:[{id:1,title:"Travel Collection",description:"Classic bronze travel charms",caseColor:"#b0582c",caseImage:"/TheHappyCase/images/SmartCase/economycasebrown.png",pins:[ui.pins.bronze.find(e=>e.name.toLowerCase().includes("airplane")),ui.pins.bronze.find(e=>e.name.toLowerCase().includes("passport")),ui.pins.bronze.find(e=>e.name.toLowerCase().includes("globe"))].filter(Boolean)},{id:2,title:"Landmarks Collection",description:"Iconic landmarks in bronze",caseColor:"#413f44",caseImage:"/TheHappyCase/images/SmartCase/economycaseblack.png",pins:[ui.pins.bronze.find(e=>e.name.toLowerCase().includes("eiffel")),ui.pins.bronze.find(e=>e.name.toLowerCase().includes("bigben")),ui.pins.bronze.find(e=>e.name.toLowerCase().includes("liberty"))].filter(Boolean)},{id:3,title:"Nature & Symbols",description:"Elegant bronze nature charms",caseColor:"#59332e",caseImage:"/TheHappyCase/images/SmartCase/economycasedarkbrown.png",pins:[ui.pins.bronze.find(e=>e.name.toLowerCase().includes("heart")),ui.pins.bronze.find(e=>e.name.toLowerCase().includes("leaf")),ui.pins.bronze.find(e=>e.name.toLowerCase().includes("maple"))].filter(Boolean)}],colorful:[{id:4,title:"Adventure Vibes",description:"Colorful adventure-themed pins",caseColor:"#f49f90",caseImage:"/TheHappyCase/images/SmartCase/economycasepink.png",pins:[ui.pins.colorful.find(e=>e.name.toLowerCase().includes("adventure")),ui.pins.colorful.find(e=>e.name.toLowerCase().includes("airplane")),ui.pins.colorful.find(e=>e.name.toLowerCase().includes("backpack"))].filter(Boolean)},{id:5,title:"Positive Energy",description:"Bright and happy colorful pins",caseColor:"#cb0025",caseImage:"/TheHappyCase/images/SmartCase/economycasered.png",pins:[ui.pins.colorful.find(e=>e.name.toLowerCase().includes("be happy")),ui.pins.colorful.find(e=>e.name.toLowerCase().includes("dream big")),ui.pins.colorful.find(e=>e.name.toLowerCase().includes("be kind"))].filter(Boolean)},{id:6,title:"Travel Essentials",description:"Colorful travel accessories",caseColor:"#9cb4b8",caseImage:"/TheHappyCase/images/SmartCase/economycaselightblue.png",pins:[ui.pins.colorful.find(e=>e.name.toLowerCase().includes("camera")),ui.pins.colorful.find(e=>e.name.toLowerCase().includes("suitcase")),ui.pins.colorful.find(e=>e.name.toLowerCase().includes("passport"))].filter(Boolean)}],flags:[{id:7,title:"European Flags",description:"Show your European heritage",caseColor:"#1e40af",caseImage:"/TheHappyCase/images/FirstClassCase/firstclasscasebrown.png",pins:[ui.pins.flags.find(e=>e.name.toLowerCase().includes("france")),ui.pins.flags.find(e=>e.name.toLowerCase().includes("spain")),ui.pins.flags.find(e=>e.name.toLowerCase().includes("italian"))].filter(Boolean)},{id:8,title:"World Traveler",description:"Flags from around the world",caseColor:"#955a3c",caseImage:"/TheHappyCase/images/FirstClassCase/firstclasscasebrown.png",pins:[ui.pins.flags.find(e=>e.name.toLowerCase().includes("brazil")),ui.pins.flags.find(e=>e.name.toLowerCase().includes("portugal")),ui.pins.flags.find(e=>e.name.toLowerCase().includes("uk"))].filter(Boolean)},{id:9,title:"Pride & Unity",description:"Celebrate diversity with flags",caseColor:"#7c3aed",caseImage:"/TheHappyCase/images/BusinessClassCase/businessclasscasepink.png",pins:[ui.pins.flags.find(e=>e.name.toLowerCase().includes("lgbtqia")),ui.pins.flags.find(e=>e.name.toLowerCase().includes("rainbow"))].filter(Boolean)}],mixed:[{id:10,title:"Traveler's Dream",description:"Mix of bronze and colorful travel pins",caseColor:"#b0582c",caseImage:"/TheHappyCase/images/SmartCase/economycasebrown.png",pins:[ui.pins.bronze.find(e=>e.name.toLowerCase().includes("airplane")),ui.pins.colorful.find(e=>e.name.toLowerCase().includes("adventure")),ui.pins.flags.find(e=>e.name.toLowerCase().includes("france"))].filter(Boolean)},{id:11,title:"Nature & Culture",description:"Bronze nature with colorful accents",caseColor:"#413f44",caseImage:"/TheHappyCase/images/SmartCase/economycaseblack.png",pins:[ui.pins.bronze.find(e=>e.name.toLowerCase().includes("heart")),ui.pins.colorful.find(e=>e.name.toLowerCase().includes("heart")),ui.pins.bronze.find(e=>e.name.toLowerCase().includes("leaf"))].filter(Boolean)},{id:12,title:"Global Explorer",description:"Flags, landmarks, and travel pins",caseColor:"#f49f90",caseImage:"/TheHappyCase/images/SmartCase/economycasepink.png",pins:[ui.pins.flags.find(e=>e.name.toLowerCase().includes("brazil")),ui.pins.bronze.find(e=>e.name.toLowerCase().includes("globe")),ui.pins.colorful.find(e=>e.name.toLowerCase().includes("camera"))].filter(Boolean)}]};return(0,Lt.jsx)("div",{className:"min-h-screen bg-white py-8 md:py-12",children:(0,Lt.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,Lt.jsxs)("div",{className:"text-center mb-12",children:[(0,Lt.jsx)("h1",{className:"text-3xl md:text-4xl font-light text-gray-900 mb-2 font-inter tracking-title",children:"Design Ideas"}),(0,Lt.jsx)("div",{className:"w-16 h-px bg-gray-300 mx-auto mb-4"}),(0,Lt.jsx)("p",{className:"text-sm text-gray-500 max-w-2xl mx-auto font-light font-inter",children:"Get inspired by our curated design collections. Mix and match to create your perfect personalized passport case!"})]}),(0,Lt.jsx)("div",{className:"flex flex-wrap justify-center gap-4 mb-12",children:[{key:"all",label:"All Ideas"},{key:"bronze",label:"Bronze Charms"},{key:"colorful",label:"Colorful Pins"},{key:"flags",label:"Flags"},{key:"mixed",label:"Mixed"}].map(e=>(0,Lt.jsx)("button",{onClick:()=>r(e.key),className:"px-4 py-2 text-xs uppercase tracking-wider transition-all duration-200 font-inter ".concat(n===e.key?"border-b-2 border-gray-900 text-gray-900 font-medium":"border-b-2 border-transparent text-gray-500 hover:text-gray-900 hover:border-gray-300"),children:e.label},e.key))}),(0,Lt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8 mb-12",children:("all"===n?[...s.bronze,...s.colorful,...s.flags,...s.mixed]:s[n]||[]).map((e,n)=>{const r=["bg-pink-50","bg-blue-50","bg-purple-50","bg-green-50","bg-yellow-50","bg-orange-50"],s=n%r.length;return(0,Lt.jsxs)("div",{className:"flex flex-col border border-gray-100 group",children:[(0,Lt.jsx)("div",{className:"relative mb-4 ".concat(r[s]," border-b ").concat(["border-pink-100","border-blue-100","border-purple-100","border-green-100","border-yellow-100","border-orange-100"][s]," p-4"),children:(0,Lt.jsxs)("div",{className:"aspect-[3/4] ".concat(r[s]," flex items-center justify-center overflow-hidden relative"),children:[e.caseImage&&(0,Lt.jsx)("img",{src:Li(e.caseImage),alt:e.title,className:"w-full h-full object-contain",loading:"lazy",fetchPriority:"low",decoding:"async",width:"300",height:"400",onError:e=>{e.target&&(e.target.style.display="none")}}),(0,Lt.jsx)("div",{className:"absolute inset-0 flex items-center justify-center gap-2 flex-wrap p-4",children:e.pins.slice(0,3).map((e,t)=>{const n=["bg-pink-50","bg-blue-50","bg-purple-50","bg-green-50","bg-yellow-50","bg-orange-50"],r=t%n.length;return e&&(0,Lt.jsx)("div",{className:"w-12 h-12 ".concat(n[r]," rounded-full p-1 border ").concat(["border-pink-100","border-blue-100","border-purple-100","border-green-100","border-yellow-100","border-orange-100"][r]),style:{position:"absolute",top:"".concat(20+25*t,"%"),left:"".concat(30+20*t,"%"),transform:"rotate(".concat(15*t,"deg)")},children:(0,Lt.jsx)("img",{src:e.src,alt:e.name,className:"w-full h-full object-contain",loading:"lazy",fetchPriority:"low",decoding:"async",width:"48",height:"48",onError:e=>{e.target&&(e.target.style.display="none")}})},t)})})]})}),(0,Lt.jsxs)("div",{className:"p-6 flex flex-col flex-grow",children:[(0,Lt.jsx)("h3",{className:"text-lg font-light text-gray-900 mb-2 font-inter",children:e.title}),(0,Lt.jsx)("p",{className:"text-sm text-gray-500 mb-4 font-light font-inter",children:e.description}),(0,Lt.jsxs)("div",{className:"flex flex-wrap gap-2 mb-6",children:[e.pins.slice(0,3).map((e,t)=>{const n=["bg-pink-50","bg-blue-50","bg-purple-50","bg-green-50","bg-yellow-50","bg-orange-50"],r=t%n.length;return e&&(0,Lt.jsx)("div",{className:"w-8 h-8 ".concat(n[r]," rounded-full p-1 border ").concat(["border-pink-100","border-blue-100","border-purple-100","border-green-100","border-yellow-100","border-orange-100"][r]),title:e.name,children:(0,Lt.jsx)("img",{src:e.src,alt:e.name,className:"w-full h-full object-contain",onError:e=>{e.target&&(e.target.style.display="none")}})},t)}),e.pins.length>3&&(0,Lt.jsxs)("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center text-xs font-light text-gray-600 border border-gray-200 font-inter",children:["+",e.pins.length-3]})]}),(0,Lt.jsx)("button",{className:"w-full px-4 py-2 text-xs uppercase tracking-wider text-gray-600 hover:text-gray-900 border border-gray-200 hover:border-gray-400 transition-all duration-200 mt-auto font-inter",onClick:e=>{e.stopPropagation(),window.scrollTo({top:0,behavior:"instant"}),t("/CreateYours")},children:"Create This Design"})]})]},e.id)})}),(0,Lt.jsxs)("div",{className:"border border-gray-100 p-8 md:p-12 text-center bg-white mt-8",children:[(0,Lt.jsx)("h2",{className:"text-2xl md:text-3xl font-light text-gray-900 mb-2 font-inter tracking-title",children:"Ready to Create Your Own?"}),(0,Lt.jsx)("div",{className:"w-16 h-px bg-gray-300 mx-auto mb-4"}),(0,Lt.jsx)("p",{className:"text-sm text-gray-500 mb-6 font-light max-w-2xl mx-auto font-inter",children:"Start designing your custom passport case with our interactive creator!"}),(0,Lt.jsx)("button",{onClick:()=>{window.scrollTo({top:0,behavior:"instant"}),t("/CreateYours")},className:"px-6 py-2 text-xs uppercase tracking-wider text-gray-600 hover:text-gray-900 border border-gray-200 hover:border-gray-400 transition-all duration-200 font-inter",children:"Start Creating Now"})]})]})})},_g=e=>{let{totalItems:t=0,onBack:n}=e;const r=t||0;return(0,Lt.jsxs)("div",{className:"mb-8",children:[(0,Lt.jsxs)("button",{onClick:n,className:"flex items-center text-gray-600 hover:text-gray-900 px-4 py-2 text-xs uppercase tracking-wider font-light transition-colors duration-200 mb-6 font-inter",children:[(0,Lt.jsx)(Ca,{icon:Va,className:"mr-2 text-xs"}),"Continue Shopping"]}),(0,Lt.jsxs)("div",{className:"text-center mb-12",children:[(0,Lt.jsxs)("h1",{className:"text-title text-gray-900 tracking-title mb-2 font-inter",children:["YOUR CART (",r," ",1===r,")"]}),(0,Lt.jsx)("div",{className:"w-16 sm:w-20 md:w-24 h-px bg-gray-200 mx-auto mb-4"})]})]})},Tg=e=>{let{onContinueShopping:t}=e;return(0,Lt.jsx)("div",{className:"text-center py-16 flex flex-col items-center justify-center",children:(0,Lt.jsxs)("div",{className:"border border-gray-200 p-8 md:p-12 max-w-md mx-auto bg-white",children:[(0,Lt.jsx)("h2",{className:"text-xl md:text-2xl font-light text-gray-900 mb-4 font-inter",children:"Your cart is empty"}),(0,Lt.jsx)("p",{className:"text-gray-500 mb-8 text-sm font-light font-inter",children:"Start creating your custom case to add items to your cart."}),(0,Lt.jsx)("button",{onClick:t,className:"px-6 py-2 text-xs uppercase tracking-wider font-light font-inter bg-btn-primary-blue hover:bg-btn-primary-blue-hover text-btn-primary-blue-text border border-btn-primary-blue-border hover:border-btn-primary-blue-hover transition-all duration-200",children:"Create Your Case"})]})})},Eg=(e,t)=>{if("charm"===e.type){return t((e.price||e.totalPrice||0)*(e.quantity||1))}return t((("number"===typeof e.basePrice?e.basePrice:e.price||0)+(e.pinsDetails&&e.pinsDetails.length?e.pinsDetails.reduce((e,t)=>e+(t.price||0),0):0))*(e.quantity||1))},Pg=e=>{if(!e)return"";let t=e;return t=t.replace(/\s*-\s*(Flag|Colorful Charm|Bronze Charm)$/i,""),t=t.replace(/\s+Flag$/i,""),t.trim()},Og=e=>{var t,n;let{item:r,formatPrice:s,errorMessage:a}=e;const i=Pg(r.name||(null===(t=r.pin)||void 0===t?void 0:t.name)),o=r.quantity||1,l=(r.price||r.totalPrice||0)*o;return(0,Lt.jsx)("div",{className:"mt-2 flex flex-col gap-2",children:(0,Lt.jsxs)("div",{className:"flex items-start justify-between px-2 py-2 gap-2",children:[(0,Lt.jsxs)("div",{className:"flex items-start gap-3 flex-1 min-w-0",children:[(0,Lt.jsxs)("div",{className:"relative flex-shrink-0",children:[r.image?(0,Lt.jsx)("img",{src:Li(r.image),alt:r.name||"Charm",className:"w-24 h-24 object-contain rounded",loading:"lazy",fetchPriority:"low",decoding:"async",width:"96",height:"96"}):null!==(n=r.pin)&&void 0!==n&&n.src?(0,Lt.jsx)("img",{src:Li(r.pin.src),alt:r.pin.name||"Charm",className:"w-24 h-24 object-contain rounded",loading:"lazy",fetchPriority:"low",decoding:"async",width:"96",height:"96"}):(0,Lt.jsx)("div",{className:"w-24 h-24 rounded bg-gray-50 border border-gray-200 flex items-center justify-center",children:(0,Lt.jsx)("span",{className:"text-gray-400 text-xs",children:"Image"})}),a&&(0,Lt.jsx)("div",{className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center z-10 shadow-lg",children:(0,Lt.jsx)("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Lt.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})})]}),(0,Lt.jsxs)("div",{className:"flex flex-col flex-1 min-w-0",children:[(0,Lt.jsxs)("div",{className:"text-xs font-light text-gray-900 mb-1 font-inter",children:[(0,Lt.jsx)("div",{className:"break-words",children:i||"Charm"}),(0,Lt.jsx)("div",{className:"text-gray-500 font-light font-inter text-[10px]",children:"bronze"===r.category?"Bronze Charm":"flags"===r.category?"Flag":"Colorful Charm"})]}),a&&(0,Lt.jsx)("div",{className:"mt-2 p-2 bg-red-50 border border-red-200 rounded-sm animate-pulse",children:(0,Lt.jsx)("p",{className:"text-xs text-red-700 font-inter leading-tight font-medium",children:a})})]})]}),(0,Lt.jsx)("div",{className:"text-xs font-medium text-gray-900 font-inter flex-shrink-0",children:s(l)})]})})},Dg=e=>{let{item:t,formatPrice:n,errorMessage:r,charmErrors:s={}}=e;const a=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce((e,t)=>{const n="".concat(t.src,"|").concat(t.name,"|").concat(t.price);return e[n]||(e[n]=c(c({},t),{},{count:0})),e[n].count+=1,e},{})}(t.pinsDetails),i=Object.values(a),o="number"===typeof t.basePrice?t.basePrice:8;return(0,Lt.jsxs)("div",{className:"mt-2 flex flex-col gap-2",children:[(0,Lt.jsxs)("div",{className:"flex items-start px-2 py-2 gap-2",children:[(0,Lt.jsxs)("div",{className:"flex items-start gap-3 flex-1 min-w-0",children:[(0,Lt.jsxs)("div",{className:"relative flex-shrink-0",children:[t.designImage?(0,Lt.jsx)("img",{src:t.designImage,alt:"Your Design",className:"w-24 h-18 object-contain rounded",loading:"lazy",fetchPriority:"low",decoding:"async",width:"96",height:"72"}):t.caseImage||t.image?(0,Lt.jsx)("img",{src:Li(t.caseImage||t.image),alt:"Case",className:"w-24 h-18 object-contain rounded",loading:"lazy",fetchPriority:"low",decoding:"async",width:"96",height:"72"}):(0,Lt.jsx)("div",{className:"w-24 h-18 rounded border-2 border-gray-300 flex items-center justify-center",style:{backgroundColor:t.color}}),r&&(0,Lt.jsx)("div",{className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center z-10 shadow-lg",children:(0,Lt.jsx)("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Lt.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})})]}),(0,Lt.jsxs)("div",{className:"flex flex-col flex-1 min-w-0",children:[(0,Lt.jsxs)("div",{className:"text-xs font-light text-gray-900 mb-1 font-inter",children:[(0,Lt.jsx)("div",{className:"break-words",children:t.caseName||t.name}),(0,Lt.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,Lt.jsx)("span",{className:"text-gray-500 font-light font-inter",children:"Color:"}),(0,Lt.jsx)("div",{className:"w-4 h-4 rounded-full border border-gray-300",style:{backgroundColor:t.color}})]})]}),r&&(0,Lt.jsx)("div",{className:"mt-2 p-2 bg-red-50 border border-red-200 rounded-sm animate-pulse",children:(0,Lt.jsx)("p",{className:"text-xs text-red-700 font-inter leading-tight font-medium",children:r})})]})]}),(0,Lt.jsx)("div",{className:"text-xs font-medium text-gray-900 font-inter flex-shrink-0",children:n(o)})]}),i.map((e,t)=>{const r=e.name||e.src||"",a=e.category&&""!==e.category.trim()?e.category:"colorful",i="".concat(r,"-").concat(a),o=s[i],l=Pg(e.name);return(0,Lt.jsxs)("div",{className:"flex items-start justify-between px-2 py-2 gap-2",children:[(0,Lt.jsxs)("div",{className:"flex items-start gap-2 flex-1 min-w-0",children:[(0,Lt.jsxs)("div",{className:"relative flex-shrink-0",children:[(0,Lt.jsx)("img",{src:Li(e.src),alt:l||"Charm",className:"w-24 h-24 object-contain",loading:"lazy",fetchPriority:"low",decoding:"async",width:"96",height:"96"}),o&&(0,Lt.jsx)("div",{className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center z-10 shadow-lg",children:(0,Lt.jsx)("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Lt.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})})]}),(0,Lt.jsxs)("div",{className:"text-xs font-light text-gray-900 mb-1 font-inter flex-1 min-w-0",children:[(0,Lt.jsxs)("div",{className:"break-words",children:[l||"Charm"," ",e.count>1?"(x".concat(e.count,")"):""]}),o&&(0,Lt.jsx)("div",{className:"mt-2 p-2 bg-red-50 border border-red-200 rounded-sm animate-pulse",children:(0,Lt.jsx)("p",{className:"text-xs text-red-700 font-inter leading-tight font-medium",children:o})})]})]}),(0,Lt.jsx)("div",{className:"text-xs font-medium text-gray-900 font-inter flex-shrink-0",children:n(e.price*e.count)})]},t)})]})},Ag=e=>{let{item:t,formatPrice:n,errorMessage:r}=e;return(0,Lt.jsx)("div",{className:"mt-2 flex flex-col gap-2",children:(0,Lt.jsxs)("div",{className:"flex items-start justify-between px-2 py-2 gap-2",children:[(0,Lt.jsxs)("div",{className:"flex items-start gap-3 flex-1 min-w-0",children:[(0,Lt.jsxs)("div",{className:"relative flex-shrink-0",children:[t.designImage?(0,Lt.jsx)("img",{src:t.designImage,alt:"Your Design",className:"w-24 h-18 object-contain rounded",loading:"lazy",fetchPriority:"low",decoding:"async",width:"96",height:"72"}):t.caseImage||t.image?(0,Lt.jsx)("img",{src:Li(t.caseImage||t.image),alt:t.caseName||t.name||"Case",className:"w-24 h-18 object-contain rounded",loading:"lazy",fetchPriority:"low",decoding:"async",width:"96",height:"72"}):(0,Lt.jsx)("div",{className:"w-24 h-18 rounded border-2 border-gray-300 flex items-center justify-center",style:{backgroundColor:t.color}}),r&&(0,Lt.jsx)("div",{className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center z-10 shadow-lg",children:(0,Lt.jsx)("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Lt.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})})]}),(0,Lt.jsxs)("div",{className:"flex flex-col flex-1 min-w-0",children:[(0,Lt.jsxs)("div",{className:"text-xs font-light text-gray-900 mb-1 font-inter",children:[(0,Lt.jsx)("div",{className:"break-words",children:t.caseName||t.name||"Passport Case"}),t.color&&(0,Lt.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,Lt.jsx)("span",{className:"text-gray-500 font-light font-inter",children:"Color:"}),(0,Lt.jsx)("div",{className:"w-4 h-4 rounded-full border border-gray-300",style:{backgroundColor:t.color}})]})]}),r&&(0,Lt.jsx)("div",{className:"mt-2 p-2 bg-red-50 border border-red-200 rounded-sm animate-pulse",children:(0,Lt.jsx)("p",{className:"text-xs text-red-700 font-inter leading-tight font-medium",children:r})})]})]}),(0,Lt.jsx)("div",{className:"text-xs font-medium text-gray-900 font-inter flex-shrink-0",children:n(t.basePrice||t.price||t.totalPrice||0)})]})})},Mg=e=>{let{index:t,item:n,incrementItemQty:r,decrementItemQty:s}=e;return(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("div",{className:"text-xs text-gray-500 mb-2 font-light font-inter",children:"Quantity:"}),(0,Lt.jsx)("div",{className:"flex flex-col gap-2",children:(0,Lt.jsxs)("div",{className:"flex items-center border border-gray-200 rounded-sm p-1 w-fit",children:[(0,Lt.jsx)("button",{onClick:()=>s(void 0!==n.id?n.id:t),className:"w-6 h-6 flex items-center justify-center text-gray-600 hover:text-gray-900 transition-colors",title:"Decrease",children:"\u2212"}),(0,Lt.jsx)("div",{className:"px-3 py-1 text-sm text-gray-900 font-light font-inter",children:n.quantity||1}),(0,Lt.jsx)("button",{onClick:()=>r(void 0!==n.id?n.id:t),className:"w-6 h-6 flex items-center justify-center text-gray-600 hover:text-gray-900 transition-colors",title:"Add one more",children:"+"})]})})]})},Lg=e=>{let{index:t,item:n,openNoteIndex:r,noteTexts:s,setOpenNoteIndex:a,setNoteTexts:i,handleNoteChange:o,handleSaveNote:l}=e;const u=r===t;return(0,Lt.jsxs)(Lt.Fragment,{children:[u&&(0,Lt.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-100",children:[(0,Lt.jsx)("div",{className:"text-xs text-gray-500 mb-2 font-light font-inter",children:"Add a note for this item:"}),(0,Lt.jsx)("textarea",{value:void 0!==s[t]?s[t]:n.note||"",onChange:e=>o(t,e.target.value),placeholder:"Add any special instructions or notes...",className:"w-full px-3 py-2 text-sm border border-gray-200 rounded-sm focus:outline-none focus:ring-1 focus:ring-gray-400 focus:border-gray-400 font-light resize-none font-inter",rows:"3"}),(0,Lt.jsxs)("div",{className:"flex justify-end gap-2 mt-2",children:[(0,Lt.jsx)("button",{onClick:()=>{a(null),i(c(c({},s),{},{[t]:n.note||""}))},className:"px-4 py-1.5 text-xs uppercase tracking-wider text-gray-600 hover:text-gray-900 font-light transition-colors font-inter",children:"Cancel"}),(0,Lt.jsx)("button",{onClick:()=>l(t),className:"px-4 py-1.5 text-xs uppercase tracking-wider font-light font-inter bg-btn-primary hover:bg-btn-primary-hover text-btn-primary-text border border-btn-primary-border hover:border-btn-primary-hover transition-all duration-200",children:"Save Note"})]})]}),n.note&&r!==t&&(0,Lt.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-100",children:[(0,Lt.jsx)("div",{className:"text-xs text-gray-500 mb-1 font-light font-inter",children:"Note:"}),(0,Lt.jsx)("div",{className:"text-sm text-gray-700 font-light whitespace-pre-wrap font-inter",children:n.note})]}),(0,Lt.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-100",children:(0,Lt.jsxs)("button",{onClick:()=>a(r===t?null:t),className:"flex items-center text-gray-500 hover:text-gray-900 px-4 py-2 text-xs uppercase tracking-wider font-light transition-colors font-inter",children:[n.note?"Edit Note":"Add Note",(0,Lt.jsx)(Ca,{icon:r===t?za:$a,className:"ml-2 text-xs"})]})})]})},zg=e=>{let{item:t,index:n,formatPrice:r,incrementItemQty:s,decrementItemQty:a,removeFromCart:i,openNoteIndex:o,setOpenNoteIndex:l,noteTexts:c,setNoteTexts:u,handleNoteChange:d,handleSaveNote:h,errorMessage:f,charmErrors:m={}}=e;return(0,Lt.jsx)("div",{className:"border border-gray-200 p-6 bg-white","data-item-id":t.id||n,children:(0,Lt.jsx)("div",{className:"flex items-start justify-between",children:(0,Lt.jsxs)("div",{className:"flex-1",children:["charm"===t.type?(0,Lt.jsx)(Og,{item:t,formatPrice:r,errorMessage:f}):t.pinsDetails&&t.pinsDetails.length>0?(0,Lt.jsx)(Dg,{item:t,formatPrice:r,errorMessage:f,charmErrors:m}):(0,Lt.jsx)(Ag,{item:t,formatPrice:r,errorMessage:f}),(0,Lt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4 pt-4 border-t border-gray-100",children:[(0,Lt.jsx)(Mg,{index:n,item:t,incrementItemQty:s,decrementItemQty:a}),(0,Lt.jsx)("div",{className:"flex items-center justify-end",children:(0,Lt.jsxs)("button",{onClick:()=>i(n),className:"flex items-center text-gray-500 hover:text-gray-900 px-4 py-2 text-xs uppercase tracking-wider font-light transition-colors font-inter",children:[(0,Lt.jsx)(Ca,{icon:Ya,className:"mr-2 text-xs"}),"Remove"]})})]}),(0,Lt.jsx)(Lg,{index:n,item:t,openNoteIndex:o,noteTexts:c,setOpenNoteIndex:l,setNoteTexts:u,handleNoteChange:d,handleSaveNote:h}),(0,Lt.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-100",children:(0,Lt.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Lt.jsx)("span",{className:"text-sm font-light text-gray-700 font-inter",children:"Item Total:"}),(0,Lt.jsx)("span",{className:"text-sm font-medium text-gray-900 font-inter",children:Eg(t,r)})]})})]})})})},Fg=e=>{let{totalPrice:t,onCheckout:n}=e;return(0,Lt.jsx)("div",{className:"lg:col-span-1",children:(0,Lt.jsx)("div",{className:"border border-gray-200 p-6 bg-white sticky top-8",children:(0,Lt.jsxs)("div",{children:[(0,Lt.jsxs)("div",{className:"flex justify-between items-center mb-6 pb-4 border-b border-gray-100",children:[(0,Lt.jsx)("span",{className:"text-sm font-light text-gray-700 uppercase tracking-wider font-inter",children:"Subtotal:"}),(0,Lt.jsx)("span",{className:"text-lg font-medium text-gray-900 font-inter",children:t})]}),(0,Lt.jsxs)("p",{className:"text-xs text-gray-500 text-center mb-4 font-light font-inter",children:[(0,Lt.jsx)(Nt,{to:"/shipping",className:"text-gray-500 hover:text-gray-900 underline transition-colors",children:"Shipping"})," ","and taxes calculated at checkout."]}),(0,Lt.jsx)("button",{onClick:n,className:"w-full py-3 text-xs uppercase tracking-wider font-light font-inter bg-btn-success hover:bg-btn-success-hover text-btn-success-text border border-btn-success-border hover:border-btn-success-hover transition-all duration-200",children:"Checkout"}),(0,Lt.jsx)("p",{className:"text-xs text-gray-500 mt-4 text-center font-light font-inter",children:"Secure payment powered by Stripe"})]})})})},Rg=()=>{const{cart:t,removeFromCart:n,getTotalPrice:r,getTotalQuantity:s,incrementItemQty:a,decrementItemQty:i,updateItemNote:o}=ji(),{formatPrice:l}=Ft(),u=Se(),[d,h]=(0,e.useState)(null),[f,m]=(0,e.useState)({}),[p,g]=(0,e.useState)({}),y=(0,e.useRef)({});(0,e.useEffect)(()=>{const e=y.current;return Object.keys(p).forEach(t=>{e[t]&&clearTimeout(e[t]),e[t]=setTimeout(()=>{g(e=>{const n=c({},e);return("string"===typeof n[t]||n[t]&&"object"===typeof n[t])&&delete n[t],n}),delete e[t]},3e3)}),()=>{Object.values(e).forEach(e=>{clearTimeout(e)})}},[p]);const x=(e,n)=>{g(r=>{const s=c({},r);return t.forEach(r=>{if("charm"===r.type&&hi(e,r)){const e=r.id||t.indexOf(r);s[e]=n}}),s})},b=e=>{g(n=>{const r=c({},n);return t.forEach(n=>{if("charm"===n.type&&hi(e,n)){const e=n.id||t.indexOf(n);delete r[e]}}),r})},v=(e,t)=>{m(c(c({},f),{},{[e]:t}))},w=e=>{o(e,f[e]||""),h(null)},C=l(r());return(0,Lt.jsx)("div",{className:"min-h-screen bg-white py-8 md:py-12",children:(0,Lt.jsxs)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,Lt.jsx)(_g,{totalItems:s(),onBack:()=>u("/")}),0===t.length?(0,Lt.jsx)(Tg,{onContinueShopping:()=>{u("/CreateYours")}}):(0,Lt.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,Lt.jsx)("div",{className:"lg:col-span-2 space-y-6",children:t.map((e,r)=>{var s,o;return(0,Lt.jsx)(zg,{item:e,index:r,formatPrice:l,incrementItemQty:e=>((e,n)=>{const r=t.find(t=>t.id===e)||t[e]||t[n];if(!r)return void console.error("Item not found for increment:",e,n);const s=xi(r,t);if("charm"===r.type){var i,o,l;const h=r.category||(null===(i=r.pin)||void 0===i?void 0:i.category)||"colorful",f=(null===(o=r.pin)||void 0===o?void 0:o.name)||r.name||"",m=(null===(l=r.pin)||void 0===l?void 0:l.src)||"";if(null!==s&&0===s){var u;const t=r.name||(null===(u=r.pin)||void 0===u?void 0:u.name)||"Charm",s="Oops! We don't have any more ".concat(t," in stock right now, so you can't add more to your basket.");return g(t=>c(c({},t),{},{[e||n]:s})),x(r,s),void setTimeout(()=>{const t=document.querySelector('[data-item-id="'.concat(e||n,'"]'));t&&t.scrollIntoView({behavior:"smooth",block:"center"})},100)}if(null===s)return a(e),g(t=>{const r=c({},t);return delete r[e||n],r}),void b(r);let p=0;t.forEach(r=>{if("charm"===r.type){if(r.id===e||void 0===e&&t.indexOf(r)===n)return;const s=r.pin||r,a=s.name||s.src,i=s.category||r.category||h;a!==f&&a!==m||i!==h||(p+=r.quantity||1)}});let y=0;if(t.forEach(e=>{"charm"!==e.type&&(e.pins||e.pinsDetails||[]).forEach(t=>{if(!t)return;const n=t.name||t.src,r=t.src||"",s=t.category||h;(n===f||n===m||r===f||r===m)&&s===h&&(y+=e.quantity||1)})}),(r.quantity||1)+1+y>s+p){var d;const t=r.name||(null===(d=r.pin)||void 0===d?void 0:d.name)||"Charm",s="Oops! We don't have any more ".concat(t," in stock right now, so you can't add more to your basket.");return g(t=>c(c({},t),{},{[e||n]:s})),x(r,s),void setTimeout(()=>{const t=document.querySelector('[data-item-id="'.concat(e||n,'"]'));t&&t.scrollIntoView({behavior:"smooth",block:"center"})},100)}return a(e),g(t=>{const r=c({},t);return delete r[e||n],r}),void b(r)}if(!(null===s||s>0)){const t=r.caseName||r.name||"Passport Case",s="Oops! We don't have any more ".concat(t," in stock right now, so you can't add more to your basket.");return g(t=>{var r;return c(c({},t),{},{[e||n]:{case:s,charms:(null===(r=t[e||n])||void 0===r?void 0:r.charms)||{}}})}),void setTimeout(()=>{const t=document.querySelector('[data-item-id="'.concat(e||n,'"]'));t&&t.scrollIntoView({behavior:"smooth",block:"center"})},100)}if(r.customDesign||r.pins&&Array.isArray(r.pins)&&r.pins.length>0||r.pinsDetails&&Array.isArray(r.pinsDetails)&&r.pinsDetails.length>0){const s=r.pins||r.pinsDetails||[],a=r.quantity||1;for(const r of s){if(!r)continue;const i=r.category&&""!==r.category.trim()?r.category:"colorful",o=r.name||r.src||"",l=r.src||"",u={name:o,price:r.price||2,totalPrice:r.price||2,image:l,pin:r,category:i,type:"charm"},d=xi(u,t);if(null===d)continue;let h=0;t.forEach(e=>{if("charm"===e.type){const t=e.pin||e,n=t.name||t.src,r=t.category||e.category||i;n!==o&&n!==l||r!==i||(h+=e.quantity||1)}});let f=0;t.forEach(r=>{r.id!==e&&t.indexOf(r)!==n&&(r.pins&&Array.isArray(r.pins)&&r.pins.forEach(e=>{const t=e.name||e.src,n=e.category||i;t!==o&&t!==l||n!==i||(f+=r.quantity||1)}),r.pinsDetails&&Array.isArray(r.pinsDetails)&&r.pinsDetails.forEach(e=>{const t=e.name||e.src,n=e.category||i;t!==o&&t!==l||n!==i||(f+=r.quantity||1)}))});const m=s.filter(e=>{const t=e.pin||e,n=t.name||t.src,r=t.category||i;return(n===o||n===l)&&r===i}).length;if(0===d||h+f+m*a+m>d+h){const t="Oops! We don't have any more ".concat(r.name||"this charm"," in stock right now, so you can't add more to your basket."),s="".concat(o,"-").concat(i);return g(r=>{var a,i;return c(c({},r),{},{[e||n]:{case:(null===(a=r[e||n])||void 0===a?void 0:a.case)||null,charms:c(c({},(null===(i=r[e||n])||void 0===i?void 0:i.charms)||{}),{},{[s]:t})}})}),x(u,t),void setTimeout(()=>{const t=document.querySelector('[data-item-id="'.concat(e||n,'"]'));t&&t.scrollIntoView({behavior:"smooth",block:"center"})},100)}}}a(e),g(t=>{const r=c({},t);return delete r[e||n],r}),(r.customDesign||r.pins&&Array.isArray(r.pins)&&r.pins.length>0||r.pinsDetails&&Array.isArray(r.pinsDetails)&&r.pinsDetails.length>0)&&(r.pins||r.pinsDetails||[]).forEach(e=>{if(!e)return;const t={name:e.name||e.src||"",price:e.price||2,totalPrice:e.price||2,image:e.src||"",pin:e,category:e.category||"colorful",type:"charm"};b(t)})})(e,r),decrementItemQty:e=>((e,n)=>{const r=t.find(t=>t.id===e)||t[e]||t[n];i(e),r&&"charm"===r.type?b(r):g(t=>{const r=c({},t);return delete r[e||n],r})})(e,r),removeFromCart:n,openNoteIndex:d,setOpenNoteIndex:h,noteTexts:f,setNoteTexts:m,handleNoteChange:v,handleSaveNote:w,errorMessage:"string"===typeof p[e.id||r]?p[e.id||r]:null===(s=p[e.id||r])||void 0===s?void 0:s.case,charmErrors:(null===(o=p[e.id||r])||void 0===o?void 0:o.charms)||{}},r)})}),(0,Lt.jsx)(Fg,{totalPrice:C,onCheckout:()=>{t.length>0&&u("/checkout")}})]})]})})};var Ig,Bg="basil",Hg="https://js.stripe.com",Wg="".concat(Hg,"/").concat(Bg,"/stripe.js"),Ug=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,Yg=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/,Vg="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",qg=function(e){return Ug.test(e)||Yg.test(e)},Xg=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",n=document.createElement("script");n.src="".concat(Wg).concat(t);var r=document.head||document.body;if(!r)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return r.appendChild(n),n},Gg=null,Kg=null,Qg=null,$g=function(e){return null!==Gg?Gg:(Gg=new Promise(function(t,n){if("undefined"!==typeof window&&"undefined"!==typeof document)if(window.Stripe&&e&&console.warn(Vg),window.Stripe)t(window.Stripe);else try{var r=function(){for(var e=document.querySelectorAll('script[src^="'.concat(Hg,'"]')),t=0;t<e.length;t++){var n=e[t];if(qg(n.src))return n}return null}();if(r&&e)console.warn(Vg);else if(r){if(r&&null!==Qg&&null!==Kg){var s;r.removeEventListener("load",Qg),r.removeEventListener("error",Kg),null===(s=r.parentNode)||void 0===s||s.removeChild(r),r=Xg(e)}}else r=Xg(e);Qg=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}}(t,n),Kg=function(e){return function(t){e(new Error("Failed to load Stripe.js",{cause:t}))}}(n),r.addEventListener("load",Qg),r.addEventListener("error",Kg)}catch(a){return void n(a)}else t(null)}),Gg.catch(function(e){return Gg=null,Promise.reject(e)}))},Jg=!1,Zg=function(){return Ig||(Ig=$g(null).catch(function(e){return Ig=null,Promise.reject(e)}))};Promise.resolve().then(function(){return Zg()}).catch(function(e){Jg||console.warn(e)});function ey(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ty(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ey(Object(n),!0).forEach(function(t){ry(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ey(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ny(e){return ny="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ny(e)}function ry(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sy(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n,r,s={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function ay(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,s,a=[],i=!0,o=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(l){o=!0,s=l}finally{try{i||null==n.return||n.return()}finally{if(o)throw s}}return a}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return iy(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return iy(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function iy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var oy=function(t,n,r){var s=!!r,a=e.useRef(r);e.useEffect(function(){a.current=r},[r]),e.useEffect(function(){if(!s||!t)return function(){};var e=function(){a.current&&a.current.apply(a,arguments)};return t.on(n,e),function(){t.off(n,e)}},[s,n,t,a])},ly=function(t){var n=e.useRef(t);return e.useEffect(function(){n.current=t},[t]),n.current},cy=function(e){return null!==e&&"object"===ny(e)},uy="[object Object]",dy=function e(t,n){if(!cy(t)||!cy(n))return t===n;var r=Array.isArray(t);if(r!==Array.isArray(n))return!1;var s=Object.prototype.toString.call(t)===uy;if(s!==(Object.prototype.toString.call(n)===uy))return!1;if(!s&&!r)return t===n;var a=Object.keys(t),i=Object.keys(n);if(a.length!==i.length)return!1;for(var o={},l=0;l<a.length;l+=1)o[a[l]]=!0;for(var c=0;c<i.length;c+=1)o[i[c]]=!0;var u=Object.keys(o);if(u.length!==a.length)return!1;var d=t,h=n;return u.every(function(t){return e(d[t],h[t])})},hy=function(e,t,n){return cy(e)?Object.keys(e).reduce(function(r,s){var a=!cy(t)||!dy(e[s],t[s]);return n.includes(s)?(a&&console.warn("Unsupported prop change: options.".concat(s," is not a mutable property.")),r):a?ty(ty({},r||{}),{},ry({},s,e[s])):r},null):null},fy="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",my=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fy;if(null===e||cy(t=e)&&"function"===typeof t.elements&&"function"===typeof t.createToken&&"function"===typeof t.createPaymentMethod&&"function"===typeof t.confirmCardPayment)return e;throw new Error(n)},py=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fy;if(function(e){return cy(e)&&"function"===typeof e.then}(e))return{tag:"async",stripePromise:Promise.resolve(e).then(function(e){return my(e,t)})};var n=my(e,t);return null===n?{tag:"empty"}:{tag:"sync",stripe:n}},gy=function(e){e&&e._registerWrapper&&e.registerAppInfo&&(e._registerWrapper({name:"react-stripe-js",version:"4.0.2"}),e.registerAppInfo({name:"react-stripe-js",version:"4.0.2",url:"https://stripe.com/docs/stripe-js/react"}))},yy=e.createContext(null);yy.displayName="ElementsContext";var xy=function(e,t){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(t," in an <Elements> provider."));return e},by=function(t){var n=t.stripe,r=t.options,s=t.children,a=e.useMemo(function(){return py(n)},[n]),i=ay(e.useState(function(){return{stripe:"sync"===a.tag?a.stripe:null,elements:"sync"===a.tag?a.stripe.elements(r):null}}),2),o=i[0],l=i[1];e.useEffect(function(){var e=!0,t=function(e){l(function(t){return t.stripe?t:{stripe:e,elements:e.elements(r)}})};return"async"!==a.tag||o.stripe?"sync"!==a.tag||o.stripe||t(a.stripe):a.stripePromise.then(function(n){n&&e&&t(n)}),function(){e=!1}},[a,o,r]);var c=ly(n);e.useEffect(function(){null!==c&&c!==n&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[c,n]);var u=ly(r);return e.useEffect(function(){if(o.elements){var e=hy(r,u,["clientSecret","fonts"]);e&&o.elements.update(e)}},[r,u,o.elements]),e.useEffect(function(){gy(o.stripe)},[o.stripe]),e.createElement(yy.Provider,{value:o},s)};by.propTypes={stripe:ra.any,options:ra.object};var vy=function(t){var n=e.useContext(yy);return xy(n,t)};ra.func.isRequired;var wy=e.createContext(null);wy.displayName="CheckoutContext",ra.any,ra.shape({fetchClientSecret:ra.func.isRequired,elementsOptions:ra.object}).isRequired;var Cy=function(t){var n=e.useContext(wy),r=e.useContext(yy);if(n){if(r)throw new Error("You cannot wrap the part of your app that ".concat(t," in both <CheckoutProvider> and <Elements> providers."));return n}return xy(r,t)},Sy=["mode"],jy=function(t,n){var r,s="".concat((r=t).charAt(0).toUpperCase()+r.slice(1),"Element"),a=n?function(t){Cy("mounts <".concat(s,">"));var n=t.id,r=t.className;return e.createElement("div",{id:n,className:r})}:function(n){var r,a=n.id,i=n.className,o=n.options,l=void 0===o?{}:o,c=n.onBlur,u=n.onFocus,d=n.onReady,h=n.onChange,f=n.onEscape,m=n.onClick,p=n.onLoadError,g=n.onLoaderStart,y=n.onNetworksChange,x=n.onConfirm,b=n.onCancel,v=n.onShippingAddressChange,w=n.onShippingRateChange,C=n.onSavedPaymentMethodRemove,S=n.onSavedPaymentMethodUpdate,j=Cy("mounts <".concat(s,">")),k="elements"in j?j.elements:null,N="checkoutState"in j?j.checkoutState:null,_="success"===(null===N||void 0===N?void 0:N.type)?N.checkout:null,T=ay(e.useState(null),2),E=T[0],P=T[1],O=e.useRef(null),D=e.useRef(null);oy(E,"blur",c),oy(E,"focus",u),oy(E,"escape",f),oy(E,"click",m),oy(E,"loaderror",p),oy(E,"loaderstart",g),oy(E,"networkschange",y),oy(E,"confirm",x),oy(E,"cancel",b),oy(E,"shippingaddresschange",v),oy(E,"shippingratechange",w),oy(E,"savedpaymentmethodremove",C),oy(E,"savedpaymentmethodupdate",S),oy(E,"change",h),d&&(r="expressCheckout"===t?d:function(){d(E)}),oy(E,"ready",r),e.useLayoutEffect(function(){if(null===O.current&&null!==D.current&&(k||_)){var e=null;if(_)switch(t){case"payment":e=_.createPaymentElement(l);break;case"address":if(!("mode"in l))throw new Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");var n=l.mode,r=sy(l,Sy);if("shipping"===n)e=_.createShippingAddressElement(r);else{if("billing"!==n)throw new Error("Invalid options.mode. mode must be 'billing' or 'shipping'.");e=_.createBillingAddressElement(r)}break;case"expressCheckout":e=_.createExpressCheckoutElement(l);break;case"currencySelector":e=_.createCurrencySelectorElement();break;case"taxId":e=_.createTaxIdElement(l);break;default:throw new Error("Invalid Element type ".concat(s,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else k&&(e=k.create(t,l));O.current=e,P(e),e&&e.mount(D.current)}},[k,_,l]);var A=ly(l);return e.useEffect(function(){if(O.current){var e=hy(l,A,["paymentRequest"]);e&&"update"in O.current&&O.current.update(e)}},[l,A]),e.useLayoutEffect(function(){return function(){if(O.current&&"function"===typeof O.current.destroy)try{O.current.destroy(),O.current=null}catch(e){}}},[]),e.createElement("div",{id:a,className:i,ref:D})};return a.propTypes={id:ra.string,className:ra.string,onChange:ra.func,onBlur:ra.func,onFocus:ra.func,onReady:ra.func,onEscape:ra.func,onClick:ra.func,onLoadError:ra.func,onLoaderStart:ra.func,onNetworksChange:ra.func,onConfirm:ra.func,onCancel:ra.func,onShippingAddressChange:ra.func,onShippingRateChange:ra.func,onSavedPaymentMethodRemove:ra.func,onSavedPaymentMethodUpdate:ra.func,options:ra.object},a.displayName=s,a.__elementType=t,a},ky="undefined"===typeof window,Ny=e.createContext(null);Ny.displayName="EmbeddedCheckoutProviderContext";jy("auBankAccount",ky),jy("card",ky),jy("cardNumber",ky),jy("cardExpiry",ky),jy("cardCvc",ky),jy("fpxBank",ky),jy("iban",ky),jy("idealBank",ky),jy("p24Bank",ky),jy("epsBank",ky);var _y=jy("payment",ky);jy("expressCheckout",ky),jy("paymentRequestButton",ky),jy("linkAuthentication",ky),jy("address",ky),jy("shippingAddress",ky),jy("paymentMethodMessaging",ky),jy("affirmMessage",ky),jy("afterpayClearpayMessage",ky),jy("taxId",ky);const Ty=e=>{let{className:t="",showOnDesktop:n=!1,showOnMobile:r=!1,title:s="Custom Duties & Import Fees",message:a="International orders may be subject to customs duties, taxes, and fees imposed by your country. These charges are the responsibility of the recipient and are not included in the order total.",variant:i="yellow"}=e;const o=n&&r?"":n?"hidden lg:block":r?"lg:hidden":"",l="yellow"===i?"bg-yellow-50":"bg-gray-100",c="yellow"===i?"border-yellow-200":"border-gray-200",u="yellow"===i?"text-yellow-600":"text-gray-600",d="yellow"===i?"text-yellow-800":"text-gray-800",h="yellow"===i?"text-yellow-700":"text-gray-500";return(0,Lt.jsx)("div",{className:"".concat(o," ").concat(t),children:(0,Lt.jsx)("div",{className:"".concat(l," border ").concat(c," rounded-lg p-4"),children:(0,Lt.jsxs)("div",{className:"flex items-start gap-3",children:[(0,Lt.jsx)("div",{className:"".concat(u," text-xl flex-shrink-0"),children:"\u26a0\ufe0f"}),(0,Lt.jsxs)("div",{className:"flex-1 font-inter",children:[(0,Lt.jsx)("h3",{className:"text-sm font-semibold ".concat(d," mb-1"),children:s}),(0,Lt.jsx)("p",{className:"text-xs ".concat(h," font-light leading-relaxed font-inter"),children:a})]})]})})})},Ey=e=>{let{cartIconSrc:t}=e;return(0,Lt.jsx)("div",{className:"border-b border-gray-200 bg-white",children:(0,Lt.jsxs)("div",{className:"max-w-6xl mx-auto flex items-center justify-between px-4 lg:px-6 py-5",children:[(0,Lt.jsxs)(Nt,{to:"/",className:"hover:opacity-90 transition-opacity duration-300","aria-label":"HappyCase home",children:[(0,Lt.jsxs)("div",{className:"flex flex-col cursor-pointer transition-all duration-300 text-gray-900 font-fredoka",children:[(0,Lt.jsx)("span",{className:"text-[10px] md:text-xs font-bold leading-tight tracking-[0.35em] text-blue-900 uppercase",children:"THE"}),(0,Lt.jsx)("span",{className:"text-xl md:text-3xl font-bold leading-none flex items-center gap-0 text-blue-900 uppercase",children:"HAPPY".split("").map((e,t)=>(0,Lt.jsx)("span",{className:"inline-block animate-smile-curve",style:{animationDelay:"".concat(.1*t,"s"),animationDuration:"2s"},children:e},t))}),(0,Lt.jsx)("span",{className:"text-end text-[10px] md:text-xs font-bold leading-tight tracking-[0.35em] text-blue-900 uppercase",children:"CASE"})]}),(0,Lt.jsx)("style",{children:"\n            @keyframes smileCurve {\n              0%, 100% {\n                transform: translateY(0);\n              }\n              50% {\n                transform: translateY(var(--curve-height));\n              }\n            }\n            .animate-smile-curve {\n              animation: smileCurve 2s ease-in-out infinite;\n              display: inline-block;\n            }\n            .animate-smile-curve:nth-child(1) {\n              --curve-height: 0px;\n            }\n            .animate-smile-curve:nth-child(2) {\n              --curve-height: 4px;\n            }\n            .animate-smile-curve:nth-child(3) {\n              --curve-height: 8px;\n            }\n            .animate-smile-curve:nth-child(4) {\n              --curve-height: 4px;\n            }\n            .animate-smile-curve:nth-child(5) {\n              --curve-height: 0px;\n            }\n          "})]}),(0,Lt.jsx)(Nt,{to:"/cart",className:"relative flex items-center justify-center p-2 rounded-full 0 hover:border-gray-400 transition","aria-label":"View cart",children:(0,Lt.jsx)("img",{src:t,alt:"Cart",className:"h-6 w-6",loading:"lazy"})})]})})},Py=()=>(0,Lt.jsx)("div",{className:"min-h-screen bg-white py-8",children:(0,Lt.jsx)("div",{className:"max-w-2xl mx-auto p-6 bg-white border border-gray-200",children:(0,Lt.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,Lt.jsxs)("div",{className:"text-center",children:[(0,Lt.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-300 mx-auto mb-4"}),(0,Lt.jsx)("p",{className:"text-gray-500 font-light font-inter",children:"Loading checkout..."})]})})})}),Oy=t=>{let{show:n,onClose:r,onVerified:s,initialEmail:a=""}=t;const i=Se(),[o]=Ot(),[l,c]=(0,e.useState)(a),[u,d]=(0,e.useState)(""),[h,f]=(0,e.useState)(a?"code":"email"),[m,p]=(0,e.useState)(!1),[g,y]=(0,e.useState)("");(0,e.useEffect)(()=>{if(n)if(a){c(a),d(""),y("");/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a)?(p(!0),setTimeout(()=>{p(!1);const e=new URLSearchParams;e.set("email",a);const t=o.get("client_id"),n=o.get("redirect_uri"),s=o.get("locale")||"en-GL";t&&e.set("client_id",t),n&&e.set("redirect_uri",n),s&&e.set("locale",s),r(),i("/authentication/code?".concat(e.toString()))},1e3)):f("email")}else c(""),f("email"),d(""),y("");else c(""),d(""),f("email"),y(""),p(!1)},[n,a,i,o,r]);const x=async e=>{if(e.preventDefault(),!l)return void y("Please enter your email address");if(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l)){p(!0),y("");try{await new Promise(e=>setTimeout(e,500));const e=new URLSearchParams;e.set("email",l);const t=o.get("client_id"),n=o.get("redirect_uri"),s=o.get("locale")||"en-GL";t&&e.set("client_id",t),n&&e.set("redirect_uri",n),s&&e.set("locale",s),r(),i("/authentication/code?".concat(e.toString()),{replace:!0})}catch(t){p(!1),y("Failed to send verification code. Please try again.")}}else y("Please enter a valid email address")};return n?(0,Lt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-[60] flex items-center justify-center p-4",onClick:r,children:(0,Lt.jsxs)("div",{className:"bg-white rounded-sm max-w-md w-full p-6 border border-gray-200 shadow-lg",onClick:e=>e.stopPropagation(),children:[(0,Lt.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,Lt.jsx)("h3",{className:"text-lg font-bold text-gray-900 font-inter",children:"Sign In"}),(0,Lt.jsx)("button",{onClick:r,className:"p-2 hover:bg-gray-50 transition-colors rounded","aria-label":"Close modal",children:(0,Lt.jsx)("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Lt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M6 18L18 6M6 6l12 12"})})})]}),"email"===h&&(0,Lt.jsxs)("form",{onSubmit:x,className:"space-y-4",children:[(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-base text-gray-500 mb-1.5 font-light font-inter",children:"Email Address *"}),(0,Lt.jsx)("input",{type:"email",value:l,onChange:e=>{c(e.target.value),y("")},placeholder:"your.email@example.com",className:"w-full px-3 py-2 border border-gray-200 rounded-sm focus:outline-none focus:ring-2 focus:ring-yellow-100 focus:border-yellow-100 bg-white text-gray-900 placeholder-gray-400 font-light font-inter text-base",required:!0})]}),g&&(0,Lt.jsx)("div",{className:"text-sm text-red-600 font-inter",children:g}),(0,Lt.jsxs)("div",{className:"flex gap-3",children:[(0,Lt.jsx)("button",{type:"button",onClick:r,className:"flex-1 px-4 py-2 text-sm uppercase tracking-wider font-light font-inter border border-gray-300 text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,Lt.jsx)("button",{type:"submit",disabled:m,className:"flex-1 px-4 py-2 text-sm uppercase tracking-wider font-light font-inter bg-black text-white hover:bg-gray-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:m?"Sending...":"Send Code"})]})]}),"code"===h&&(0,Lt.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),u&&6===u.length?(p(!0),y(""),setTimeout(()=>{p(!1),6===u.length?(s(l),r()):y("Invalid code. Please try again.")},1e3)):y("Please enter the 6-digit code")},className:"space-y-4",children:[(0,Lt.jsxs)("div",{children:[(0,Lt.jsxs)("p",{className:"text-sm text-gray-600 font-light font-inter mb-4",children:["We've sent a 6-digit verification code to ",(0,Lt.jsx)("strong",{children:l}),". Please enter it below."]}),(0,Lt.jsx)("label",{className:"block text-base text-gray-500 mb-1.5 font-light font-inter",children:"Verification Code *"}),(0,Lt.jsx)("input",{type:"text",value:u,onChange:e=>{const t=e.target.value.replace(/\D/g,"").slice(0,6);d(t),y("")},placeholder:"000000",maxLength:6,autoFocus:!0,className:"w-full px-3 py-2 border border-gray-200 rounded-sm focus:outline-none focus:ring-2 focus:ring-yellow-100 focus:border-yellow-100 bg-white text-gray-900 placeholder-gray-400 font-light font-inter text-base text-center text-2xl tracking-widest",required:!0})]}),g&&(0,Lt.jsx)("div",{className:"text-sm text-red-600 font-inter",children:g}),(0,Lt.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,Lt.jsx)("button",{type:"submit",disabled:m||6!==u.length,className:"w-full px-4 py-2 text-sm uppercase tracking-wider font-light font-inter bg-black text-white hover:bg-gray-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:m?"Verifying...":"Verify Code"}),(0,Lt.jsx)("button",{type:"button",onClick:()=>{d(""),y(""),x({preventDefault:()=>{}})},disabled:m,className:"text-sm text-gray-600 hover:text-gray-900 font-light font-inter underline disabled:opacity-50",children:"Resend Code"}),(0,Lt.jsx)("button",{type:"button",onClick:()=>{f("email"),d(""),y("")},className:"text-sm text-gray-600 hover:text-gray-900 font-light font-inter",children:"\u2190 Back to email"})]})]})]})}):null},Dy=t=>{let{customerInfo:n,onInputChange:r,isAuthenticated:s,authenticatedEmail:a,onSignIn:i,onSignOut:o}=t;const[l,c]=(0,e.useState)(!1);return(0,Lt.jsxs)("div",{className:"space-y-4 ",children:[(0,Lt.jsx)("h3",{className:"text-md uppercase tracking-wider text-gray-900 mb-4 font-bold font-inter",children:"Contact"}),s?(0,Lt.jsxs)("div",{children:[(0,Lt.jsxs)("div",{className:"flex items-center justify-between mb-1.5",children:[(0,Lt.jsx)("label",{className:"block text-sm text-gray-500 font-light font-inter",children:"Email Address *"}),(0,Lt.jsx)("button",{type:"button",onClick:o,className:"text-xs text-gray-600 hover:text-gray-900 font-light font-inter underline",children:"Sign Out"})]}),(0,Lt.jsx)("div",{className:"w-full px-3 py-2 border border-gray-200 rounded-sm bg-gray-50 text-gray-900 font-light font-inter text-sm",children:a}),(0,Lt.jsxs)("p",{className:"mt-1 text-xs text-gray-500 font-light font-inter",children:["Signed in as ",a]})]}):(0,Lt.jsxs)("div",{children:[(0,Lt.jsxs)("div",{className:"flex items-center justify-between mb-1.5",children:[(0,Lt.jsx)("label",{className:"block text-sm text-gray-500 font-light font-inter",children:"Email Address *"}),(0,Lt.jsx)("button",{type:"button",onClick:()=>c(!0),className:"text-xs text-gray-600 hover:text-gray-900 font-light font-inter underline",children:"Sign In"})]}),(0,Lt.jsx)("input",{type:"email",name:"email",value:n.email,onChange:r,required:!0,placeholder:"your.email@example.com",className:"w-full px-3 py-2 border border-gray-200 rounded-sm focus:outline-none focus:ring-2 focus:ring-yellow-100 focus:border-yellow-100 bg-white text-gray-900 placeholder-gray-400 font-light font-inter text-sm"}),(0,Lt.jsx)("p",{className:"mt-1 text-xs text-gray-500 font-light font-inter",children:"We'll send your order confirmation to this email"})]}),(0,Lt.jsx)("h3",{className:"text-md uppercase tracking-wider text-gray-900 mb-4 font-bold font-inter",children:"Delivery"}),(0,Lt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm text-gray-500 mb-1.5 font-light font-inter",children:"Name *"}),(0,Lt.jsx)("input",{type:"text",name:"name",value:n.name,onChange:r,required:!0,className:"w-full px-3 py-2 border border-gray-200 rounded-sm focus:outline-none focus:ring-2 focus:ring-yellow-100 focus:border-yellow-100 bg-white text-gray-900 placeholder-gray-400 font-light font-inter text-sm"})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm text-gray-500 mb-1.5 font-light font-inter",children:"Surname *"}),(0,Lt.jsx)("input",{type:"text",name:"surname",value:n.surname,onChange:r,required:!0,className:"w-full px-3 py-2 border border-gray-200 rounded-sm focus:outline-none focus:ring-2 focus:ring-yellow-100 focus:border-yellow-100 bg-white text-gray-900 placeholder-gray-400 font-light font-inter text-sm"})]})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm text-gray-500 mb-1.5 font-light font-inter",children:"Address Line 1 *"}),(0,Lt.jsx)("input",{type:"text",name:"address.line1",value:n.address.line1,onChange:r,required:!0,className:"w-full px-3 py-2 border border-gray-200 rounded-sm focus:outline-none focus:ring-2 focus:ring-yellow-100 focus:border-yellow-100 bg-white text-gray-900 placeholder-gray-400 font-light font-inter text-sm"})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm text-gray-500 mb-1.5 font-light font-inter",children:"Address Line 2"}),(0,Lt.jsx)("input",{type:"text",name:"address.line2",value:n.address.line2,onChange:r,className:"w-full px-3 py-2 border border-gray-200 rounded-sm focus:outline-none focus:ring-2 focus:ring-yellow-100 focus:border-yellow-100 bg-white text-gray-900 placeholder-gray-400 font-light font-inter text-base"})]}),(0,Lt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm text-gray-500 mb-1.5 font-light font-inter",children:"City *"}),(0,Lt.jsx)("input",{type:"text",name:"address.city",value:n.address.city,onChange:r,required:!0,className:"w-full px-3 py-2 border border-gray-200 rounded-sm focus:outline-none focus:ring-2 focus:ring-yellow-100 focus:border-yellow-100 bg-white text-gray-900 placeholder-gray-400 font-light font-inter text-sm"})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm text-gray-500 mb-1.5 font-light font-inter",children:"Postal Code *"}),(0,Lt.jsx)("input",{type:"text",name:"address.postal_code",value:n.address.postal_code,onChange:r,required:!0,className:"w-full px-3 py-2 border border-gray-200 rounded-sm focus:outline-none focus:ring-2 focus:ring-yellow-100 focus:border-yellow-100 bg-white text-gray-900 placeholder-gray-400 font-light font-inter text-sm"})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm text-gray-500 mb-1.5 font-light font-inter",children:"Country *"}),(0,Lt.jsxs)("select",{name:"address.country",value:n.address.country,onChange:r,className:"w-full px-3 py-2 border border-gray-200 rounded-sm focus:outline-none focus:ring-2 focus:ring-yellow-100 focus:border-yellow-100 bg-white text-gray-900 font-light font-inter text-sm",children:[(0,Lt.jsx)("option",{value:"GB",children:"United Kingdom"}),(0,Lt.jsx)("option",{value:"US",children:"United States"}),(0,Lt.jsx)("option",{value:"CA",children:"Canada"}),(0,Lt.jsx)("option",{value:"AU",children:"Australia"}),(0,Lt.jsx)("option",{value:"DE",children:"Germany"}),(0,Lt.jsx)("option",{value:"FR",children:"France"}),(0,Lt.jsx)("option",{value:"ES",children:"Spain"}),(0,Lt.jsx)("option",{value:"IT",children:"Italy"})]})]})]}),(0,Lt.jsx)(Oy,{show:l,onClose:()=>c(!1),initialEmail:n.email,onVerified:e=>{i(e),c(!1),r({target:{name:"email",value:e}})}})]})},Ay=e=>{let{paymentElementReady:t,error:n,onPaymentReady:r}=e;return(0,Lt.jsxs)("div",{className:"space-y-4",children:[(0,Lt.jsx)("h3",{className:"text-md uppercase tracking-wider text-gray-900 mb-4 font-bold font-inter",children:"Payment"}),(0,Lt.jsxs)("div",{className:"p-4 border border-gray-200 rounded-sm bg-gray-50",children:[(0,Lt.jsx)("p",{className:"text-sm text-gray-600 font-light font-inter mb-3",children:"Fast checkout with Apple Pay, Google Pay, or Link:"}),(0,Lt.jsx)("div",{className:"min-h-[50px] flex items-center justify-center",children:(0,Lt.jsx)("div",{className:"text-sm text-gray-500 font-light font-inter italic",children:"Fast checkout options will appear above when available on your device"})}),(0,Lt.jsxs)("div",{className:"relative flex items-center my-3",children:[(0,Lt.jsx)("div",{className:"flex-grow border-t border-gray-300"}),(0,Lt.jsx)("span",{className:"px-3 text-sm text-gray-500 font-light font-inter",children:"or"}),(0,Lt.jsx)("div",{className:"flex-grow border-t border-gray-300"})]})]}),(0,Lt.jsxs)("div",{className:"p-4 border border-gray-200 rounded-sm",children:[!t&&(0,Lt.jsx)("div",{className:"mb-2 text-sm text-gray-500 font-light font-inter",children:"Loading payment form..."}),(0,Lt.jsx)(_y,{options:{layout:"tabs",fields:{billingDetails:{email:"never",phone:"never",address:"never"}},wallets:{applePay:"auto",googlePay:"auto"},business:{name:"The Happy Case"}},onReady:r})]}),(0,Lt.jsx)("div",{className:"text-xs text-gray-500 font-light font-inter px-1",children:"\ud83d\udcb3 Apple Pay is available on Safari (iOS/macOS). Google Pay works on Chrome/Android. Link works on all browsers."}),n&&(0,Lt.jsx)("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded-sm font-light font-inter",children:n})]})},My=t=>{let{item:n,index:r,formatPrice:s,onIncrement:a,onDecrement:i,onRemove:o,errorMessage:l}=t;const[u,d]=(0,e.useState)(!1),h=(0,e.useRef)(null);if((0,e.useEffect)(()=>{const e=e=>{const t=e.target,n="BUTTON"===t.tagName||null!==t.closest("button")||null!==t.closest('[role="button"]')||null!==t.closest('[aria-label*="quantity"]'),r="INPUT"===t.tagName||"TEXTAREA"===t.tagName;n||r||u&&h.current&&!h.current.contains(e.target)&&d(!1)};if(u){const t=setTimeout(()=>{document.addEventListener("mousedown",e)},200);return()=>{clearTimeout(t),document.removeEventListener("mousedown",e)}}},[u]),"charm"===n.type){const e=n.pin||n,t=n.price||0,c=n.quantity||1,f=t*c;return(0,Lt.jsx)("div",{className:" pb-4 ",ref:h,children:(0,Lt.jsxs)("div",{className:"flex items-start gap-4",children:[(0,Lt.jsxs)("div",{className:"relative flex-shrink-0 w-20 h-20 bg-gray-50 rounded-sm border border-gray-200 flex items-center justify-center overflow-visible",children:[n.image?(0,Lt.jsx)("img",{src:Li(n.image),alt:n.name||"Charm",className:"w-full h-full object-contain p-2",loading:"lazy"}):null!==e&&void 0!==e&&e.src?(0,Lt.jsx)("img",{src:Li(e.src),alt:e.name||"Charm",className:"w-full h-full object-contain p-2",loading:"lazy"}):(0,Lt.jsx)("div",{className:"w-full h-full rounded-sm bg-gray-100"}),(0,Lt.jsx)("span",{className:"absolute -top-1.5 -right-1.5 bg-gray-900 text-white text-[10px] font-medium rounded-full h-5 w-5 flex items-center justify-center font-inter",children:c})]}),(0,Lt.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Lt.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,Lt.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Lt.jsx)("h4",{className:"text-sm font-medium text-gray-900 font-inter leading-tight",children:n.name||(null===e||void 0===e?void 0:e.name)||"Charm"}),(0,Lt.jsx)("p",{className:"text-xs text-gray-500 mt-0.5 font-inter",children:"bronze"===n.category?"Bronze Charm":"flags"===n.category?"Flag":"Colorful Charm"})]}),(0,Lt.jsx)("div",{className:"flex-shrink-0 text-right",children:(0,Lt.jsx)("span",{className:"text-sm font-medium text-gray-900 font-inter",children:s(f)})})]}),!u&&(0,Lt.jsx)("div",{className:"mt-3",children:(0,Lt.jsx)("button",{onClick:e=>{e.stopPropagation(),d(!0)},className:"text-xs text-gray-600 hover:text-gray-900 font-light font-inter uppercase tracking-wider transition-colors",children:"Edit"})}),u&&a&&i&&(0,Lt.jsxs)("div",{className:"mt-3 flex items-center gap-3",children:[(0,Lt.jsxs)("div",{className:"flex items-center gap-1 border border-gray-200 rounded-sm p-1",children:[(0,Lt.jsx)("button",{onClick:e=>{e.preventDefault(),e.stopPropagation();const t=void 0!==n.id?n.id:r;console.log("\u2796 Charm item decrement clicked:",{identifier:t,itemId:n.id,index:r,currentQty:n.quantity,itemName:n.name,itemType:n.type,hasOnDecrement:!!i}),i&&i(t)},className:"w-6 h-6 flex items-center justify-center text-gray-600 hover:text-gray-900 transition-colors","aria-label":"Decrease quantity",type:"button",children:"\u2212"}),(0,Lt.jsx)("div",{className:"px-2 py-0.5 text-xs text-gray-900 font-light font-inter min-w-[1.5rem] text-center",children:c}),(0,Lt.jsx)("button",{onClick:e=>{e.preventDefault(),e.stopPropagation();const t=void 0!==n.id?n.id:r;console.log("\u2795 Charm item increment clicked:",{identifier:t,itemId:n.id,index:r,currentQty:n.quantity,itemName:n.name,itemType:n.type,hasOnIncrement:!!a}),a&&a(t)},className:"w-6 h-6 flex items-center justify-center text-gray-600 hover:text-gray-900 transition-colors","aria-label":"Increase quantity",type:"button",children:"+"})]}),o&&(0,Lt.jsx)("button",{onClick:()=>{o(r),d(!1)},className:"text-xs text-red-600 hover:text-red-700 font-light font-inter uppercase tracking-wider transition-colors",children:"Remove"})]}),l&&(0,Lt.jsx)("p",{className:"text-xs text-red-600 font-inter mt-2",children:l})]})]})},r)}const f="number"===typeof n.basePrice?n.basePrice:"number"===typeof n.casePrice?n.casePrice:"number"===typeof n.price?n.price:8,m=n.pinsDetails&&n.pinsDetails.length?n.pinsDetails.reduce((e,t)=>e+(t.price||0),0):0,p=f+m,g=n.quantity||1,y=p*g;return(0,Lt.jsx)("div",{className:" pb-4 last:border-b-0",ref:h,children:(0,Lt.jsxs)("div",{className:"flex items-start gap-4",children:[(0,Lt.jsxs)("div",{className:"relative flex-shrink-0 w-20 h-20 bg-gray-50 rounded-sm border border-gray-200 flex items-center justify-center overflow-visible",children:[n.designImage?(0,Lt.jsx)("img",{src:n.designImage,alt:"Custom Case Design",className:"w-full h-full object-contain p-2 rounded-sm",loading:"lazy"}):n.caseImage?(0,Lt.jsx)("img",{src:Li(n.caseImage),alt:"Custom Case",className:"w-full h-full object-contain p-2 rounded-sm",loading:"lazy"}):(0,Lt.jsx)("div",{className:"w-full h-full rounded-sm",style:{background:n.color}}),(0,Lt.jsx)("span",{className:"absolute -top-1.5 -right-1.5 bg-gray-900 text-white text-[10px] font-medium rounded-full h-5 w-5 flex items-center justify-center font-inter",children:g})]}),(0,Lt.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Lt.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,Lt.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Lt.jsx)("h4",{className:"text-sm font-medium text-gray-900 font-inter leading-tight",children:n.caseName||n.name||"Passport Case"}),(0,Lt.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,Lt.jsx)("span",{className:"text-xs text-gray-500 font-inter",children:"Color:"}),(0,Lt.jsx)("span",{className:"inline-flex h-4 w-4 rounded-full border border-gray-300 shadow-sm",style:{backgroundColor:n.color},"aria-label":"Selected color ".concat(n.color)})]})]}),(0,Lt.jsx)("div",{className:"flex-shrink-0 text-right",children:(0,Lt.jsx)("span",{className:"text-sm font-medium text-gray-900 font-inter",children:s(y)})})]}),!u&&(0,Lt.jsx)("div",{className:"mt-3",children:(0,Lt.jsx)("button",{onClick:e=>{e.stopPropagation(),d(!0)},className:"text-xs text-gray-600 hover:text-gray-900 font-light font-inter uppercase tracking-wider transition-colors",children:"Edit"})}),u&&a&&i&&(0,Lt.jsxs)("div",{className:"mt-3 flex items-center gap-3",children:[(0,Lt.jsxs)("div",{className:"flex items-center gap-1 border border-gray-200 rounded-sm p-1",children:[(0,Lt.jsx)("button",{onClick:e=>{e.preventDefault(),e.stopPropagation();const t=void 0!==n.id?n.id:r;console.log("\u2796 Case item decrement clicked:",{identifier:t,itemId:n.id,index:r,currentQty:n.quantity,itemName:n.caseName||n.name,hasOnDecrement:!!i}),i?i(t):console.error("\u274c onDecrement handler is missing!")},className:"w-6 h-6 flex items-center justify-center text-gray-600 hover:text-gray-900 transition-colors","aria-label":"Decrease quantity",type:"button",children:"\u2212"}),(0,Lt.jsx)("div",{className:"px-2 py-0.5 text-xs text-gray-900 font-light font-inter min-w-[1.5rem] text-center",children:g}),(0,Lt.jsx)("button",{onClick:e=>{e.preventDefault(),e.stopPropagation();const t=void 0!==n.id?n.id:r;console.log("\u2795 Case item increment clicked:",{identifier:t,itemId:n.id,index:r,currentQty:n.quantity,itemName:n.caseName||n.name,hasOnIncrement:!!a}),a?a(t):console.error("\u274c onIncrement handler is missing!")},className:"w-6 h-6 flex items-center justify-center text-gray-600 hover:text-gray-900 transition-colors","aria-label":"Increase quantity",type:"button",children:"+"})]}),o&&(0,Lt.jsx)("button",{onClick:()=>{o(r),d(!1)},className:"text-xs text-red-600 hover:text-red-700 font-light font-inter uppercase tracking-wider transition-colors",children:"Remove"})]}),n.pinsDetails&&n.pinsDetails.length>0&&(0,Lt.jsx)("div",{className:"mt-3 pt-3 ",children:(0,Lt.jsx)("div",{className:"flex flex-col gap-2",children:Object.values(n.pinsDetails.reduce((e,t)=>(e[t.src]=e[t.src]||c(c({},t),{},{quantity:0}),e[t.src].quantity++,e),{})).map((e,t)=>{const n=(e.price||0)*e.quantity;return(0,Lt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Lt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Lt.jsxs)("div",{className:"relative w-10 h-10 bg-gray-50 rounded-sm border border-gray-200 flex items-center justify-center overflow-visible",children:[(0,Lt.jsx)("img",{src:e.src,alt:e.name,className:"w-full h-full object-contain p-1",loading:"lazy"}),(0,Lt.jsx)("span",{className:"absolute -top-1 -right-1 bg-gray-900 text-white text-[10px] font-medium rounded-full h-4 w-4 flex items-center justify-center font-inter",children:e.quantity})]}),(0,Lt.jsx)("span",{className:"text-xs font-light text-gray-700 font-inter",children:e.name})]}),(0,Lt.jsx)("span",{className:"text-xs font-medium text-gray-900 font-inter",children:s(n)})]},t)})})})]})]})},r)},Ly=e=>{let{cart:t,formatPrice:n,subtotal:r,vatAmount:s,shippingCost:a,shippingLabel:i,totalWithShipping:o,showInternationalNote:l,onShowShippingInfo:c,onIncrement:u,onDecrement:d,onRemove:h,itemErrors:f}=e;return(0,Lt.jsxs)("div",{className:"flex flex-col h-full min-h-0 mt-4",children:[(0,Lt.jsx)("div",{className:"flex-1 overflow-y-auto pr-2 -mr-2 min-h-0 order-summary-scroll",style:{scrollbarWidth:"thin",scrollbarColor:"#d1d5db #f3f4f6"},children:(0,Lt.jsx)("div",{className:"pr-2 pb-2",children:0===t.length?(0,Lt.jsx)("p",{className:"text-sm text-gray-500 font-inter py-8 text-center",children:"Your cart is empty"}):(0,Lt.jsx)("div",{className:"space-y-0 mt-2",children:t.map((e,t)=>(0,Lt.jsx)(My,{item:e,index:t,formatPrice:n,onIncrement:u,onDecrement:d,onRemove:h,errorMessage:null===f||void 0===f?void 0:f[e.id||t]},e.id||"item-".concat(t)))})})}),(0,Lt.jsxs)("div",{className:"flex-shrink-0 pt-6  mt-4 ",children:[(0,Lt.jsxs)("div",{className:"space-y-3",children:[(0,Lt.jsxs)("div",{className:"flex justify-between text-sm font-light text-gray-700 font-inter",children:[(0,Lt.jsx)("span",{children:"Subtotal"}),(0,Lt.jsx)("span",{className:"font-medium text-gray-900 font-inter",children:n(r)})]}),s>0&&(0,Lt.jsxs)("div",{className:"flex justify-between text-sm font-light text-gray-700 font-inter",children:[(0,Lt.jsx)("span",{children:"VAT"}),(0,Lt.jsx)("span",{className:"font-medium text-gray-900 font-inter",children:n(s)})]}),(0,Lt.jsxs)("div",{className:"flex justify-between text-sm font-light text-gray-700 font-inter",children:[(0,Lt.jsxs)("span",{className:"flex items-center gap-1.5",children:["Shipping (",i,")",(0,Lt.jsx)("button",{type:"button",onClick:c,className:"text-gray-400 hover:text-gray-600 transition-colors w-4 h-4 rounded-full border border-gray-300 flex items-center justify-center text-[10px] leading-none",title:"Quick delivery information",children:"?"})]}),(0,Lt.jsx)("span",{className:"font-medium text-gray-900 font-inter",children:0===a?"Free":n(a)})]})]}),(0,Lt.jsxs)("div",{className:"flex justify-between py-4 border-t border-gray-200 mt-4 pt-4",children:[(0,Lt.jsx)("span",{className:"text-base font-medium text-gray-900 font-inter uppercase tracking-wider",children:"Total"}),(0,Lt.jsx)("span",{className:"text-xl font-semibold text-gray-900 font-inter",children:n(o)})]}),(0,Lt.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-100",children:(0,Lt.jsxs)("p",{className:"text-xs text-gray-500 font-light font-inter leading-relaxed",children:["Shipping and taxes are calculated at checkout if applicable."," ",(0,Lt.jsx)(Nt,{to:"/shipping",className:"text-gray-600 hover:text-gray-900 underline transition-colors",title:"Learn more about shipping information",children:"Learn more"})]})}),l&&(0,Lt.jsx)("div",{className:"mt-4",children:(0,Lt.jsx)(Ty,{showOnDesktop:!0,showOnMobile:!1,title:"Custom Duties & Taxes Included",message:"The total amount you pay includes all applicable customs duties & taxes. We guarantee no additional charges on delivery.",variant:"gray"})})]})]})},zy=e=>{let{isOpen:t,onToggle:n,cartLength:r,totalWithShipping:s,formatPrice:a,cart:i,subtotal:o,vatAmount:l,shippingCost:c,shippingLabel:u,showInternationalNote:d,onShowShippingInfo:h,onIncrement:f,onDecrement:m,onRemove:p,itemErrors:g}=e;return(0,Lt.jsxs)(Lt.Fragment,{children:[(0,Lt.jsx)("div",{className:"lg:hidden ",children:(0,Lt.jsxs)("button",{type:"button",onClick:n,className:"w-full flex items-center justify-between px-4 py-3 text-xs uppercase tracking-wider text-gray-600 hover:text-gray-900 border border-gray-200 hover:border-gray-400 transition-all duration-200 font-light font-inter","aria-expanded":t,"aria-controls":"mobile-order-summary",children:[(0,Lt.jsxs)("span",{children:["Order Summary (",r," item",1===r?"":"s",")"]}),(0,Lt.jsxs)("span",{className:"flex items-center gap-2",children:[(0,Lt.jsx)("span",{children:a(s)}),(0,Lt.jsx)("svg",{className:"w-4 h-4 transition-transform ".concat(t?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:(0,Lt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M19 9l-7 7-7-7"})})]})]})}),t&&(0,Lt.jsx)("div",{id:"mobile-order-summary",className:"lg:hidden  pb-4",children:(0,Lt.jsx)("div",{className:"mt-2 bg-yellow-50 p-4",children:(0,Lt.jsx)(Ly,{cart:i,formatPrice:a,subtotal:o,vatAmount:l,shippingCost:c,shippingLabel:u,totalWithShipping:s,showInternationalNote:d,onShowShippingInfo:h,onIncrement:f,onDecrement:m,onRemove:p,itemErrors:g})})})]})},Fy=e=>{let{isOpen:t,onClose:n}=e;return t?(0,Lt.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 px-4",children:(0,Lt.jsxs)("div",{className:"bg-white border border-gray-200 max-w-md w-full p-6 space-y-4",children:[(0,Lt.jsxs)("div",{className:"flex items-start justify-between",children:[(0,Lt.jsx)("h3",{className:"text-sm uppercase tracking-wider text-gray-900 font-light font-inter",children:"Delivery Information"}),(0,Lt.jsx)("button",{type:"button",onClick:n,className:"text-gray-400 hover:text-gray-900 transition-colors font-inter","aria-label":"Close delivery information",children:(0,Lt.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Lt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Lt.jsx)("p",{className:"text-xs text-gray-500 font-light font-inter",children:"We dispatch orders within 2 - 3 business days. Shipping costs depend on your delivery country."}),(0,Lt.jsx)("p",{className:"text-xs text-gray-500 font-light font-inter",children:"Including Ireland, Europe, Asia, North America, South America, Canada, Australia and New Zealand. Shipping charges are calculated at the checkout depending on location and parcel size."}),(0,Lt.jsxs)("ul",{className:"text-xs text-gray-600 space-y-2 font-light font-inter font-medium",children:[(0,Lt.jsxs)("li",{children:[(0,Lt.jsx)("span",{children:"UK:"})," 3-4 business days"]}),(0,Lt.jsxs)("li",{children:[(0,Lt.jsx)("span",{className:"font-medium font-medium",children:"Europe:"})," 5-10 business days"]}),(0,Lt.jsxs)("li",{children:[(0,Lt.jsx)("span",{children:"USA & Canada:"})," 7-14 business days"]}),(0,Lt.jsxs)("li",{children:[(0,Lt.jsx)("span",{className:"font-medium",children:"Rest of World:"})," 10-21 business days"]})]}),(0,Lt.jsx)("div",{className:"pt-2 border-t border-gray-100",children:(0,Lt.jsx)("p",{className:"text-xs text-gray-500 font-light font-inter leading-relaxed",children:"Orders delivered outside of the UK may be subject to import duties and taxes. These are levied when the delivery reaches its specific destination, and you will be responsible for the payment of any such duties and taxes. For more information, please contact your local customs office."})}),(0,Lt.jsx)("div",{className:"flex justify-end",children:(0,Lt.jsx)(Nt,{to:"/shipping",className:"text-xs text-gray-500 hover:text-gray-900 underline transition-colors font-light font-inter",onClick:n,children:"View full shipping policy"})})]})}):null},Ry=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Jg=!0;var r=Date.now();return Zg().then(function(e){return function(e,t,n){if(null===e)return null;var r=t[0].match(/^pk_test/),s=function(e){return 3===e?"v3":e}(e.version),a=Bg;r&&s!==a&&console.warn("Stripe.js@".concat(s," was loaded on the page, but @stripe/stripe-js@").concat("7.9.0"," expected Stripe.js@").concat(a,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var i=e.apply(void 0,t);return function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"7.9.0",startTime:t})}(i,n),i}(e,t,r)})}("pk_test_51SRxFZFJzpn39buGuSe4Smdsfrnrm8S3IeVJYCra5wXLFeVBGfAdOeFGYGBfStlhZnUlzUVFvajHzioLv92EVyWn00hOlOtcU4"),Iy={GB:3,US:16,FR:7},By={GB:"UK",US:"USA",FR:"France"},Hy=new Set(["FR","DE","ES","IT"]),Wy=()=>{var t;const n=Cy("calls useStripe()").stripe,r=vy("calls useElements()").elements,{cart:s,getTotalPrice:a,clearCart:i,incrementItemQty:o,decrementItemQty:l,removeFromCart:u}=ji(),{formatPrice:d}=Ft(),h=Se(),[f,m]=(0,e.useState)(!1),[p,g]=(0,e.useState)(null),[y,x]=(0,e.useState)(!1),[b,v]=(0,e.useState)(!1),[w,C]=(0,e.useState)(!1),[S,j]=(0,e.useState)(!1),[k,N]=(0,e.useState)(""),[_,T]=(0,e.useState)({}),E=(0,e.useRef)({}),P=(0,e.useRef)(!1),[O,D]=(0,e.useState)({email:"",name:"",address:{line1:"",line2:"",city:"",postal_code:"",country:"GB",state:""}}),A=a(),M=O.address.country,L=0===s.length?0:null!==(t=Iy[M])&&void 0!==t?t:12,z=By[M]||"International",F=Hy.has(M)?.2*A:0,R=M&&"GB"!==M.toUpperCase()&&s.length>0,I=A+F+L;(0,e.useEffect)(()=>{const e=E.current;return Object.keys(_).forEach(t=>{e[t]&&clearTimeout(e[t]),e[t]=setTimeout(()=>{T(e=>{const n=c({},e);return("string"===typeof n[t]||n[t]&&"object"===typeof n[t])&&delete n[t],n}),delete e[t]},3e3)}),()=>{Object.values(e).forEach(e=>{clearTimeout(e)})}},[_]);const B=e=>{console.log("\ud83d\udd04 handleIncrementWithCheck called:",{itemId:e,cartLength:s.length,cartItems:s.map((e,t)=>({index:t,id:e.id,name:e.name||e.caseName,type:e.type}))});const t="string"===typeof e?s.find(t=>t.id===e):"number"===typeof e&&e>=0&&e<s.length?s[e]:null;if(console.log("\ud83d\udce6 Item found:",t?{name:t.name||t.caseName,id:t.id,type:t.type,quantity:t.quantity}:"NOT FOUND"),!t)return void console.error("\u274c Item not found for increment:",e);const n=xi(t,s),r=null===n||n>0;if(console.log("\ud83d\udcca Inventory check:",{maxAvailable:n,canIncrement:r,currentQty:t.quantity}),r)console.log("\u2705 Calling incrementItemQty with:",e),o(e),T(t=>{const n=c({},t);return delete n[e],n});else{let n="";if("charm"===t.type){var a;n=t.name||(null===(a=t.pin)||void 0===a?void 0:a.name)||"Charm";const r="Oops! We don't have any more ".concat(n," in stock right now, so you can't add more to your basket.");T(t=>c(c({},t),{},{[e]:r}))}else console.log("\u26a0\ufe0f Case item - incrementing anyway despite inventory check"),o(e)}},H=e=>{l(e),T(t=>{const n=c({},t);return delete n[e],n})};(0,e.useEffect)(()=>{0!==s.length||P.current||h("/cart")},[s,h]),(0,e.useEffect)(()=>{x(!1)},[r]);return(0,Lt.jsxs)("div",{className:"h-full w-full",children:[(0,Lt.jsx)(zy,{isOpen:w,onToggle:()=>C(e=>!e),cartLength:s.length,totalWithShipping:I,formatPrice:d,cart:s,subtotal:A,vatAmount:F,shippingCost:L,shippingLabel:z,showInternationalNote:R,onShowShippingInfo:()=>v(!0),onIncrement:B,onDecrement:H,onRemove:u,itemErrors:_}),(0,Lt.jsxs)("div",{className:"flex flex-col lg:flex-row  w-full ",children:[(0,Lt.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!n||!r)return void g("Stripe is not loaded. Please wait...");if(r.getElement("payment"))if(y){m(!0),g(null);try{const{error:e,paymentIntent:t}=await n.confirmPayment({elements:r,confirmParams:{return_url:"".concat(window.location.origin,"/payment-success"),payment_method_data:{billing_details:{name:O.name,email:O.email,phone:null,address:{line1:O.address.line1,line2:O.address.line2,city:O.address.city,postal_code:O.address.postal_code,country:O.address.country,state:O.address.state}}}},redirect:"if_required"});if(e)return g(e.message||"An error occurred while processing your payment."),void m(!1);if(t&&"succeeded"===t.status){P.current=!0;const e=[...s];i(),h("/payment-success",{state:{paymentIntent:t,customerInfo:O,items:e}})}else if(t&&"requires_action"===t.status);else if(t){P.current=!0;const e=[...s];i(),h("/payment-success",{state:{paymentIntent:t,customerInfo:O,items:e}})}}catch(t){g("An error occurred while processing your payment."),console.error("Payment error:",t)}finally{m(!1)}}else g("Payment form is still loading. Please wait...");else g("Payment form is not ready. Please wait...")},className:"space-y-6  mt-6 lg:mt-0 lg:p-6 w-full lg:w-1/2 lg:flex-shrink-0",children:[(0,Lt.jsx)(Dy,{customerInfo:O,onInputChange:e=>{const{name:t,value:n}=e.target;if(t.includes(".")){const[e,r]=t.split(".");D(t=>c(c({},t),{},{[e]:c(c({},t[e]),{},{[r]:n})}))}else D(e=>c(c({},e),{},{[t]:n}))},isAuthenticated:S,authenticatedEmail:k,onSignIn:e=>{j(!0),N(e)},onSignOut:()=>{j(!1),N("")}}),(0,Lt.jsx)(Ay,{paymentElementReady:y,error:p,onPaymentReady:()=>x(!0)}),(0,Lt.jsx)("button",{type:"submit",disabled:!n||!r||f||!y,className:"w-full py-3 text-sm uppercase tracking-wider font-light disabled:opacity-50 disabled:cursor-not-allowed font-inter bg-btn-primary hover:bg-btn-primary-hover text-btn-primary-text border border-btn-primary-border hover:border-btn-primary-hover transition-all duration-200",children:f?"Processing...":"Complete Payment"}),R&&(0,Lt.jsx)(Ty,{className:"mt-4",showOnDesktop:!1,showOnMobile:!0,title:"Custom Duties & Taxes Included",message:"The total amount you pay includes all applicable customs duties & taxes. We guarantee no additional charges on delivery.",variant:"gray"})]}),(0,Lt.jsx)("aside",{className:"hidden lg:flex border border-gray-200 bg-yellow-50 p-6 w-full lg:w-1/2 lg:sticky lg:top-20 mt-4 lg:mt-0 flex-col max-h-[calc(100vh-8rem)]",children:(0,Lt.jsx)("div",{className:"flex-1 overflow-hidden flex flex-col min-h-0",children:(0,Lt.jsx)(Ly,{cart:s,formatPrice:d,subtotal:A,vatAmount:F,shippingCost:L,shippingLabel:z,totalWithShipping:I,showInternationalNote:R,onShowShippingInfo:()=>v(!0),onIncrement:B,onDecrement:H,onRemove:u,itemErrors:_})})}),(0,Lt.jsx)(Fy,{isOpen:b,onClose:()=>v(!1)})]}),(0,Lt.jsx)("div",{className:"w-full border-t border-gray-200 mt-8 pt-6 pb-6",children:(0,Lt.jsx)("div",{className:"max-w-6xl mx-auto px-4 lg:px-6",children:(0,Lt.jsxs)("div",{className:"flex flex-wrap justify-center gap-4 md:gap-6 text-xs text-gray-600 font-light font-inter",children:[(0,Lt.jsx)(Nt,{to:"/returns",className:"hover:text-gray-900 transition-colors underline",children:"Refund Policy"}),(0,Lt.jsx)("span",{className:"text-gray-300",children:"|"}),(0,Lt.jsx)(Nt,{to:"/shipping",className:"hover:text-gray-900 transition-colors underline",children:"Shipping"}),(0,Lt.jsx)("span",{className:"text-gray-300",children:"|"}),(0,Lt.jsx)(Nt,{to:"/returns",className:"hover:text-gray-900 transition-colors underline",children:"Cancellations"}),(0,Lt.jsx)("span",{className:"text-gray-300",children:"|"}),(0,Lt.jsx)(Nt,{to:"/about",className:"hover:text-gray-900 transition-colors underline",children:"Contact"})]})})})]})},Uy=()=>{const{cart:t,getTotalPrice:n}=ji(),{currency:r,convertPrice:s}=Ft(),a=Se(),[i,o]=(0,e.useState)(null),[l,c]=(0,e.useState)(!0),[u,d]=(0,e.useState)(null),h=(0,e.useRef)(!1),f="".concat(".","/images/cart.svg");return(0,e.useEffect)(()=>{const e=window.location.pathname;if(0===t.length&&("/checkout"===e||e.includes("/checkout")))return void a("/cart");if(0===t.length||h.current||null!==i)return;(async()=>{try{h.current=!0,c(!0);const e=n(),a=s(e),i={jpy:1,krw:1,vnd:1}[r.toLowerCase()]||100,l=Math.round(a*i),u=r.toLowerCase();console.log("\ud83d\udcb3 Creating payment intent:",{totalPriceGBP:e,totalPriceInCurrency:a,currency:u,amount:l,multiplier:i});const f=await(async e=>{const{amount:t,currency:n="gbp",items:r,customerInfo:s}=e;if(!t||t<=0)throw new Error("Amount is required and must be greater than 0");if(!n)throw new Error("Currency is required");try{const e=mi("/api/create-payment-intent");console.log("\ud83d\udcde Calling backend to create payment intent:",e);const a=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:t,currency:n,items:r,customerInfo:s})});if(!a.ok){const e=await a.text();throw console.error("\u274c Backend error response:",{status:a.status,statusText:a.statusText,body:e.substring(0,200)}),new Error("Backend responded with ".concat(a.status," ").concat(a.statusText,": ").concat(e.substring(0,100)))}const i=await a.json();if(console.log("\u2705 Backend response received:",{hasClientSecret:!!i.clientSecret,keys:Object.keys(i)}),!i.clientSecret)throw console.error("\u274c Backend response missing clientSecret:",i),new Error("Backend did not return a clientSecret");return console.log("\u2705 Payment intent created successfully"),{client_secret:i.clientSecret}}catch(i){var a;throw console.error("\u274c Failed to create payment intent via backend. Falling back to mock client secret.",i),console.error("Error details:",{message:i.message,name:i.name,stack:null===(a=i.stack)||void 0===a?void 0:a.substring(0,200)}),new Error("Failed to create payment intent: ".concat(i.message,". Please ensure your backend server is running on port 3001."))}})({amount:l,currency:u,items:t,customerInfo:{}});o({clientSecret:f.client_secret,appearance:{theme:"stripe",variables:{colorPrimary:"#3b82f6",colorBackground:"#ffffff",colorText:"#1f2937",colorDanger:"#ef4444",fontFamily:"system-ui, sans-serif",spacingUnit:"4px",borderRadius:"8px"}}}),d(null)}catch(e){console.error("Failed to initialize payment options:",e),d(e.message||"Failed to initialize payment. Please ensure the backend server is running."),h.current=!1}finally{c(!1)}})()},[t.length]),l?(0,Lt.jsx)(Py,{}):u?(0,Lt.jsxs)("div",{className:"min-h-screen flex flex-col bg-white",children:[(0,Lt.jsx)(Ey,{cartIconSrc:f}),(0,Lt.jsx)("div",{className:"flex-1 flex items-center justify-center bg-white py-10",children:(0,Lt.jsx)("div",{className:"max-w-md mx-auto px-4 text-center",children:(0,Lt.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[(0,Lt.jsx)("h2",{className:"text-xl font-semibold text-red-900 mb-3",style:{fontFamily:"'Poppins', sans-serif"},children:"Payment Setup Error"}),(0,Lt.jsx)("p",{className:"text-red-700 mb-4 font-inter",children:u}),(0,Lt.jsxs)("div",{className:"text-sm text-red-600 mb-4 font-inter",children:[(0,Lt.jsx)("p",{className:"mb-2",children:"To fix this issue:"}),(0,Lt.jsxs)("ol",{className:"list-decimal list-inside space-y-1 text-left",children:[(0,Lt.jsxs)("li",{children:["Make sure your backend server is running: ",(0,Lt.jsx)("code",{className:"bg-red-100 px-1 rounded",children:"npm run server"})]}),(0,Lt.jsx)("li",{children:"Verify the server is running on port 3001"}),(0,Lt.jsx)("li",{children:"Check that the proxy is configured correctly"}),(0,Lt.jsx)("li",{children:"Refresh this page to retry"})]})]}),(0,Lt.jsx)("button",{onClick:()=>{d(null),h.current=!1,window.location.reload()},className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-md transition-colors font-inter",children:"Retry"})]})})})]}):i?(0,Lt.jsxs)("div",{className:"min-h-screen flex flex-col bg-white",children:[(0,Lt.jsx)(Ey,{cartIconSrc:f}),(0,Lt.jsx)("div",{className:"flex-1 flex items-stretch bg-white py-10",children:(0,Lt.jsx)("div",{className:"flex-1 max-w-6xl mx-auto px-4 lg:px-6",children:(0,Lt.jsx)(by,{stripe:Ry,options:i,children:(0,Lt.jsx)(Wy,{})})})})]}):(0,Lt.jsx)(Py,{})},Yy=()=>{const t=ve(),n=Se(),[r]=Ot(),[s,a]=(0,e.useState)(!1),[i,o]=(0,e.useState)(!1),{paymentIntent:l,customerInfo:c,items:u}=t.state||{},d=r.get("session_id");if((0,e.useEffect)(()=>{if(l&&null!==c&&void 0!==c&&c.email&&u&&u.length>0&&!i){(async()=>{try{console.log("\ud83d\udcbe Attempting to save order to Supabase..."),console.log("  - Payment Intent:",null===l||void 0===l?void 0:l.id),console.log("  - Customer Email:",null===c||void 0===c?void 0:c.email),console.log("  - Items:",(null===u||void 0===u?void 0:u.length)||0);const e=await fetch(mi("/api/save-order"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({paymentIntent:l,customerInfo:c,items:u})});console.log("\ud83d\udce4 Order save response status:",e.status);const t=await e.json();console.log("\ud83d\udce5 Order save response:",t),e.ok&&t.success?(console.log("\u2705 Order saved to Supabase successfully:",t.order_id),o(!0)):console.error("\u274c Failed to save order:",{status:e.status,success:t.success,error:t.error||t.message,details:t.details});const n=await fetch(mi("/api/send-order-confirmation"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({paymentIntent:l,customerInfo:c,items:u})}),r=await n.json();r.success?console.log("\u2705 Order confirmation email sent successfully"):console.error("\u274c Failed to send email:",r.error||r.message)}catch(e){console.error("\u274c Error processing order:",e)}})()}},[l,c,u,i]),(0,e.useEffect)(()=>{d&&!l&&(a(!0),fetch(mi("/session-status?session_id=".concat(d))).then(e=>e.json()).then(e=>{e.status,a(!1)}).catch(e=>{console.error("Error fetching session:",e),a(!1)}))},[d,l]),s)return(0,Lt.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,Lt.jsxs)("div",{className:"text-center",children:[(0,Lt.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900 mx-auto mb-4"}),(0,Lt.jsx)("p",{className:"text-gray-600 font-inter",children:"Loading payment details..."})]})});if(!l&&!d)return(0,Lt.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,Lt.jsxs)("div",{className:"text-center max-w-md mx-auto px-4",children:[(0,Lt.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-4",style:{fontFamily:"'Poppins', sans-serif"},children:"Invalid Access"}),(0,Lt.jsx)("p",{className:"text-gray-600 mb-6 font-inter",children:"This page can only be accessed after a successful payment."}),(0,Lt.jsx)("button",{onClick:()=>n("/"),className:"px-6 py-3 rounded-md bg-gray-900 hover:bg-gray-800 text-white transition-all duration-200 font-inter",children:"Go Home"})]})});const h=(null===u||void 0===u?void 0:u.reduce((e,t)=>e+(t.totalPrice||t.price||0)*(t.quantity||1),0))||0,f=(null===l||void 0===l?void 0:l.id)||d||"N/A",m=(null===l||void 0===l?void 0:l.created)||Date.now()/1e3,p=(null===l||void 0===l?void 0:l.status)||"succeeded";return(0,Lt.jsx)("div",{className:"min-h-screen bg-white py-8 md:py-12",children:(0,Lt.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,Lt.jsxs)("div",{className:"text-center mb-8 md:mb-12",children:[(0,Lt.jsx)("div",{className:"inline-flex items-center justify-center w-20 h-20 md:w-24 md:h-24 rounded-full bg-green-100 mb-6",children:(0,Lt.jsx)(Ca,{icon:Ba,className:"text-green-600 text-4xl md:text-5xl"})}),(0,Lt.jsx)("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-3",style:{fontFamily:"'Poppins', sans-serif"},children:"Payment Successful!"}),(0,Lt.jsx)("p",{className:"text-base md:text-lg text-gray-600 max-w-2xl mx-auto font-inter",children:"Thank you for your order. We've received your payment and will process your items shortly."})]}),(0,Lt.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 md:gap-8",children:[(0,Lt.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm p-6 md:p-8",children:[(0,Lt.jsx)("h2",{className:"text-xl md:text-2xl font-semibold mb-6 text-gray-900",style:{fontFamily:"'Poppins', sans-serif"},children:"Order Details"}),(0,Lt.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,Lt.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[(0,Lt.jsx)("span",{className:"text-gray-600 font-medium font-inter",children:"Order ID:"}),(0,Lt.jsx)("span",{className:"text-gray-900 font-mono text-sm",children:f})]}),(0,Lt.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[(0,Lt.jsx)("span",{className:"text-gray-600 font-medium font-inter",children:"Date:"}),(0,Lt.jsx)("span",{className:"text-gray-900 font-inter",children:(g=m,g?new Date(1e3*g).toLocaleDateString("en-GB",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A")})]}),(0,Lt.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[(0,Lt.jsx)("span",{className:"text-gray-600 font-medium font-inter",children:"Amount:"}),(0,Lt.jsxs)("span",{className:"text-gray-900 font-semibold font-inter",children:["\xa3",h.toFixed(2)]})]}),(0,Lt.jsxs)("div",{className:"flex justify-between items-center py-2",children:[(0,Lt.jsx)("span",{className:"font-medium text-green-600 capitalize font-inter",children:"Status:"}),(0,Lt.jsx)("span",{className:"text-green-600 font-semibold capitalize font-inter",children:p})]})]}),u&&u.length>0&&(0,Lt.jsxs)("div",{className:"border-t border-gray-200 pt-6",children:[(0,Lt.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-900 font-inter",children:"Items Ordered:"}),(0,Lt.jsx)("div",{className:"space-y-3",children:u.map((e,t)=>(0,Lt.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-100",children:(0,Lt.jsxs)("div",{className:"flex items-start gap-4",children:[(e.image||e.caseImage||e.designImage)&&(0,Lt.jsx)("img",{src:Li(e.designImage||e.caseImage||e.image),alt:e.name||e.caseName||"Item",className:"w-16 h-16 md:w-20 md:h-20 object-contain rounded"}),(0,Lt.jsxs)("div",{className:"flex-1",children:[(0,Lt.jsx)("p",{className:"font-semibold text-gray-900 mb-1 font-inter",children:e.caseName||e.name||"Custom Case"}),e.color&&(0,Lt.jsxs)("p",{className:"text-sm text-gray-600 mb-1 font-inter",children:["Color: ",(0,Lt.jsx)("span",{className:"font-medium",children:e.color})]}),e.pinsDetails&&e.pinsDetails.length>0&&(0,Lt.jsxs)("p",{className:"text-sm text-gray-600 mb-1 font-inter",children:["Charms: ",(0,Lt.jsx)("span",{className:"font-medium",children:e.pinsDetails.length})]}),e.quantity>1&&(0,Lt.jsxs)("p",{className:"text-sm text-gray-600 mb-1 font-inter",children:["Quantity: ",(0,Lt.jsx)("span",{className:"font-medium",children:e.quantity})]}),(0,Lt.jsxs)("p",{className:"text-sm font-semibold text-gray-900 mt-2 font-inter",children:["\xa3",((e.totalPrice||e.price||0)*(e.quantity||1)).toFixed(2)]})]})]})},t))})]})]}),(0,Lt.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm p-6 md:p-8",children:[(0,Lt.jsx)("h2",{className:"text-xl md:text-2xl font-semibold mb-6 text-gray-900",style:{fontFamily:"'Poppins', sans-serif"},children:"Shipping Information"}),c&&c.name&&(0,Lt.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,Lt.jsxs)("div",{className:"py-2 border-b border-gray-100",children:[(0,Lt.jsx)("span",{className:"text-gray-600 font-medium font-inter block mb-1",children:"Name:"}),(0,Lt.jsx)("p",{className:"text-gray-900 font-inter",children:c.name})]}),c.email&&(0,Lt.jsxs)("div",{className:"py-2 border-b border-gray-100",children:[(0,Lt.jsx)("span",{className:"text-gray-600 font-medium font-inter block mb-1",children:"Email:"}),(0,Lt.jsx)("p",{className:"text-gray-900 font-inter",children:c.email})]}),c.address&&c.address.line1&&(0,Lt.jsxs)("div",{className:"py-2",children:[(0,Lt.jsx)("span",{className:"text-gray-600 font-medium font-inter block mb-1",children:"Address:"}),(0,Lt.jsxs)("p",{className:"text-gray-900 font-inter",children:[c.address.line1,c.address.line2&&(0,Lt.jsxs)(Lt.Fragment,{children:[(0,Lt.jsx)("br",{}),c.address.line2]}),(0,Lt.jsx)("br",{}),c.address.city," ",c.address.postal_code,(0,Lt.jsx)("br",{}),c.address.country]})]})]}),(0,Lt.jsxs)("div",{className:"mt-6 p-4 md:p-5 bg-blue-50 rounded-lg border border-blue-100",children:[(0,Lt.jsx)("h3",{className:"font-semibold text-blue-900 mb-2 font-inter",children:"What's Next?"}),(0,Lt.jsx)("p",{className:"text-sm md:text-base text-blue-800 mb-3 font-inter",children:"Your order will be processed within 1-2 business days. You will receive a shipping confirmation email with tracking details once your items are dispatched."}),(0,Lt.jsxs)("p",{className:"text-sm md:text-base text-blue-800 font-inter",children:[(0,Lt.jsx)("strong",{children:"Estimated delivery:"})," 3-5 business days"]})]})]})]}),(0,Lt.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center mt-8 md:mt-12",children:[(0,Lt.jsxs)("button",{onClick:()=>n("/"),className:"px-6 py-3 rounded-md font-medium inline-flex items-center justify-center bg-gray-900 hover:bg-gray-800 text-white transition-all duration-200 font-inter",children:[(0,Lt.jsx)(Ca,{icon:Ka,className:"mr-2"}),"Continue Shopping"]}),(0,Lt.jsxs)("button",{onClick:()=>window.print(),className:"px-6 py-3 rounded-md font-medium inline-flex items-center justify-center bg-white hover:bg-gray-50 text-gray-900 border border-gray-300 hover:border-gray-400 transition-all duration-200 font-inter",children:[(0,Lt.jsx)(Ca,{icon:La,className:"mr-2"}),"Print Receipt"]})]}),(0,Lt.jsx)("div",{className:"mt-8 md:mt-12 text-center",children:(0,Lt.jsxs)("p",{className:"text-gray-600 font-inter",children:["Questions about your order? Contact us at"," ",(0,Lt.jsx)("a",{href:"mailto:support@thehappycase.com",className:"text-gray-900 hover:underline font-medium",children:"support@thehappycase.com"})]})})]})});var g},Vy=e=>{let{title:t,description:n}=e;return(0,Lt.jsxs)("div",{className:"text-center mb-12",children:[(0,Lt.jsx)("h1",{className:"text-title text-gray-900 tracking-title mb-2 font-inter",children:t}),(0,Lt.jsx)("div",{className:"w-16 h-px bg-gray-300 mx-auto mb-4"}),(0,Lt.jsx)("p",{className:"text-body-sm text-gray-500 max-w-2xl mx-auto font-light font-inter",children:n})]})},qy=e=>{let{searchTerm:t,setSearchTerm:n,placeholder:r="Search charms..."}=e;return(0,Lt.jsxs)("div",{className:"relative flex-1 max-w-md w-full",children:[(0,Lt.jsx)("input",{type:"text",placeholder:r,value:t,onChange:e=>n(e.target.value),className:"w-full px-4 py-3 pl-10 border border-gray-200 rounded-sm focus:outline-none focus:border-gray-400 bg-white text-gray-900 placeholder-gray-400 font-inter text-sm"}),(0,Lt.jsx)("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Lt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})},Xy=e=>{let{categories:t,selectedCategory:n,onCategoryChange:r,inline:s=!1}=e;const a=s?"flex flex-wrap gap-2":"flex justify-center mb-12",i=s?"flex gap-1 border-b border-gray-200 flex-wrap":"flex gap-1 border-b border-gray-200 flex-wrap justify-center",o=s?"px-4 py-2 text-xs uppercase tracking-wider transition-all duration-200":"px-6 py-3 text-xs uppercase tracking-wider transition-all duration-200";return(0,Lt.jsx)("div",{className:a,children:(0,Lt.jsx)("div",{className:i,children:t.map(e=>{let{key:t,label:s}=e;return(0,Lt.jsx)("button",{onClick:()=>r(t),className:"".concat(o," font-inter ").concat(n===t?"border-b-2 border-gray-900 text-gray-900 font-medium":"border-b-2 border-transparent text-gray-500 hover:text-gray-900 hover:border-gray-300"),children:s},t)})})})},Gy=e=>{let{charm:t,index:n,onAddToCart:r,isSelected:s,onSelect:a,isSoldOut:i=!1,charmPrice:o}=e;const{formatPrice:l}=Ft(),c=["bg-pink-50","bg-blue-50","bg-purple-50","bg-green-50","bg-yellow-50","bg-orange-50"],u=n%c.length;return(0,Lt.jsxs)("div",{className:"flex flex-col group",children:[(0,Lt.jsxs)("div",{className:"aspect-square mb-3 ".concat(c[u]," flex items-center justify-center overflow-hidden md:border ").concat(["border-pink-100","border-blue-100","border-purple-100","border-green-100","border-yellow-100","border-orange-100"][u]," relative"),children:[(0,Lt.jsx)("img",{src:Li(t.src),alt:t.name,className:"w-full h-full object-contain p-4 transition-opacity duration-200 group-hover:opacity-80 ".concat(i?"opacity-50":""),loading:"lazy",style:{transform:"scale(".concat(void 0!==t.size?.9*t.size:.9,")")},onError:e=>{var t;e.target&&(e.target.style.display="none"),null!==(t=e.target)&&void 0!==t&&t.nextSibling&&(e.target.nextSibling.style.display="flex")}}),(0,Lt.jsx)("div",{className:"hidden w-full h-full items-center justify-center text-gray-400",children:(0,Lt.jsx)("span",{className:"text-4xl",children:"\ud83c\udf81"})}),i&&(0,Lt.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-60 flex items-center justify-center z-20",children:(0,Lt.jsx)("span",{className:"text-white text-xl font-medium uppercase tracking-wider font-inter",children:"Sold Out"})}),s&&!i&&(0,Lt.jsx)("div",{className:"absolute -top-2 -right-2 bg-gray-900 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-medium",children:"\u2713"}),r&&!i&&(0,Lt.jsxs)("button",{onClick:e=>{e.stopPropagation(),r(t)},className:"absolute bottom-2 right-2 md:bottom-0 md:left-0 md:right-0 md:top-auto py-2 px-2 md:py-2 md:px-0 text-gray-900 md:border-t md:border-gray-200 bg-white md:bg-white rounded-full md:rounded-none shadow-md md:shadow-none transition-all duration-200 text-xs uppercase tracking-wider flex items-center justify-center opacity-100 translate-y-0 md:opacity-0 md:translate-y-full md:group-hover:opacity-100 md:group-hover:translate-y-0 hover:bg-gray-50 z-10 font-inter",children:[(0,Lt.jsx)("svg",{className:"w-5 h-5 md:hidden",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Lt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),(0,Lt.jsx)("span",{className:"hidden md:inline",children:"Add to Cart"})]})]}),(0,Lt.jsx)("h3",{className:"text-sm text-center mb-1 font-light font-inter ".concat(i?"text-gray-500":"text-gray-700"),children:t.name}),(0,Lt.jsx)("div",{className:"text-center",children:(0,Lt.jsx)("span",{className:"text-sm font-medium font-inter ".concat(i?"text-gray-500":"text-gray-900"),children:l(o)})})]})},Ky=e=>{let{currentPage:t,totalPages:n,onPageChange:r,onPrevious:s,onNext:a}=e;return n<=1?null:(0,Lt.jsxs)(Lt.Fragment,{children:[(0,Lt.jsxs)("div",{className:"relative mb-12",children:[t>1&&(0,Lt.jsx)("button",{onClick:s,className:"absolute left-0 top-1/2 -translate-y-1/2 -translate-x-8 md:-translate-x-12 z-10 bg-transparent rounded-full p-2 md:p-3 border border-gray-200 hover:border-gray-400 transition-all duration-200","aria-label":"Previous page",children:(0,Lt.jsx)("svg",{className:"w-5 h-5 md:w-6 md:h-6 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Lt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 19l-7-7 7-7"})})}),t<n&&(0,Lt.jsx)("button",{onClick:a,className:"absolute right-0 top-1/2 -translate-y-1/2 translate-x-8 md:translate-x-12 z-10 bg-transparent rounded-full p-2 md:p-3 border border-gray-200 hover:border-gray-400 transition-all duration-200","aria-label":"Next page",children:(0,Lt.jsx)("svg",{className:"w-5 h-5 md:w-6 md:h-6 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Lt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5l7 7-7 7"})})})]}),(0,Lt.jsx)("div",{className:"flex justify-center items-center gap-1 mb-12",children:Array.from({length:n},(e,t)=>t+1).map(e=>(0,Lt.jsx)("button",{onClick:()=>r(e),className:"px-3 py-1 text-xs transition-all duration-200 font-inter ".concat(t===e?"border-b-2 border-gray-900 text-gray-900 font-medium":"border-b-2 border-transparent text-gray-400 hover:text-gray-700 hover:border-gray-300"),"aria-label":"Go to page ".concat(e),children:e},e))})]})},Qy=e=>{let{count:t,currentPage:n,totalPages:r}=e;return(0,Lt.jsx)("div",{className:"flex items-center text-sm text-gray-500 font-inter whitespace-nowrap",children:(0,Lt.jsxs)("p",{children:[t," ",1===t?"item":"items",r>1&&(0,Lt.jsxs)("span",{className:"ml-2",children:["(Page ",n," of ",r,")"]})]})})},$y=e=>{let{message:t="No items found",onClearFilters:n}=e;return(0,Lt.jsxs)("div",{className:"py-16 text-center",children:[(0,Lt.jsx)("p",{className:"text-gray-400 mb-4 font-inter",children:t}),n&&(0,Lt.jsx)("button",{onClick:n,className:"text-xs uppercase tracking-wider text-gray-500 hover:text-gray-900 border-b border-transparent hover:border-gray-300 transition-all duration-200 font-inter",children:"Clear Filters"})]})},Jy=e=>{let{links:t=[]}=e;const n=Se();return 0===t.length?null:(0,Lt.jsx)("div",{className:"pt-12 pb-8 text-center border-t border-gray-100",children:(0,Lt.jsx)("div",{className:"flex flex-col sm:flex-row justify-center gap-4",children:t.map(e=>{let{path:t,label:r}=e;return(0,Lt.jsx)("button",{onClick:()=>n(t),className:"px-6 py-2 text-xs uppercase tracking-wider text-gray-600 hover:text-gray-900 border border-gray-200 hover:border-gray-400 transition-all duration-200 font-inter",children:r},t)})})})},Zy=t=>{let{show:n,onClose:r,message:s,type:a="warning"}=t;if((0,e.useEffect)(()=>{if(n){const e=window.getComputedStyle(document.body).overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=e}}},[n]),!n)return null;const i="error"===a||(null===s||void 0===s?void 0:s.toLowerCase().includes("out of stock"));return(0,Lt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-[60] flex items-center justify-center p-4",onClick:r,children:(0,Lt.jsxs)("div",{className:"bg-white rounded-sm max-w-md w-full p-6 border border-gray-200 shadow-lg",onClick:e=>e.stopPropagation(),children:[(0,Lt.jsxs)("div",{className:"mb-4",children:[(0,Lt.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center mb-3 ".concat(i?"bg-red-100":"bg-orange-100"),children:i?(0,Lt.jsx)("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Lt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}):(0,Lt.jsx)("svg",{className:"w-6 h-6 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Lt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),(0,Lt.jsx)("h3",{className:"text-lg font-medium mb-2 font-inter ".concat(i?"text-red-900":"text-orange-900"),children:i?"Out of Stock":"Limited Inventory"}),(0,Lt.jsx)("div",{className:"w-12 h-px ".concat(i?"bg-red-300":"bg-orange-300")})]}),(0,Lt.jsx)("div",{className:"mb-6",children:(0,Lt.jsx)("p",{className:"text-sm font-inter ".concat(i?"text-red-800":"text-gray-700"),children:s})}),(0,Lt.jsx)("div",{className:"flex justify-end",children:(0,Lt.jsx)("button",{onClick:r,className:"px-6 py-2 text-sm uppercase tracking-wider font-inter transition-all duration-200 ".concat(i?"bg-red-600 hover:bg-red-700 text-white":"bg-gray-900 hover:bg-gray-800 text-white"),children:"OK"})})]})})},ex=t=>{let{title:n,description:r,pins:s,categories:a,filterFunction:i,defaultPrice:o=2,categoryName:l,callToActionLinks:u,searchPlaceholder:d="Search charms...",inlineTabs:h=!1}=t;const{addToCart:f,cart:m}=ji(),[p,g]=(0,e.useState)(!1),[y,x]=(0,e.useState)(""),[b,v]=(0,e.useState)("error"),[w,C]=(0,e.useState)("all"),[S,j]=(0,e.useState)(""),[k,N]=(0,e.useState)(1),_=s.filter(e=>{const t=e.name.toLowerCase().includes(S.toLowerCase());return"all"===w?t:t&&i(e,w)}),T=Math.ceil(_.length/16),E=16*(k-1),P=E+16,O=_.slice(E,P);(0,e.useEffect)(()=>{N(1)},[w,S]);const D=e=>{const t={id:"charm-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),name:"".concat(e.name," - ").concat(n),price:e.price||o,totalPrice:e.price||o,image:e.src,pin:e,category:l,type:"charm"},r=xi(t,m);if(-1!==m.findIndex(e=>hi(e,t))){if(null===r)return void f(t);if(r>0)return void f(t);{const t=e.name||"this charm",n="Oops! We don't have any more ".concat(t," in stock right now, so you can't add more to your basket.");return x(n),v("error"),void g(!0)}}{const n=t.quantity||1;if(null===r)return void f(t);if(r>=n){const e=Math.min(n,r),s=c(c({},t),{},{quantity:e});return void f(s)}{const t=e.name||"this charm",n="Oops! We only have ".concat(r," ").concat(t).concat(1===r?"":"s"," in stock right now.");return x(n),v("error"),void g(!0)}}};return(0,Lt.jsxs)("div",{className:"min-h-screen bg-white py-12",children:[(0,Lt.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,Lt.jsx)(Vy,{title:n,description:r}),h?(0,Lt.jsx)("div",{className:"mb-10",children:(0,Lt.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 items-center justify-between",children:[(0,Lt.jsx)(qy,{searchTerm:S,setSearchTerm:j,placeholder:d}),(0,Lt.jsx)(Xy,{categories:a,selectedCategory:w,onCategoryChange:C,inline:!0})]})}):(0,Lt.jsxs)(Lt.Fragment,{children:[(0,Lt.jsx)(Xy,{categories:a,selectedCategory:w,onCategoryChange:C,inline:!1}),(0,Lt.jsx)("div",{className:"mb-10",children:(0,Lt.jsx)("div",{className:"flex flex-col md:flex-row gap-4 items-center justify-between",children:(0,Lt.jsx)(qy,{searchTerm:S,setSearchTerm:j,placeholder:d})})})]}),(0,Lt.jsx)(Qy,{count:_.length,currentPage:k,totalPages:T}),(0,Lt.jsx)("div",{className:"relative",children:(0,Lt.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4 md:gap-6 mb-12",children:O.map((e,t)=>{const n=(e=>{if(!e)return!1;const t=e.name||e.src;if(!l||!t)return!1;const n=xi({type:"charm",category:l,pin:e,name:t},m);return null!==n&&0===n})(e);return(0,Lt.jsx)(Gy,{charm:e,index:E+t,onAddToCart:D,isSoldOut:n},t)})})}),(0,Lt.jsx)(Ky,{currentPage:k,totalPages:T,onPageChange:N,onPrevious:()=>{N(e=>Math.max(1,e-1))},onNext:()=>{N(e=>Math.min(T,e+1))}}),0===_.length&&(0,Lt.jsx)($y,{message:"No ".concat(n.toLowerCase()," found"),onClearFilters:()=>{j(""),C("all")}}),_.length>0&&u&&(0,Lt.jsx)(Jy,{links:u})]}),(0,Lt.jsx)(Zy,{show:p,onClose:()=>{g(!1),x("")},message:y,type:b})]})},tx=(e,t)=>{const n=e.name.toLowerCase();return"drinks"===t?n.includes("beer")||n.includes("wine")||n.includes("coffee")||n.includes("aperol"):"travel"===t?n.includes("airplane")||n.includes("passport")||n.includes("suitcase")||n.includes("map")||n.includes("vacation")||n.includes("adventure")||n.includes("boarding")||n.includes("ticket")||n.includes("heart globe")||n.includes("combi")||n.includes("telephone")||n.includes("london phone"):"inspiration"===t?n.includes("be a good human")||n.includes("be kind")||n.includes("be happy")||n.includes("dream big")||n.includes("life is good")||n.includes("stay pawsitive"):"flags"===t?n.includes("flag")||n.includes("france")||n.includes("portugal")||n.includes("spain")||n.includes("italian")||n.includes("dublin")||n.includes("brazil")||n.includes("united kingdom")||n.includes("uk")||n.includes("rainbow")||n.includes("lgbtqia"):"disney"===t&&(n.includes("disney")||n.includes("mickey")||n.includes("minnie")||n.includes("pluto")||n.includes("goofy")||n.includes("guufy")||n.includes("daisy duck")||n.includes("duck"))},nx=(e,t)=>{const n=e.name.toLowerCase();return"travel"===t?n.includes("airplane")||n.includes("passport")||n.includes("luggage")||n.includes("taxi")||n.includes("bus")||n.includes("globe"):"landmarks"===t?n.includes("bigben")||n.includes("eiffel")||n.includes("pisa")||n.includes("pyramid")||n.includes("liberty")||n.includes("arc"):"animals"===t?n.includes("kangaroo")||n.includes("koala")||n.includes("llama"):"symbols"===t&&(n.includes("heart")||n.includes("leaf")||n.includes("hamsa")||n.includes("cardinal"))},rx=(e,t)=>{const n=e.name.toLowerCase();return"europe"===t?n.includes("france")||n.includes("portugal")||n.includes("spain")||n.includes("italian")||n.includes("italy")||n.includes("united kingdom")||n.includes("uk")||n.includes("dublin")||n.includes("ireland"):"americas"===t?n.includes("brazil"):"special"===t&&(n.includes("lgbtqia")||n.includes("rainbow"))},sx=()=>{const e=ui.pins.flags||[];return(0,Lt.jsx)(ex,{title:"Flag Charms",description:"Create your case with charms glued, or buy charms separately and glue them yourself for the fun of doing it.",pins:e,categories:[{key:"all",label:"ALL"},{key:"europe",label:"EUROPE"},{key:"americas",label:"AMERICAS"},{key:"special",label:"SPECIAL"}],filterFunction:rx,defaultPrice:2,categoryName:"flags",searchPlaceholder:"Search flags...",callToActionLinks:[{path:"/CreateYours",label:"Start Creating"},{path:"/ColorfulCharms",label:"Colorful Charms"},{path:"/BronzeCharms",label:"Bronze Charms"}]})},ax=()=>{const e=ui.pins.colorful;return(0,Lt.jsx)(ex,{title:"Colorful Charms",description:"Create your case with charms glued, or buy charms separately and glue them yourself for the fun of doing it.",pins:e,categories:[{key:"all",label:"ALL"},{key:"drinks",label:"DRINKS"},{key:"travel",label:"TRAVEL"},{key:"inspiration",label:"INSPIRATION"},{key:"flags",label:"FLAGS"},{key:"disney",label:"DISNEY"}],filterFunction:tx,defaultPrice:2,categoryName:"colorful",searchPlaceholder:"Search charms...",callToActionLinks:[{path:"/CreateYours",label:"Start Creating"},{path:"/BronzeCharms",label:"Bronze Charms"},{path:"/Flags",label:"Flags"}]})},ix=()=>{const e=ui.pins.bronze;return(0,Lt.jsx)(ex,{title:"Bronze Charms",description:"Create your case with charms glued, or buy charms separately and glue them yourself for the fun of doing it.",pins:e,categories:[{key:"all",label:"ALL"},{key:"travel",label:"TRAVEL"},{key:"landmarks",label:"LANDMARKS"},{key:"animals",label:"ANIMALS"},{key:"symbols",label:"SYMBOLS"}],filterFunction:nx,defaultPrice:1,categoryName:"bronze",searchPlaceholder:"Search charms...",inlineTabs:!0,callToActionLinks:[{path:"/CreateYours",label:"Start Creating"},{path:"/ColorfulCharms",label:"Colorful Charms"},{path:"/Flags",label:"Flags"}]})},ox=()=>{const[t,n]=Ot(),r=Se(),s=t.get("filter"),{addToCart:a,cart:i}=ji(),o={economy:"economy",business:"business",firstclass:"firstclass","first-class":"firstclass","business-class":"business","economy-class":"economy"},l=s&&o[s.toLowerCase()]?o[s.toLowerCase()]:"economy",[u,d]=(0,e.useState)(l),[h,f]=(0,e.useState)(""),[m,p]=(0,e.useState)(0),[g,y]=(0,e.useState)(null),[x,b]=(0,e.useState)(!1),[v,w]=(0,e.useState)(1),[C,S]=(0,e.useState)(""),j=()=>{const e=localStorage.getItem("productQuantities");if(!e)return ui;try{const t=JSON.parse(e),n=c({},ui);return t.cases&&(n.cases=n.cases.map((e,n)=>{const r=c(c({},e),{},{quantity:void 0!==t.cases[n]?t.cases[n]:e.quantity});return t.caseColors&&t.caseColors[n]&&(r.colors=r.colors.map((e,r)=>c(c({},e),{},{quantity:void 0!==t.caseColors[n][r]?t.caseColors[n][r]:e.quantity}))),r})),n}catch(t){return console.error("Error loading saved quantities:",t),ui}},k=j(),N=k.cases.find(e=>e.type===u),_=()=>{if(!N||!h)return!1;const e=xi({caseType:u,color:h},i);return null!==e&&0===e},T=e=>{const t=ui.cases.find(t=>t.type===e);if(!t)return!1;if(t.colors&&t.colors.length>0){return!t.colors.some(t=>{const n={caseType:e,color:t.color},r=xi(n,i);return null===r||r>0})}return!1},E=e=>({economy:"Economy Class",business:"Business Class",firstclass:"First Class"}[e]||e),P=e=>{if(!e)return"";let t=e.split("/").pop().replace(".png","").replace(".jpg","").toLowerCase().replace(/^economycase/i,"").replace(/^businessclasscase/i,"").replace(/^firstclasscase/i,"").replace(/^smartcase/i,"").replace(/^premiumcase/i,"").replace(/^firstclass/i,"");const n={lightpink:"Light Pink",lightblue:"Light Blue",lightbrown:"Light Brown",darkbrown:"Dark Brown",darkblue:"Dark Blue",jeansblue:"Jeans Blue",brickred:"Brick Red",navyblue:"Navy Blue",gray:"Gray",grey:"Gray",black:"Black",brown:"Brown",red:"Red",pink:"Pink",blue:"Blue",green:"Green",purple:"Purple",yellow:"Yellow",orange:"Orange"};return n[t]?n[t]:(t=t.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/(dark|light|navy|jeans|brick)([a-z]+)/g,"$1 $2").split(/(?=[A-Z])|(?=dark|light|navy|jeans|brick)/).filter(e=>e.length>0).join(" ").toLowerCase().split(" ").map(e=>n[e]?n[e]:e.charAt(0).toUpperCase()+e.slice(1)).join(" "),t||"Color")};if((0,e.useEffect)(()=>{if(s&&o[s.toLowerCase()]){const e=o[s.toLowerCase()];d(e)}},[s]),(0,e.useEffect)(()=>{!h&&N&&N.colors&&N.colors.length>0&&f(N.colors[0].color)},[u,h,N]),(0,e.useEffect)(()=>{if(!u||!h)return;const e=xi({caseType:u,color:h},i);null!==e&&v>e&&w(Math.max(1,e)),S("")},[u,h,i,v]),!N||!N.images||0===N.images.length)return(0,Lt.jsx)("div",{className:"min-h-screen bg-white py-8 flex items-center justify-center",children:(0,Lt.jsxs)("div",{className:"text-center",children:[(0,Lt.jsx)("h1",{className:"text-2xl font-light text-gray-900 mb-4 font-inter",children:"Loading..."}),(0,Lt.jsx)("p",{className:"text-gray-500 font-inter",children:"Please wait while we load the passport cases."})]})});const O=N.colors.find(e=>e.color===h),D=Li(g||(null===O||void 0===O?void 0:O.image)||N.images[m]||N.images[0]),A=(()=>{const e=(null===O||void 0===O?void 0:O.image)||N.images[0]||"",t=[];e&&t.push(Li(e));let n=[];return"economy"===u?n=["/TheHappyCase/images/SmartCase/economycaseinside.jpg","/TheHappyCase/images/SmartCase/economycaseclosure.jpg","/TheHappyCase/images/SmartCase/economycaseclosureinside.jpg"]:"business"===u?n=["/TheHappyCase/images/BusinessClassCase/businessclass.png","/TheHappyCase/images/BusinessClassCase/businessclass1.png"]:"firstclass"===u&&(n=["/TheHappyCase/images/FirstClassCase/firstclass.jpg","/TheHappyCase/images/FirstClassCase/firstclass1.png","/TheHappyCase/images/FirstClassCase/firstclass2.png"]),n.forEach(e=>{e&&t.push(Li(e))}),t.length>0?t:e?[Li(e)]:[]})();return(0,Lt.jsx)("div",{className:"min-h-screen bg-white",children:(0,Lt.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,Lt.jsxs)("div",{className:"text-center mb-12",children:[(0,Lt.jsx)("h1",{className:"text-title text-gray-900 tracking-title mb-1 md:mb-2",children:"PASSPORT CASES"}),(0,Lt.jsx)("div",{className:"w-16 sm:w-20 md:w-24 h-px bg-gray-200 mx-auto mb-4"})]}),(0,Lt.jsx)("div",{className:"flex justify-center mb-12 overflow-x-auto -mx-4 px-6 md:mx-0 md:px-0",children:(0,Lt.jsx)("div",{className:"flex gap-2 flex-nowrap",children:k.cases.map(e=>{const t=T(e.type);return(0,Lt.jsx)("button",{onClick:()=>(e=>{if(T(e))return;d(e),p(0),y(null),w(1),n({filter:{economy:"economy",business:"business",firstclass:"firstclass"}[e]||"economy"});const t=j().cases.find(t=>t.type===e);if(t&&t.colors.length>0){const n=t.colors.find(t=>{const n={caseType:e,color:t.color},r=xi(n,i);return null===r||r>0})||t.colors[0];f(n.color)}})(e.type),disabled:t,className:"px-3 sm:px-6 py-2.5 sm:py-3 text-xs uppercase tracking-wider transition-all duration-200 relative whitespace-nowrap flex-shrink-0 ".concat(u===e.type?"border-b-2 border-blue-700 text-white bg-blue-600 font-medium":"border-b-2 border-transparent text-white hover:text-white hover:border-blue-300 hover:bg-blue-500 bg-blue-400"," ").concat(t?"opacity-60 cursor-not-allowed":""," font-inter"),children:(0,Lt.jsxs)("span",{className:"flex items-center gap-1 sm:gap-2",children:[E(e.type),t&&(0,Lt.jsx)("span",{className:"text-[8px] sm:text-[10px] text-red-300 font-semibold bg-red-900 px-1 sm:px-1.5 py-0.5 rounded",children:"SOLD OUT"})]})},e.type)})})}),(0,Lt.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-12 mb-16",children:[(0,Lt.jsxs)("div",{className:"",children:[(0,Lt.jsx)("div",{className:"text-center mb-6"}),(0,Lt.jsx)("div",{className:"relative group",children:(0,Lt.jsxs)("div",{className:"relative overflow-hidden ".concat(_()?"pointer-events-none cursor-not-allowed":""),onClick:e=>{if(_())return e.preventDefault(),e.stopPropagation(),!1},children:[(0,Lt.jsx)("img",{src:Li(D),alt:"".concat(N.name," - View ").concat(m+1),className:"w-full h-[300px] lg:h-[400px] xl:h-[500px] object-contain transition-opacity duration-200 ".concat(_()?"opacity-50 pointer-events-none cursor-not-allowed":""),loading:"eager",fetchPriority:"high",decoding:"async",width:"500",height:"500",onClick:e=>{if(_())return e.preventDefault(),e.stopPropagation(),!1},onError:e=>{e.target.style.display="none",e.target.nextSibling&&(e.target.nextSibling.style.display="flex")}}),(0,Lt.jsx)("div",{className:"hidden w-full h-[300px] lg:h-[400px] xl:h-[500px] items-center justify-center text-gray-400 bg-gray-50",children:(0,Lt.jsx)("div",{className:"text-center",children:(0,Lt.jsx)("p",{className:"text-gray-500 font-inter",children:"Image not available"})})}),_()&&(0,Lt.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-60 flex items-center justify-center z-20 pointer-events-none",children:(0,Lt.jsx)("span",{className:"text-white text-2xl font-medium uppercase tracking-wider font-inter",children:"Sold Out"})})]})}),(0,Lt.jsx)("div",{className:"mt-3",children:(0,Lt.jsx)("div",{className:"grid grid-cols-5 sm:grid-cols-4 lg:grid-cols-7  gap-2",children:A.map((e,t)=>(0,Lt.jsxs)("button",{onClick:()=>(e=>{_()||y(e)})(e),disabled:_(),className:"relative aspect-square overflow-hidden bg-gray-50 border transition-all duration-200 max-w-[80px] mx-auto ".concat(g===e||!g&&0===t&&D===e?"border-gray-900 ring-2 ring-gray-300":"border-gray-200 hover:border-gray-400"," ").concat(_()?"opacity-50 cursor-not-allowed":""),children:[(0,Lt.jsx)("img",{src:Li(e),alt:"".concat(N.name," - Detail ").concat(t+1),className:"w-full h-full object-contain",loading:"lazy",fetchPriority:"low",decoding:"async",width:"80",height:"80",onError:e=>{e.target.style.display="none",e.target.nextSibling&&(e.target.nextSibling.style.display="flex")}}),(0,Lt.jsx)("div",{className:"hidden w-full h-full items-center justify-center text-gray-300",children:(0,Lt.jsx)("span",{className:"text-2xl",children:"\ud83d\udcf7"})})]},t))})})]}),(0,Lt.jsxs)("div",{className:"space-y-4 sm:space-y-6 md:space-y-8  flex flex-col justify-between",children:[(0,Lt.jsxs)("div",{className:"border-b border-gray-100  pb-2 sm:pb-3 mt-3",children:[(0,Lt.jsx)("h3",{className:"text-sm uppercase tracking-wider text-gray-900 mt-6 mb-6 font-medium font-inter",children:"Colours Available"}),(0,Lt.jsx)("div",{className:"grid grid-cols-6 sm:grid-cols-7 md:grid-cols-8 gap-2 sm:gap-1.5 md:gap-2",children:N.colors.map((e,t)=>{const n=(e=>{if(!N||!e)return!1;const t=xi({caseType:u,color:e},i);return null!==t&&0===t})(e.color),r=P(e.image);return(0,Lt.jsxs)("div",{className:"flex flex-col items-center sm:gap-1",children:[(0,Lt.jsx)("button",{onClick:()=>{n||(e=>{var t;const n=null===N||void 0===N||null===(t=N.colors)||void 0===t?void 0:t.find(t=>t.color===e);void 0!==(null===n||void 0===n?void 0:n.quantity)&&0===n.quantity||(f(e),p(0),y(null),w(1))})(e.color)},disabled:n,className:"w-9 h-9 sm:w-8 sm:h-8 rounded-full border-2 transition-all duration-200 relative ".concat(h===e.color?"border-gray-900 ring-2 ring-gray-300 scale-110":"border-gray-200 hover:border-gray-400"," ").concat(n?"opacity-50 cursor-not-allowed":""),style:{backgroundColor:e.color},title:n?"Sold Out":r||"Color ".concat(t+1)}),n?(0,Lt.jsx)("span",{className:"text-[9px] text-red-600 font-medium text-center",children:"Sold Out"}):r&&(0,Lt.jsx)("span",{className:"text-[10px] sm:text-[9px] text-gray-700 font-medium text-center mt-0.5 font-inter leading-tight",children:r})]},t)})})]}),N.specifications&&(0,Lt.jsxs)("div",{className:"border-b border-gray-100 pb-8 ",children:[(0,Lt.jsxs)("button",{onClick:()=>b(!x),className:"w-full flex items-center justify-between py-2 text-sm uppercase tracking-wider text-gray-900 font-medium hover:text-gray-700 transition-colors font-inter",children:[(0,Lt.jsx)("span",{children:"Specifications"}),(0,Lt.jsx)(Ca,{icon:x?za:$a,className:"text-xs transition-transform duration-200"})]}),x&&(0,Lt.jsxs)("div",{className:"flex flex-col gap-3 mt-4",children:[N.specifications.dimensions&&(0,Lt.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-50",children:[(0,Lt.jsx)("span",{className:"text-sm text-gray-500 font-inter",children:"Dimensions"}),(0,Lt.jsx)("span",{className:"text-sm text-gray-900 font-inter",children:N.specifications.dimensions})]}),N.specifications.weight&&(0,Lt.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-50",children:[(0,Lt.jsx)("span",{className:"text-sm text-gray-500 font-inter",children:"Weight"}),(0,Lt.jsx)("span",{className:"text-sm text-gray-900 font-inter",children:N.specifications.weight})]}),N.specifications.material&&(0,Lt.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-50",children:[(0,Lt.jsx)("span",{className:"text-sm text-gray-500 font-inter",children:"Material"}),(0,Lt.jsx)("span",{className:"text-sm text-gray-900 font-inter",children:N.specifications.material})]}),N.specifications.closure&&(0,Lt.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-50",children:[(0,Lt.jsx)("span",{className:"text-sm text-gray-500 font-inter",children:"Closure"}),(0,Lt.jsx)("span",{className:"text-sm text-gray-900 font-inter",children:N.specifications.closure})]}),N.specifications.cardSlots&&(0,Lt.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-50",children:[(0,Lt.jsx)("span",{className:"text-sm text-gray-500 font-inter",children:"Card Slots"}),(0,Lt.jsx)("span",{className:"text-sm text-gray-900 font-inter",children:N.specifications.cardSlots})]}),N.specifications.interior&&(0,Lt.jsxs)("div",{className:"flex justify-between items-start py-2 border-b border-gray-50",children:[(0,Lt.jsx)("span",{className:"text-sm text-gray-500 font-inter",children:"Interior"}),(0,Lt.jsx)("span",{className:"text-sm text-gray-900 text-right font-inter",children:N.specifications.interior})]}),N.specifications.rfid&&(0,Lt.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-50",children:[(0,Lt.jsx)("span",{className:"text-sm text-gray-500 font-inter",children:"RFID Protection"}),(0,Lt.jsx)("span",{className:"text-sm text-gray-900 font-inter",children:N.specifications.rfid})]}),N.specifications.features&&(0,Lt.jsxs)("div",{className:"flex justify-between items-start py-2 border-b border-gray-50",children:[(0,Lt.jsx)("span",{className:"text-sm text-gray-500 font-inter",children:"Features"}),(0,Lt.jsx)("span",{className:"text-sm text-gray-900 text-right font-inter",children:N.specifications.features})]}),N.specifications.passportCapacity&&(0,Lt.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-50",children:[(0,Lt.jsx)("span",{className:"text-sm text-gray-500 font-inter",children:"Capacity"}),(0,Lt.jsx)("span",{className:"text-sm text-gray-900 font-inter",children:N.specifications.passportCapacity})]}),N.specifications.care&&(0,Lt.jsxs)("div",{className:"flex justify-between items-start py-2 border-b border-gray-50",children:[(0,Lt.jsx)("span",{className:"text-sm text-gray-500 font-inter",children:"Care Instructions"}),(0,Lt.jsx)("span",{className:"text-sm text-gray-900 text-right font-inter",children:N.specifications.care})]}),N.specifications.warranty&&(0,Lt.jsxs)("div",{className:"flex justify-between items-center py-2",children:[(0,Lt.jsx)("span",{className:"text-sm text-gray-500 font-inter",children:"Warranty"}),(0,Lt.jsx)("span",{className:"text-sm text-gray-900 font-inter",children:N.specifications.warranty})]})]})]}),N.specifications&&(0,Lt.jsx)("div",{className:"",children:(0,Lt.jsxs)("div",{className:"flex flex-wrap items-center gap-4 sm:gap-6",children:[N.specifications.rfid&&"yes"===N.specifications.rfid.toLowerCase()&&(0,Lt.jsxs)("p",{className:"text-sm text-gray-900 font-inter flex items-center gap-2",children:[(0,Lt.jsx)(Ca,{icon:Ua,className:"text-blue-600"}),(0,Lt.jsx)("span",{className:"font-bold",children:"RFID Protection"})]}),N.specifications.material&&(0,Lt.jsxs)("p",{className:"text-sm text-gray-900 font-inter flex items-center gap-2",children:[(0,Lt.jsx)(Ca,{icon:qa,className:"text-amber-600"}),(0,Lt.jsx)("span",{className:"font-bold",children:"Material:"})," ",N.specifications.material]})]})}),(0,Lt.jsx)("div",{className:" pb-4 sm:pb-6",children:(0,Lt.jsxs)("p",{className:"text-sm text-gray-900 font-inter flex items-center gap-2",children:[(0,Lt.jsx)(Ca,{icon:Xa,className:"text-gray-600"}),(0,Lt.jsx)("span",{children:"Standard UK Delivery 2-4 Days"})]})}),(0,Lt.jsxs)("div",{className:"space-y-3 sm:space-y-4 ",children:[(0,Lt.jsx)("div",{className:"flex items-baseline gap-2",children:(0,Lt.jsxs)("span",{className:"text-2xl font-light text-gray-900 font-inter",children:["\xa3",N.basePrice.toFixed(2)]})}),(0,Lt.jsxs)("div",{className:"flex flex-col gap-2 ",children:[(0,Lt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Lt.jsxs)("div",{className:"flex items-center border border-gray-200 rounded-sm h-[42px]",children:[(0,Lt.jsx)("button",{onClick:()=>{v>1&&(w(v-1),S(""))},disabled:v<=1,className:"h-full px-3 flex items-center justify-center text-gray-600 hover:text-gray-900 transition-colors disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Decrease quantity",children:(0,Lt.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Lt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20 12H4"})})}),(0,Lt.jsx)("span",{className:"text-sm font-medium text-gray-900 text-center font-inter min-w-[2.5rem] px-3 b flex items-center justify-center h-full",children:v}),(0,Lt.jsx)("button",{onClick:()=>{if(_())return;const e=xi({caseType:u,color:h},i);if(null===e||e>v)w(v+1),S("");else{var t;const e=j().cases.find(e=>e.type===u),n=(null===e||void 0===e?void 0:e.name)||E(u),r=null===e||void 0===e||null===(t=e.colors)||void 0===t?void 0:t.find(e=>e.color===h),s=null!==r&&void 0!==r&&r.image?P(r.image):"",a=s?" in ".concat(s):"";S("We don't have any more ".concat(n).concat(a," in stock to be added anymore."))}},className:"h-full px-3 flex items-center justify-center text-gray-600 hover:text-gray-900 transition-colors","aria-label":"Increase quantity",children:(0,Lt.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Lt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 4v16m8-8H4"})})})]}),(0,Lt.jsx)("div",{className:"flex-1",children:(0,Lt.jsx)(vg,{product:{name:(null===N||void 0===N?void 0:N.name)||"Passport Case",caseType:u,caseName:(null===N||void 0===N?void 0:N.name)||"Passport Case",color:h,basePrice:(null===N||void 0===N?void 0:N.basePrice)||0,casePrice:(null===N||void 0===N?void 0:N.basePrice)||0,totalPrice:(null===N||void 0===N?void 0:N.basePrice)||0,price:(null===N||void 0===N?void 0:N.basePrice)||0,image:D,caseImage:D,quantity:v},disabled:_(),onAdd:e=>{if(_())return;const t=c(c({},e),{},{quantity:v}),n=c(c({},t),{},{id:"case-".concat(u,"-").concat(h,"-").concat(Date.now())});console.log("\ud83d\udcbc PassportCases page - Adding case to cart:",{caseName:e.caseName||e.name,caseType:e.caseType,color:e.color,quantity:v,product:n}),a(n)},className:"bg-btn-success hover:bg-btn-success-hover text-btn-success-text border border-btn-success-border hover:border-btn-success-hover transition-all duration-200"})})]}),C&&(0,Lt.jsx)("p",{className:"text-sm text-red-600 font-inter ml-1",children:C})]}),(0,Lt.jsx)("button",{onClick:()=>{window.scrollTo({top:0,behavior:"instant"}),r("/CreateYours?case=".concat(u,"&color=").concat(h))},className:"w-full py-3 text-sm uppercase tracking-wider font-inter bg-btn-primary-blue hover:bg-btn-primary-blue-hover text-btn-primary-blue-text border border-btn-primary-blue-border hover:border-btn-primary-blue-hover transition-all duration-200",children:"PERSONALIZE"})]})]})]})]})})},lx=e=>{let{charmTypes:t,selectedType:n,onTypeChange:r}=e;return(0,Lt.jsx)("div",{className:"flex justify-center mb-6 overflow-x-auto -mx-4 px-6 md:mx-0 md:px-0",children:(0,Lt.jsx)("div",{className:"flex gap-2 border-b border-gray-200 flex-nowrap justify-center",children:t.map(e=>{let{value:t,label:s}=e;return(0,Lt.jsx)("button",{onClick:()=>r(t),className:"px-6 py-3 text-xs uppercase tracking-wider transition-all duration-200 font-inter ".concat(n===t?"border-b-2 border-blue-700 text-white bg-blue-600 font-medium":"border-b-2 border-transparent text-white hover:text-white hover:border-blue-300 hover:bg-blue-500 bg-blue-400"),children:s},t)})})})},cx=e=>{let{categories:t,selectedCategory:n,onCategoryChange:r}=e;return t&&0!==t.length?(0,Lt.jsx)("div",{className:"flex justify-center mb-6",children:(0,Lt.jsx)("div",{className:"flex gap-1 border-b border-gray-200 flex-wrap justify-center",children:t.map(e=>{let{key:t,label:s}=e;return(0,Lt.jsx)("button",{onClick:()=>r(t),className:"px-4 py-2 text-[10px] uppercase tracking-wider transition-all duration-200 font-inter ".concat(n===t?"border-b-2 border-blue-700 text-gray-900 font-medium":"border-b-2 border-transparent text-gray-500 hover:text-gray-900 hover:border-gray-300"),children:s},t)})})}):null},ux=e=>{let{charm:t,index:n,onAddToCart:r,charmType:s,cart:a,charmPrice:i}=e;const o={name:t.name,price:i,totalPrice:i,image:t.src,pin:t,category:s,type:"charm"},l=xi(o,a),c=null!==l&&0===l;return(0,Lt.jsx)(Gy,{charm:t,index:n,onAddToCart:r,isSoldOut:c,charmPrice:i})},dx=e=>{let{currentPage:t,totalPages:n,onPageChange:r}=e;return n<=1?null:(0,Lt.jsx)("div",{className:"flex justify-center items-center gap-1 mb-12",children:Array.from({length:n},(e,t)=>t+1).map(e=>(0,Lt.jsx)("button",{onClick:()=>r(e),className:"px-3 py-1 text-xs transition-all duration-200 font-inter ".concat(t===e?"border-b-2 border-gray-900 text-gray-900 font-medium":"border-b-2 border-transparent text-gray-400 hover:text-gray-700 hover:border-gray-300"),"aria-label":"Go to page ".concat(e),children:e},e))})},hx=(e,t)=>void 0!==e.price&&null!==e.price?e.price:"bronze"===t?1.5:2,fx=e=>e||"colorful",mx=e=>{if(!e)return"Charm";let t=e;return t=t.replace(/\s*-\s*(Flag|Colorful Charm|Bronze Charm)$/i,""),t=t.replace(/\s+Flag$/i,""),t.trim()},px=[{value:"colorful",label:"Colorful Charms"},{value:"bronze",label:"Bronze Charms"},{value:"flags",label:"Flags Collection"}],gx=[{key:"all",label:"ALL"},{key:"europe",label:"EUROPE"},{key:"americas",label:"AMERICAS"},{key:"africa",label:"AFRICA"},{key:"asia",label:"ASIA"},{key:"special",label:"SPECIAL"}],yx=[{key:"all",label:"ALL"},{key:"travel",label:"TRAVEL"},{key:"animals",label:"ANIMALS"},{key:"love",label:"LOVE"},{key:"nature",label:"NATURE"},{key:"symbols",label:"SYMBOLS"}],xx=[{key:"all",label:"ALL"},{key:"travel",label:"TRAVEL"},{key:"disney",label:"DISNEY"},{key:"drinks",label:"DRINKS"},{key:"inspiration",label:"INSPIRATION"},{key:"hearts",label:"HEARTS"},{key:"nature",label:"NATURE"},{key:"camera",label:"CAMERA"}],bx={colorful:"colorful",bronze:"bronze",flags:"flags",flag:"flags"},vx=()=>{const[t,n]=Ot(),r=t.get("filter"),{addToCart:s,cart:a}=ji(),i=r&&bx[r.toLowerCase()]?bx[r.toLowerCase()]:"colorful",[o,l]=(0,e.useState)(i),[u,d]=(0,e.useState)(""),[h,f]=(0,e.useState)("all"),[m,p]=(0,e.useState)("all"),[g,y]=(0,e.useState)("all"),[x,b]=(0,e.useState)(1),[v,w]=(0,e.useState)(1),[C,S]=(0,e.useState)(1),[j,k]=(0,e.useState)(!1),[N,_]=(0,e.useState)(""),[T,E]=(0,e.useState)("error"),P=(0,e.useCallback)(()=>{const e=(()=>{const e=localStorage.getItem("productQuantities");if(!e)return ui;try{const o=JSON.parse(e),l=c({},ui);var t,n,r,s,a,i;return o.pins&&(l.pins=c(c({},l.pins),{},{flags:(null===(t=l.pins)||void 0===t||null===(n=t.flags)||void 0===n?void 0:n.map((e,t)=>{var n;return c(c({},e),{},{quantity:void 0!==(null===(n=o.pins.flags)||void 0===n?void 0:n[t])?o.pins.flags[t]:e.quantity})}))||[],colorful:(null===(r=l.pins)||void 0===r||null===(s=r.colorful)||void 0===s?void 0:s.map((e,t)=>{var n;return c(c({},e),{},{quantity:void 0!==(null===(n=o.pins.colorful)||void 0===n?void 0:n[t])?o.pins.colorful[t]:e.quantity})}))||[],bronze:(null===(a=l.pins)||void 0===a||null===(i=a.bronze)||void 0===i?void 0:i.map((e,t)=>{var n;return c(c({},e),{},{quantity:void 0!==(null===(n=o.pins.bronze)||void 0===n?void 0:n[t])?o.pins.bronze[t]:e.quantity})}))||[]})),l}catch(o){return console.error("Error loading saved quantities:",o),ui}})();return"colorful"===o?e.pins.colorful||[]:"bronze"===o?e.pins.bronze||[]:"flags"===o&&e.pins.flags||[]},[o]),O=(0,e.useMemo)(()=>{let e=P();u&&(e=e.filter(e=>e.name.toLowerCase().includes(u.toLowerCase())));const t="flags"===o?h:"bronze"===o?m:g;return"all"!==t&&(e=yg(e,o,t)),e},[P,u,o,h,m,g]),D=(0,e.useCallback)(()=>"bronze"===o?x:"colorful"===o?v:"flags"===o?C:1,[o,x,v,C]),A=(0,e.useCallback)(e=>{"bronze"===o&&b(e),"colorful"===o&&w(e),"flags"===o&&S(e)},[o]),M=D(),L=Math.ceil(O.length/20),z=(0,e.useMemo)(()=>{const e=20*(M-1),t=e+20;return O.slice(e,t)},[O,M]);(0,e.useEffect)(()=>{if(r&&bx[r.toLowerCase()]){const e=bx[r.toLowerCase()];l(e)}},[r]);const F=(0,e.useCallback)(e=>{l(e),f("all"),p("all"),y("all"),b(1),w(1),S(1),n({filter:e})},[n]),R=(0,e.useCallback)(e=>{const t={id:"charm-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),name:mx(e.name),price:hx(e,o),totalPrice:hx(e,o),image:e.src,pin:e,category:fx(o),type:"charm"},n=xi(t,a);if(null!==n&&0===n){const t=e.name||"this charm",n="Oops! We don't have any more ".concat(t," in stock right now, so you can't add more to your basket.");return _(n),E("error"),void k(!0)}console.log("\ud83d\udccc Charms page - Adding charm to cart:",{charmName:e.name,charmSrc:e.src,category:fx(o),product:t}),s(t)},[o,a,s]),I=(0,e.useCallback)(e=>{"flags"===o?(f(e),S(1)):"bronze"===o?(p(e),b(1)):"colorful"===o&&(y(e),w(1))},[o]),B=(0,e.useCallback)(()=>{d(""),"flags"===o?(f("all"),S(1)):"bronze"===o?(p("all"),b(1)):"colorful"===o&&(y("all"),w(1))},[o]);return(0,Lt.jsxs)("div",{className:"min-h-screen bg-white",children:[(0,Lt.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,Lt.jsxs)("div",{className:"text-center mb-8 sm:mb-12",children:[(0,Lt.jsx)("h1",{className:"text-title text-gray-900 tracking-title mb-1 md:mb-2",children:"CHARMS"}),(0,Lt.jsx)("div",{className:"w-16 sm:w-20 md:w-24 h-px bg-gray-200 mx-auto mb-3 sm:mb-4"}),(0,Lt.jsxs)("p",{className:"text-sm text-gray-500 max-w-2xl mx-auto font-light px-4 font-inter",children:[(0,Lt.jsx)(Nt,{to:"/CreateYours",className:"text-gray-900 hover:text-gray-700 underline transition-colors",children:"Create"})," your custom case with charms pre-glued, or buy the case and charms separately and enjoy gluing them yourself."]})]}),(0,Lt.jsxs)("div",{className:"pb-6",children:[(0,Lt.jsx)(lx,{charmTypes:px,selectedType:o,onTypeChange:F}),(0,Lt.jsx)(cx,{categories:"flags"===o?gx:"bronze"===o?yx:"colorful"===o?xx:[],selectedCategory:"flags"===o?h:"bronze"===o?m:"colorful"===o?g:"all",onCategoryChange:I})]}),(0,Lt.jsxs)("div",{className:"mb-8 flex items-center justify-between gap-4",children:[(0,Lt.jsx)(qy,{searchTerm:u,setSearchTerm:d,placeholder:"Search charms..."}),(0,Lt.jsx)(Qy,{count:O.length,currentPage:M,totalPages:L})]}),O.length>0?(0,Lt.jsxs)(Lt.Fragment,{children:[(0,Lt.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4 md:gap-6 mb-12 min-h-[400px] sm:min-h-[600px]",children:z.map((e,t)=>(0,Lt.jsx)(ux,{charm:e,index:t,onAddToCart:R,charmType:o,cart:a,charmPrice:hx(e,o)},t))}),(0,Lt.jsx)(dx,{currentPage:M,totalPages:L,onPageChange:A})]}):(0,Lt.jsx)($y,{message:"No charms found",onClearFilters:B})]}),(0,Lt.jsx)(Zy,{show:j,onClose:()=>{k(!1),_("")},message:N,type:T})]})},wx=()=>{const t=ve();return(0,e.useEffect)(()=>{window.scrollTo(0,0)},[t.pathname]),(0,Lt.jsx)("div",{className:"min-h-screen bg-white",children:(0,Lt.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,Lt.jsxs)("div",{className:"text-center mb-12",children:[(0,Lt.jsx)("h1",{className:"text-title text-gray-900 tracking-title mb-1 md:mb-2",children:"REFUND POLICY"}),(0,Lt.jsx)("div",{className:"w-16 sm:w-20 md:w-24 h-px bg-gray-200 mx-auto mb-4"})]}),(0,Lt.jsx)("div",{className:"max-w-4xl mx-auto px-6 py-16",children:(0,Lt.jsx)("div",{className:"bg-white rounded-lg  p-8 md:p-12",children:(0,Lt.jsx)("div",{className:"prose prose-lg max-w-none",children:(0,Lt.jsxs)("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-6 mb-8 rounded",children:[(0,Lt.jsxs)("p",{className:"text-gray-700 text-body-lg leading-relaxed mb-4 font-inter",children:[(0,Lt.jsx)("strong",{children:"No returns or refunds."})," We only offer returns/refunds if there has been a fault on our end. This is due to our stock being made-to-order."]}),(0,Lt.jsx)("p",{className:"text-gray-700 text-body-lg leading-relaxed font-inter",children:"Thanks for understanding!"})]})})})})]})})},Cx=()=>(0,Lt.jsx)("div",{className:"min-h-screen bg-white py-12 md:py-16",children:(0,Lt.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,Lt.jsxs)("div",{className:"text-center mb-12 md:mb-16",children:[(0,Lt.jsx)("h1",{className:"text-title md:text-title-lg font-light text-gray-900 mb-2 font-inter tracking-title",children:"Shipping and Processing Times"}),(0,Lt.jsx)("div",{className:"w-16 h-px bg-gray-300 mx-auto mb-8"})]}),(0,Lt.jsxs)("div",{className:"max-w-3xl mx-auto space-y-6",children:[(0,Lt.jsxs)("div",{className:"bg-blue-50 rounded-lg p-6 md:p-8 border border-blue-100",children:[(0,Lt.jsx)("h2",{className:"text-heading-sm md:text-heading font-light text-gray-900 mb-4 font-inter",children:"Processing Time"}),(0,Lt.jsxs)("p",{className:"text-body-sm text-gray-700 leading-relaxed font-inter",children:["All our products are made-to-order, which means we create them especially for you after you place your order. Please allow ",(0,Lt.jsx)("strong",{children:"2-3 business days"})," for processing before your order ships."]})]}),(0,Lt.jsxs)("div",{className:"bg-yellow-50 rounded-lg p-6 md:p-8 border border-yellow-100",children:[(0,Lt.jsx)("h2",{className:"text-heading-sm md:text-heading font-light text-gray-900 mb-4 font-inter",children:"Shipping Times"}),(0,Lt.jsx)("p",{className:"text-sm text-gray-700 leading-relaxed mb-4 font-inter",children:"Once your order has been processed and shipped, delivery times vary by location:"}),(0,Lt.jsxs)("ul",{className:"list-disc list-inside text-sm text-gray-700 leading-relaxed space-y-2 ml-4 mb-4 font-inter",children:[(0,Lt.jsxs)("li",{children:[(0,Lt.jsx)("strong",{children:"UK:"})," 2-3 business days"]}),(0,Lt.jsxs)("li",{children:[(0,Lt.jsx)("strong",{children:"Europe:"})," 5-10 business days"]}),(0,Lt.jsxs)("li",{children:[(0,Lt.jsx)("strong",{children:"USA & Canada:"})," 7-14 business days"]}),(0,Lt.jsxs)("li",{children:[(0,Lt.jsx)("strong",{children:"Rest of World:"})," 10-21 business days"]})]}),(0,Lt.jsxs)("p",{className:"text-sm text-gray-700 leading-relaxed mt-4 font-inter",children:[(0,Lt.jsx)("strong",{children:"Please note:"})," Unfortunately, delivery delays can happen due to the carrier. While we do our best to ensure timely delivery, factors beyond our control such as weather, customs processing, or carrier issues may cause delays. We appreciate your patience and understanding."]})]}),(0,Lt.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6 md:p-8 border border-gray-100 mb-32",children:[(0,Lt.jsx)("h2",{className:"text-heading-sm md:text-heading font-light text-gray-900 mb-4 font-inter",children:"Tracking Your Order"}),(0,Lt.jsx)("p",{className:"text-body-sm text-gray-700 leading-relaxed font-inter",children:"Once your order ships, you'll receive a tracking number via email so you can follow your package's journey to your door."})]})]})]})}),Sx=()=>((0,e.useEffect)(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]),(0,Lt.jsx)("div",{className:"min-h-screen bg-white py-12 md:py-16",children:(0,Lt.jsxs)("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,Lt.jsxs)("div",{className:"text-center mb-12 md:mb-16",children:[(0,Lt.jsx)("h1",{className:"text-title md:text-title-lg font-light text-gray-900 mb-2 font-inter tracking-title",children:"About Me"}),(0,Lt.jsx)("div",{className:"w-16 h-px bg-gray-300 mx-auto mb-8"}),(0,Lt.jsx)("div",{className:"w-full max-w-xs mx-auto mb-12",children:(0,Lt.jsx)("div",{className:"aspect-square w-full rounded-full overflow-hidden",children:(0,Lt.jsx)("img",{src:"/TheHappyCase/images/raphaela.jpg",alt:"Raphaela",className:"w-full h-full object-cover",loading:"lazy"})})})]}),(0,Lt.jsx)("div",{className:"max-w-3xl mx-auto",children:(0,Lt.jsxs)("div",{className:"space-y-8 text-gray-700 leading-relaxed font-inter",children:[(0,Lt.jsxs)("div",{className:"flex gap-4 items-start",children:[(0,Lt.jsx)("div",{className:"flex-shrink-0 mt-1",children:(0,Lt.jsx)("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Lt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})})}),(0,Lt.jsx)("p",{className:"text-body md:text-body-lg font-light flex-1",children:"As a dreamer, travel lover, and creative soul, I started making passport cases because I wanted something that could travel the world with me \u2014 in style and keeping my documents safe. I loved the idea of protecting my most important papers with designs that actually tell my story\u2026 and apparently everyone around me loved it too!"})]}),(0,Lt.jsxs)("div",{className:"flex gap-4 items-start",children:[(0,Lt.jsx)("div",{className:"flex-shrink-0 mt-1",children:(0,Lt.jsx)("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Lt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 8v13m0-13V6a2 2 0 112 2h-2zm0 0V5.5A2.5 2.5 0 109.5 8H12zm-7 4h14M5 12a2 2 0 110-4h14a2 2 0 110 4M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"})})}),(0,Lt.jsx)("p",{className:"text-body md:text-body-lg font-light flex-1",children:"What began as a little personal project quickly turned into birthday gifts for friends \u2014 and before I knew it, I had opened an Etsy shop."})]}),(0,Lt.jsxs)("div",{className:"flex gap-4 items-start",children:[(0,Lt.jsx)("div",{className:"flex-shrink-0 mt-1",children:(0,Lt.jsx)("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Lt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,Lt.jsx)("p",{className:"text-body md:text-body-lg font-light flex-1",children:"And now here I am, dreaming of the day when people everywhere will carry these cases on their adventures. Nothing makes me happier than knowing I'm part of someone's journey, even in a small way."})]}),(0,Lt.jsxs)("div",{className:"flex gap-4 items-start",children:[(0,Lt.jsx)("div",{className:"flex-shrink-0 mt-1",children:(0,Lt.jsxs)("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,Lt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,Lt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),(0,Lt.jsx)("p",{className:"text-body md:text-body-lg font-light flex-1",children:"I'm originally from Brazil and have been living in the UK for a few years now. A fun twist? I'm also a Frontend Developer \u2014 yep, I built this website myself!"})]}),(0,Lt.jsxs)("div",{className:"flex gap-4 items-start",children:[(0,Lt.jsx)("div",{className:"flex-shrink-0 mt-1",children:(0,Lt.jsx)("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Lt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})}),(0,Lt.jsxs)("div",{className:"flex-1 space-y-4",children:[(0,Lt.jsx)("p",{className:"text-base md:text-lg font-light",children:"I hope your experience here feels fun, smooth, and inspiring."}),(0,Lt.jsx)("p",{className:"text-base md:text-lg font-light text-gray-900",children:"Happy travels, and may your passport collect many stories! \ud83c\udf0d\u2728"})]})]})]})})]})})),jx=()=>{const t=Se(),n=ve(),[r,s]=(0,e.useState)(""),[a,i]=(0,e.useState)(""),[o,l]=(0,e.useState)(window.innerWidth<768),[c,u]=(0,e.useState)(()=>{var e;if(null!==(e=n.state)&&void 0!==e&&e.caseType)return n.state.caseType;try{const e=localStorage.getItem("canvasState");if(e){return JSON.parse(e).caseType||"economy"}}catch(oo){}return"economy"}),[d,h]=(0,e.useState)(()=>{var e;if(null!==(e=n.state)&&void 0!==e&&e.caseColor)return n.state.caseColor;try{const e=localStorage.getItem("canvasState");if(e){return JSON.parse(e).caseColor||""}}catch(oo){}return""});(0,e.useEffect)(()=>{var e,r;if((null===(e=n.state)||void 0===e||!e.caseType)&&(null===(r=n.state)||void 0===r||!r.caseColor))try{if(!localStorage.getItem("canvasState"))return void t("/CreateYours",{replace:!0})}catch(oo){return void t("/CreateYours",{replace:!0})}},[n.state,t]),(0,e.useEffect)(()=>{var e,t;null!==(e=n.state)&&void 0!==e&&e.caseType&&u(n.state.caseType),null!==(t=n.state)&&void 0!==t&&t.caseColor&&h(n.state.caseColor)},[n.state]),(0,e.useEffect)(()=>{const e=()=>{l(window.innerWidth<768)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,e.useEffect)(()=>{var e;null!==(e=n.state)&&void 0!==e&&e.text&&s(n.state.text)},[n.state]);return(0,Lt.jsxs)("div",{className:"min-h-screen bg-white relative overflow-hidden",style:{width:"100vw",maxWidth:"100vw",overflowX:"hidden"},children:[o&&c&&d&&(0,Lt.jsx)("div",{className:"",children:(0,Lt.jsx)("div",{className:"w-full  ",children:(0,Lt.jsx)("div",{className:"w-full ",children:(0,Lt.jsx)(Kp,{selectedCaseType:c,selectedColor:d,selectedPins:[],onPinSelect:()=>{},onPinRemove:()=>{},products:ui})})})}),(0,Lt.jsxs)("div",{className:"max-w-md mx-auto px-4 pt-0 pb-20",children:[(0,Lt.jsxs)("div",{className:"mb-8",children:[(0,Lt.jsxs)("button",{onClick:()=>{t("/CreateYours")},className:"mb-4 flex items-center text-gray-600 hover:text-gray-900 transition-colors font-inter",children:[(0,Lt.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Lt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]}),(0,Lt.jsx)("h1",{className:"text-subtitle font-light text-gray-900 mb-2 font-inter tracking-title",children:"Add Text"}),(0,Lt.jsx)("div",{className:"w-16 h-px bg-gray-300"})]}),(0,Lt.jsxs)("div",{className:"space-y-6",children:[(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("label",{className:"block text-sm text-gray-700 mb-2 font-inter",children:"Enter your text"}),(0,Lt.jsx)("input",{type:"text",value:r,onChange:e=>{s(e.target.value),i("")},placeholder:"e.g. Your name",className:"w-full px-4 py-3 border border-gray-200 rounded-sm focus:outline-none focus:border-gray-400 bg-white text-gray-900 placeholder-gray-400 font-thin text-base font-inter",maxLength:Jp,autoFocus:!0}),(0,Lt.jsxs)("p",{className:"mt-2 text-caption text-gray-500 font-inter",children:["Up to ",Jp," characters. Double-click the text on the case to edit or move it."]})]}),a&&(0,Lt.jsx)("div",{className:"text-sm text-red-600 border border-red-200 bg-red-50 px-4 py-3 rounded",children:a}),(0,Lt.jsxs)("div",{className:"flex flex-row gap-3",children:[(0,Lt.jsx)("button",{onClick:()=>{r.trim()?("undefined"!==typeof window&&window.addTextToCanvas&&(window.addTextToCanvas(r.trim(),{fill:$p,fontSize:28}),window.saveCanvasState&&setTimeout(()=>{window.saveCanvasState()},300)),t("/CreateYours",{state:{caseType:c,caseColor:d}})):i("Please enter the text you want to add.")},className:"flex-1 px-6 py-3 text-sm uppercase tracking-wider font-inter bg-btn-primary hover:bg-btn-primary-hover text-btn-primary-text border border-btn-primary-border hover:border-btn-primary-hover transition-all duration-200",children:"Add Text"}),(0,Lt.jsx)("button",{onClick:()=>{s(""),i("")},className:"px-6 py-3 text-sm uppercase tracking-wider text-gray-600 hover:text-gray-900 border border-gray-200 hover:border-gray-400 transition-colors font-inter",children:"Clear"})]})]})]})]})},kx=()=>{const[t,n]=(0,e.useState)("inventory"),[r,s]=(0,e.useState)(ui),[a,i]=(0,e.useState)(!1),[o,l]=(0,e.useState)([]),[u,d]=(0,e.useState)(!1),[h,f]=(0,e.useState)(null),[m,p]=(0,e.useState)(!0),[g,y]=(0,e.useState)(null),x=(e,t)=>{t.cases&&(e.cases=e.cases.map((e,n)=>{var r;const s=c(c({},e),{},{quantity:void 0!==t.cases[n]&&null!==t.cases[n]?t.cases[n]:e.quantity});return null!==(r=t.caseColors)&&void 0!==r&&r[n]&&(s.colors=s.colors.map((e,r)=>c(c({},e),{},{quantity:void 0!==t.caseColors[n][r]&&null!==t.caseColors[n][r]?t.caseColors[n][r]:e.quantity}))),s})),t.pins&&["flags","colorful","bronze"].forEach(n=>{t.pins[n]&&(e.pins[n]=e.pins[n].map((e,r)=>c(c({},e),{},{quantity:void 0!==t.pins[n][r]&&null!==t.pins[n][r]?t.pins[n][r]:e.quantity})))})};(0,e.useEffect)(()=>{(async()=>{p(!0),console.log("\ud83d\udce5 Dashboard: Loading inventory from Supabase...");try{const e=await fetch(mi("/api/inventory")),t=e.headers.get("content-type");if(t&&t.includes("text/html"))throw console.warn("\u26a0\ufe0f Dashboard: Received HTML response instead of JSON. Backend server may not be running or proxy not configured correctly."),console.warn("\u26a0\ufe0f Dashboard: Make sure backend server is running: npm run server"),console.warn("\u26a0\ufe0f Dashboard: Falling back to localStorage cache"),new Error("Backend server returned HTML (likely 404). Is the server running on port 3001?");if(e.ok){const t=await e.json();if(t.success&&t.inventory){const e={cases:t.inventory.cases,caseColors:t.inventory.caseColors,pins:t.inventory.pins};localStorage.setItem("productQuantities",JSON.stringify(e)),localStorage.setItem("productQuantitiesTimestamp",Date.now().toString());const n=structuredClone(ui);return x(n,e),s(n),y("supabase"),console.log("\u2705 Dashboard: Inventory loaded from Supabase inventory_items table"),console.log("\u2705 Dashboard: All saved quantities are now displayed"),console.log("\ud83d\udcbe Dashboard: Data source: Supabase (persisted, will be available after deployment)"),void p(!1)}}else{console.warn("\u26a0\ufe0f Dashboard: Supabase API returned non-OK response:",e.status);try{const t=await e.json();console.warn("\u26a0\ufe0f Dashboard: Error details:",t)}catch(oo){console.warn("\u26a0\ufe0f Dashboard: Non-JSON error response received")}}}catch(t){console.warn("\u26a0\ufe0f Dashboard: Failed to load from Supabase:",t.message),console.warn("\u26a0\ufe0f Dashboard: Falling back to localStorage cache")}const e=localStorage.getItem("productQuantities");if(e)try{const t=JSON.parse(e),n=structuredClone(ui);return x(n,t),s(n),y("localStorage"),console.log("\u26a0\ufe0f Dashboard: Using cached data from localStorage (Supabase unavailable)"),void p(!1)}catch(n){console.error("\u274c Dashboard: Error parsing localStorage data:",n)}s(ui),y("default"),console.log("\u26a0\ufe0f Dashboard: Using default quantities from products.json (no saved data found)"),p(!1)})()},[]),(0,e.useEffect)(()=>{"orders"===t&&b()},[t]);const b=async()=>{d(!0),f(null);try{const e=await fetch(mi("/get-orders?limit=100")),t=await e.json();t.success?l(t.orders||[]):f(t.error||"Failed to fetch orders")}catch(e){f("Failed to fetch orders.")}finally{d(!1)}},v=function(e,t,n,a){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;const l=structuredClone(r);"case"===e&&(null!==o?l.cases[t].colors[o].quantity=parseInt(a)||0:l.cases[t].quantity=parseInt(a)||0),"charm"===e&&(l.pins[n][t].quantity=parseInt(a)||0),s(l),i(!1)};return(0,Lt.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,Lt.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,Lt.jsx)("h1",{className:"text-3xl font-light mb-6 font-inter",children:"Dashboard"}),(0,Lt.jsxs)("div",{className:"mb-6 border-b",children:[(0,Lt.jsx)("button",{onClick:()=>n("inventory"),className:"mr-6 pb-2 ".concat("inventory"===t?"border-b-2 border-black":"text-gray-400"),children:"Inventory"}),(0,Lt.jsx)("button",{onClick:()=>n("orders"),className:"pb-2 ".concat("orders"===t?"border-b-2 border-black":"text-gray-400"),children:"Orders"})]}),"inventory"===t&&(0,Lt.jsxs)(Lt.Fragment,{children:[g&&(0,Lt.jsxs)("div",{className:"mb-4 p-3 rounded-sm text-sm font-inter ".concat("supabase"===g?"bg-green-50 border border-green-200 text-green-800":"localStorage"===g?"bg-yellow-50 border border-yellow-200 text-yellow-800":"bg-gray-50 border border-gray-200 text-gray-800"),children:["supabase"===g&&(0,Lt.jsxs)("span",{children:["\u2705 ",(0,Lt.jsx)("strong",{children:"Loaded from Supabase:"})," All saved inventory quantities are displayed. Data is persisted and will be available after deployment."]}),"localStorage"===g&&(0,Lt.jsxs)("span",{children:["\u26a0\ufe0f ",(0,Lt.jsx)("strong",{children:"Using cached data:"})," Supabase unavailable. Showing cached quantities from localStorage."]}),"default"===g&&(0,Lt.jsxs)("span",{children:["\u2139\ufe0f ",(0,Lt.jsx)("strong",{children:"Using default quantities:"}),' No saved data found. Set quantities and click "Save Changes" to persist to Supabase.']})]}),m&&(0,Lt.jsx)("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 text-blue-800 rounded-sm text-sm font-inter",children:(0,Lt.jsx)("span",{children:"\u23f3 Loading inventory from Supabase..."})}),(0,Lt.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Lt.jsx)("button",{onClick:async()=>{p(!0),y(null);try{const e=await fetch(mi("/api/inventory"));if(e.ok){const t=await e.json();if(t.success&&t.inventory){const e={cases:t.inventory.cases,caseColors:t.inventory.caseColors,pins:t.inventory.pins},n=structuredClone(ui);x(n,e),s(n),y("supabase"),console.log("\u2705 Refreshed: Inventory reloaded from Supabase")}}}catch(e){console.error("Failed to refresh from Supabase:",e)}finally{p(!1)}},disabled:m,className:"font-inter px-4 py-2 uppercase text-xs bg-gray-100 text-gray-700 hover:bg-gray-200 disabled:opacity-50",children:m?"Refreshing...":"\ud83d\udd04 Refresh from Supabase"}),(0,Lt.jsx)("button",{onClick:async()=>{const e={cases:r.cases.map(e=>{var t;return null!==(t=e.quantity)&&void 0!==t?t:null}),caseColors:r.cases.map(e=>{var t;return null===(t=e.colors)||void 0===t?void 0:t.map(e=>{var t;return null!==(t=e.quantity)&&void 0!==t?t:null})}),pins:{flags:r.pins.flags.map(e=>{var t;return null!==(t=e.quantity)&&void 0!==t?t:null}),colorful:r.pins.colorful.map(e=>{var t;return null!==(t=e.quantity)&&void 0!==t?t:null}),bronze:r.pins.bronze.map(e=>{var t;return null!==(t=e.quantity)&&void 0!==t?t:null})}};try{const t=await fetch(mi("/api/inventory"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),n=t.headers.get("content-type");if(!n||!n.includes("application/json")){const e=null!==n&&void 0!==n&&n.includes("text/html")?"Backend server returned HTML (likely 404). Make sure the backend server is running on port 3001 (npm run server) and the proxy is configured correctly.":"Server returned non-JSON response (".concat(n,"). Make sure the backend server is running on port 3001.");throw console.error("\u274c Error saving inventory:",e),new Error(e)}if(t.ok){const n=await t.json();if(console.log("\u2705 Inventory saved to Supabase:",n),console.log("\ud83d\udcca Saved ".concat(n.updatedCount||0," items to inventory_items table")),console.log("\ud83d\udcbe All inventory data is now persisted in Supabase and will be available after deployment"),n.success&&n.updatedCount>0){console.log("\u2705 Verification: Inventory successfully saved to Supabase database"),console.log("\u2705 This data will persist after deployment");const t={cases:e.cases,caseColors:e.caseColors,pins:e.pins},n=structuredClone(ui);x(n,t),s(n),y("supabase")}localStorage.setItem("productQuantities",JSON.stringify(e)),localStorage.setItem("productQuantitiesTimestamp",Date.now().toString()),i(!0),setTimeout(()=>i(!1),3e3)}else{let n="Unknown error";try{const e=await t.json();n=e.error||e.message||"Unknown error"}catch(oo){n="HTTP ".concat(t.status,": ").concat(t.statusText)}console.error("Failed to save inventory to Supabase:",n),alert("Failed to save to Supabase: ".concat(n,". Falling back to localStorage.")),localStorage.setItem("productQuantities",JSON.stringify(e)),localStorage.setItem("productQuantitiesTimestamp",Date.now().toString()),i(!0),setTimeout(()=>i(!1),2e3)}}catch(t){console.error("Error saving inventory to Supabase:",t);const n=t.message||"Unknown error",r=n.includes("HTML")||n.includes("404")?"Error: Backend server not reachable.\n\nTroubleshooting steps:\n1. Check if backend server is running: npm run server\n2. Verify server is on port 3001\n3. Restart React dev server if you just configured proxy\n4. Check setupProxy.js is in src/ directory\n\nFalling back to localStorage for now.":"Error saving to Supabase: ".concat(n,"\n\nFalling back to localStorage.");alert(r),localStorage.setItem("productQuantities",JSON.stringify(e)),localStorage.setItem("productQuantitiesTimestamp",Date.now().toString()),i(!0),setTimeout(()=>i(!1),2e3)}},disabled:m,className:"font-inter px-6 py-2 uppercase text-sm ".concat(a?"bg-green-600 text-white":m?"bg-gray-400 text-white cursor-not-allowed":"bg-black text-white hover:bg-gray-800"),children:m?"Loading...":a?"\u2713 Saved to Supabase":"Save Changes to Supabase"})]}),(0,Lt.jsxs)("div",{className:"bg-white border p-6 rounded-sm",children:[(0,Lt.jsx)("h2",{className:"text-xl mb-6 font-inter",children:"Passport Cases"}),r.cases.map((e,t)=>{var n;const r=void 0!==e.quantity?e.quantity:null,s=0===r,a=null!==r&&r>0&&r<=5,i=null!==r&&r>5,o=null===r||void 0===r;return(0,Lt.jsxs)("div",{className:"mb-8 border border-gray-200 rounded-sm p-6",children:[(0,Lt.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Lt.jsx)("h3",{className:"text-lg font-medium text-gray-900 font-inter",children:e.name}),(0,Lt.jsxs)("div",{className:"flex items-center gap-2",children:[!o&&(0,Lt.jsx)("div",{children:s?(0,Lt.jsx)("div",{className:"bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center shadow-lg",children:(0,Lt.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Lt.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}):a?(0,Lt.jsx)("div",{className:"bg-orange-500 text-white rounded-full w-6 h-6 flex items-center justify-center shadow-lg",children:(0,Lt.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Lt.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}):i?(0,Lt.jsx)("div",{className:"bg-green-500 text-white rounded-full w-6 h-6 flex items-center justify-center shadow-lg",children:(0,Lt.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Lt.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}):null}),s&&(0,Lt.jsx)("span",{className:"text-xs text-red-600 font-medium",children:"SOLD OUT"})]})]}),(0,Lt.jsxs)("div",{className:"mb-6 pb-4 border-b border-gray-100",children:[(0,Lt.jsx)("label",{className:"text-sm text-gray-600 font-medium mb-2 block font-inter",children:"Overall Quantity (Optional):"}),(0,Lt.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Lt.jsx)("input",{type:"number",min:"0",value:null!==(n=e.quantity)&&void 0!==n?n:"",onChange:e=>v("case",t,null,e.target.value),className:"w-24 px-3 py-2 border border-gray-300 rounded-sm text-sm focus:outline-none focus:border-gray-400 font-inter",placeholder:"0"}),s&&(0,Lt.jsx)("div",{className:"p-2 bg-red-50 border border-red-200 rounded-sm",children:(0,Lt.jsx)("p",{className:"text-xs text-red-700 font-medium font-inter",children:"OUT OF STOCK"})}),a&&(0,Lt.jsx)("div",{className:"p-2 bg-orange-50 border border-orange-200 rounded-sm",children:(0,Lt.jsxs)("p",{className:"text-xs text-orange-700 font-medium font-inter",children:["LOW STOCK (",r,")"]})}),i&&(0,Lt.jsx)("div",{className:"p-2 bg-green-50 border border-green-200 rounded-sm",children:(0,Lt.jsxs)("p",{className:"text-xs text-green-700 font-medium font-inter",children:["IN STOCK (",r,")"]})}),o&&(0,Lt.jsx)("div",{className:"p-2 bg-gray-50 border border-gray-200 rounded-sm",children:(0,Lt.jsx)("p",{className:"text-xs text-gray-600 font-medium font-inter",children:"UNLIMITED"})})]})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-4 font-inter",children:"Quantity per Color:"}),(0,Lt.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4",children:e.colors.map((e,n)=>{var r;const s=void 0!==e.quantity?e.quantity:null,a=0===s,i=null!==s&&s>0&&s<=5,o=null!==s&&s>5,l=null===s||void 0===s;return(0,Lt.jsxs)("div",{className:"flex flex-col items-center gap-2 p-3 border border-gray-200 rounded-sm hover:border-gray-300 transition-colors relative",children:[!l&&(0,Lt.jsx)("div",{className:"absolute -top-1 -right-1 z-10",children:a?(0,Lt.jsx)("div",{className:"bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center shadow-lg",children:(0,Lt.jsx)("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Lt.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}):i?(0,Lt.jsx)("div",{className:"bg-orange-500 text-white rounded-full w-5 h-5 flex items-center justify-center shadow-lg",children:(0,Lt.jsx)("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Lt.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}):o?(0,Lt.jsx)("div",{className:"bg-green-500 text-white rounded-full w-5 h-5 flex items-center justify-center shadow-lg",children:(0,Lt.jsx)("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Lt.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}):null}),(0,Lt.jsx)("div",{className:"w-12 h-12 rounded-full border-2 border-gray-300 shadow-sm",style:{backgroundColor:e.color},title:e.color}),e.name&&(0,Lt.jsx)("span",{className:"text-xs text-gray-600 text-center font-inter",children:e.name}),(0,Lt.jsxs)("div",{className:"w-full flex flex-col items-center gap-1",children:[(0,Lt.jsx)("label",{className:"text-xs text-gray-500 font-inter",children:"Qty:"}),(0,Lt.jsx)("input",{type:"number",min:"0",value:null!==(r=e.quantity)&&void 0!==r?r:"",onChange:e=>v("case",t,null,e.target.value,n),className:"w-full px-2 py-1 border border-gray-300 rounded-sm text-xs text-center focus:outline-none focus:border-gray-400 font-inter",placeholder:"0"})]}),a&&(0,Lt.jsx)("div",{className:"mt-1 p-1.5 bg-red-50 border border-red-200 rounded-sm w-full",children:(0,Lt.jsx)("p",{className:"text-[10px] text-red-700 font-medium font-inter text-center",children:"OUT OF STOCK"})}),i&&(0,Lt.jsx)("div",{className:"mt-1 p-1.5 bg-orange-50 border border-orange-200 rounded-sm w-full",children:(0,Lt.jsxs)("p",{className:"text-[10px] text-orange-700 font-medium font-inter text-center",children:["LOW STOCK (",s,")"]})}),o&&(0,Lt.jsx)("div",{className:"mt-1 p-1.5 bg-green-50 border border-green-200 rounded-sm w-full",children:(0,Lt.jsxs)("p",{className:"text-[10px] text-green-700 font-medium font-inter text-center",children:["IN STOCK (",s,")"]})}),l&&(0,Lt.jsx)("div",{className:"mt-1 p-1.5 bg-gray-50 border border-gray-200 rounded-sm w-full",children:(0,Lt.jsx)("p",{className:"text-[10px] text-gray-600 font-medium font-inter text-center",children:"UNLIMITED"})})]},n)})})]})]},t)})]}),(0,Lt.jsxs)("div",{className:"bg-white border p-6 rounded-sm mt-8",children:[(0,Lt.jsx)("h2",{className:"text-xl mb-6 font-inter",children:"Charms"}),(0,Lt.jsxs)("div",{className:"mb-8",children:[(0,Lt.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4 font-inter",children:"Flags"}),(0,Lt.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4",children:r.pins.flags.map((e,t)=>{var n;const r=void 0!==e.quantity?e.quantity:null,s=0===r,a=null!==r&&r>0&&r<=5,i=null!==r&&r>5,o=null===r||void 0===r;return(0,Lt.jsxs)("div",{className:"flex flex-col items-center gap-2 p-3 border border-gray-200 rounded-sm hover:border-gray-300 transition-colors relative",children:[!o&&(0,Lt.jsx)("div",{className:"absolute -top-1 -right-1 z-10",children:s?(0,Lt.jsx)("div",{className:"bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center shadow-lg",children:(0,Lt.jsx)("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Lt.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}):a?(0,Lt.jsx)("div",{className:"bg-orange-500 text-white rounded-full w-5 h-5 flex items-center justify-center shadow-lg",children:(0,Lt.jsx)("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Lt.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}):i?(0,Lt.jsx)("div",{className:"bg-green-500 text-white rounded-full w-5 h-5 flex items-center justify-center shadow-lg",children:(0,Lt.jsx)("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Lt.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}):null}),e.image&&(0,Lt.jsx)("div",{className:"w-16 h-16 flex items-center justify-center border border-gray-200 rounded-sm bg-white",children:(0,Lt.jsx)("img",{src:e.image,alt:e.name,className:"max-w-full max-h-full object-contain"})}),(0,Lt.jsx)("span",{className:"text-xs text-gray-700 text-center font-inter font-medium",children:e.name}),(0,Lt.jsxs)("div",{className:"w-full flex flex-col items-center gap-1",children:[(0,Lt.jsx)("label",{className:"text-xs text-gray-500 font-inter",children:"Qty:"}),(0,Lt.jsx)("input",{type:"number",min:"0",value:null!==(n=e.quantity)&&void 0!==n?n:"",onChange:e=>v("charm",t,"flags",e.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded-sm text-xs text-center focus:outline-none focus:border-gray-400 font-inter",placeholder:"0"})]}),s&&(0,Lt.jsx)("div",{className:"mt-1 p-1.5 bg-red-50 border border-red-200 rounded-sm w-full",children:(0,Lt.jsx)("p",{className:"text-[10px] text-red-700 font-medium font-inter text-center",children:"OUT OF STOCK"})}),a&&(0,Lt.jsx)("div",{className:"mt-1 p-1.5 bg-orange-50 border border-orange-200 rounded-sm w-full",children:(0,Lt.jsxs)("p",{className:"text-[10px] text-orange-700 font-medium font-inter text-center",children:["LOW STOCK (",r,")"]})}),i&&(0,Lt.jsx)("div",{className:"mt-1 p-1.5 bg-green-50 border border-green-200 rounded-sm w-full",children:(0,Lt.jsxs)("p",{className:"text-[10px] text-green-700 font-medium font-inter text-center",children:["IN STOCK (",r,")"]})}),o&&(0,Lt.jsx)("div",{className:"mt-1 p-1.5 bg-gray-50 border border-gray-200 rounded-sm w-full",children:(0,Lt.jsx)("p",{className:"text-[10px] text-gray-600 font-medium font-inter text-center",children:"UNLIMITED"})})]},t)})})]}),(0,Lt.jsxs)("div",{className:"mb-8",children:[(0,Lt.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4 font-inter",children:"Colorful Charms"}),(0,Lt.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4",children:r.pins.colorful.map((e,t)=>{var n;const r=void 0!==e.quantity?e.quantity:null,s=0===r,a=null!==r&&r>0&&r<=5,i=null!==r&&r>5,o=null===r||void 0===r;return(0,Lt.jsxs)("div",{className:"flex flex-col items-center gap-2 p-3 border border-gray-200 rounded-sm hover:border-gray-300 transition-colors relative",children:[!o&&(0,Lt.jsx)("div",{className:"absolute -top-1 -right-1 z-10",children:s?(0,Lt.jsx)("div",{className:"bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center shadow-lg",children:(0,Lt.jsx)("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Lt.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}):a?(0,Lt.jsx)("div",{className:"bg-orange-500 text-white rounded-full w-5 h-5 flex items-center justify-center shadow-lg",children:(0,Lt.jsx)("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Lt.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}):i?(0,Lt.jsx)("div",{className:"bg-green-500 text-white rounded-full w-5 h-5 flex items-center justify-center shadow-lg",children:(0,Lt.jsx)("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Lt.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}):null}),e.image&&(0,Lt.jsx)("div",{className:"w-16 h-16 flex items-center justify-center border border-gray-200 rounded-sm bg-white",children:(0,Lt.jsx)("img",{src:e.image,alt:e.name,className:"max-w-full max-h-full object-contain"})}),(0,Lt.jsx)("span",{className:"text-xs text-gray-700 text-center font-inter font-medium",children:e.name}),(0,Lt.jsxs)("div",{className:"w-full flex flex-col items-center gap-1",children:[(0,Lt.jsx)("label",{className:"text-xs text-gray-500 font-inter",children:"Qty:"}),(0,Lt.jsx)("input",{type:"number",min:"0",value:null!==(n=e.quantity)&&void 0!==n?n:"",onChange:e=>v("charm",t,"colorful",e.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded-sm text-xs text-center focus:outline-none focus:border-gray-400 font-inter",placeholder:"0"})]}),s&&(0,Lt.jsx)("div",{className:"mt-1 p-1.5 bg-red-50 border border-red-200 rounded-sm w-full",children:(0,Lt.jsx)("p",{className:"text-[10px] text-red-700 font-medium font-inter text-center",children:"OUT OF STOCK"})}),a&&(0,Lt.jsx)("div",{className:"mt-1 p-1.5 bg-orange-50 border border-orange-200 rounded-sm w-full",children:(0,Lt.jsxs)("p",{className:"text-[10px] text-orange-700 font-medium font-inter text-center",children:["LOW STOCK (",r,")"]})}),i&&(0,Lt.jsx)("div",{className:"mt-1 p-1.5 bg-green-50 border border-green-200 rounded-sm w-full",children:(0,Lt.jsxs)("p",{className:"text-[10px] text-green-700 font-medium font-inter text-center",children:["IN STOCK (",r,")"]})}),o&&(0,Lt.jsx)("div",{className:"mt-1 p-1.5 bg-gray-50 border border-gray-200 rounded-sm w-full",children:(0,Lt.jsx)("p",{className:"text-[10px] text-gray-600 font-medium font-inter text-center",children:"UNLIMITED"})})]},t)})})]}),(0,Lt.jsxs)("div",{children:[(0,Lt.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4 font-inter",children:"Bronze Charms"}),(0,Lt.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4",children:r.pins.bronze.map((e,t)=>{var n;const r=void 0!==e.quantity?e.quantity:null,s=0===r,a=null!==r&&r>0&&r<=5,i=null!==r&&r>5,o=null===r||void 0===r;return(0,Lt.jsxs)("div",{className:"flex flex-col items-center gap-2 p-3 border border-gray-200 rounded-sm hover:border-gray-300 transition-colors relative",children:[!o&&(0,Lt.jsx)("div",{className:"absolute -top-1 -right-1 z-10",children:s?(0,Lt.jsx)("div",{className:"bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center shadow-lg",children:(0,Lt.jsx)("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Lt.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}):a?(0,Lt.jsx)("div",{className:"bg-orange-500 text-white rounded-full w-5 h-5 flex items-center justify-center shadow-lg",children:(0,Lt.jsx)("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Lt.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}):i?(0,Lt.jsx)("div",{className:"bg-green-500 text-white rounded-full w-5 h-5 flex items-center justify-center shadow-lg",children:(0,Lt.jsx)("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Lt.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}):null}),e.image&&(0,Lt.jsx)("div",{className:"w-16 h-16 flex items-center justify-center border border-gray-200 rounded-sm bg-white",children:(0,Lt.jsx)("img",{src:e.image,alt:e.name,className:"max-w-full max-h-full object-contain"})}),(0,Lt.jsx)("span",{className:"text-xs text-gray-700 text-center font-inter font-medium",children:e.name}),(0,Lt.jsxs)("div",{className:"w-full flex flex-col items-center gap-1",children:[(0,Lt.jsx)("label",{className:"text-xs text-gray-500 font-inter",children:"Qty:"}),(0,Lt.jsx)("input",{type:"number",min:"0",value:null!==(n=e.quantity)&&void 0!==n?n:"",onChange:e=>v("charm",t,"bronze",e.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded-sm text-xs text-center focus:outline-none focus:border-gray-400 font-inter",placeholder:"0"})]}),s&&(0,Lt.jsx)("div",{className:"mt-1 p-1.5 bg-red-50 border border-red-200 rounded-sm w-full",children:(0,Lt.jsx)("p",{className:"text-[10px] text-red-700 font-medium font-inter text-center",children:"OUT OF STOCK"})}),a&&(0,Lt.jsx)("div",{className:"mt-1 p-1.5 bg-orange-50 border border-orange-200 rounded-sm w-full",children:(0,Lt.jsxs)("p",{className:"text-[10px] text-orange-700 font-medium font-inter text-center",children:["LOW STOCK (",r,")"]})}),i&&(0,Lt.jsx)("div",{className:"mt-1 p-1.5 bg-green-50 border border-green-200 rounded-sm w-full",children:(0,Lt.jsxs)("p",{className:"text-[10px] text-green-700 font-medium font-inter text-center",children:["IN STOCK (",r,")"]})}),o&&(0,Lt.jsx)("div",{className:"mt-1 p-1.5 bg-gray-50 border border-gray-200 rounded-sm w-full",children:(0,Lt.jsx)("p",{className:"text-[10px] text-gray-600 font-medium font-inter text-center",children:"UNLIMITED"})})]},t)})})]})]})]}),"orders"===t&&(0,Lt.jsxs)("div",{className:"bg-white border p-6",children:[u&&(0,Lt.jsx)("p",{children:"Loading..."}),h&&(0,Lt.jsx)("p",{className:"text-red-600",children:h}),!u&&!h&&0===o.length&&(0,Lt.jsx)("p",{children:"No orders found."}),!u&&o.map(e=>(0,Lt.jsx)("div",{className:"border-b py-4",children:(0,Lt.jsx)("p",{children:e.customer_email})},e.id))]})]})})};function Nx(){const e=ve(),t="/"===e.pathname,n="/checkout"===e.pathname,r="/CreateYours"===e.pathname||"/AddText"===e.pathname,s="/checkout"===e.pathname||"/AddText"===e.pathname,a="/CreateYours"===e.pathname;return(0,Lt.jsxs)("div",{className:"App bg-white min-h-screen",children:[!n&&(0,Lt.jsx)("header",{className:"App-header ".concat(r?"hidden md:block":""),style:{background:"white"},children:(0,Lt.jsx)(Ei,{isHomePage:t})}),(0,Lt.jsx)("main",{children:(0,Lt.jsxs)(Ye,{children:[(0,Lt.jsx)(We,{path:"/",element:(0,Lt.jsxs)(Lt.Fragment,{children:[(0,Lt.jsx)(Di,{}),(0,Lt.jsx)(Hi,{}),(0,Lt.jsx)(Ii,{}),(0,Lt.jsx)(Gi,{})]})}),(0,Lt.jsx)(We,{path:"/CreateYours",element:(0,Lt.jsx)(kg,{})}),(0,Lt.jsx)(We,{path:"/DesignIdeas",element:(0,Lt.jsx)(Ng,{})}),(0,Lt.jsx)(We,{path:"/cart",element:(0,Lt.jsx)(Rg,{})}),(0,Lt.jsx)(We,{path:"/checkout",element:(0,Lt.jsx)(Uy,{})}),(0,Lt.jsx)(We,{path:"/payment-success",element:(0,Lt.jsx)(Yy,{})}),(0,Lt.jsx)(We,{path:"/Flags",element:(0,Lt.jsx)(sx,{})}),(0,Lt.jsx)(We,{path:"/ColorfulCharms",element:(0,Lt.jsx)(ax,{})}),(0,Lt.jsx)(We,{path:"/BronzeCharms",element:(0,Lt.jsx)(ix,{})}),(0,Lt.jsx)(We,{path:"/PassportCases",element:(0,Lt.jsx)(ox,{})}),(0,Lt.jsx)(We,{path:"/Charms",element:(0,Lt.jsx)(vx,{})}),(0,Lt.jsx)(We,{path:"/AddText",element:(0,Lt.jsx)(jx,{})}),(0,Lt.jsx)(We,{path:"/dashboard",element:(0,Lt.jsx)(kx,{})}),(0,Lt.jsx)(We,{path:"/returns",element:(0,Lt.jsx)(wx,{})}),(0,Lt.jsx)(We,{path:"/refund-policy",element:(0,Lt.jsx)(wx,{})}),(0,Lt.jsx)(We,{path:"/shipping",element:(0,Lt.jsx)(Cx,{})}),(0,Lt.jsx)(We,{path:"/about",element:(0,Lt.jsx)(Sx,{})})]})}),!s&&(0,Lt.jsx)("div",{className:a?"hidden md:block":"",children:(0,Lt.jsx)(Ki,{})}),(0,Lt.jsx)(ao,{})]})}const _x=function(){return(0,Lt.jsx)(Bt,{children:(0,Lt.jsx)(Si,{children:(0,Lt.jsx)(jt,{children:(0,Lt.jsx)(Nx,{})})})})},Tx=e=>{e&&e instanceof Function&&n.e(488).then(n.bind(n,488)).then(t=>{let{getCLS:n,getFID:r,getFCP:s,getLCP:a,getTTFB:i}=t;n(e),r(e),s(e),a(e),i(e)})};r.createRoot(document.getElementById("root")).render((0,Lt.jsx)(e.StrictMode,{children:(0,Lt.jsx)(_x,{})})),Tx()})()})();
//# sourceMappingURL=main.50052e99.js.map