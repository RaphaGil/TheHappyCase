var xe=Object.defineProperty,ue=Object.defineProperties;var he=Object.getOwnPropertyDescriptors;var te=Object.getOwnPropertySymbols;var ge=Object.prototype.hasOwnProperty,fe=Object.prototype.propertyIsEnumerable;var se=(t,s,r)=>s in t?xe(t,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[s]=r,T=(t,s)=>{for(var r in s||(s={}))ge.call(s,r)&&se(t,r,s[r]);if(te)for(var r of te(s))fe.call(s,r)&&se(t,r,s[r]);return t},_=(t,s)=>ue(t,he(s));var U=(t,s,r)=>new Promise((i,c)=>{var o=a=>{try{l(r.next(a))}catch(m){c(m)}},d=a=>{try{l(r.throw(a))}catch(m){c(m)}},l=a=>a.done?i(a.value):Promise.resolve(a.value).then(o,d);l((r=r.apply(t,s)).next())});import{j as e,L as A,u as Q,e as ye,r as h,P as pe,E as be,f as je,h as ve}from"./react-vendor-BwkbXqKG.js";import{l as Ne}from"./stripe-vendor-C-FvrBRD.js";import{a as H,u as ae}from"./index-CC-rt800.js";import{l as we,n as B,g as Ce}from"./shared-utils-DkooxM7j.js";import"./vendor-BupaDLyo.js";import"./fontawesome-vendor-BEuASCuQ.js";const ke=t=>U(void 0,null,function*(){var o;const{amount:s,currency:r="gbp",items:i,customerInfo:c}=t;if(!s||s<=0)throw new Error("Amount is required and must be greater than 0");if(!r)throw new Error("Currency is required");try{const d=we("/api/create-payment-intent");console.log("ðŸ“ž Calling backend to create payment intent:",d);const l=yield fetch(d,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:s,currency:r,items:i,customerInfo:c})});if(!l.ok){const m=yield l.text();throw console.error("âŒ Backend error response:",{status:l.status,statusText:l.statusText,body:m.substring(0,200)}),new Error(`Backend responded with ${l.status} ${l.statusText}: ${m.substring(0,100)}`)}const a=yield l.json();if(console.log("âœ… Backend response received:",{hasClientSecret:!!a.clientSecret,keys:Object.keys(a)}),!a.clientSecret)throw console.error("âŒ Backend response missing clientSecret:",a),new Error("Backend did not return a clientSecret");return console.log("âœ… Payment intent created successfully"),{client_secret:a.clientSecret}}catch(d){throw console.error("âŒ Failed to create payment intent via backend. Falling back to mock client secret.",d),console.error("Error details:",{message:d.message,name:d.name,stack:(o=d.stack)==null?void 0:o.substring(0,200)}),new Error(`Failed to create payment intent: ${d.message}. Please ensure your backend server is running on port 3001.`)}}),le=({className:t="",showOnDesktop:s=!1,showOnMobile:r=!1,title:i="Custom Duties & Import Fees",message:c="International orders may be subject to customs duties, taxes, and fees imposed by your country. These charges are the responsibility of the recipient and are not included in the order total.",variant:o="yellow"})=>{const d=s&&r?"":s?"hidden lg:block":r?"lg:hidden":"",l=o==="yellow"?"bg-yellow-50":"bg-gray-100",a=o==="yellow"?"border-yellow-200":"border-gray-200",m=o==="yellow"?"text-yellow-600":"text-gray-600",C=o==="yellow"?"text-yellow-800":"text-gray-800",j=o==="yellow"?"text-yellow-700":"text-gray-500";return e.jsx("div",{className:`${d} ${t}`,children:e.jsx("div",{className:`${l} border ${a} rounded-lg p-4`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`${m} text-xl flex-shrink-0`,children:"âš ï¸"}),e.jsxs("div",{className:"flex-1 font-inter",children:[e.jsx("h3",{className:`text-sm font-semibold ${C} mb-1`,children:i}),e.jsx("p",{className:`text-xs ${j} font-light leading-relaxed font-inter`,children:c})]})]})})})},re=()=>{const{getTotalQuantity:t}=H(),s=t();return e.jsx("div",{className:"border-b border-gray-200 bg-white",children:e.jsxs("div",{className:"max-w-6xl mx-auto flex items-center justify-between px-4 lg:px-6 py-5",children:[e.jsxs(A,{to:"/",className:"hover:opacity-90 transition-opacity duration-300","aria-label":"HappyCase home",children:[e.jsxs("div",{className:"flex flex-col cursor-pointer transition-all duration-300 text-gray-900 font-fredoka",children:[e.jsx("span",{className:"text-[10px] md:text-xs font-bold leading-tight tracking-[0.35em] text-blue-900 uppercase",children:"THE"}),e.jsx("span",{className:"text-xl md:text-3xl font-bold leading-none flex items-center gap-0 text-blue-900 uppercase",children:"HAPPY".split("").map((r,i)=>e.jsx("span",{className:"inline-block animate-smile-curve",style:{animationDelay:`${i*.1}s`,animationDuration:"2s"},children:r},i))}),e.jsx("span",{className:"text-end text-[10px] md:text-xs font-bold leading-tight tracking-[0.35em] text-blue-900 uppercase",children:"CASE"})]}),e.jsx("style",{children:`
            @keyframes smileCurve {
              0%, 100% {
                transform: translateY(0);
              }
              50% {
                transform: translateY(var(--curve-height));
              }
            }
            .animate-smile-curve {
              animation: smileCurve 2s ease-in-out infinite;
              display: inline-block;
            }
            .animate-smile-curve:nth-child(1) {
              --curve-height: 0px;
            }
            .animate-smile-curve:nth-child(2) {
              --curve-height: 4px;
            }
            .animate-smile-curve:nth-child(3) {
              --curve-height: 8px;
            }
            .animate-smile-curve:nth-child(4) {
              --curve-height: 4px;
            }
            .animate-smile-curve:nth-child(5) {
              --curve-height: 0px;
            }
          `})]}),e.jsxs(A,{to:"/cart",className:"relative flex items-center justify-center p-2 text-gray-900 hover:text-gray-700 transition-colors z-10","aria-label":"Go to cart",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 640",className:"w-6 h-6",fill:"currentColor",children:e.jsx("path",{d:"M8 64C3.6 64 0 67.6 0 72C0 76.4 3.6 80 8 80L53.7 80C65.1 80 75 88.1 77.2 99.4L136.6 402.8C141.7 429.1 164.8 448 191.6 448L488 448C492.4 448 496 444.4 496 440C496 435.6 492.4 432 488 432L191.5 432C172.4 432 155.9 418.5 152.2 399.7L142.9 352L461.2 352C494.7 352 523.7 328.9 531.3 296.4L566.6 145.1C572.5 120 553.4 96 527.7 96L92.8 96C89 77.4 72.7 64 53.7 64L8 64zM96 112L527.7 112C543.2 112 554.6 126.4 551.1 141.5L515.8 292.7C509.9 318 487.3 336 461.3 336L139.8 336L96 112zM176 528C176 510.3 190.3 496 208 496C225.7 496 240 510.3 240 528C240 545.7 225.7 560 208 560C190.3 560 176 545.7 176 528zM256 528C256 501.5 234.5 480 208 480C181.5 480 160 501.5 160 528C160 554.5 181.5 576 208 576C234.5 576 256 554.5 256 528zM432 496C449.7 496 464 510.3 464 528C464 545.7 449.7 560 432 560C414.3 560 400 545.7 400 528C400 510.3 414.3 496 432 496zM432 576C458.5 576 480 554.5 480 528C480 501.5 458.5 480 432 480C405.5 480 384 501.5 384 528C384 554.5 405.5 576 432 576z"})}),s>0&&e.jsx("span",{className:"absolute top-0 right-0 bg-gray-900 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-light",children:s})]})]})})},ne=()=>e.jsx("div",{className:"min-h-screen bg-white py-8",children:e.jsx("div",{className:"max-w-2xl mx-auto p-6 bg-white border border-gray-200",children:e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 font-light font-inter",children:"Loading checkout..."})]})})})}),Se=({show:t,onClose:s,onVerified:r,initialEmail:i=""})=>{const c=Q(),[o]=ye(),[d,l]=h.useState(i),[a,m]=h.useState(""),[C,j]=h.useState(i?"code":"email"),[N,f]=h.useState(!1),[p,n]=h.useState("");h.useEffect(()=>{t?i?(l(i),m(""),n(""),/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i)?(f(!0),setTimeout(()=>{f(!1);const w=new URLSearchParams;w.set("email",i);const E=o.get("client_id"),R=o.get("redirect_uri"),O=o.get("locale")||"en-GL";E&&w.set("client_id",E),R&&w.set("redirect_uri",R),w.set("locale",O),s(),c(`/authentication/code?${w.toString()}`)},1e3)):j("email")):(l(""),j("email"),m(""),n("")):(l(""),m(""),j("email"),n(""),f(!1))},[t,i,c,o,s]);const g=y=>U(void 0,null,function*(){if(y.preventDefault(),!d){n("Please enter your email address");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(d)){n("Please enter a valid email address");return}f(!0),n("");try{yield new Promise(F=>setTimeout(F,500));const E=new URLSearchParams;E.set("email",d);const R=o.get("client_id"),O=o.get("redirect_uri"),q=o.get("locale")||"en-GL";R&&E.set("client_id",R),O&&E.set("redirect_uri",O),q&&E.set("locale",q),s(),c(`/authentication/code?${E.toString()}`,{replace:!0})}catch(E){f(!1),n("Failed to send verification code. Please try again.")}}),v=y=>U(void 0,null,function*(){if(y.preventDefault(),!a||a.length!==6){n("Please enter the 6-digit code");return}f(!0),n(""),setTimeout(()=>{f(!1),a.length===6?(r(d),s()):n("Invalid code. Please try again.")},1e3)}),P=()=>{m(""),n(""),g({preventDefault:()=>{}})};return t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-[60] flex items-center justify-center p-4",onClick:s,children:e.jsxs("div",{className:"bg-white rounded-sm max-w-md w-full p-6 border border-gray-200 shadow-lg",onClick:y=>y.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 font-inter",children:"Sign In"}),e.jsx("button",{onClick:s,className:"p-2 hover:bg-gray-50 transition-colors rounded","aria-label":"Close modal",children:e.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M6 18L18 6M6 6l12 12"})})})]}),C==="email"&&e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-base text-gray-500 mb-1.5 font-light font-inter",children:"Email Address *"}),e.jsx("input",{type:"email",value:d,onChange:y=>{l(y.target.value),n("")},placeholder:"your.email@example.com",className:"w-full px-3 py-2 border border-gray-200 rounded-sm focus:outline-none focus:ring-2 focus:ring-yellow-100 focus:border-yellow-100 bg-white text-gray-900 placeholder-gray-400 font-light font-inter text-base",required:!0})]}),p&&e.jsx("div",{className:"text-sm text-red-600 font-inter",children:p}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:s,className:"flex-1 px-4 py-2 text-sm uppercase tracking-wider font-light font-inter border border-gray-300 text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:N,className:"flex-1 px-4 py-2 text-sm uppercase tracking-wider font-light font-inter bg-black text-white hover:bg-gray-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:N?"Sending...":"Send Code"})]})]}),C==="code"&&e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-600 font-light font-inter mb-4",children:["We've sent a 6-digit verification code to ",e.jsx("strong",{children:d}),". Please enter it below."]}),e.jsx("label",{className:"block text-base text-gray-500 mb-1.5 font-light font-inter",children:"Verification Code *"}),e.jsx("input",{type:"text",value:a,onChange:y=>{const w=y.target.value.replace(/\D/g,"").slice(0,6);m(w),n("")},placeholder:"000000",maxLength:6,autoFocus:!0,className:"w-full px-3 py-2 border border-gray-200 rounded-sm focus:outline-none focus:ring-2 focus:ring-yellow-100 focus:border-yellow-100 bg-white text-gray-900 placeholder-gray-400 font-light font-inter text-base text-center text-2xl tracking-widest",required:!0})]}),p&&e.jsx("div",{className:"text-sm text-red-600 font-inter",children:p}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("button",{type:"submit",disabled:N||a.length!==6,className:"w-full px-4 py-2 text-sm uppercase tracking-wider font-light font-inter bg-black text-white hover:bg-gray-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:N?"Verifying...":"Verify Code"}),e.jsx("button",{type:"button",onClick:P,disabled:N,className:"text-sm text-gray-600 hover:text-gray-900 font-light font-inter underline disabled:opacity-50",children:"Resend Code"}),e.jsx("button",{type:"button",onClick:()=>{j("email"),m(""),n("")},className:"text-sm text-gray-600 hover:text-gray-900 font-light font-inter",children:"â† Back to email"})]})]})]})}):null},Pe=({customerInfo:t,onInputChange:s,isAuthenticated:r,authenticatedEmail:i,onSignIn:c,onSignOut:o})=>{const[d,l]=h.useState(!1);return e.jsxs("div",{className:"space-y-4 ",children:[e.jsx("h3",{className:"text-md uppercase tracking-wider text-gray-900 mb-4 font-bold font-inter",children:"Contact"}),r?e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("label",{className:"block text-sm text-gray-500 font-light font-inter",children:"Email Address *"}),e.jsx("button",{type:"button",onClick:o,className:"text-xs text-gray-600 hover:text-gray-900 font-light font-inter underline",children:"Sign Out"})]}),e.jsx("div",{className:"w-full px-3 py-2 border border-gray-200 rounded-sm bg-gray-50 text-gray-900 font-light font-inter text-sm",children:i}),e.jsxs("p",{className:"mt-1 text-xs text-gray-500 font-light font-inter",children:["Signed in as ",i]})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("label",{className:"block text-sm text-gray-500 font-light font-inter",children:"Email Address *"}),e.jsx("button",{type:"button",onClick:()=>l(!0),className:"text-xs text-gray-600 hover:text-gray-900 font-light font-inter underline",children:"Sign In"})]}),e.jsx("input",{type:"email",name:"email",value:t.email,onChange:s,required:!0,placeholder:"your.email@example.com",className:"w-full px-3 py-2 border border-gray-200 rounded-sm focus:outline-none focus:ring-2 focus:ring-yellow-100 focus:border-yellow-100 bg-white text-gray-900 placeholder-gray-400 font-light font-inter text-sm"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 font-light font-inter",children:"We'll send your order confirmation to this email"})]}),e.jsx("h3",{className:"text-md uppercase tracking-wider text-gray-900 mb-4 font-bold font-inter",children:"Delivery"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-500 mb-1.5 font-light font-inter",children:"Name *"}),e.jsx("input",{type:"text",name:"name",value:t.name,onChange:s,required:!0,className:"w-full px-3 py-2 border border-gray-200 rounded-sm focus:outline-none focus:ring-2 focus:ring-yellow-100 focus:border-yellow-100 bg-white text-gray-900 placeholder-gray-400 font-light font-inter text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-500 mb-1.5 font-light font-inter",children:"Surname *"}),e.jsx("input",{type:"text",name:"surname",value:t.surname,onChange:s,required:!0,className:"w-full px-3 py-2 border border-gray-200 rounded-sm focus:outline-none focus:ring-2 focus:ring-yellow-100 focus:border-yellow-100 bg-white text-gray-900 placeholder-gray-400 font-light font-inter text-sm"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-500 mb-1.5 font-light font-inter",children:"Address Line 1 *"}),e.jsx("input",{type:"text",name:"address.line1",value:t.address.line1,onChange:s,required:!0,className:"w-full px-3 py-2 border border-gray-200 rounded-sm focus:outline-none focus:ring-2 focus:ring-yellow-100 focus:border-yellow-100 bg-white text-gray-900 placeholder-gray-400 font-light font-inter text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-500 mb-1.5 font-light font-inter",children:"Address Line 2"}),e.jsx("input",{type:"text",name:"address.line2",value:t.address.line2,onChange:s,className:"w-full px-3 py-2 border border-gray-200 rounded-sm focus:outline-none focus:ring-2 focus:ring-yellow-100 focus:border-yellow-100 bg-white text-gray-900 placeholder-gray-400 font-light font-inter text-base"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-500 mb-1.5 font-light font-inter",children:"City *"}),e.jsx("input",{type:"text",name:"address.city",value:t.address.city,onChange:s,required:!0,className:"w-full px-3 py-2 border border-gray-200 rounded-sm focus:outline-none focus:ring-2 focus:ring-yellow-100 focus:border-yellow-100 bg-white text-gray-900 placeholder-gray-400 font-light font-inter text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-500 mb-1.5 font-light font-inter",children:"Postal Code *"}),e.jsx("input",{type:"text",name:"address.postal_code",value:t.address.postal_code,onChange:s,required:!0,className:"w-full px-3 py-2 border border-gray-200 rounded-sm focus:outline-none focus:ring-2 focus:ring-yellow-100 focus:border-yellow-100 bg-white text-gray-900 placeholder-gray-400 font-light font-inter text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-500 mb-1.5 font-light font-inter",children:"Country *"}),e.jsxs("select",{name:"address.country",value:t.address.country,onChange:s,className:"w-full px-3 py-2 border border-gray-200 rounded-sm focus:outline-none focus:ring-2 focus:ring-yellow-100 focus:border-yellow-100 bg-white text-gray-900 font-light font-inter text-sm",children:[e.jsx("option",{value:"GB",children:"United Kingdom"}),e.jsx("option",{value:"US",children:"United States"}),e.jsx("option",{value:"CA",children:"Canada"}),e.jsx("option",{value:"AU",children:"Australia"}),e.jsx("option",{value:"DE",children:"Germany"}),e.jsx("option",{value:"FR",children:"France"}),e.jsx("option",{value:"ES",children:"Spain"}),e.jsx("option",{value:"IT",children:"Italy"})]})]})]}),e.jsx(Se,{show:d,onClose:()=>l(!1),initialEmail:t.email,onVerified:a=>{c(a),l(!1),s({target:{name:"email",value:a}})}})]})},Ee=({paymentElementReady:t,error:s,onPaymentReady:r})=>e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-md uppercase tracking-wider text-gray-900 mb-4 font-bold font-inter",children:"Payment"}),e.jsxs("div",{className:"p-4 border border-gray-200 rounded-sm bg-gray-50",children:[e.jsx("p",{className:"text-sm text-gray-600 font-light font-inter mb-3",children:"Fast checkout with Apple Pay, Google Pay, or Link:"}),e.jsx("div",{className:"min-h-[50px] flex items-center justify-center",children:e.jsx("div",{className:"text-sm text-gray-500 font-light font-inter italic",children:"Fast checkout options will appear above when available on your device"})}),e.jsxs("div",{className:"relative flex items-center my-3",children:[e.jsx("div",{className:"flex-grow border-t border-gray-300"}),e.jsx("span",{className:"px-3 text-sm text-gray-500 font-light font-inter",children:"or"}),e.jsx("div",{className:"flex-grow border-t border-gray-300"})]})]}),e.jsxs("div",{className:"p-4 border border-gray-200 rounded-sm",children:[!t&&e.jsx("div",{className:"mb-2 text-sm text-gray-500 font-light font-inter",children:"Loading payment form..."}),e.jsx(pe,{options:{layout:"tabs",fields:{billingDetails:{email:"never",phone:"never",address:"never"}},wallets:{applePay:"auto",googlePay:"auto"},business:{name:"The Happy Case"}},onReady:r})]}),e.jsx("div",{className:"text-xs text-gray-500 font-light font-inter px-1",children:"ðŸ’³ Apple Pay is available on Safari (iOS/macOS). Google Pay works on Chrome/Android. Link works on all browsers."}),s&&e.jsx("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded-sm font-light font-inter",children:s})]}),Le=({item:t,index:s,formatPrice:r,onIncrement:i,onDecrement:c,onRemove:o,errorMessage:d})=>{const[l,a]=h.useState(!1),m=h.useRef(null);if(h.useEffect(()=>{const n=g=>{const v=g.target,P=v.tagName==="BUTTON"||v.closest("button")!==null||v.closest('[role="button"]')!==null||v.closest('[aria-label*="quantity"]')!==null,y=v.tagName==="INPUT"||v.tagName==="TEXTAREA";P||y||l&&m.current&&!m.current.contains(g.target)&&a(!1)};if(l){const g=setTimeout(()=>{document.addEventListener("mousedown",n)},200);return()=>{clearTimeout(g),document.removeEventListener("mousedown",n)}}},[l]),t.type==="charm"){const n=t.pin||t,g=t.price||0,v=t.quantity||1,P=g*v;return e.jsx("div",{className:" pb-4 ",ref:m,children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsxs("div",{className:"relative flex-shrink-0 w-20 h-20 bg-gray-50 rounded-sm border border-gray-200 flex items-center justify-center overflow-visible",children:[t.image?e.jsx("img",{src:B(t.image),alt:t.name||"Charm",className:"w-full h-full object-contain p-2",loading:"lazy"}):n!=null&&n.src?e.jsx("img",{src:B(n.src),alt:n.name||"Charm",className:"w-full h-full object-contain p-2",loading:"lazy"}):e.jsx("div",{className:"w-full h-full rounded-sm bg-gray-100"}),e.jsx("span",{className:"absolute -top-1.5 -right-1.5 bg-gray-900 text-white text-[10px] font-medium rounded-full h-5 w-5 flex items-center justify-center font-inter",children:v})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 font-inter leading-tight",children:t.name||(n==null?void 0:n.name)||"Charm"}),e.jsx("p",{className:"text-xs text-gray-500 mt-0.5 font-inter",children:t.category==="bronze"?"Bronze Charm":t.category==="flags"?"Flag":"Colorful Charm"})]}),e.jsx("div",{className:"flex-shrink-0 text-right",children:e.jsx("span",{className:"text-sm font-medium text-gray-900 font-inter",children:r(P)})})]}),!l&&e.jsx("div",{className:"mt-3",children:e.jsx("button",{onClick:y=>{y.stopPropagation(),a(!0)},className:"text-xs text-gray-600 hover:text-gray-900 font-light font-inter uppercase tracking-wider transition-colors",children:"Edit"})}),l&&i&&c&&e.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-1 border border-gray-200 rounded-sm p-1",children:[e.jsx("button",{onClick:y=>{y.preventDefault(),y.stopPropagation();const w=t.id!==void 0?t.id:s;console.log("âž– Charm item decrement clicked:",{identifier:w,itemId:t.id,index:s,currentQty:t.quantity,itemName:t.name,itemType:t.type,hasOnDecrement:!!c}),c&&c(w)},className:"w-6 h-6 flex items-center justify-center text-gray-600 hover:text-gray-900 transition-colors","aria-label":"Decrease quantity",type:"button",children:"âˆ’"}),e.jsx("div",{className:"px-2 py-0.5 text-xs text-gray-900 font-light font-inter min-w-[1.5rem] text-center",children:v}),e.jsx("button",{onClick:y=>{y.preventDefault(),y.stopPropagation();const w=t.id!==void 0?t.id:s;console.log("âž• Charm item increment clicked:",{identifier:w,itemId:t.id,index:s,currentQty:t.quantity,itemName:t.name,itemType:t.type,hasOnIncrement:!!i}),i&&i(w)},className:"w-6 h-6 flex items-center justify-center text-gray-600 hover:text-gray-900 transition-colors","aria-label":"Increase quantity",type:"button",children:"+"})]}),o&&e.jsx("button",{onClick:()=>{o(s),a(!1)},className:"text-xs text-red-600 hover:text-red-700 font-light font-inter uppercase tracking-wider transition-colors",children:"Remove"})]}),d&&e.jsx("p",{className:"text-xs text-red-600 font-inter mt-2",children:d})]})]})},s)}const C=typeof t.basePrice=="number"?t.basePrice:typeof t.casePrice=="number"?t.casePrice:typeof t.price=="number"?t.price:8,j=t.pinsDetails&&t.pinsDetails.length?t.pinsDetails.reduce((n,g)=>n+(g.price||0),0):0,N=C+j,f=t.quantity||1,p=N*f;return e.jsx("div",{className:" pb-4 last:border-b-0",ref:m,children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsxs("div",{className:"relative flex-shrink-0 w-20 h-20 bg-gray-50 rounded-sm border border-gray-200 flex items-center justify-center overflow-visible",children:[t.designImage?e.jsx("img",{src:B(t.designImage),alt:"Custom Case Design",className:"w-full h-full object-contain p-2 rounded-sm",loading:"lazy"}):t.caseImage?e.jsx("img",{src:B(t.caseImage),alt:"Custom Case",className:"w-full h-full object-contain p-2 rounded-sm",loading:"lazy"}):e.jsx("div",{className:"w-full h-full rounded-sm",style:{background:t.color}}),e.jsx("span",{className:"absolute -top-1.5 -right-1.5 bg-gray-900 text-white text-[10px] font-medium rounded-full h-5 w-5 flex items-center justify-center font-inter",children:f})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 font-inter leading-tight",children:t.caseName||t.name||"Passport Case"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:"text-xs text-gray-500 font-inter",children:"Color:"}),e.jsx("span",{className:"inline-flex h-4 w-4 rounded-full border border-gray-300 shadow-sm",style:{backgroundColor:t.color},"aria-label":`Selected color ${t.color}`})]})]}),e.jsx("div",{className:"flex-shrink-0 text-right",children:e.jsx("span",{className:"text-sm font-medium text-gray-900 font-inter",children:r(p)})})]}),!l&&e.jsx("div",{className:"mt-3",children:e.jsx("button",{onClick:n=>{n.stopPropagation(),a(!0)},className:"text-xs text-gray-600 hover:text-gray-900 font-light font-inter uppercase tracking-wider transition-colors",children:"Edit"})}),l&&i&&c&&e.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-1 border border-gray-200 rounded-sm p-1",children:[e.jsx("button",{onClick:n=>{n.preventDefault(),n.stopPropagation();const g=t.id!==void 0?t.id:s;console.log("âž– Case item decrement clicked:",{identifier:g,itemId:t.id,index:s,currentQty:t.quantity,itemName:t.caseName||t.name,hasOnDecrement:!!c}),c?c(g):console.error("âŒ onDecrement handler is missing!")},className:"w-6 h-6 flex items-center justify-center text-gray-600 hover:text-gray-900 transition-colors","aria-label":"Decrease quantity",type:"button",children:"âˆ’"}),e.jsx("div",{className:"px-2 py-0.5 text-xs text-gray-900 font-light font-inter min-w-[1.5rem] text-center",children:f}),e.jsx("button",{onClick:n=>{n.preventDefault(),n.stopPropagation();const g=t.id!==void 0?t.id:s;console.log("âž• Case item increment clicked:",{identifier:g,itemId:t.id,index:s,currentQty:t.quantity,itemName:t.caseName||t.name,hasOnIncrement:!!i}),i?i(g):console.error("âŒ onIncrement handler is missing!")},className:"w-6 h-6 flex items-center justify-center text-gray-600 hover:text-gray-900 transition-colors","aria-label":"Increase quantity",type:"button",children:"+"})]}),o&&e.jsx("button",{onClick:()=>{o(s),a(!1)},className:"text-xs text-red-600 hover:text-red-700 font-light font-inter uppercase tracking-wider transition-colors",children:"Remove"})]}),t.pinsDetails&&t.pinsDetails.length>0&&e.jsx("div",{className:"mt-3 pt-3 ",children:e.jsx("div",{className:"flex flex-col gap-2",children:Object.values(t.pinsDetails.reduce((n,g)=>(n[g.src]=n[g.src]||_(T({},g),{quantity:0}),n[g.src].quantity++,n),{})).map((n,g)=>{const P=(n.price||0)*n.quantity;return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative w-10 h-10 bg-gray-50 rounded-sm border border-gray-200 flex items-center justify-center overflow-visible",children:[e.jsx("img",{src:n.src,alt:n.name,className:"w-full h-full object-contain p-1",loading:"lazy"}),e.jsx("span",{className:"absolute -top-1 -right-1 bg-gray-900 text-white text-[10px] font-medium rounded-full h-4 w-4 flex items-center justify-center font-inter",children:n.quantity})]}),e.jsx("span",{className:"text-xs font-light text-gray-700 font-inter",children:n.name})]}),e.jsx("span",{className:"text-xs font-medium text-gray-900 font-inter",children:r(P)})]},g)})})})]})]})},s)},ie=({cart:t,formatPrice:s,subtotal:r,vatAmount:i,shippingCost:c,shippingLabel:o,totalWithShipping:d,showInternationalNote:l,onShowShippingInfo:a,onIncrement:m,onDecrement:C,onRemove:j,itemErrors:N})=>e.jsxs("div",{className:"flex flex-col h-full min-h-0 mt-4",children:[e.jsx("div",{className:"flex-1 overflow-y-auto pr-2 -mr-2 min-h-0 order-summary-scroll",style:{scrollbarWidth:"thin",scrollbarColor:"#d1d5db #f3f4f6"},children:e.jsx("div",{className:"pr-2 pb-2",children:t.length===0?e.jsx("p",{className:"text-sm text-gray-500 font-inter py-8 text-center",children:"Your cart is empty"}):e.jsx("div",{className:"space-y-0 mt-2",children:t.map((f,p)=>e.jsx(Le,{item:f,index:p,formatPrice:s,onIncrement:m,onDecrement:C,onRemove:j,errorMessage:N==null?void 0:N[f.id||p]},f.id||`item-${p}`))})})}),e.jsxs("div",{className:"flex-shrink-0 pt-6  mt-4 ",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-sm font-light text-gray-700 font-inter",children:[e.jsx("span",{children:"Subtotal"}),e.jsx("span",{className:"font-medium text-gray-900 font-inter",children:s(r)})]}),i>0&&e.jsxs("div",{className:"flex justify-between text-sm font-light text-gray-700 font-inter",children:[e.jsx("span",{children:"VAT"}),e.jsx("span",{className:"font-medium text-gray-900 font-inter",children:s(i)})]}),e.jsxs("div",{className:"flex justify-between text-sm font-light text-gray-700 font-inter",children:[e.jsxs("span",{className:"flex items-center gap-1.5",children:["Shipping (",o,")",e.jsx("button",{type:"button",onClick:a,className:"text-gray-400 hover:text-gray-600 transition-colors w-4 h-4 rounded-full border border-gray-300 flex items-center justify-center text-[10px] leading-none",title:"Quick delivery information",children:"?"})]}),e.jsx("span",{className:"font-medium text-gray-900 font-inter",children:c===0?"Free":s(c)})]})]}),e.jsxs("div",{className:"flex justify-between py-4 border-t border-gray-200 mt-4 pt-4",children:[e.jsx("span",{className:"text-base font-medium text-gray-900 font-inter uppercase tracking-wider",children:"Total"}),e.jsx("span",{className:"text-xl font-semibold text-gray-900 font-inter",children:s(d)})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:e.jsxs("p",{className:"text-xs text-gray-500 font-light font-inter leading-relaxed",children:["Shipping and taxes are calculated at checkout if applicable."," ",e.jsx(A,{to:"/shipping",className:"text-gray-600 hover:text-gray-900 underline transition-colors",title:"Learn more about shipping information",children:"Learn more"})]})}),l&&e.jsx("div",{className:"mt-4",children:e.jsx(le,{showOnDesktop:!0,showOnMobile:!1,title:"Custom Duties & Taxes Included",message:"The total amount you pay includes all applicable customs duties & taxes. We guarantee no additional charges on delivery.",variant:"gray"})})]})]}),Te=({isOpen:t,onToggle:s,cartLength:r,totalWithShipping:i,formatPrice:c,cart:o,subtotal:d,vatAmount:l,shippingCost:a,shippingLabel:m,showInternationalNote:C,onShowShippingInfo:j,onIncrement:N,onDecrement:f,onRemove:p,itemErrors:n})=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"lg:hidden ",children:e.jsxs("button",{type:"button",onClick:s,className:"w-full flex items-center justify-between px-4 py-3 text-xs uppercase tracking-wider text-gray-600 hover:text-gray-900 border border-gray-200 hover:border-gray-400 transition-all duration-200 font-light font-inter","aria-expanded":t,"aria-controls":"mobile-order-summary",children:[e.jsxs("span",{children:["Order Summary (",r," item",r===1?"":"s",")"]}),e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:c(i)}),e.jsx("svg",{className:`w-4 h-4 transition-transform ${t?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M19 9l-7 7-7-7"})})]})]})}),t&&e.jsx("div",{id:"mobile-order-summary",className:"lg:hidden  pb-4",children:e.jsx("div",{className:"mt-2 bg-yellow-50 p-4",children:e.jsx(ie,{cart:o,formatPrice:c,subtotal:d,vatAmount:l,shippingCost:a,shippingLabel:m,totalWithShipping:i,showInternationalNote:C,onShowShippingInfo:j,onIncrement:N,onDecrement:f,onRemove:p,itemErrors:n})})})]}),Ie=({isOpen:t,onClose:s})=>t?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 px-4",children:e.jsxs("div",{className:"bg-white border border-gray-200 max-w-md w-full p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("h3",{className:"text-sm uppercase tracking-wider text-gray-900 font-light font-inter",children:"Delivery Information"}),e.jsx("button",{type:"button",onClick:s,className:"text-gray-400 hover:text-gray-900 transition-colors font-inter","aria-label":"Close delivery information",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("p",{className:"text-xs text-gray-500 font-light font-inter",children:"We dispatch orders within 2 - 3 business days. Shipping costs depend on your delivery country."}),e.jsx("p",{className:"text-xs text-gray-500 font-light font-inter",children:"Including Ireland, Europe, Asia, North America, South America, Canada, Australia and New Zealand. Shipping charges are calculated at the checkout depending on location and parcel size."}),e.jsxs("ul",{className:"text-xs text-gray-600 space-y-2 font-light font-inter font-medium",children:[e.jsxs("li",{children:[e.jsx("span",{children:"UK:"})," 3-4 business days"]}),e.jsxs("li",{children:[e.jsx("span",{className:"font-medium font-medium",children:"Europe:"})," 5-10 business days"]}),e.jsxs("li",{children:[e.jsx("span",{children:"USA & Canada:"})," 7-14 business days"]}),e.jsxs("li",{children:[e.jsx("span",{className:"font-medium",children:"Rest of World:"})," 10-21 business days"]})]}),e.jsx("div",{className:"pt-2 border-t border-gray-100",children:e.jsx("p",{className:"text-xs text-gray-500 font-light font-inter leading-relaxed",children:"Orders delivered outside of the UK may be subject to import duties and taxes. These are levied when the delivery reaches its specific destination, and you will be responsible for the payment of any such duties and taxes. For more information, please contact your local customs office."})}),e.jsx("div",{className:"flex justify-end",children:e.jsx(A,{to:"/shipping",className:"text-xs text-gray-500 hover:text-gray-900 underline transition-colors font-light font-inter",onClick:s,children:"View full shipping policy"})})]})}):null,Ae=Ne("pk_test_51SRxFZFJzpn39buGuSe4Smdsfrnrm8S3IeVJYCra5wXLFeVBGfAdOeFGYGBfStlhZnUlzUVFvajHzioLv92EVyWn00hOlOtcU4"),Re={GB:3,US:16,FR:7},Oe={GB:"UK",US:"USA",FR:"France"},qe=12,Fe=new Set(["FR","DE","ES","IT"]),De=.2,_e=()=>{var ee;const t=je(),s=ve(),{cart:r,getTotalPrice:i,clearCart:c,incrementItemQty:o,decrementItemQty:d,removeFromCart:l}=H(),{formatPrice:a}=ae(),m=Q(),[C,j]=h.useState(!1),[N,f]=h.useState(null),[p,n]=h.useState(!1),[g,v]=h.useState(!1),[P,y]=h.useState(!1),[w,E]=h.useState(!1),[R,O]=h.useState(""),[q,F]=h.useState({}),oe=h.useRef({}),$=h.useRef(!1),[L,Y]=h.useState({email:"",name:"",address:{line1:"",line2:"",city:"",postal_code:"",country:"GB",state:""}}),M=i(),z=L.address.country,G=r.length===0?0:(ee=Re[z])!=null?ee:qe,J=Oe[z]||"International",V=Fe.has(z)?M*De:0,W=z&&z.toUpperCase()!=="GB"&&r.length>0,Z=M+V+G;h.useEffect(()=>{const u=oe.current;return Object.keys(q).forEach(x=>{u[x]&&clearTimeout(u[x]),u[x]=setTimeout(()=>{F(k=>{const b=T({},k);return(typeof b[x]=="string"||b[x]&&typeof b[x]=="object")&&delete b[x],b}),delete u[x]},3e3)}),()=>{Object.values(u).forEach(x=>{clearTimeout(x)})}},[q]);const X=u=>{var I;console.log("ðŸ”„ handleIncrementWithCheck called:",{itemId:u,cartLength:r.length,cartItems:r.map((S,D)=>({index:D,id:S.id,name:S.name||S.caseName,type:S.type}))});const x=typeof u=="string"?r.find(S=>S.id===u):typeof u=="number"&&u>=0&&u<r.length?r[u]:null;if(console.log("ðŸ“¦ Item found:",x?{name:x.name||x.caseName,id:x.id,type:x.type,quantity:x.quantity}:"NOT FOUND"),!x){console.error("âŒ Item not found for increment:",u);return}const k=Ce(x,r),b=k===null||k>0;if(console.log("ðŸ“Š Inventory check:",{maxAvailable:k,canIncrement:b,currentQty:x.quantity}),b)console.log("âœ… Calling incrementItemQty with:",u),o(u),F(S=>{const D=T({},S);return delete D[u],D});else{let S="";if(x.type==="charm"){S=x.name||((I=x.pin)==null?void 0:I.name)||"Charm";const D=`Oops! We don't have any more ${S} in stock right now, so you can't add more to your basket.`;F(me=>_(T({},me),{[u]:D}))}else console.log("âš ï¸ Case item - incrementing anyway despite inventory check"),o(u)}},K=u=>{d(u),F(x=>{const k=T({},x);return delete k[u],k})};h.useEffect(()=>{r.length===0&&!$.current&&m("/cart")},[r,m]),h.useEffect(()=>{n(!1)},[s]);const ce=u=>{const{name:x,value:k}=u.target;if(x.includes(".")){const[b,I]=x.split(".");Y(S=>_(T({},S),{[b]:_(T({},S[b]),{[I]:k})}))}else Y(b=>_(T({},b),{[x]:k}))},de=u=>U(void 0,null,function*(){if(u.preventDefault(),!t||!s){f("Stripe is not loaded. Please wait...");return}if(!s.getElement("payment")){f("Payment form is not ready. Please wait...");return}if(!p){f("Payment form is still loading. Please wait...");return}j(!0),f(null);try{const{error:k,paymentIntent:b}=yield t.confirmPayment({elements:s,confirmParams:{return_url:`${window.location.origin}/payment-success`,payment_method_data:{billing_details:{name:L.name,email:L.email,phone:null,address:{line1:L.address.line1,line2:L.address.line2,city:L.address.city,postal_code:L.address.postal_code,country:L.address.country,state:L.address.state}}}},redirect:"if_required"});if(k){f(k.message||"An error occurred while processing your payment."),j(!1);return}if(b&&b.status==="succeeded"){$.current=!0;const I=[...r];c(),m("/payment-success",{state:{paymentIntent:b,customerInfo:L,items:I}})}else if(!(b&&b.status==="requires_action")){if(b){$.current=!0;const I=[...r];c(),m("/payment-success",{state:{paymentIntent:b,customerInfo:L,items:I}})}}}catch(k){f("An error occurred while processing your payment."),console.error("Payment error:",k)}finally{j(!1)}});return e.jsxs("div",{className:"h-full w-full",children:[e.jsx(Te,{isOpen:P,onToggle:()=>y(u=>!u),cartLength:r.length,totalWithShipping:Z,formatPrice:a,cart:r,subtotal:M,vatAmount:V,shippingCost:G,shippingLabel:J,showInternationalNote:W,onShowShippingInfo:()=>v(!0),onIncrement:X,onDecrement:K,onRemove:l,itemErrors:q}),e.jsxs("div",{className:"flex flex-col lg:flex-row  w-full ",children:[e.jsxs("form",{onSubmit:de,className:"space-y-6  mt-6 lg:mt-0 lg:p-6 w-full lg:w-1/2 lg:flex-shrink-0",children:[e.jsx(Pe,{customerInfo:L,onInputChange:ce,isAuthenticated:w,authenticatedEmail:R,onSignIn:u=>{E(!0),O(u)},onSignOut:()=>{E(!1),O("")}}),e.jsx(Ee,{paymentElementReady:p,error:N,onPaymentReady:()=>n(!0)}),e.jsx("button",{type:"submit",disabled:!t||!s||C||!p,className:"w-full py-3 text-sm uppercase tracking-wider font-light disabled:opacity-50 disabled:cursor-not-allowed font-inter bg-btn-primary hover:bg-btn-primary-hover text-btn-primary-text border border-btn-primary-border hover:border-btn-primary-hover transition-all duration-200",children:C?"Processing...":"Complete Payment"}),W&&e.jsx(le,{className:"mt-4",showOnDesktop:!1,showOnMobile:!0,title:"Custom Duties & Taxes Included",message:"The total amount you pay includes all applicable customs duties & taxes. We guarantee no additional charges on delivery.",variant:"gray"})]}),e.jsx("aside",{className:"hidden lg:flex border border-gray-200 bg-yellow-50 p-6 w-full lg:w-1/2 lg:sticky lg:top-20 mt-4 lg:mt-0 flex-col max-h-[calc(100vh-8rem)]",children:e.jsx("div",{className:"flex-1 overflow-hidden flex flex-col min-h-0",children:e.jsx(ie,{cart:r,formatPrice:a,subtotal:M,vatAmount:V,shippingCost:G,shippingLabel:J,totalWithShipping:Z,showInternationalNote:W,onShowShippingInfo:()=>v(!0),onIncrement:X,onDecrement:K,onRemove:l,itemErrors:q})})}),e.jsx(Ie,{isOpen:g,onClose:()=>v(!1)})]}),e.jsx("div",{className:"w-full border-t border-gray-200 mt-8 pt-6 pb-6",children:e.jsx("div",{className:"max-w-6xl mx-auto px-4 lg:px-6",children:e.jsxs("div",{className:"flex flex-wrap justify-center gap-4 md:gap-6 text-xs text-gray-600 font-light font-inter",children:[e.jsx(A,{to:"/returns",className:"hover:text-gray-900 transition-colors underline",children:"Refund Policy"}),e.jsx("span",{className:"text-gray-300",children:"|"}),e.jsx(A,{to:"/shipping",className:"hover:text-gray-900 transition-colors underline",children:"Shipping"}),e.jsx("span",{className:"text-gray-300",children:"|"}),e.jsx(A,{to:"/returns",className:"hover:text-gray-900 transition-colors underline",children:"Cancellations"}),e.jsx("span",{className:"text-gray-300",children:"|"}),e.jsx(A,{to:"/about",className:"hover:text-gray-900 transition-colors underline",children:"Contact"})]})})})]})},Qe=()=>{const{cart:t,getTotalPrice:s}=H(),{currency:r,convertPrice:i}=ae(),c=Q(),[o,d]=h.useState(null),[l,a]=h.useState(!0),[m,C]=h.useState(null),j=h.useRef(!1);return h.useEffect(()=>{const N=window.location.pathname;if(t.length===0&&(N==="/checkout"||N.includes("/checkout"))){c("/cart");return}if(t.length===0||j.current||o!==null)return;U(void 0,null,function*(){try{j.current=!0,a(!0);const p=s(),n=i(p),v={jpy:1,krw:1,vnd:1}[r.toLowerCase()]||100,P=Math.round(n*v),y=r.toLowerCase();console.log("ðŸ’³ Creating payment intent:",{totalPriceGBP:p,totalPriceInCurrency:n,currency:y,amount:P,multiplier:v});const w=yield ke({amount:P,currency:y,items:t,customerInfo:{}});d({clientSecret:w.client_secret,appearance:{theme:"stripe",variables:{colorPrimary:"#3b82f6",colorBackground:"#ffffff",colorText:"#1f2937",colorDanger:"#ef4444",fontFamily:"system-ui, sans-serif",spacingUnit:"4px",borderRadius:"8px"}}}),C(null)}catch(p){console.error("Failed to initialize payment options:",p),C(p.message||"Failed to initialize payment. Please ensure the backend server is running."),j.current=!1}finally{a(!1)}})},[t.length]),l?e.jsx(ne,{}):m?e.jsxs("div",{className:"min-h-screen flex flex-col bg-white",children:[e.jsx(re,{}),e.jsx("div",{className:"flex-1 flex items-center justify-center bg-white py-10",children:e.jsx("div",{className:"max-w-md mx-auto px-4 text-center",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-red-900 mb-3",style:{fontFamily:"'Poppins', sans-serif"},children:"Payment Setup Error"}),e.jsx("p",{className:"text-red-700 mb-4 font-inter",children:m}),e.jsxs("div",{className:"text-sm text-red-600 mb-4 font-inter",children:[e.jsx("p",{className:"mb-2",children:"To fix this issue:"}),e.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-left",children:[e.jsxs("li",{children:["Make sure your backend server is running: ",e.jsx("code",{className:"bg-red-100 px-1 rounded",children:"npm run server"})]}),e.jsx("li",{children:"Verify the server is running on port 3001"}),e.jsx("li",{children:"Check that the proxy is configured correctly"}),e.jsx("li",{children:"Refresh this page to retry"})]})]}),e.jsx("button",{onClick:()=>{C(null),j.current=!1,window.location.reload()},className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-md transition-colors font-inter",children:"Retry"})]})})})]}):o?e.jsxs("div",{className:"min-h-screen flex flex-col bg-white",children:[e.jsx(re,{}),e.jsx("div",{className:"flex-1 flex items-stretch bg-white py-10",children:e.jsx("div",{className:"flex-1 max-w-6xl mx-auto px-4 lg:px-6",children:e.jsx(be,{stripe:Ae,options:o,children:e.jsx(_e,{})})})})]}):e.jsx(ne,{})};export{Qe as default};
