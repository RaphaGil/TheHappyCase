var b=(u,f,a)=>new Promise((o,h)=>{var d=s=>{try{n(a.next(s))}catch(r){h(r)}},x=s=>{try{n(a.throw(s))}catch(r){h(r)}},n=s=>s.done?o(s.value):Promise.resolve(s.value).then(d,x);n((a=a.apply(u,f)).next())});import{u as P,e as k,r as g,j as e}from"./react-vendor-BwkbXqKG.js";import"./vendor-BupaDLyo.js";import"./fontawesome-vendor-BEuASCuQ.js";const I=()=>{const u=P(),[f]=k(),a=f.get("email")||"",[o,h]=g.useState(a),[d,x]=g.useState(""),[n,s]=g.useState(a?"code":"email"),[r,l]=g.useState(!1),[y,t]=g.useState(""),[j,c]=g.useState(!1);g.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"}),a&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a)&&N()},[]);const N=i=>b(void 0,null,function*(){l(!0),t("");try{yield new Promise(m=>setTimeout(m,1e3)),l(!1),s("code"),c(!0),setTimeout(()=>c(!1),3e3)}catch(m){l(!1),t("Failed to send verification code. Please try again.")}}),p=i=>b(void 0,null,function*(){if(i.preventDefault(),!o){t("Please enter your email address");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o)){t("Please enter a valid email address");return}l(!0),t(""),c(!1);try{yield new Promise(v=>setTimeout(v,1e3)),l(!1),s("code"),c(!0),setTimeout(()=>c(!1),3e3)}catch(v){l(!1),t("Failed to send verification code. Please try again.")}}),w=i=>b(void 0,null,function*(){if(i.preventDefault(),!d||d.length!==6){t("Please enter the 6-digit code");return}l(!0),t(""),c(!1),setTimeout(()=>{if(l(!1),d.length===6){localStorage.setItem("userEmail",o),localStorage.setItem("isLoggedIn","true");const m=f.get("redirect")||"/dashboard";u(m)}else t("Invalid code. Please try again.")},1e3)}),S=()=>{x(""),t(""),c(!1),p({preventDefault:()=>{}})},C=()=>{s("email"),x(""),t(""),c(!1),u("/login")};return e.jsx("div",{className:"min-h-screen bg-white py-12 md:py-16",children:e.jsxs("div",{className:"max-w-md mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-title md:text-title-lg font-light text-gray-900 mb-2 font-inter tracking-title",children:n==="email"?"Log In":"Verify Code"}),e.jsx("div",{className:"w-16 h-px bg-gray-300 mx-auto mb-4"})]}),j&&n==="code"&&e.jsx("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-green-800 font-light font-inter",children:["Verification code sent to ",e.jsx("strong",{children:o})]})}),y&&e.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-800 font-light font-inter",children:y})}),n==="email"&&e.jsxs("form",{onSubmit:p,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-2 font-light font-inter",children:"Email Address *"}),e.jsx("input",{type:"email",value:o,onChange:i=>{h(i.target.value),t("")},placeholder:"your.email@example.com",autoFocus:!0,className:"w-full px-4 py-3 border border-gray-200 rounded-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white text-gray-900 placeholder-gray-400 font-light font-inter text-base",required:!0})]}),e.jsx("button",{type:"submit",disabled:r,className:"w-full px-4 py-3 text-sm uppercase tracking-wider font-light font-inter bg-gray-900 text-white hover:bg-gray-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:r?"Sending Code...":"Send Verification Code"}),e.jsx("p",{className:"text-xs text-gray-500 text-center font-light font-inter",children:"By continuing, you agree to our Terms of Use and Privacy Policy."})]}),n==="code"&&e.jsxs("form",{onSubmit:w,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-600 font-light font-inter mb-4 text-center",children:["We've sent a 6-digit verification code to ",e.jsx("strong",{children:o}),". Please enter it below."]}),e.jsx("label",{className:"block text-sm text-gray-700 mb-2 font-light font-inter",children:"Verification Code *"}),e.jsx("input",{type:"text",value:d,onChange:i=>{const m=i.target.value.replace(/\D/g,"").slice(0,6);x(m),t("")},placeholder:"000000",maxLength:6,autoFocus:!0,className:"w-full px-4 py-3 border border-gray-200 rounded-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white text-gray-900 placeholder-gray-400 font-light font-inter text-2xl text-center tracking-widest",required:!0})]}),e.jsx("button",{type:"submit",disabled:r||d.length!==6,className:"w-full px-4 py-3 text-sm uppercase tracking-wider font-light font-inter bg-gray-900 text-white hover:bg-gray-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:r?"Verifying...":"Verify Code"}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("button",{type:"button",onClick:S,disabled:r,className:"text-sm text-gray-600 hover:text-gray-900 font-light font-inter underline disabled:opacity-50",children:"Resend Code"}),e.jsx("button",{type:"button",onClick:C,className:"text-sm text-gray-600 hover:text-gray-900 font-light font-inter",children:"← Back to email"})]})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsx("button",{onClick:()=>u("/"),className:"text-sm text-gray-500 hover:text-gray-700 font-light font-inter",children:"← Back to Home"})})]})})};export{I as default};
