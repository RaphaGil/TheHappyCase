import{j as t,i as q,u as J,r as l,L as X}from"./react-vendor-oGZ_6Ua-.js";import{a as ee}from"./index-Dh6wt6VS.js";import{C as re,S as te,R as ae,E as se,I as le}from"./index-CmlSwDyv.js";import{g as O,f as ne}from"./shared-utils-Ex4kHLmS.js";import{f as oe}from"./filterHelpers-BdMq4J7p.js";import"./vendor-Q-ueIuah.js";import"./fontawesome-vendor-DeakGBTR.js";import"./supabase-vendor-rHdX91gy.js";const ie=({charmTypes:a,selectedType:s,onTypeChange:c})=>{const n=o=>({colorful:"colorful",bronze:"bronze",flags:"flags"})[o]||o;return t.jsx("div",{className:"flex justify-center mb-6  px-6 md:mx-0 md:px-0",children:t.jsx("div",{className:"flex gap-2 border-b border-gray-200 flex-nowrap justify-center",children:a.map(({value:o,label:e})=>t.jsxs("button",{onClick:()=>c(o),className:`px-6 py-3 text-xs uppercase tracking-wider transition-all duration-200 font-inter ${s===o?"border-b-2 border-blue-700 text-white bg-blue-600 font-medium":"border-b-2 border-transparent text-white hover:text-white hover:border-blue-300 hover:bg-blue-500 bg-blue-400"}`,children:[t.jsx("span",{className:"md:hidden",children:n(o)}),t.jsx("span",{className:"hidden md:inline",children:e})]},o))})})},ce=({categories:a,selectedCategory:s,onCategoryChange:c})=>!a||a.length===0?null:t.jsx("div",{className:"flex justify-center mb-6",children:t.jsx("div",{className:"flex gap-1 border-b border-gray-200 flex-wrap justify-center",children:a.map(({key:n,label:o})=>t.jsx("button",{onClick:()=>c(n),className:`px-4 py-2 text-[10px] uppercase tracking-wider transition-all duration-200 font-inter ${s===n?"border-b-2 border-blue-700 text-gray-900 font-medium":"border-b-2 border-transparent text-gray-500 hover:text-gray-900 hover:border-gray-300"}`,children:o},n))})}),ue=({charm:a,index:s,onAddToCart:c,charmType:n,cart:o,charmPrice:e})=>{const m={name:a.name,image:a.src,pin:a,category:n,type:"charm"},u=O(m,o),f=u!==null&&u===0;return t.jsx(re,{charm:a,index:s,onAddToCart:c,isSoldOut:f,charmPrice:e})},me=({currentPage:a,totalPages:s,onPageChange:c})=>s<=1?null:t.jsx("div",{className:"flex justify-center items-center gap-1 mb-12",children:Array.from({length:s},(n,o)=>o+1).map(n=>t.jsx("button",{onClick:()=>c(n),className:`px-3 py-1 text-xs transition-all duration-200 font-inter ${a===n?"border-b-2 border-gray-900 text-gray-900 font-medium":"border-b-2 border-transparent text-gray-400 hover:text-gray-700 hover:border-gray-300"}`,"aria-label":`Go to page ${n}`,children:n},n))}),k=(a,s)=>a.price!==void 0&&a.price!==null?a.price:s==="bronze"?1.5:2,M=a=>a||"colorful",de=a=>{if(!a)return"Charm";let s=a;return s=s.replace(/\s*-\s*(Flag|Colorful Charm|Bronze Charm)$/i,""),s=s.replace(/\s+Flag$/i,""),s.trim()},fe=[{value:"colorful",label:"Colorful Charms"},{value:"bronze",label:"Bronze Charms"},{value:"flags",label:"Flags Collection"}],ge=[{key:"all",label:"ALL"},{key:"europe",label:"EUROPE"},{key:"americas",label:"AMERICAS"},{key:"africa",label:"AFRICA"},{key:"asia",label:"ASIA"},{key:"special",label:"SPECIAL"}],be=[{key:"all",label:"ALL"},{key:"travel",label:"TRAVEL"},{key:"animals",label:"ANIMALS"},{key:"love",label:"LOVE"},{key:"nature",label:"NATURE"},{key:"symbols",label:"SYMBOLS"}],he=[{key:"all",label:"ALL"},{key:"travel",label:"TRAVEL"},{key:"disney",label:"DISNEY"},{key:"drinks",label:"DRINKS"},{key:"inspiration",label:"INSPIRATION"},{key:"hearts",label:"HEARTS"},{key:"nature",label:"NATURE"},{key:"camera",label:"CAMERA"}],N=20,C={Bronze:"bronze",Colorful:"colorful",flags:"flags",Flags:"flags"},ye={bronze:"Bronze",colorful:"Colorful",flags:"flags"},Ne=()=>{const{type:a}=q(),s=J(),{addToCart:c,cart:n}=ee(),o=a&&C[a]?C[a]:"colorful",[e,m]=l.useState(o),[u,f]=l.useState(""),[x,S]=l.useState("all"),[j,A]=l.useState("all"),[T,v]=l.useState("all"),[E,g]=l.useState(1),[P,b]=l.useState(1),[I,h]=l.useState(1),[B,w]=l.useState(!1),[F,z]=l.useState(""),[_,$]=l.useState("error"),L=l.useCallback(()=>{const r=ne();return e==="colorful"?r.pins.colorful||[]:e==="bronze"?r.pins.bronze||[]:e==="flags"?r.pins.flags||[]:[]},[e]),d=l.useMemo(()=>{let r=L();u&&(r=r.filter(p=>p.name.toLowerCase().includes(u.toLowerCase())));const i=e==="flags"?x:e==="bronze"?j:T;return i!=="all"&&(r=oe(r,e,i)),r},[L,u,e,x,j,T]),G=l.useCallback(()=>e==="bronze"?E:e==="colorful"?P:e==="flags"?I:1,[e,E,P,I]),Y=l.useCallback(r=>{e==="bronze"&&g(r),e==="colorful"&&b(r),e==="flags"&&h(r)},[e]),y=G(),R=Math.ceil(d.length/N),D=l.useMemo(()=>{const r=(y-1)*N,i=r+N;return d.slice(r,i)},[d,y]);l.useEffect(()=>{if(a&&C[a]){const r=C[a];m(r)}else a||m("colorful")},[a]);const H=l.useCallback(r=>{m(r),S("all"),A("all"),v("all"),g(1),b(1),h(1);const i=ye[r]||"Colorful";s(`/Charms/${i}`,{replace:!0})},[s]),U=l.useCallback(r=>{const i={id:`charm-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,name:de(r.name),price:k(r,e),totalPrice:k(r,e),image:r.src,pin:r,category:M(e),type:"charm"},p=O(i,n);if(p!==null&&p===0){const Z=`Oops! We don't have any more ${r.name||"this charm"} in stock right now, so you can't add more to your basket.`;z(Z),$("error"),w(!0);return}console.log("ðŸ“Œ Charms page - Adding charm to cart:",{charmName:r.name,charmSrc:r.src,category:M(e),product:i}),c(i)},[e,n,c]),W=()=>e==="flags"?ge:e==="bronze"?be:e==="colorful"?he:[],Q=()=>e==="flags"?x:e==="bronze"?j:e==="colorful"?T:"all",V=l.useCallback(r=>{e==="flags"?(S(r),h(1)):e==="bronze"?(A(r),g(1)):e==="colorful"&&(v(r),b(1))},[e]),K=l.useCallback(()=>{f(""),e==="flags"?(S("all"),h(1)):e==="bronze"?(A("all"),g(1)):e==="colorful"&&(v("all"),b(1))},[e]);return t.jsxs("div",{className:"min-h-screen bg-white",children:[t.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[t.jsxs("div",{className:"text-center mb-8 sm:mb-12",children:[t.jsx("h1",{className:"text-title text-gray-900 tracking-title mb-1 md:mb-2",children:"CHARMS"}),t.jsx("div",{className:"w-16 sm:w-20 md:w-24 h-px bg-gray-200 mx-auto mb-3 sm:mb-4"}),t.jsxs("p",{className:"text-sm text-gray-500 max-w-2xl mx-auto font-light px-4 font-inter",children:[t.jsx(X,{to:"/CreateYours",className:"text-gray-900 hover:text-gray-700 underline transition-colors",children:"Create"})," your custom case with charms pre-glued, or buy the case and charms separately and enjoy gluing them yourself."]})]}),t.jsxs("div",{className:"pb-6",children:[t.jsx(ie,{charmTypes:fe,selectedType:e,onTypeChange:H}),t.jsx(ce,{categories:W(),selectedCategory:Q(),onCategoryChange:V})]}),t.jsxs("div",{className:"mb-8 flex items-center justify-between gap-4",children:[t.jsx(te,{searchTerm:u,setSearchTerm:f,placeholder:"Search charms..."}),t.jsx(ae,{count:d.length,currentPage:y,totalPages:R})]}),d.length>0?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4 md:gap-6 mb-12 min-h-[400px] sm:min-h-[600px]",children:D.map((r,i)=>t.jsx(ue,{charm:r,index:i,onAddToCart:U,charmType:e,cart:n,charmPrice:k(r,e)},i))}),t.jsx(me,{currentPage:y,totalPages:R,onPageChange:Y})]}):t.jsx(se,{message:"No charms found",onClearFilters:K})]}),t.jsx(le,{show:B,onClose:()=>{w(!1),z("")},message:F,type:_})]})};export{Ne as default};
