var se=Object.defineProperty,re=Object.defineProperties;var ne=Object.getOwnPropertyDescriptors;var J=Object.getOwnPropertySymbols;var ae=Object.prototype.hasOwnProperty,oe=Object.prototype.propertyIsEnumerable;var V=(t,n,s)=>n in t?se(t,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[n]=s,q=(t,n)=>{for(var s in n||(n={}))ae.call(n,s)&&V(t,s,n[s]);if(J)for(var s of J(n))oe.call(n,s)&&V(t,s,n[s]);return t},K=(t,n)=>re(t,ne(n));var B=(t,n,s)=>new Promise((a,o)=>{var r=d=>{try{c(s.next(d))}catch(f){o(f)}},i=d=>{try{c(s.throw(d))}catch(f){o(f)}},c=d=>d.done?a(d.value):Promise.resolve(d.value).then(r,i);c((s=s.apply(t,n)).next())});import{j as e,F as W,u as X,i as ie,r as p}from"./react-vendor-oGZ_6Ua-.js";import{n as P,P as le,g as E,f as z,r as H}from"./shared-utils-S7EokHQk.js";import{l as ce,d as de,z as me,A as xe,B as ue}from"./fontawesome-vendor-DeakGBTR.js";import{A as pe}from"./index-C27VZBeu.js";import{a as ge,g as he}from"./index-6yRIOVSh.js";import"./vendor-Q-ueIuah.js";import"./supabase-vendor-rHdX91gy.js";const ye=()=>e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h1",{className:"text-title text-gray-900 tracking-title mb-1 md:mb-2",children:"PASSPORT CASES"}),e.jsx("div",{className:"w-16 sm:w-20 md:w-24 h-px bg-gray-200 mx-auto mb-4"})]}),fe=()=>e.jsx("div",{className:"min-h-screen bg-white py-8 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-light text-gray-900 mb-4 font-inter",children:"Loading..."}),e.jsx("p",{className:"text-gray-500 font-inter",children:"Please wait while we load the passport cases."})]})}),be=({cases:t,selectedCaseType:n,onCaseTypeChange:s,isCaseTypeSoldOut:a,getCaseDisplayName:o})=>e.jsx("div",{className:"flex justify-center mb-12 md:mx-0 md:px-0",children:e.jsx("div",{className:"flex gap-2 flex-nowrap",children:t.map(r=>{const i=a(r.type);return e.jsx("button",{onClick:()=>s(r.type),disabled:i,className:`px-3 sm:px-6 py-2.5 sm:py-3 text-xs uppercase tracking-wider transition-all duration-200 relative whitespace-nowrap flex-shrink-0 ${n===r.type?"border-b-2 border-blue-700 text-white bg-blue-600 font-medium":"border-b-2 border-transparent text-white hover:text-white hover:border-blue-300 hover:bg-blue-500 bg-blue-400"} ${i?"opacity-60 cursor-not-allowed":""} font-inter`,children:e.jsxs("span",{className:"flex items-center gap-1 sm:gap-2",children:[o(r.type),i&&e.jsx("span",{className:"text-[8px] sm:text-[10px] text-red-300 font-semibold bg-red-900 px-1 sm:px-1.5 py-0.5 rounded",children:"SOLD OUT"})]})},r.type)})})}),ve=({currentImage:t,detailImages:n,selectedDetailImage:s,selectedCase:a,isSelectedColorSoldOut:o,onDetailImageClick:r})=>e.jsxs("div",{className:"",children:[e.jsx("div",{className:"relative group",children:e.jsxs("div",{className:`relative overflow-hidden ${o()?"pointer-events-none cursor-not-allowed":""}`,onClick:i=>{if(o())return i.preventDefault(),i.stopPropagation(),!1},children:[e.jsx("img",{src:P(t),alt:`${a.name} - View`,className:`w-full h-[300px] lg:h-[400px] xl:h-[500px] object-contain transition-opacity duration-200 ${o()?"opacity-50 pointer-events-none cursor-not-allowed":""}`,loading:"eager",fetchPriority:"high",decoding:"async",width:"500",height:"500",onClick:i=>{if(o())return i.preventDefault(),i.stopPropagation(),!1},onError:i=>{i.target.style.display="none",i.target.nextSibling&&(i.target.nextSibling.style.display="flex")}}),e.jsx("div",{className:"hidden w-full h-[300px] lg:h-[400px] xl:h-[500px] items-center justify-center text-gray-400 bg-gray-50",children:e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-gray-500 font-inter",children:"Image not available"})})}),o()&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-60 flex items-center justify-center z-20 pointer-events-none",children:e.jsx("span",{className:"text-white text-2xl font-medium uppercase tracking-wider font-inter",children:"Sold Out"})})]})}),e.jsx("div",{className:"mt-3",children:e.jsx("div",{className:"grid grid-cols-5 sm:grid-cols-4 lg:grid-cols-7 gap-2",children:n.map((i,c)=>e.jsxs("button",{onClick:()=>r(i),disabled:o(),className:`relative aspect-square overflow-hidden bg-gray-50 border transition-all duration-200 max-w-[80px] mx-auto ${s===i||!s&&c===0&&t===i?"border-gray-900 ring-2 ring-gray-300":"border-gray-200 hover:border-gray-400"} ${o()?"opacity-50 cursor-not-allowed":""}`,children:[e.jsx("img",{src:P(i),alt:`${a.name} - Detail ${c+1}`,className:"w-full h-full object-contain",loading:"lazy",fetchPriority:"low",decoding:"async",width:"80",height:"80",onError:d=>{d.target.style.display="none",d.target.nextSibling&&(d.target.nextSibling.style.display="flex")}}),e.jsx("div",{className:"hidden w-full h-full items-center justify-center text-gray-300",children:e.jsx("span",{className:"text-2xl",children:"ðŸ“·"})})]},c))})})]}),je=({colors:t,selectedColor:n,onColorChange:s,isColorSoldOut:a,getColorName:o})=>e.jsxs("div",{className:"pb-2 sm:pb-3 mt-3",children:[e.jsx("h3",{className:"text-sm uppercase tracking-wider text-gray-900 mt-6 mb-6 font-medium font-inter",children:"Colours Available"}),e.jsx("div",{className:"grid grid-cols-6 sm:grid-cols-7 md:grid-cols-8 gap-2 sm:gap-1.5 md:gap-2",children:t.map((r,i)=>{const c=a(r.color),d=o(r.image);return e.jsxs("div",{className:"flex flex-col items-center sm:gap-1",children:[e.jsx("button",{onClick:()=>{c||s(r.color)},disabled:c,className:`w-9 h-9 sm:w-8 sm:h-8 rounded-full border-2 transition-all duration-200 relative ${n===r.color?"border-gray-900 ring-2 ring-gray-300 scale-110":"border-gray-200 hover:border-gray-400"} ${c?"opacity-50 cursor-not-allowed":""}`,style:{backgroundColor:r.color},title:c?"Sold Out":d||`Color ${i+1}`}),c?e.jsx("span",{className:"text-[9px] mt-1 text-red-600 font-medium text-center",children:"Sold Out"}):d&&e.jsx("span",{className:"text-[10px] sm:text-[9px] text-gray-700 font-medium text-center mt-1 font-inter leading-tight",children:d})]},i)})})]}),we=({specifications:t,isOpen:n,onToggle:s})=>t?e.jsxs("div",{className:"border-b border-gray-100 pb-8",children:[e.jsxs("button",{onClick:s,className:"w-full flex items-center justify-between py-2 text-sm uppercase tracking-wider text-gray-900 font-medium hover:text-gray-700 transition-colors font-inter",children:[e.jsx("span",{children:"Specifications"}),e.jsx(W,{icon:n?ce:de,className:"text-xs transition-transform duration-200"})]}),n&&e.jsxs("div",{className:"flex flex-col gap-3 mt-4",children:[t.dimensions&&e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-50",children:[e.jsx("span",{className:"text-sm text-gray-500 font-inter",children:"Dimensions"}),e.jsx("span",{className:"text-sm text-gray-900 font-inter",children:t.dimensions})]}),t.weight&&e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-50",children:[e.jsx("span",{className:"text-sm text-gray-500 font-inter",children:"Weight"}),e.jsx("span",{className:"text-sm text-gray-900 font-inter",children:t.weight})]}),t.material&&e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-50",children:[e.jsx("span",{className:"text-sm text-gray-500 font-inter",children:"Material"}),e.jsx("span",{className:"text-sm text-gray-900 font-inter",children:t.material})]}),t.closure&&e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-50",children:[e.jsx("span",{className:"text-sm text-gray-500 font-inter",children:"Closure"}),e.jsx("span",{className:"text-sm text-gray-900 font-inter",children:t.closure})]}),t.cardSlots&&e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-50",children:[e.jsx("span",{className:"text-sm text-gray-500 font-inter",children:"Card Slots"}),e.jsx("span",{className:"text-sm text-gray-900 font-inter",children:t.cardSlots})]}),t.interior&&e.jsxs("div",{className:"flex justify-between items-start py-2 border-b border-gray-50",children:[e.jsx("span",{className:"text-sm text-gray-500 font-inter",children:"Interior"}),e.jsx("span",{className:"text-sm text-gray-900 text-right font-inter",children:t.interior})]}),t.rfid&&e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-50",children:[e.jsx("span",{className:"text-sm text-gray-500 font-inter",children:"RFID Protection"}),e.jsx("span",{className:"text-sm text-gray-900 font-inter",children:t.rfid})]}),t.features&&e.jsxs("div",{className:"flex justify-between items-start py-2 border-b border-gray-50",children:[e.jsx("span",{className:"text-sm text-gray-500 font-inter",children:"Features"}),e.jsx("span",{className:"text-sm text-gray-900 text-right font-inter",children:t.features})]}),t.passportCapacity&&e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-50",children:[e.jsx("span",{className:"text-sm text-gray-500 font-inter",children:"Capacity"}),e.jsx("span",{className:"text-sm text-gray-900 font-inter",children:t.passportCapacity})]}),t.care&&e.jsxs("div",{className:"flex justify-between items-start py-2 border-b border-gray-50",children:[e.jsx("span",{className:"text-sm text-gray-500 font-inter",children:"Care Instructions"}),e.jsx("span",{className:"text-sm text-gray-900 text-right font-inter",children:t.care})]}),t.warranty&&e.jsxs("div",{className:"flex justify-between items-center py-2",children:[e.jsx("span",{className:"text-sm text-gray-500 font-inter",children:"Warranty"}),e.jsx("span",{className:"text-sm text-gray-900 font-inter",children:t.warranty})]})]})]}):null,Ne=({specifications:t})=>t?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-4 sm:gap-6",children:[t.rfid&&t.rfid.toLowerCase()==="yes"&&e.jsxs("p",{className:"text-sm text-gray-900 font-inter flex items-center gap-2",children:[e.jsx(W,{icon:me,className:"text-blue-600"}),e.jsx("span",{className:"font-bold",children:"RFID Protection"})]}),t.material&&e.jsxs("p",{className:"text-sm text-gray-900 font-inter flex items-center gap-2",children:[e.jsx(W,{icon:xe,className:"text-amber-600"}),e.jsx("span",{className:"font-bold",children:"Material:"})," ",t.material]})]})}),e.jsx("div",{className:"pb-4 sm:pb-6",children:e.jsxs("p",{className:"text-sm text-gray-900 font-inter flex items-center gap-2",children:[e.jsx(W,{icon:ue,className:"text-gray-600"}),e.jsx("span",{children:"Standard UK Delivery 2-4 Days"})]})})]}):null,Ce=({selectedCase:t,selectedCaseType:n,selectedColor:s,quantity:a,quantityError:o,currentImage:r,isSelectedColorSoldOut:i,onIncrementQuantity:c,onDecrementQuantity:d,onAddToCart:f})=>{const C=X();return e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsx("div",{className:"flex items-baseline gap-2",children:e.jsxs("span",{className:"text-2xl font-light text-gray-900 font-inter",children:["Â£",t.basePrice.toFixed(2)]})}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center border border-gray-200 rounded-sm h-[42px]",children:[e.jsx("button",{onClick:d,disabled:a<=1,className:"h-full px-3 flex items-center justify-center text-gray-600 hover:text-gray-900 transition-colors disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Decrease quantity",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20 12H4"})})}),e.jsx("span",{className:"text-sm font-medium text-gray-900 text-center font-inter min-w-[2.5rem] px-3 b flex items-center justify-center h-full",children:a}),e.jsx("button",{onClick:c,className:"h-full px-3 flex items-center justify-center text-gray-600 hover:text-gray-900 transition-colors","aria-label":"Increase quantity",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 4v16m8-8H4"})})})]}),e.jsx("div",{className:"flex-1",children:e.jsx(pe,{product:{name:(t==null?void 0:t.name)||"Passport Case",caseType:n,caseName:(t==null?void 0:t.name)||"Passport Case",color:s,basePrice:(t==null?void 0:t.basePrice)||0,casePrice:(t==null?void 0:t.basePrice)||0,totalPrice:(t==null?void 0:t.basePrice)||0,price:(t==null?void 0:t.basePrice)||0,image:r,caseImage:r,quantity:a},disabled:i(),onAdd:f,className:"bg-btn-success hover:bg-btn-success-hover text-btn-success-text border border-btn-success-border hover:border-btn-success-hover transition-all duration-200"})})]}),o&&e.jsx("p",{className:"text-sm text-red-600 font-inter ml-1",children:o})]}),e.jsx("button",{onClick:()=>{window.scrollTo({top:0,behavior:"instant"}),C(`/CreateYours?case=${n}&color=${s}`)},className:"w-full py-3 text-sm uppercase tracking-wider font-inter bg-btn-primary-blue hover:bg-btn-primary-blue-hover text-btn-primary-blue-text border border-btn-primary-blue-border hover:border-btn-primary-blue-hover transition-all duration-200",children:"PERSONALIZE"})]})},Se=t=>({economy:"Economy Class",business:"Business Class",firstclass:"First Class"})[t]||t,ee=t=>{if(!t)return"";let s=t.split("/").pop().replace(".webp","").replace(".png","").replace(".jpg","").toLowerCase().replace(/^economycase/i,"").replace(/^businessclasscase/i,"").replace(/^firstclasscase/i,"").replace(/^smartcase/i,"").replace(/^premiumcase/i,"").replace(/^firstclass/i,"");const a={lightpink:"Light Pink",lightblue:"Light Blue",lightbrown:"Light Brown",darkbrown:"Dark Brown",darkblue:"Dark Blue",jeansblue:"Jeans Blue",brickred:"Brick Red",navyblue:"Navy Blue",gray:"Gray",grey:"Gray",black:"Black",brown:"Brown",red:"Red",pink:"Pink",blue:"Blue",green:"Green",purple:"Purple",yellow:"Yellow",orange:"Orange"};return a[s]?a[s]:(s=s.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/(dark|light|navy|jeans|brick)([a-z]+)/g,"$1 $2").split(/(?=[A-Z])|(?=dark|light|navy|jeans|brick)/).filter(o=>o.length>0).join(" ").toLowerCase().split(" ").map(o=>a[o]?a[o]:o.charAt(0).toUpperCase()+o.slice(1)).join(" "),s||"Color")},Ie=(t,n,s)=>{const a=(n==null?void 0:n.image)||s.images[0]||"",o=[];a&&o.push(P(a));let r=[];return t==="economy"?r=["/images/SmartCase/economycaseinside.webp","/images/SmartCase/economycaseclosure.webp","/images/SmartCase/economycaseclosureinside.webp"]:t==="business"?r=["/images/BusinessClassCase/businessclass.webp","/images/BusinessClassCase/businessclass1.webp"]:t==="firstclass"&&(r=["/images/FirstClassCase/firstclass.webp","/images/FirstClassCase/firstclass1.webp","/images/FirstClassCase/firstclass2.webp"]),r.forEach(i=>{i&&o.push(P(i))}),o.length>0?o:a?[P(a)]:[]},Te=(t,n,s,a)=>{if(!t||!s)return!1;const r=E({caseType:n,color:s},a);return r!==null&&r===0},ke=(t,n,s,a)=>{if(!t||!s)return!1;const r=E({caseType:n,color:s},a);return r!==null&&r===0},Pe=(t,n)=>{const s=le.cases.find(a=>a.type===t);return s&&s.colors&&s.colors.length>0?!s.colors.some(o=>{const r={caseType:t,color:o.color},i=E(r,n);return i===null||i>0}):!1},R={Economy:"economy",Business:"business",FirstClass:"firstclass",economy:"economy",business:"business",firstclass:"firstclass"},Ee={economy:"Economy",business:"Business",firstclass:"FirstClass"},Ae=()=>{var Y,Z;const{type:t}=ie(),n=X(),{addToCart:s,cart:a}=ge(),o=t&&R[t]?R[t]:"economy",[r,i]=p.useState(o),[c,d]=p.useState(""),[f,C]=p.useState(null),[b,D]=p.useState(!1),[g,S]=p.useState(1),[U,I]=p.useState(""),[Q,A]=p.useState(0),L=typeof window!="undefined"?localStorage.getItem("productQuantitiesTimestamp"):null,O=p.useMemo(()=>(console.log("ðŸ”„ Re-computing productsWithQuantities, refreshKey:",Q,"timestamp:",L),z()),[Q,L]),x=O.cases.find(l=>l.type===r);p.useEffect(()=>{const l=m=>{(m.key==="productQuantities"||m.key===null)&&(console.log("ðŸ”„ Storage event detected, refreshing products..."),A(N=>N+1))};window.addEventListener("storage",l);const u=m=>{console.log("ðŸ”„ Inventory update event received, refreshing products...",m.detail),A(N=>N+1)};window.addEventListener("inventoryUpdated",u);let y=localStorage.getItem("productQuantitiesTimestamp");const j=setInterval(()=>{const m=localStorage.getItem("productQuantitiesTimestamp");m&&m!==y&&(console.log("ðŸ”„ Cache timestamp changed, refreshing products...",{old:y,new:m}),y=m,A(N=>N+1))},2e3);return()=>{window.removeEventListener("storage",l),window.removeEventListener("inventoryUpdated",u),clearInterval(j)}},[]);const T=()=>Te(x,r,c,a),M=l=>ke(x,r,l,a),F=l=>Pe(l,a);p.useEffect(()=>{if(t&&R[t]){const l=R[t];i(l)}else t||i("economy")},[t]),p.useEffect(()=>{!c&&x&&x.colors&&x.colors.length>0&&d(x.colors[0].color)},[r,c,x]),p.useEffect(()=>{if(!r||!c)return;const u=E({caseType:r,color:c},a);u!==null&&g>u&&S(Math.max(1,u)),I("")},[r,c,a,g]);const h=(Y=x==null?void 0:x.colors)==null?void 0:Y.find(l=>l.color===c),v=P(f||(h==null?void 0:h.image)||((Z=x==null?void 0:x.images)==null?void 0:Z[0])),w=Ie(r,h,x);return{selectedCaseType:r,selectedColor:c,selectedDetailImage:f,isSpecificationsOpen:b,quantity:g,quantityError:U,productsWithQuantities:O,selectedCase:x,currentImage:v,detailImages:w,cart:a,setIsSpecificationsOpen:D,handleCaseTypeChange:l=>{if(F(l))return;i(l),C(null),S(1);const u=Ee[l]||"Economy";n(`/PassportCases/${u}`,{replace:!0});const j=z().cases.find(m=>m.type===l);if(j&&j.colors.length>0){const m=j.colors.find(N=>{const k={caseType:l,color:N.color},$=E(k,a);return $===null||$>0})||j.colors[0];d(m.color)}},handleColorChange:l=>{var j;const u=(j=x==null?void 0:x.colors)==null?void 0:j.find(m=>m.color===l);(u==null?void 0:u.quantity)!==void 0&&u.quantity===0||(d(l),C(null),S(1))},handleDetailImageClick:l=>{T()||C(l)},handleAddToCart:l=>{if(T())return;const u=K(q({},l),{quantity:g}),y=K(q({},u),{id:`case-${r}-${c}-${Date.now()}`});console.log("ðŸ’¼ PassportCases page - Adding case to cart:",{caseName:l.caseName||l.name,caseType:l.caseType,color:l.color,quantity:g,product:y}),s(y)},handleIncrementQuantity:()=>{var y;if(T())return;const u=E({caseType:r,color:c},a);if(u===null||u>g)S(g+1),I("");else{const m=z().cases.find(_=>_.type===r),N=(m==null?void 0:m.name)||"Passport Case",k=(y=m==null?void 0:m.colors)==null?void 0:y.find(_=>_.color===c),$=k!=null&&k.image?ee(k.image):"",te=$?` in ${$}`:"";I(`We don't have any more ${N}${te} in stock to be added anymore.`)}},handleDecrementQuantity:()=>{g>1&&(S(g-1),I(""))},isSelectedColorSoldOut:T,isColorSoldOut:M,isCaseTypeSoldOut:F}},G=he(),ze=()=>{const[t,n]=p.useState(0),[s,a]=p.useState(0),{selectedCaseType:o,selectedColor:r,selectedDetailImage:i,isSpecificationsOpen:c,quantity:d,quantityError:f,productsWithQuantities:C,selectedCase:b,currentImage:D,detailImages:g,setIsSpecificationsOpen:S,handleCaseTypeChange:U,handleColorChange:I,handleDetailImageClick:Q,handleAddToCart:A,handleIncrementQuantity:L,handleDecrementQuantity:O,isSelectedColorSoldOut:x,isColorSoldOut:T,isCaseTypeSoldOut:M}=Ae();return p.useEffect(()=>{B(void 0,null,function*(){console.log("ðŸ”„ Force refreshing inventory on page load...");try{yield H(),console.log("âœ… Inventory refreshed on page load"),n(h=>h+1)}catch(h){console.error("âŒ Failed to refresh inventory on load:",h)}})},[]),p.useEffect(()=>{if(!G){console.warn("âš ï¸ Supabase not configured, real-time updates disabled");return}console.log("ðŸ”” Setting up Supabase Realtime subscription for inventory_items...");const F=G.channel("inventory-changes").on("postgres_changes",{event:"*",schema:"public",table:"inventory_items"},v=>B(void 0,null,function*(){console.log("ðŸ“¢ Inventory change detected:",v.eventType,v);try{yield H(),console.log("âœ… Inventory cache refreshed from Supabase Realtime"),n(w=>w+1),a(Date.now()),window.dispatchEvent(new CustomEvent("inventoryUpdated",{detail:{timestamp:Date.now()}}))}catch(w){console.error("âŒ Failed to refresh inventory cache:",w)}})).subscribe(v=>{v==="SUBSCRIBED"?console.log("âœ… Subscribed to inventory_items changes"):v==="CHANNEL_ERROR"?console.error("âŒ Error subscribing to inventory_items changes"):console.log("ðŸ”„ Subscription status:",v)}),h=v=>B(void 0,null,function*(){console.log("ðŸ”„ Inventory updated in Dashboard, refreshing cache...",v.detail);try{yield H(),console.log("âœ… Inventory cache refreshed"),n(w=>w+1),a(Date.now())}catch(w){console.error("âŒ Failed to refresh inventory cache:",w)}});return window.addEventListener("inventoryUpdated",h),()=>{console.log("ðŸ§¹ Cleaning up inventory subscriptions..."),G.removeChannel(F),window.removeEventListener("inventoryUpdated",h)}},[]),!b||!b.images||b.images.length===0?e.jsx(fe,{}):e.jsx("div",{className:"min-h-screen bg-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx(ye,{}),e.jsx(be,{cases:C.cases,selectedCaseType:o,onCaseTypeChange:U,isCaseTypeSoldOut:M,getCaseDisplayName:Se}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-12 mb-16",children:[e.jsx(ve,{currentImage:D,detailImages:g,selectedDetailImage:i,selectedCase:b,isSelectedColorSoldOut:x,onDetailImageClick:Q}),e.jsxs("div",{className:"space-y-4 sm:space-y-6 md:space-y-8 flex flex-col justify-between",children:[e.jsx(je,{colors:b.colors,selectedColor:r,onColorChange:I,isColorSoldOut:T,getColorName:ee}),e.jsx(we,{specifications:b.specifications,isOpen:c,onToggle:()=>S(!c)}),e.jsx(Ne,{specifications:b.specifications}),e.jsx(Ce,{selectedCase:b,selectedCaseType:o,selectedColor:r,quantity:d,quantityError:f,currentImage:D,isSelectedColorSoldOut:x,onIncrementQuantity:L,onDecrementQuantity:O,onAddToCart:A})]})]})]})})};export{ze as default};
